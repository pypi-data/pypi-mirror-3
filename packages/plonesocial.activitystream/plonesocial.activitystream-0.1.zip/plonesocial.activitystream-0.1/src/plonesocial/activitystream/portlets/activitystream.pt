<dl class="portlet portletActivitystream"
    i18n:domain="plonesocial.activitystream"
    tal:define="renderclass python:view.compact and 'compact' or 'full'"
    tal:attributes="class string:portlet portletActivitystream ${renderclass}">

  <dt class="portletHeader"
      tal:condition="not:view/compact">

        <span class="portletTopLeft"></span>
        <span tal:content="view/data/title">
           Header
        </span>
        <span class="portletTopRight"></span>
    </dt>

    <dd class="portletItem odd"
        tal:define="showCommenterImage view/show_commenter_image"
        >
      <div tal:attributes="class string:activityItem ${item/render_type}"
           tal:repeat="item view/items">

        <div class="activityAvatar" tal:condition="showCommenterImage">
          <a href="" tal:condition="item/has_author_link"
             tal:attributes="href item/author_home_url">
            <img src="defaultUser.gif"
                 alt=""
                 border="0"
                 height="37"
                 tal:attributes="src item/portrait_url;
                                 alt item/Creator" />
          </a>
          <img src="defaultUser.gif"
               alt=""
               border="0"
               height="37"
               tal:condition="not: item/has_author_link"
               tal:attributes="src item/portrait_url;
                               alt item/Creator" />
        </div>

        <div class="activityBody">

                <div class="activityByLine">

                    <tal:name>
                        <a href="" class="creator"
                           tal:condition="item/has_author_link"
                           tal:content="item/Creator"
                           tal:attributes="href item/author_home_url">
                            Poster Name
                        </a>
                        <span tal:condition="not: item/has_author_link"
                              tal:replace="item/Creator" />
                        <span tal:condition="not: item/Creator">Anonymous</span>
                    </tal:name>
                    
                    <tal:posted tal:condition="item/is_status"
                                i18n:translate="label_says">says:</tal:posted>

                    <tal:posted tal:condition="item/is_discussion">
                      <span i18n:translate="label_commented_on">commented on</span>
                      <a tal:attributes="href item/getURL"
                         tal:content="item/Title">a content item</a></tal:posted>

                    <tal:posted tal:condition="item/is_content">
                      <span i18n:translate="label_created">created</span>
                      <a tal:attributes="href item/getURL"
                         tal:content="item/Title">item title</a></tal:posted>

                    <div class="activityDate"
                         tal:content="item/date">
                         8/23/2001 12:40:44 PM
                    </div>

                </div>

                <div class="activityNoText visualClear"
                     tal:condition="not:item/getText">
                </div>

                <div class="activityText"
                     tal:define="is_content item/is_content;
                                 canReview python:view.can_review() and not is_content"
                     tal:condition="item/getText">

                    <div class="commentActions"
                         i18n:domain="plone.app.discussion">
                        <form name="delete"
                              action=""
                              method="post"
                              style="display: inline;"
                              tal:condition="canReview"
                              tal:attributes="action string:${item/getURL}/@@moderate-delete-comment">
                            <input name="form.button.DeleteComment"
                                   class="destructive"
                                   type="submit"
                                   value="Delete"
                                   i18n:attributes="value label_delete;"
                                   />
                        </form>
                        <!-- Workflow actions (e.g. 'publish') -->
                        <form name=""
                              action=""
                              method="get"
                              style="display: inline;"
                              tal:condition="canReview"
                              tal:repeat="action reply_dict/actions|nothing"
                              tal:attributes="action string:${item/getURL}/@@moderate-publish-comment;
                                              name action/id">
                            <input type="hidden" name="workflow_action" tal:attributes="value action/id" />
                            <input name="form.button.PublishComment"
                                   class="context"
                                   type="submit"
                                   tal:attributes="value action/title"
                                   i18n:attributes="value"
                                   />
                        </form>
                    </div>

                    <span tal:replace="structure item/getText" />
                </div><!-- /activityText -->
        </div><!-- / activityBody -->


      </div>
    </dd>
    
    <dd class="portletFooter"
        tal:condition="not:view/compact">
        <span class="portletBottomLeft"></span>
        <span>
          <!-- Footer -->
        </span>
        <span class="portletBottomRight"></span>
    </dd>
</dl>
