(function(d){d.widget("ui.timepicker",{options:{step:15,startTime:new Date(0,0,0,0,0,0),endTime:new Date(0,0,0,23,45,0),separator:":",show24Hours:false,source:null,am:"am",pm:"pm"},_create:function(){var a=this.element;this.elm=a;var b=d(a),c=this._timeToDate(this.options.startTime),e=this._timeToDate(this.options.endTime);this.initial=a.val();if(this.options.source==null){a=[];for(c=new Date(c);c<=e;){a[a.length]=this._formatTime(c);c=new Date(c.setMinutes(c.getMinutes()+this.options.step))}this.options.source=
a}this._set_source(this.options.source);d("<button>&nbsp;</button>").css("min-height","2em").attr("tabIndex",-1).attr("title","Show All Times").insertAfter(b).button({icons:{primary:"ui-icon-triangle-1-s"},text:false}).removeClass("ui-corner-all").addClass("ui-corner-right ui-button-icon").click(function(){if(b.autocomplete("widget").is(":visible")){b.autocomplete("close");return false}b.autocomplete("search","");b.autocomplete("widget").css("z-index","1010 !important");b.focus();return false})},
_set_source:function(){this.elm.autocomplete({source:this.options.source,delay:0,minLength:0}).addClass("ui-widget ui-widget-content ui-corner-left")},_formatTime:function(a){var b=a.getHours(),c=this.options.show24Hours?b:(b+11)%12+1;a=a.getMinutes();return this._formatNumber(c)+this.options.separator+this._formatNumber(a)+(this.options.show24Hours?"":b<12?" "+this.options.am:" "+this.options.pm)},_formatNumber:function(a){return(a<10?"0":"")+a},_timeToDate:function(a){return typeof a=="object"?
this._normaliseTime(a):this._timeStringToDate(a)},_timeStringToDate:function(a){if(a){var b=a.split(self.options.separator),c=parseFloat(b[0]);b=parseFloat(b[1]);if(!self.options.show24Hours)if(c===12&&a.substr(this.options.am)!==-1)c=0;else if(c!==12&&a.indexOf(this.options.pm)!==-1)c+=12;return this._normaliseTime(new Date(0,0,0,c,b,0))}return null},_normaliseTime:function(a){a.setFullYear(2001);a.setMonth(0);a.setDate(0);return a}})})(jQuery);
