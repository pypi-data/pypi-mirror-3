[tox]
envlist = 
    py25,py26,py27,py32,pypy

[testenv]
commands = 
    python setup.py test -q

# timing race conditions in tests cause a test under Jython 2.5 to fail:

#.F.......................
#======================================================================
#FAIL: When timeout is given, decorator must eventually forget entries
#----------------------------------------------------------------------
#Traceback (most recent call last):
#  File "/home/chrism/projects/repoze.lru/.tox/jython/Lib/site-packages/repoze/l#ru/tests.py", line 512, in test_expiry
#    self.assertTrue(stop - start > 0.1)
#AssertionError

#[testenv:jython]
#commands = 
#   jython setup.py test -q

# coverage reporting broken with namespace packages and pip/nose apparently.
# It's not a tox thing or is it related to setuptools vs.  distribute; once
# tox creates the virtualenv with either setuptools or distribute, this
# command finds no tests to run
#
# .tox/cover/bin/python setup.py nosetests
#
# which means it's something to do with nose probably

# [testenv:cover]
# basepython =
#     python2.7
# commands = 
#     python setup.py nosetests --with-xunit --with-xcoverage
# deps =
#     nose
#     coverage==3.4
#     nosexcover
# distribute = False

# we separate coverage into its own testenv because a) "last run wins" wrt
# cobertura jenkins reporting and b) pypy and jython can't handle any
# combination of versions of coverage and nosexcover that i can find.

