<html tal:replace="structure context/manage_page_header"/>

    <span tal:replace="structure context/manage_tabs"/>

  <br/>
 
  <table cellpadding="10" width="100%" tal:define="now python: DateTime()">
    <tr>
      <td valign="top" width="60%" align="left">
     <form action="" tal:attributes="action request/URL1" method="post">
       <table cellpadding="0" cellspacing="2" width="100%">
         <tr tal:define="ob python: context.event()"
             tal:condition="python: context.callable_id != context.id">
            <td class="form-label">Callable</td> 
            <td class="form-element" nowrap>
                <tal:block on-error="context/callable_id">
                    <img src="" tal:attributes="src string:${request/BASEPATH1}/${ob/icon}">&nbsp;
                    <a href="" tal:attributes="href string:${ob/absolute_url}/manage_main" 
                               tal:content="ob/getId"/>&nbsp;&nbsp;
                    <span tal:replace="ob/title"/>
                </tal:block>
            </td>
         </tr>
         <!--tr><td class="form-label">Title</td>
             <td class="form-element" colspan="2">
                  <input type="text" name="title" size="35" value=""
                   tal:attributes="value context/title"/>
             </td>
         </tr-->
         <tr><td class="form-label">Timezone</td>
             <td class="form-element" colspan="2">
                  <select name="tz">
                     <span tal:repeat="tz context/timezones">
                        <option tal:condition="python: context.tz == tz"
                             tal:content="python: tz" selected/>
                        <option tal:condition="python: context.tz != tz"
                             tal:content="python: tz"/>
                     </span>
                  </select>
              </td>
         </tr>
      <TR tal:define="last_executed context/last_executed" tal:condition="last_executed">
	<TD class="form-label" ALIGN="LEFT" VALIGN="TOP">Last Executed</TD>
	<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2" class="error" nowrap
            tal:content="last_executed" />
      </TR>
      <TR>
	<TD class="form-label" ALIGN="LEFT" VALIGN="TOP">Execute At</TD>
	<TD ALIGN="LEFT" VALIGN="TOP" COLSPAN="2" class="error" nowrap
            tal:content="context/time" />
      </TR>
      <TR>
	<TD class="form-label" ALIGN="LEFT" VALIGN="TOP">Now is</TD>
        <TD class="info" nowrap 
            tal:content="python: now.toZone(context.tz)"/>
      </TR>
       <tr><td colspan="3" class="form-help">
             <br>
             <p>The following time specification fields all expect to be comprised of numbers
                from within the range specified.  Unix users may note that the 
                time specifications are fully compliant with the crontab utility, meaning you
                may combine any of the following to create very granular intervals:</p>
              <table border="0" cellpadding="2" cellspacing="2">
                   <tr class="list-item">
                     <td class="form-label">&nbsp;</td>
                     <td class="form-label">Feature</td>
                     <td class="form-label">Symbol</td>
                     <td class="form-label">Example</td>
                     <td class="form-label">Indicates</td>
                   </tr>
                   <tr class="list-item">
                      <td>&nbsp;</td>
                      <td>Ranges</td>
                      <td class="form-label" align="center">-</td>
                      <td>1-4</td>
                      <td><em>1,2,3,4</em></td>
                   </tr>
                   <tr class="list-item">
                      <td>&nbsp;</td>
                      <td>Explicit Values</td>
                      <td class="form-label" align="center">,</td>
                      <td>1,2,12</td>
                      <td><em>1,2,12</em></td>
                   </tr>
                   <tr class="list-item">
                      <td>&nbsp;</td>
                      <td>Increments</td>
                      <td class="form-label" align="center">/</td>
                      <td>0-12/3</td>
                      <td><em>0,3,6,9,12</em></td>
                   </tr>
             </table>
             <p>The wildcard, <em>*</em> means to include all possible values for this 
                parameter. You cannot set both the Day of Month value and the Day of 
                Week Value.</p>
             <br>
          </td>
      </tr>
         <tr><td class="form-optional">Minute</td>
                <td class="form-element">
                 <input type="text" name="minute" size="15" value="*" 
                        tal:attributes="value context/minute"/>
              </td>
                 <td class="form-help">[0-59]</td>
        </tr>
         <tr>
                <td class="form-optional">Hour</td>
                <td class="form-element">
                   <input type="text" name="hour" size="15" value="*" 
                          tal:attributes="value context/hour"/>
                </td>
                 <td class="form-help">[0-23]</td>
         </tr>
         <tr>
                <td class="form-optional">Month</td>
                <td class="form-element">
                   <input type="text" name="month" size="15" value="*"
                          tal:attributes="value context/month"/>
                </td>
                 <td class="form-help">[1-12]</td>
         </tr>
         <tr>
                <td class="form-optional" nowrap>Day of Month</td>
                <td class="form-element">
                   <input type="text" name="day_of_month" size="15" value="*"
                          tal:attributes="value context/day_of_month"/>
                </td>
                 <td class="form-help">[1-31]</td>
         </tr>
         <tr>
                <td class="form-optional" nowrap>Day of Week</td>
                <td class="form-element">
                   <input type="text" name="day_of_week" size="15" value="*"
                          tal:attributes="value context/day_of_week"/>
                </td>
                 <td class="form-help" nowrap>[0-7]   <em>(0 and 7 are Sunday)</em></td>
         </tr>
          <tr>
                <td class="form-element" colspan="3" align="center">
                   <input type="submit" name="manage_editSchedule:method" value=" Change ">
                   <input type="submit" name="manage_unschedule:method" value=" Unschedule "
                          tal:condition="context/active"/>
                   <input type="submit" name="manage_schedule:method" value=" Schedule "
                          tal:condition="not: context/active"/>
                   <input type="submit" name="manage_schedule:method" value=" Rechedule "/>
                </td>
          </tr>
       </table>
    </form>
   </td>
   <td valign="top" align="right"
       tal:define="start_date python: request.get('start_date', now.toZone(context.tz));
                   size python: request.get('size', 10);
                   results python: context.test_schedule(start_date, size)">

     <form action="" method="post">
       <table cellpadding="0" cellspacing="2">
         <tr><td colspan="2">
                <p class="form-help">
                  Because scheduling <em>is</em> important, we've
                  provided this useful little schedule calculator
                  so you can be assured you have properly 
                  configured your schedule.</p>
             </td>
         </tr>
         <tr><td>&nbsp;</td></tr>
         <!--tr><td colspan="2">
                <p class="form-help">
                  Your schedule is running in <i>our</i> international environment - the
                  time zone is <i>critical</i> for correct scheduling in <i>your</i> locality.</p>
             </td>
         </tr-->
         <tr><td>&nbsp;</td></tr>
         <tr><td class="form-label" nowrap>Start Date</td>
              <td class="form-element">
                   <input type="text" name="start_date:date" size="30"
                          value="" tal:attributes="value start_date"/>
              </td>
         </tr>
         <tr>
              <td class="form-label" nowrap>Show Next</td>
              <td class="form-element">
                   <input type="text" name="size:int" size="2" maxlength="2"
                          value="" tal:attributes="value size"/>
              </td>
          </tr>
          <tr><td>&nbsp;</td></tr>
          <tr class="list-header">
              <td colspan="2" align="center" class="form-label">Next Scheduled Time</td>
          </tr>
          <tr class="row-hilite" tal:repeat="entry results"
              tal:attributes="class python: test(repeat['entry'].index % 2, 'row-hilite', 'row-normal')">
              <td colspan="2" align="center" class="form-element" 
                  tal:content="python: entry.toZone(context.tz).strftime('%d %b %Y %H:%M:%S %Z')"/>
          </tr>
          <tr>
              <td colspan="2" align="center"><input type="submit" value=" Test "/></td>
         </tr>
      </table>
    </form>

   </td>
  </tr>
  </table>

<html tal:replace="structure context/manage_page_footer"/>

