{% extends "admin_widget.html" %}
{% block extra_style %}
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}css/form.css" media="screen" />
<link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}css/common.css" media="screen" />
{% endblock %}

{% block form %}
<div id="opacity_layer"></div>
<div id="form_container">
 <div id="form_header">{{title}}</div>
 <div id="form_content">
  <form class="form" enctype="multipart/form-data" method="POST" action="{% url form-display action,id,node_id,display_class_form_before,display_contenttype_form_before,display_parameter_form_before,display_value_form_before %}">
  {% ifnotequal action "delete_object" %}	
   {% for field in form.visible_fields %}
    <div class="form_row">
     <div class="form_label">{{field.label_tag}}</div>
     <div class="form_input">{{field}}</div>
    </div>
   {% endfor %}
   {% if display_log %}
    <div class="log_row">
    {% for field in form %}
     {% if field.help_text %}
      <div class="note"><U>{{field.label|capfirst}}</U> : {{field.help_text}}</div>
     {% endif %}
     {% if field.errors %}
      <div class="warning"><U>{{field.label|capfirst}}</U> : {% for error in field.errors %}{{error}} {% endfor %}</div>
     {% endif %}
    {% endfor %} 
	{% for error in form.non_field_errors %}
     <div class="warning"><U>Model error {{forloop.counter}}</U> : {{error}}</div>  		
	{% endfor %}
    </div>
   {% endif %}
  {% else %}
   <div class="warning_row">
   	Are you sure you want to delete the selected {{class_verbose_name}} '{{object}}' ?
	{% if depending_objects %}
	 All of the following objects and it's related items will be deleted :
	{% endif %}
   </div> 
   {% if depending_objects %} 
    <div id="dependent_objects_row">
     <ul>	
	  <li>delete all dependent objects<input type="checkbox" checked="checked" name="delete_all" value="true"></input></li>
      {% for class,object,is_required,level in depending_objects %} 
	   <li style="margin-left:{{level}}px;padding-bottom:5px;">
	    <span>delete {{object}}</span>
		{% if is_required %}
		 <img class="alert_icon" src="{{MEDIA_URL}}images/icon_alert.gif"></img>
		{% else %}
		 <input type="checkbox" name="selected_objects" value="{{class}}.{{object.pk}}"></input>
		{% endif %}
	   </li>	
	  {% endfor %}
	 </ul>
	 <div id="log_row">
	  <div class="note">
	   <span><img src="{{MEDIA_URL}}images/icon_alert.gif"></img> : </span>Some checkboxes could be disabled because the {{class_verbose_name}} to delete is required by another object.
	   To avoid the automatic deletion of depending objects, link them to another {{class_verbose_name}}.
	  </div>
	 </div> 
	</div> 
   {% endif %}	
   	
  {% endifnotequal %}
   <div id="submit_row">	
    <input type="hidden" id="selection_type" name="selection_type" value="{{selection_type}}"></input>
	{% if selected_subclass %}
	 <input type="hidden" id="selected_subclass" name="selected_subclass" value="{{selected_subclass}}"></input>
	{% endif %}
	{% for field in form.hidden_fields %}
	 {{field}}
	{% endfor %}
    <input type="submit" id="{{id}}_dialog_ok" label="Ok" value="Ok"></input>
    <span id="cancel_button"><a href="{% url widget-display id %}">Cancel</a></span>
   </div>  	
  </form>	 	
 </div>
</div>
{% endblock %}


