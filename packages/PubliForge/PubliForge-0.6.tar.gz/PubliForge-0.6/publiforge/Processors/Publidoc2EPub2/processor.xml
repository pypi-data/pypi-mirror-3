<?xml version="1.0" encoding="utf-8"?>
<!-- $Id: processor.xml 715bd9f1ad0a 2012/05/28 21:49:54 patrick $ -->
<publiforge version="1.0">
  <processor>

    <label xml:lang="en">Publidoc to ePub 2</label>
    <label xml:lang="fr">Publidoc vers ePub 2</label>

    <description xml:lang="en">
      Convert a Publidoc XML document into a ePub 2 file and check the result.
    </description>
    <description xml:lang="fr">
      Convertit un document XML Publidoc en un fichier ePub 2 et vérifie le
      résultat.
    </description>

    <engine>publiforge.lib.engine.leprisme</engine>

    <ancestors>
      <ancestor>Publidoc2XHtml</ancestor>
    </ancestors>

    <variables>
      <!-- ~~~~~~~~~~~~~~~~~~~ LePrisme engine variables ~~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">Engine variables</label>
        <label xml:lang="fr">Variables du moteur</label>

        <var name="subdir" type="string">
          <default>%(fid)s</default>
          <label xml:lang="en">Output directory</label>
          <label xml:lang="fr">Chemin de sortie</label>
          <description xml:lang="en">
            Relative path inside output directory. --
            %(fid)s = file ID --
            %(path)s = relative path of the source file inside the storage
          </description>
          <description xml:lang="fr">
            Chemin relatif dans le répertoire de sortie. --
            %(fid)s = identifiant du fichier --
            %(path)s = chemin relatif du fichier source dans l'espace de stockage
          </description>
        </var>

        <var name="keeptmp" type="boolean">
          <default>false</default>    
          <label xml:lang="en">Keep temporary files</label>
          <label xml:lang="fr">Temporaires conservés</label>
        </var>

        <var name="ocfcheck" type="boolean">
          <default>true</default>
          <label xml:lang="en">ePub checking</label>
          <label xml:lang="fr">Vérification de l'ePub</label>
        </var>
      </group>

      <!-- ~~~~~~~~~~~~~~~~~~~~ Processor image variables ~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">Image variables</label>
        <label xml:lang="fr">Variables pour les images</label>

        <var name="img" type="boolean">
          <default>true</default>
          <label xml:lang="en">Image processing</label>
          <label xml:lang="fr">Traitement des images</label>
        </var>

        <var name="img_search" type="string">
          <default>Images/%(id)s.%(ext)s, %(id)s.%(ext)s</default>
          <label xml:lang="en">Search paths</label>
          <label xml:lang="fr">Chemins de recherche</label>
          <description xml:lang="en">
            Patterns for file to find with absolute path or relative
            path to the processed file or resources. --
            %(id)s = source ID --
            %(ext)s = one of available source extensions --
            %(filepath)s = full path to the processed file directory --
            %(stgpath)s = full path to the storage root directory
          </description>
          <description xml:lang="fr">
            Motifs du fichier à trouver avec un chemin absolu ou relatif
            au fichier traité ou aux ressources. --
            %(id)s = ID de la source --
            %(ext)s = une des extensions possibles pour le fichier source --
            %(filepath)s = chemin absolu vers le répertoire du fichier traité --
            %(stgpath)s = chemin absolu vers la racine des espaces de stockage
          </description>
        </var>

        <var name="img_quality" type="integer">
          <default>92</default>
          <label xml:lang="en">JPEG qualité</label>
          <label xml:lang="fr">Qualité JPEG</label>
          <description xml:lang="en">
            Quality for JPEG images between 1 and 100 --
            1 = lowest image quality and highest compression --
            100 = best quality but least effective compression
          </description>
          <description xml:lang="fr">
            Qualité pour les images JPEG entre 1 et 100 --
            1 = qualité minimum et compression maximum --
            100 = qualité maximum et compression minimum
          </description>
        </var>

        <var name="img_optimize" type="select" visible="true">
          <default>4</default>
          <option>0</option><option>1</option><option>2</option>
          <option>3</option><option>4</option><option>5</option>
          <option>6</option><option>7</option>
          <label xml:lang="en">Optimization</label>
          <label xml:lang="fr">Optimisation</label>
        </var>

        <var name="img_ext" type="select">
          <default>.png</default>
          <option value=".png">PNG</option>
          <option value=".jpg">JPEG</option>
          <option value=".gif">GIF</option>
          <label xml:lang="en">Format of created images</label>
          <label xml:lang="fr">Format des images créées</label>
        </var>

        <var name="img_size" type="regex" visible="true">
          <default>640x480&gt;</default>
          <pattern>\d{1,4}x\d{0,4}&gt;?</pattern>
          <label xml:lang="en">Image size</label>
          <label xml:lang="fr">Taille des images</label>
        </var>

        <var name="img_size_thumbnail" type="regex">
          <default>120x120&gt;</default>
          <pattern>\d{1,4}x\d{0,4}&gt;?</pattern>
          <label xml:lang="en">Thumbnail size</label>
          <label xml:lang="fr">Taille des vignettes</label>
        </var>

        <var name="img_size_icon" type="regex">
          <default>x32&gt;</default>
          <pattern>\d{0,4}x\d{1,4}&gt;?</pattern>
          <label xml:lang="en">Icon size</label>
          <label xml:lang="fr">Taille des icônes</label>
        </var>

        <var name="img_size_cover" type="regex">
          <default>768x1024&gt;</default>
          <pattern>\d{1,4}x\d{0,4}&gt;?</pattern>
          <label xml:lang="en">Cover size</label>
          <label xml:lang="fr">Taille de la couverture</label>
        </var>
      </group>

      <!-- ~~~~~~~~~~~~~~~~~~~ Processor ePub 2 variables ~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">ePub 2 variables</label>
        <label xml:lang="fr">Variables pour l'ePub 2</label>

        <var name="toc" type="boolean" visible="true">
          <default>false</default>
          <label xml:lang="en">With a main table of content</label>
          <label xml:lang="fr">Avec un sommaire principal</label>
        </var>

        <var name="subtoc" type="boolean" visible="true">
          <default>true</default>
          <label xml:lang="en">With intermediate tables of content</label>
          <label xml:lang="fr">Avec sommaires intermédiaires</label>
        </var>

        <var name="ean" type="regex">
          <default>-</default>
          <pattern>(\d{13}|-)</pattern>
          <label xml:lang="en">Forced EAN</label>
          <label xml:lang="fr">EAN forcé</label>
        </var>

        <var name="cover" type="string">
          <label xml:lang="en">Forced cover</label>
          <label xml:lang="fr">Couverture forcée</label>
        </var>

        <var name="publisher_label" type="string" visible="true">
          <label xml:lang="en">Publisher label</label>
          <label xml:lang="fr">Libellé de l'éditeur</label>
        </var>

        <var name="publisher_url" type="string" visible="true">
          <label xml:lang="en">Publisher URL</label>
          <label xml:lang="fr">URL de l'éditeur</label>
        </var>
      </group>
    </variables>

    <output>Result/ePub2</output>

  </processor>
</publiforge>