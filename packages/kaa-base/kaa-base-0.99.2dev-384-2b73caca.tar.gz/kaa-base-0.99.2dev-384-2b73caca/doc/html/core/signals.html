

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Signals and Callables &mdash; kaa.base v0.99.2dev-382-8399342e documentation</title>
    <link rel="stylesheet" href="../_static/kaa.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.99.2dev-382-8399342e',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="kaa.base v0.99.2dev-382-8399342e documentation" href="../index.html" />
    <link rel="next" title="The Main Loop" href="mainloop.html" />
    <link rel="prev" title="The Kaa Application Framework" href="../index.html" />
    <!-- link rel="stylesheet" href="../_static/kaa.css" type="text/css" /-->

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mainloop.html" title="The Main Loop"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="The Kaa Application Framework"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">kaa.base v0.99.2dev-382-8399342e documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="signals-and-callables">
<span id="callables"></span><h1>Signals and Callables<a class="headerlink" href="#signals-and-callables" title="Permalink to this headline">¶</a></h1>
<p>Signal and Callable objects are among the core building blocks of Kaa and are
used extensively throughout the framework.</p>
<span class="target" id="module-kaa.callable"></span><div class="section" id="id1">
<h2>Callables<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>Callable objects encapsulate a callable (such as a function or method) and,
optionally, any number of arguments and keyword arguments.  Callable objects
are in turn invokable like any other native callable, and upon invocation will
call the underlying (wrapped) function or method, passing it all arguments
passed during invocation combined with all arguments passed to the constructor.</p>
<p>One very common use-case of Callable objects is any time a callback function is
required, such as with signals (described later).  They can be used to construct
partial functions:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">square</span> <span class="o">=</span> <span class="n">kaa</span><span class="o">.</span><span class="n">Callable</span><span class="p">(</span><span class="nb">pow</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">square</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">25</span>
</pre></div>
</div>
<p>(Of course this example is a bit contrived, because you could use lambda to
achieve the same result with less overhead.  But it helps to start simple.)</p>
<p>By default, all arguments passed upon invocation of the Callable are passed to the
wrapped callable first, followed by arguments passed upon construction.  So the
above example translates to <tt class="docutils literal"><span class="pre">pow(5,</span> <span class="pre">2)</span></tt>.  It is possible to reverse this behaviour
by setting the <a class="reference internal" href="#kaa.Callable.init_args_first" title="kaa.Callable.init_args_first"><tt class="xref py py-attr docutils literal"><span class="pre">init_args_first</span></tt></a> property to True:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">square</span><span class="o">.</span><span class="n">init_args_first</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">square</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>  <span class="c"># Of course, now this isn&#39;t a square</span>
<span class="go">32</span>
</pre></div>
</div>
<p>Keyword arguments work in a similar way.  Keyword arguments given to the
constructor as well as those passed upon invocation are passed to the
wrapped callable.  When <tt class="docutils literal"><span class="pre">init_args_first</span></tt> is <tt class="xref docutils literal"><span class="pre">False</span></tt> (default), keyword
arguments passed on invocation take precedence (overwrite) same-named keyword
arguments passed on the constructor.  When <tt class="xref docutils literal"><span class="pre">True</span></tt>, keyword arguments from the
constructor take precedence over those passed upon invocation.</p>
<p>Here&#8217;s an example that more clearly demonstrates the rules of precedence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">func</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">&#39;Callable:&#39;</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">kwargs</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span> <span class="o">=</span> <span class="n">kaa</span><span class="o">.</span><span class="n">Callable</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">bar</span><span class="o">=</span><span class="s">&#39;kaa&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="p">()</span>
<span class="go">Callable: (1, 2) {&#39;foo&#39;: 42, &#39;bar&#39;: &#39;kaa&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="p">(</span><span class="s">&#39;hello world&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s">&#39;overrides&#39;</span><span class="p">,</span> <span class="n">another</span><span class="o">=</span><span class="s">&#39;kwarg&#39;</span><span class="p">)</span>
<span class="go">Callable: (&#39;hello world&#39;, 1, 2) {&#39;foo&#39;: &#39;overrides&#39;, &#39;bar&#39;: &#39;kaa&#39;, &#39;another&#39;: &#39;kwarg&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="o">.</span><span class="n">init_args_first</span> <span class="o">=</span> <span class="bp">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cb</span><span class="p">(</span><span class="s">&#39;hello world&#39;</span><span class="p">,</span> <span class="n">foo</span><span class="o">=</span><span class="s">&quot;doesn&#39;t override&quot;</span><span class="p">,</span> <span class="n">another</span><span class="o">=</span><span class="s">&#39;kwarg&#39;</span><span class="p">)</span>
<span class="go">Callable: (1, 2, &#39;hello world&#39;) {&#39;foo&#39;: 42, &#39;bar&#39;: &#39;kaa&#39;, &#39;another&#39;: &#39;kwarg&#39;}</span>
</pre></div>
</div>
<p>Because Callable objects hold references to the function, or to the class
instance in the case of a method, and any arguments passed at construction
time, those objects remain alive as long as the Callable is referenced.  This
is not always what&#8217;s wanted, and in those cases the <a class="reference internal" href="#kaa.WeakCallable" title="kaa.WeakCallable"><tt class="xref py py-class docutils literal"><span class="pre">WeakCallable</span></tt></a>
variant can be used.</p>
<p>With <a class="reference internal" href="#kaa.WeakCallable" title="kaa.WeakCallable"><tt class="xref py py-class docutils literal"><span class="pre">WeakCallable</span></tt></a>, only weak references are held to the callable
and constructor arguments.  When any of the wrapped objects are destroyed,
the WeakCallable ceases to be valid.  One common use-case for WeakCallable
is to avoid cyclical references.  For example, an object may hold an
<a class="reference internal" href="io.html#kaa.IOMonitor" title="kaa.IOMonitor"><tt class="xref py py-class docutils literal"><span class="pre">IOMonitor</span></tt></a> on some file descriptor, and have a method invoked
when there&#8217;s activity.  Consider this code fragment:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MyClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fd</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitor</span> <span class="o">=</span> <span class="n">kaa</span><span class="o">.</span><span class="n">IOMonitor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle_read</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_monitor</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
</pre></div>
</div>
<p>In this example, a reference cycle is created: the MyClass instance holds
a reference to the IOMonitor, which holds a reference to the _handle_read method
of the MyClass instance (which implicitly holds a reference to the MyClass instance
itself).</p>
<p>You might be thinking this isn&#8217;t a problem: after all, Python has a garbage
collector that will detect and break orphaned cyclic references.  However,
because the file descriptor <tt class="docutils literal"><span class="pre">fd</span></tt> is registered (with the <a class="reference internal" href="mainloop.html#notifier"><em>notifier</em></a>), Kaa keeps an internal reference to the IOMonitor.  Therefore,
even if all user-visible references to the MyClass instance are gone, neither
that object nor the IOMonitor ever get deleted (at least so long as the fd is
open).  And furthermore, <tt class="docutils literal"><span class="pre">MyClass._handle_read()</span></tt> will continue to be invoked
upon activity of the fd.</p>
<p>If you want the IOMonitor to automatically become unregistered when the callback
(or specifically the instance the method belongs to) is destroyed, you can use a
WeakCallable:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">_monitor</span> <span class="o">=</span> <span class="n">kaa</span><span class="o">.</span><span class="n">IOMonitor</span><span class="p">(</span><span class="n">kaa</span><span class="o">.</span><span class="n">WeakCallable</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle_read</span><span class="p">))</span>
</pre></div>
</div>
<p>In this example, when the <a class="reference internal" href="mainloop.html#notifier"><em>notifier</em></a> would normally invoke the
callback (when there is activity on the registered file descriptor), it will
find the weak callable is in fact dead and automatically unregister the
monitor.  With this, the instance of MyClass is allowed to be destroyed (at
least insofar as Kaa would not hold any internal references to it).</p>
<p>Now, the previous example is a bit clumsy because it requires the callback
to be invoked (or attempted to be) before the monitor is automatically
unregistered.  It would be cleaner if the monitor was registered immediately
when the MyClass instance is destroyed.  For this, the weak variant of IOMonitor
called WeakIOMonitor can be used:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="bp">self</span><span class="o">.</span><span class="n">_monitor</span> <span class="o">=</span> <span class="n">kaa</span><span class="o">.</span><span class="n">WeakIOMonitor</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_handle_read</span><span class="p">)</span>
</pre></div>
</div>
<p>Weak variants of these <a class="reference internal" href="mainloop.html#notifier"><em>notifier</em></a>-aware classes exist
throughout Kaa: <a class="reference internal" href="io.html#kaa.WeakIOMonitor" title="kaa.WeakIOMonitor"><tt class="xref py py-class docutils literal"><span class="pre">WeakIOMonitor</span></tt></a>, <a class="reference internal" href="timer.html#kaa.WeakTimer" title="kaa.WeakTimer"><tt class="xref py py-class docutils literal"><span class="pre">WeakTimer</span></tt></a>,
<a class="reference internal" href="timer.html#kaa.WeakOneShotTimer" title="kaa.WeakOneShotTimer"><tt class="xref py py-class docutils literal"><span class="pre">WeakOneShotTimer</span></tt></a>, <tt class="xref py py-class docutils literal"><span class="pre">WeakEventHandler</span></tt>.</p>
<div class="section" id="callable-api">
<h3>Callable API<a class="headerlink" href="#callable-api" title="Permalink to this headline">¶</a></h3>
<p><dl class="class">
<dt id="kaa.Callable">
<em class="property">class </em><tt class="descclassname">kaa.</tt><tt class="descname">Callable</tt><big>(</big><em>func</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps an existing callable, binding to it any given args and kwargs.</p>
<p>When the Callable object is invoked, the arguments passed on invocation
are combined with the arguments specified at construction time and the
underlying callable is invoked with those arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>func</strong> &#8211; callable function or object</li>
<li><strong>args</strong> &#8211; arguments to be passed to func when invoked</li>
<li><strong>kwargs</strong> &#8211; keyword arguments to be passed to func when invoked</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><h4>Synopsis</h4><div class="kaa synopsis">
<div class="heading">Class Hierarchy</div><p class="hierarchy"><tt class="xref docutils literal current">kaa.Callable</tt><br /></p>
<div class="heading">Methods</div>
<table>
<tr><th><a class="reference internal" href="#kaa.Callable.__call__" title="kaa.Callable.__call__"><tt class="xref py py-meth docutils literal"><span class="pre">__call__()</span></tt></a></th><td class="desc">Invoke the callable.</td></tr>
</table>
<div class="heading">Properties</div>
<table>
<tr><th><a class="reference internal" href="#kaa.Callable.ignore_caller_args" title="kaa.Callable.ignore_caller_args"><tt class="xref py py-attr docutils literal"><span class="pre">ignore_caller_args</span></tt></a></th><td>read/write</td><td class="desc">If True, any arguments passed when invoking the Callable object are not
passed to the underlying callable.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Callable.init_args_first" title="kaa.Callable.init_args_first"><tt class="xref py py-attr docutils literal"><span class="pre">init_args_first</span></tt></a></th><td>read/write</td><td class="desc">If True, any arguments passed upon invocation of the Callable object take
precedence over those arguments passed at object initialization time.
e.g. <tt class="docutils literal"><span class="pre">func(constructor_args...,</span> <span class="pre">invocation_args...)</span></tt></td></tr>
</table>

</div>
<h4>Methods</h4><dl class="method">
<dt id="kaa.Callable.__call__">
<tt class="descname">__call__</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Callable.__call__" title="Permalink to this definition">¶</a></dt>
<dd><p>Invoke the callable.</p>
<p>The arguments passed here take precedence over constructor arguments
if the <a class="reference internal" href="#kaa.Callable.init_args_first" title="kaa.Callable.init_args_first"><tt class="xref py py-attr docutils literal"><span class="pre">init_args_first</span></tt></a> property is False (default).
The wrapped callable&#8217;s return value is returned.</p>
</dd></dl>

<h4>Properties</h4><dl class="attribute">
<dt id="kaa.Callable.ignore_caller_args">
<tt class="descname">ignore_caller_args</tt><a class="headerlink" href="#kaa.Callable.ignore_caller_args" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, any arguments passed when invoking the Callable object are not
passed to the underlying callable.</p>
<p>Default value is False, so all arguments are passed to the callable.</p>
</dd></dl>

<dl class="attribute">
<dt id="kaa.Callable.init_args_first">
<tt class="descname">init_args_first</tt><a class="headerlink" href="#kaa.Callable.init_args_first" title="Permalink to this definition">¶</a></dt>
<dd><p>If True, any arguments passed upon invocation of the Callable object take
precedence over those arguments passed at object initialization time.
e.g. <tt class="docutils literal"><span class="pre">func(constructor_args...,</span> <span class="pre">invocation_args...)</span></tt></p>
<p>Default value is False, so invocation arguments take precedence over init
arguments. e.g. <tt class="docutils literal"><span class="pre">func(invocation_args...,</span> <span class="pre">constructor_args...)</span></tt></p>
<p>&#8220;A takes precedence over B&#8221; means that non-keyword arguments are passed
in order of A + B, and keyword arguments from A override same-named keyword
arguments from B.</p>
</dd></dl>

</p>
</dd></dl>

</p>
<p><dl class="class">
<dt id="kaa.WeakCallable">
<em class="property">class </em><tt class="descclassname">kaa.</tt><tt class="descname">WeakCallable</tt><big>(</big><em>func</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.WeakCallable" title="Permalink to this definition">¶</a></dt>
<dd><p>Weak variant of the Callable class.  Only weak references are held for
non-intrinsic types (i.e. any user-defined object).</p>
<p>If the callable is a method, only a weak reference is kept to the instance
to which that method belongs, and only weak references are kept to any of
the arguments and keyword arguments.</p>
<p>This also works recursively, so if there are nested data structures, for example 
<tt class="docutils literal"><span class="pre">kwarg=[1,</span> <span class="pre">[2,</span> <span class="pre">[3,</span> <span class="pre">my_object]]]</span></tt>, only a weak reference is held for my_object.</p>
<p><h4>Synopsis</h4><div class="kaa synopsis">
<div class="heading">Class Hierarchy</div><p class="hierarchy"><a class="reference internal" href="#kaa.Callable" title="kaa.Callable"><tt class="xref py py-class docutils literal"><span class="pre">kaa.Callable</span></tt></a><br />&#9492;&#9472; <tt class="xref docutils literal current">kaa.WeakCallable</tt><br /></p>
<div class="heading">Properties</div>
<table>
<tr><th><a class="reference internal" href="#kaa.WeakCallable.weakref_destroyed_cb" title="kaa.WeakCallable.weakref_destroyed_cb"><tt class="xref py py-attr docutils literal"><span class="pre">weakref_destroyed_cb</span></tt></a></th><td>read/write</td><td class="desc">A callback that&#8217;s invoked when any of the weak references held (either
for the callable or any of the arguments passed on the constructor)
become dead.</td></tr>
</table>

</div>
<h4>Properties</h4><dl class="attribute">
<dt id="kaa.WeakCallable.weakref_destroyed_cb">
<tt class="descname">weakref_destroyed_cb</tt><a class="headerlink" href="#kaa.WeakCallable.weakref_destroyed_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>A callback that&#8217;s invoked when any of the weak references held (either
for the callable or any of the arguments passed on the constructor)
become dead.</p>
<p>When this happens, the Callable is invalid and any attempt to invoke
it will raise a kaa.CallableError.</p>
<p>The callback is passed the weakref object (which is probably dead).
If the callback requires additional arguments, they can be encapsulated
in a <a class="reference internal" href="#kaa.Callable" title="kaa.Callable"><tt class="xref py py-class docutils literal"><span class="pre">kaa.Callable</span></tt></a> object.</p>
</dd></dl>

</p>
</dd></dl>

</p>
</div>
</div>
<div class="section" id="signals">
<span id="id2"></span><h2>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h2>
<p id="emitting">In Kaa, signals don&#8217;t refer to Unix signals, but rather are similar to gtk+ signals
in that they are hooks to allow you to connect callbacks to be triggered when
certain events occur.  A signal may have any number of callbacks connected to it,
and when it is <em>emitted</em>, all the callbacks are invoked.  For example,
<a class="reference internal" href="io.html#kaa.IOChannel" title="kaa.IOChannel"><tt class="xref py py-class docutils literal"><span class="pre">kaa.IOChannel</span></tt></a> has a signal called <a class="reference internal" href="io.html#kaa.IOChannel.signals.read" title="kaa.IOChannel.signals.read"><tt class="xref py py-attr docutils literal"><span class="pre">read</span></tt></a>
which is emitted when a chunk of data has been read from the IO channel.</p>
<p>Classes that offer signals have a <em>signals</em> attribute, which is a dictionary
(or in fact a <a class="reference internal" href="#kaa.Signals" title="kaa.Signals"><tt class="xref py py-class docutils literal"><span class="pre">kaa.Signals</span></tt></a> object, which behaves like a dictionary), whose
keys are the names of the signal supported by that object, and the corresponding
values are <a class="reference internal" href="#kaa.Signal" title="kaa.Signal"><tt class="xref py py-class docutils literal"><span class="pre">kaa.Signal</span></tt></a> objects.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">handle_data_chunk</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">userdata</span><span class="p">):</span>
    <span class="k">print</span> <span class="s">&#39;Read:&#39;</span><span class="p">,</span> <span class="n">data</span>

<span class="n">iochannel</span><span class="o">.</span><span class="n">signals</span><span class="p">[</span><span class="s">&#39;read&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">handle_data_chunk</span><span class="p">,</span> <span class="s">&#39;This is user data&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> method accepts a callable and arbitrary
non-keyword and keyword arguments, which are passed to the callback.  This
method, and the whole <tt class="docutils literal"><span class="pre">connect_*</span></tt> family of methods in general, constructs a
<a class="reference internal" href="#kaa.Callable" title="kaa.Callable"><tt class="xref py py-class docutils literal"><span class="pre">Callable</span></tt></a> object implicitly (and in fact return that newly
constructed Callable).  So the above example is equivalent to:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">iochannel</span><span class="o">.</span><span class="n">signals</span><span class="p">[</span><span class="s">&#39;read&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">kaa</span><span class="o">.</span><span class="n">Callable</span><span class="p">(</span><span class="n">handle_data_chunk</span><span class="p">,</span> <span class="s">&#39;this is user data&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Obviously the earlier form is more convenient.  Similarly, <a class="reference internal" href="#kaa.Signal.connect_weak" title="kaa.Signal.connect_weak"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak()</span></tt></a>
does the same thing, except it creates a <a class="reference internal" href="#kaa.WeakCallable" title="kaa.WeakCallable"><tt class="xref py py-class docutils literal"><span class="pre">WeakCallable</span></tt></a> from the callback and
arguments.</p>
<p>It is possible to detect when a Signal changes by assigning a callback to the Signal
object&#8217;s <a class="reference internal" href="#kaa.Signal.changed_cb" title="kaa.Signal.changed_cb"><tt class="xref py py-attr docutils literal"><span class="pre">changed_cb</span></tt></a> property (or by passing it on the constructor):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">signal_changed</span><span class="p">(</span><span class="n">signal</span><span class="p">,</span> <span class="n">action</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">action</span> <span class="o">==</span> <span class="n">kaa</span><span class="o">.</span><span class="n">Signal</span><span class="o">.</span><span class="n">CONNECTED</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span> <span class="s">&#39;New callback added, signal now has </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">signal</span><span class="p">)</span>
<span class="gp">... </span>    <span class="k">else</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span> <span class="s">&#39;Callback removed, signal now has </span><span class="si">%d</span><span class="s">&#39;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">signal</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span> <span class="o">=</span> <span class="n">kaa</span><span class="o">.</span><span class="n">Signal</span><span class="p">(</span><span class="n">changed_cb</span><span class="o">=</span><span class="n">signal_changed</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">callback</span> <span class="o">=</span> <span class="n">sig</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="k">lambda</span><span class="p">:</span> <span class="bp">None</span><span class="p">)</span>
<span class="go">New callback added, signal now has 1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sig</span><span class="o">.</span><span class="n">disconnect</span><span class="p">(</span><span class="n">callback</span><span class="p">)</span>
<span class="go">Callback added, signal now has 0</span>
</pre></div>
</div>
<p>One example of where this is used is with IOChannel&#8217;s
<a class="reference internal" href="io.html#kaa.IOChannel.signals.read" title="kaa.IOChannel.signals.read"><tt class="xref py py-attr docutils literal"><span class="pre">read</span></tt></a> signal.  If there are no callbacks
connected to the <tt class="docutils literal"><span class="pre">read</span></tt> signal then we don&#8217;t want to consume any data
from the channel.  So, when a callback is connected, the IOChannel must
register itself with the <a class="reference internal" href="mainloop.html#notifier"><em>notifier</em></a> and handle read events in
order to consume data, passing it to all the callbacks connected to the read
signal.  When all callbacks have been disconnected, the IOChannel must
unregister itself, so that no data is consumed when it has no listeners.</p>
<p>Signal objects also behave like containers, in that they can be iterated
over (where each element is the <a class="reference internal" href="#kaa.Callable" title="kaa.Callable"><tt class="xref py py-class docutils literal"><span class="pre">Callable</span></tt></a> object), counted
(via <tt class="docutils literal"><span class="pre">len()</span></tt>), and tested for membership (<tt class="docutils literal"><span class="pre">myfunc</span> <span class="pre">in</span> <span class="pre">signal</span></tt>).</p>
<p>A Signal knows how to be coerced into an <a class="reference internal" href="../async/inprogress.html#kaa.InProgress" title="kaa.InProgress"><tt class="xref py py-class docutils literal"><span class="pre">InProgress</span></tt></a> object
via <a class="reference internal" href="../async/inprogress.html#kaa.inprogress" title="kaa.inprogress"><tt class="xref py py-func docutils literal"><span class="pre">kaa.inprogress()</span></tt></a>, and can therefore be yielded from a <a class="reference internal" href="../async/coroutines.html#coroutines"><em>coroutine</em></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nd">@kaa.coroutine</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">stop_process</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;quit</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">)</span>
    <span class="c"># Let&#39;s assume the &#39;terminated&#39; signal gets emitted when the process</span>
    <span class="c"># exits, which is handled elsewhere.</span>
    <span class="k">yield</span> <span class="n">kaa</span><span class="o">.</span><span class="n">inprogress</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">signals</span><span class="p">[</span><span class="s">&#39;terminated&#39;</span><span class="p">])</span>

    <span class="c"># Once we get here, the &#39;terminated&#39; signal was emitted.</span>
    <span class="c"># [...]</span>
</pre></div>
</div>
<p>Here, the <tt class="docutils literal"><span class="pre">stop_process()</span></tt> coroutine is finished when the <tt class="docutils literal"><span class="pre">terminated</span></tt> signal
is emitted.  For more information on coroutines, see the section on
<a class="reference internal" href="../async/coroutines.html#coroutines"><em>asynchronous programming in Kaa</em></a>.</p>
<p>A collection of many Signal objects is represented by a <a class="reference internal" href="#kaa.Signals" title="kaa.Signals"><tt class="xref py py-class docutils literal"><span class="pre">Signals</span></tt></a>
object, which behaves like a dictionary.  There are several additional methods
with Signals object, such as <a class="reference internal" href="#kaa.Signals.any" title="kaa.Signals.any"><tt class="xref py py-meth docutils literal"><span class="pre">any()</span></tt></a> and <a class="reference internal" href="#kaa.Signals.all" title="kaa.Signals.all"><tt class="xref py py-meth docutils literal"><span class="pre">all()</span></tt></a>.</p>
<div class="section" id="signals-api">
<h3>Signals API<a class="headerlink" href="#signals-api" title="Permalink to this headline">¶</a></h3>
<p><dl class="class">
<dt id="kaa.Signal">
<em class="property">class </em><tt class="descclassname">kaa.</tt><tt class="descname">Signal</tt><big>(</big><em>changed_cb=None</em><big>)</big><a class="headerlink" href="#kaa.Signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a Signal object to which callbacks can be connected and later
invoked in sequence when the Signal is emitted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>changed_cb</strong> (<em>callable</em>) &#8211; corresponds to the <a class="reference internal" href="#kaa.Signal.changed_cb" title="kaa.Signal.changed_cb"><tt class="xref py py-attr docutils literal"><span class="pre">changed_cb</span></tt></a> property.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><h4>Synopsis</h4><div class="kaa synopsis">
<div class="heading">Class Hierarchy</div><p class="hierarchy"><tt class="xref docutils literal current">kaa.Signal</tt><br /></p>
<div class="heading">Methods</div>
<table>
<tr><th><a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a></th><td class="desc">Connects the callback with the (optional) given arguments to be invoked
when the signal is emitted.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_first" title="kaa.Signal.connect_first"><tt class="xref py py-meth docutils literal"><span class="pre">connect_first()</span></tt></a></th><td class="desc">Variant of <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> in which the given callback is
inserted to the front of the callback list.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_first_once" title="kaa.Signal.connect_first_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_first_once()</span></tt></a></th><td class="desc">Variant of <a class="reference internal" href="#kaa.Signal.connect_once" title="kaa.Signal.connect_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_once()</span></tt></a> in which the given callback is
inserted to the front of the callback list.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_once" title="kaa.Signal.connect_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_once()</span></tt></a></th><td class="desc">Variant of <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> where the callback is automatically
disconnected after one signal emission.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_weak" title="kaa.Signal.connect_weak"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak()</span></tt></a></th><td class="desc">Weak variant of <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> where only weak references are
held to the callback and arguments.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_weak_first" title="kaa.Signal.connect_weak_first"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak_first()</span></tt></a></th><td class="desc">Weak variant of <a class="reference internal" href="#kaa.Signal.connect_first" title="kaa.Signal.connect_first"><tt class="xref py py-meth docutils literal"><span class="pre">connect_first()</span></tt></a>.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_weak_first_once" title="kaa.Signal.connect_weak_first_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak_first_once()</span></tt></a></th><td class="desc">Weak variant of <a class="reference internal" href="#kaa.Signal.connect_weak_first_once" title="kaa.Signal.connect_weak_first_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak_first_once()</span></tt></a>.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.connect_weak_once" title="kaa.Signal.connect_weak_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak_once()</span></tt></a></th><td class="desc">Weak variant of <a class="reference internal" href="#kaa.Signal.connect_once" title="kaa.Signal.connect_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_once()</span></tt></a>.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.count" title="kaa.Signal.count"><tt class="xref py py-meth docutils literal"><span class="pre">count()</span></tt></a></th><td class="desc">Returns the number of callbacks connected to the signal.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.disconnect" title="kaa.Signal.disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect()</span></tt></a></th><td class="desc">Disconnects the given callback from the signal so that future emissions
will not invoke that callback any longer.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.disconnect_all" title="kaa.Signal.disconnect_all"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect_all()</span></tt></a></th><td class="desc">Disconnects all callbacks from the signal.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.emit" title="kaa.Signal.emit"><tt class="xref py py-meth docutils literal"><span class="pre">emit()</span></tt></a></th><td class="desc">Emits the signal, passing the given arguments callback connected to the signal.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.emit_deferred" title="kaa.Signal.emit_deferred"><tt class="xref py py-meth docutils literal"><span class="pre">emit_deferred()</span></tt></a></th><td class="desc">Queues the emission until after the next callback is connected.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.emit_when_handled" title="kaa.Signal.emit_when_handled"><tt class="xref py py-meth docutils literal"><span class="pre">emit_when_handled()</span></tt></a></th><td class="desc">Emits the signal if there are callbacks connected, or defers it until
the first callback is connected.</td></tr>
</table>
<div class="heading">Properties</div>
<table>
<tr><th><a class="reference internal" href="#kaa.Signal.callbacks" title="kaa.Signal.callbacks"><tt class="xref py py-attr docutils literal"><span class="pre">callbacks</span></tt></a></th><td>read-only</td><td class="desc">Tuple containing the callbacks connected to this signal.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signal.changed_cb" title="kaa.Signal.changed_cb"><tt class="xref py py-attr docutils literal"><span class="pre">changed_cb</span></tt></a></th><td>read/write</td><td class="desc">Callable to be invoked whenever a callback is connected to or
disconnected from the Signal.</td></tr>
</table>
<div class="heading">Signals</div><div class="nomembers">This class has no signals.</div>
</div>
<h4>Methods</h4><dl class="method">
<dt id="kaa.Signal.connect">
<tt class="descname">connect</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Connects the callback with the (optional) given arguments to be invoked
when the signal is emitted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>callback</strong> &#8211; callable invoked when signal emits</li>
<li><strong>args</strong> &#8211; optional non-keyword arguments passed to the callback</li>
<li><strong>kwargs</strong> &#8211; optional keyword arguments passed to the callback.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a new <a class="reference internal" href="#kaa.Callable" title="kaa.Callable"><tt class="xref py py-class docutils literal"><span class="pre">Callable</span></tt></a> object encapsulating the supplied
callable and arguments.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_first">
<tt class="descname">connect_first</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Variant of <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> in which the given callback is
inserted to the front of the callback list.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_first_once">
<tt class="descname">connect_first_once</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_first_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Variant of <a class="reference internal" href="#kaa.Signal.connect_once" title="kaa.Signal.connect_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_once()</span></tt></a> in which the given callback is
inserted to the front of the callback list.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_once">
<tt class="descname">connect_once</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Variant of <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> where the callback is automatically
disconnected after one signal emission.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_weak">
<tt class="descname">connect_weak</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_weak" title="Permalink to this definition">¶</a></dt>
<dd><p>Weak variant of <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> where only weak references are
held to the callback and arguments.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">a new <a class="reference internal" href="#kaa.WeakCallable" title="kaa.WeakCallable"><tt class="xref py py-class docutils literal"><span class="pre">WeakCallable</span></tt></a> object encapsulating the
supplied callable and arguments.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_weak_first">
<tt class="descname">connect_weak_first</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_weak_first" title="Permalink to this definition">¶</a></dt>
<dd><p>Weak variant of <a class="reference internal" href="#kaa.Signal.connect_first" title="kaa.Signal.connect_first"><tt class="xref py py-meth docutils literal"><span class="pre">connect_first()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_weak_first_once">
<tt class="descname">connect_weak_first_once</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_weak_first_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Weak variant of <a class="reference internal" href="#kaa.Signal.connect_weak_first_once" title="kaa.Signal.connect_weak_first_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_weak_first_once()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.connect_weak_once">
<tt class="descname">connect_weak_once</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.connect_weak_once" title="Permalink to this definition">¶</a></dt>
<dd><p>Weak variant of <a class="reference internal" href="#kaa.Signal.connect_once" title="kaa.Signal.connect_once"><tt class="xref py py-meth docutils literal"><span class="pre">connect_once()</span></tt></a>.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.count">
<tt class="descname">count</tt><big>(</big><big>)</big><a class="headerlink" href="#kaa.Signal.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the number of callbacks connected to the signal.</p>
<p>Equivalent to <tt class="docutils literal"><span class="pre">len(signal)</span></tt>.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.disconnect">
<tt class="descname">disconnect</tt><big>(</big><em>callback</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnects the given callback from the signal so that future emissions
will not invoke that callback any longer.</p>
<p>If neither args nor kwargs are specified, all instances of the given
callback (regardless of what arguments they were originally connected with)
will be disconnected.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>callback</strong> &#8211; either the callback originally connected, or the <a class="reference internal" href="#kaa.Callable" title="kaa.Callable"><tt class="xref py py-class docutils literal"><span class="pre">Callable</span></tt></a>
object returned by <a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a>.</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">True if any callbacks were disconnected, and False if none were found.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.disconnect_all">
<tt class="descname">disconnect_all</tt><big>(</big><big>)</big><a class="headerlink" href="#kaa.Signal.disconnect_all" title="Permalink to this definition">¶</a></dt>
<dd><p>Disconnects all callbacks from the signal.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.emit">
<tt class="descname">emit</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.emit" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits the signal, passing the given arguments callback connected to the signal.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Returns:</th><td class="field-body">False if any of the callbacks returned False, and True otherwise.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.emit_deferred">
<tt class="descname">emit_deferred</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.emit_deferred" title="Permalink to this definition">¶</a></dt>
<dd><p>Queues the emission until after the next callback is connected.</p>
<p>This allows a signal to be &#8216;primed&#8217; by its creator, and the handler
that subsequently connects to it will be called with the given
arguments.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signal.emit_when_handled">
<tt class="descname">emit_when_handled</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#kaa.Signal.emit_when_handled" title="Permalink to this definition">¶</a></dt>
<dd><p>Emits the signal if there are callbacks connected, or defers it until
the first callback is connected.</p>
</dd></dl>

<h4>Properties</h4><dl class="attribute">
<dt id="kaa.Signal.callbacks">
<tt class="descname">callbacks</tt><a class="headerlink" href="#kaa.Signal.callbacks" title="Permalink to this definition">¶</a></dt>
<dd><p>Tuple containing the callbacks connected to this signal.</p>
<p>Because this value is a tuple, it cannot be manipulated directly.  Use
<a class="reference internal" href="#kaa.Signal.connect" title="kaa.Signal.connect"><tt class="xref py py-meth docutils literal"><span class="pre">connect()</span></tt></a> and <a class="reference internal" href="#kaa.Signal.disconnect" title="kaa.Signal.disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect()</span></tt></a> instead.</p>
</dd></dl>

<dl class="attribute">
<dt id="kaa.Signal.changed_cb">
<tt class="descname">changed_cb</tt><a class="headerlink" href="#kaa.Signal.changed_cb" title="Permalink to this definition">¶</a></dt>
<dd><p>Callable to be invoked whenever a callback is connected to or
disconnected from the Signal.</p>
<dl class="describe">
<dt>
<tt class="descname">def callback(signal, action)</tt></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Param signal:</th><td class="field-body">the <a class="reference internal" href="#kaa.Signal" title="kaa.Signal"><tt class="xref py py-class docutils literal"><span class="pre">Signal</span></tt></a> object acted upon</td>
</tr>
<tr class="field"><th class="field-name">Param action:</th><td class="field-body">either <tt class="docutils literal"><span class="pre">kaa.Signal.CONNECTED</span></tt> or <tt class="docutils literal"><span class="pre">kaa.Signal.DISCONNECTED</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</p>
</dd></dl>

</p>
<p><dl class="class">
<dt id="kaa.Signals">
<em class="property">class </em><tt class="descclassname">kaa.</tt><tt class="descname">Signals</tt><big>(</big><em>*signals</em><big>)</big><a class="headerlink" href="#kaa.Signals" title="Permalink to this definition">¶</a></dt>
<dd><p>A collection of one or more Signal objects, which behaves like a dictionary
(with key order preserved).</p>
<dl class="docutils">
<dt>The initializer takes zero or more arguments, where each argument can be a:</dt>
<dd><ul class="first last simple">
<li>dict (of name=Signal() pairs) or other Signals object</li>
<li>tuple/list of (name, Signal) tuples</li>
<li>str representing the name of the signal</li>
</ul>
</dd>
</dl>
<p><h4>Synopsis</h4><div class="kaa synopsis">
<div class="heading">Class Hierarchy</div><p class="hierarchy"><tt class="xref py py-class docutils literal"><span class="pre">__builtin__.dict</span></tt><br />&#9492;&#9472; <tt class="xref docutils literal current">kaa.Signals</tt><br /></p>
<div class="heading">Methods</div>
<table>
<tr><th><a class="reference internal" href="#kaa.Signals.add" title="kaa.Signals.add"><tt class="xref py py-meth docutils literal"><span class="pre">add()</span></tt></a></th><td class="desc">Creates a new Signals object by merging all signals defined in
self and the signals specified in the arguments.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signals.all" title="kaa.Signals.all"><tt class="xref py py-meth docutils literal"><span class="pre">all()</span></tt></a></th><td class="desc">Returns an <a class="reference internal" href="../async/inprogress.html#kaa.InProgressAll" title="kaa.InProgressAll"><tt class="xref py py-class docutils literal"><span class="pre">InProgressAll</span></tt></a> object with all signals in self.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signals.any" title="kaa.Signals.any"><tt class="xref py py-meth docutils literal"><span class="pre">any()</span></tt></a></th><td class="desc">Returns an <a class="reference internal" href="../async/inprogress.html#kaa.InProgressAny" title="kaa.InProgressAny"><tt class="xref py py-class docutils literal"><span class="pre">InProgressAny</span></tt></a> object with all signals in self.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signals.keys" title="kaa.Signals.keys"><tt class="xref py py-meth docutils literal"><span class="pre">keys()</span></tt></a></th><td class="desc">List of signal names (strings).</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signals.subset" title="kaa.Signals.subset"><tt class="xref py py-meth docutils literal"><span class="pre">subset()</span></tt></a></th><td class="desc">Returns a new Signals object by taking a subset of the supplied
signal names.</td></tr>
<tr><th><a class="reference internal" href="#kaa.Signals.values" title="kaa.Signals.values"><tt class="xref py py-meth docutils literal"><span class="pre">values()</span></tt></a></th><td class="desc">List of Signal objects.</td></tr>
</table>
<div class="heading">Properties</div><div class="nomembers">This class has no properties.</div><div class="heading">Signals</div><div class="nomembers">This class has no signals.</div>
</div>
<h4>Methods</h4><dl class="method">
<dt id="kaa.Signals.add">
<tt class="descname">add</tt><big>(</big><em>*signals</em><big>)</big><a class="headerlink" href="#kaa.Signals.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new Signals object by merging all signals defined in
self and the signals specified in the arguments.</p>
<p>The same types of arguments accepted by the initializer are allowed
here.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signals.all">
<tt class="descname">all</tt><big>(</big><big>)</big><a class="headerlink" href="#kaa.Signals.all" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an <a class="reference internal" href="../async/inprogress.html#kaa.InProgressAll" title="kaa.InProgressAll"><tt class="xref py py-class docutils literal"><span class="pre">InProgressAll</span></tt></a> object with all signals in self.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signals.any">
<tt class="descname">any</tt><big>(</big><big>)</big><a class="headerlink" href="#kaa.Signals.any" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an <a class="reference internal" href="../async/inprogress.html#kaa.InProgressAny" title="kaa.InProgressAny"><tt class="xref py py-class docutils literal"><span class="pre">InProgressAny</span></tt></a> object with all signals in self.</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signals.keys">
<tt class="descname">keys</tt><big>(</big><big>)</big><a class="headerlink" href="#kaa.Signals.keys" title="Permalink to this definition">¶</a></dt>
<dd><p>List of signal names (strings).</p>
</dd></dl>

<dl class="method">
<dt id="kaa.Signals.subset">
<tt class="descname">subset</tt><big>(</big><em>*names</em><big>)</big><a class="headerlink" href="#kaa.Signals.subset" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a new Signals object by taking a subset of the supplied
signal names.</p>
<p>The keys of the new Signals object are ordered as specified in the
names parameter.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">yield</span> <span class="n">signals</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&#39;pass&#39;</span><span class="p">,</span> <span class="s">&#39;fail&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">any</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="kaa.Signals.values">
<tt class="descname">values</tt><big>(</big><big>)</big><a class="headerlink" href="#kaa.Signals.values" title="Permalink to this definition">¶</a></dt>
<dd><p>List of Signal objects.</p>
</dd></dl>

</p>
</dd></dl>

</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Signals and Callables</a><ul>
<li><a class="reference internal" href="#id1">Callables</a><ul>
<li><a class="reference internal" href="#callable-api">Callable API</a></li>
</ul>
</li>
<li><a class="reference internal" href="#signals">Signals</a><ul>
<li><a class="reference internal" href="#signals-api">Signals API</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../index.html"
                        title="previous chapter">The Kaa Application Framework</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="mainloop.html"
                        title="next chapter">The Main Loop</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/core/signals.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="mainloop.html" title="The Main Loop"
             >next</a> |</li>
        <li class="right" >
          <a href="../index.html" title="The Kaa Application Framework"
             >previous</a> |</li>
        <li><a href="../index.html">kaa.base v0.99.2dev-382-8399342e documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2005-2012, Dirk Meyer, Jason Tackaberry.
      Last updated on May 13, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  </body>
</html>