env:
  PATH: "${PROJECT_PATH}/bin:${PROJECT_PATH}/node_modules/.bin:${PATH}"
  BUILD_PATH: "${PROJECT_PATH}/node_modules"

build: |

  if [[ -f ./package.json ]]; then
    npm install
  else
    warn 'no "package.json" file found'
  fi

build_deployment: |

  if [[ ! -f ./npm-shrinkwrap.json ]]; then
    die 'no "npm-shrinkwrap.json" file found'
  fi

  npm install

  npm rebuild

test: |

  npm test

clean: |

  if [[ -d "${BUILD_PATH}" ]]; then
    rm -fr "${BUILD_PATH}"
  fi
