<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="admin_master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>ACR Administration Section</title>
  <script type="text/javascript" src="http://www.google.com/jsapi"></script>
  <script type="text/javascript">
    try {
        google.load("language", "1");
    }
    catch(error) {}
  </script>
  <style>
    #edit_form {
        width: 700px;
        padding: 10px;
    }

    #translate_form {
        width: 450px;
    }
    
    #translate_form select {
        margin: 10px;
        margin-left: 2px;
        margin-right: 2px;
    }
    
    #translate_form span {
        margin-left: 10px;
    }
    
    #translate_btn {
        border:1px solid #CCCCCC;
        width:75px;
        background-color: #F5F5F5;
        font-size: 13px;
        cursor: pointer;
        
        padding: 2px;
        padding-left: 10px;
        padding-right: 10px;
        
        margin-right: 10px;
    }

    .fielderror {
        margin-left: 100px;
    }
  </style>
  <script>    
    jQuery(document).ready(function() {
        try {
            for (lang in google.language.Languages) {
                lang_v = google.language.Languages[lang];
                jQuery('#translate').append('<option value="'+lang_v+'">'+lang+'</option>');
            }
        }
        catch(error) {}
    });
    
    function translate() {
        dest_lang = jQuery('#translate').find('option:selected').attr('value');
//<![CDATA[
        url = "${h.acr_url(translate_url, slice_uid=slice.uid, revision=revision)}";
        url += "&translation=" + dest_lang;
        window.location = url;
//]]>
    }
  </script>
</head>

<body>
    <div class="toolbar">
        <a href="#edit" class="objects_list_entry">Edit</a>
        <a href="#translate_box" class="objects_list_entry">Translate</a>
        <a py:if="slice" href="${h.acr_url('/admin/slice/edit', uid=slice.uid)}"
           class="objects_list_entry">Back to Slice Edit</a>
    </div>

    <div class="section_box" id="edit">
        <h1 class="title">Edit (${values['lang']})</h1>
        <div id="edit_form" class="section_icons">
            ${edit_form(action=action, value=values)}
        </div>
    </div>

    <div class="section_box" id="translate_box">
        <h1 class="title">Translate</h1>
        <div id="translate_form" class="section_icons">
            <span>Language:</span>
            ${translate_box.display()}
            <span id="translate_btn" onclick="translate()">Edit/Create</span>
        </div>
    </div>
</body>
</html>
