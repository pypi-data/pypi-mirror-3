<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Basic Concepts &mdash; PowerConsole v0.7 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.7',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="PowerConsole v0.7 documentation" href="index.html" />
    <link rel="next" title="Standard Commands" href="stdcmd.html" />
    <link rel="prev" title="PowerConsole - The Advanced Command Console" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="stdcmd.html" title="Standard Commands"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PowerConsole - The Advanced Command Console"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">PowerConsole v0.7 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="basic-concepts">
<h1>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h1>
<div class="section" id="history-of-powerconsole">
<h2>History of PowerConsole<a class="headerlink" href="#history-of-powerconsole" title="Permalink to this headline">¶</a></h2>
<p>PowerConsole began in 2006 as Firebird PowerTool when I&#8217;ve got tired of various
administration tools for databases, and particularly those for Firebird RDBMS.
Don&#8217;t get me wrong, there are many high quality tools for Firebird, but all these
tools are either…</p>
<ol class="arabic simple">
<li>Hard to use, or…</li>
<li>Haven’t feature(s) you want right now, or…</li>
<li>Are not flexible enough, or…</li>
<li>Are hard to learn, or…</li>
<li>Doesn’t work on your platform, or…</li>
<li>Scalle badly, or…</li>
<li>Disappoint you in any oter way.</li>
</ol>
<p>The real PowerTool™ I would like to have should…</p>
<ul class="simple">
<li>Provide easy and obvious way to do frequent tasks. It&#8217;s usually strong point of good GUI tools,
although they tend to lose it as their feature set grows over time.</li>
<li>Don’t bother you with things you don’t want. Advanced GUI tools tend to overwhelm you with things
you don&#8217;t want to see right now, while CLI tools never bother you.</li>
<li>Be flexible to do almost anything you may want. CLI tools usually rule there.</li>
<li>Help you to achieve your goal. Good tools will assist you with right things when you need them.</li>
<li>Work on multiple platforms.</li>
<li>Provide set of “tools” for various tasks and means to combine them to solve more complex problems.
This is also domain of CLI tools.</li>
<li>Be extensible.</li>
</ul>
<p>As you can see, the crux of all problems with any tool is in the limitations of the user interface model
it uses. Simply in old GUI vs. CLI fight. Each tool unavoidably inherits some characteristics and limitations
that couldn&#8217;t escape no matter what according to the user interface paradigm it chooses:</p>
<p>CLI tools</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Plus:</th><td class="field-body">Very Flexible, multiplatform</td>
</tr>
<tr class="field"><th class="field-name">Minus:</th><td class="field-body">Poor presentation environment, often not powerful enough or powerful,
but complicated, hard to use or learn</td>
</tr>
</tbody>
</table>
</blockquote>
<p>GUI tools</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Plus:</th><td class="field-body">Rich presentation environment, good for in-place changes and common tasks</td>
</tr>
<tr class="field"><th class="field-name">Minus:</th><td class="field-body">Scale badly, WYSIWYG plague, not very flexible, often not multiplatform</td>
</tr>
</tbody>
</table>
</blockquote>
<p>Web-based tools</p>
<blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Plus:</th><td class="field-body">Multiplatform</td>
</tr>
<tr class="field"><th class="field-name">Minus:</th><td class="field-body">“The worst from both worlds”</td>
</tr>
</tbody>
</table>
</blockquote>
<p>But is it possible to create a tool that would have all advantages of both UI worlds without their limitations?
Or it&#8217;s just a dream, a Holy Grail of UI we all seek but can&#8217;t really find? Probably, but I think that we can
get very close to it, and it&#8217;s not even necessary to invent new UI paradigm for it. If we would accept
the advantages and limitations of GUI, CLI and Web interfaces and focus on abstracting the utility functions from
them, we can start to build tools that can have all UI incarnations built around common core, so we could use
the right one for given task while still working in well known environment.</p>
<p>Certainly, this idea is not new. Any GUI or web frontend to CLI tool is built on this very idea. However,
the frontend approach uses only loose coupling between UI and the execution core, so its capabilities are
limited. Although it would be very hard to design a framework that would be multiplatform, simple, extensible,
powerful and would allow us to build tools that seamlesly integrate with various user interfaces in languages
like C++ or Java, I thought that it could be actually doable in dynamic language like Python. So I started to
play with some ideas that resulted in prototype of Firebird PowerTool that was <a class="reference external" href="http://www.ibphoenix.cz/pwc/download/PowerTool-2006.pdf">presented</a> on Firebird Conference
in 2006.</p>
<p>The initial prototype was very promising, but it was written as throw-away prototype designed just to demonstrate
the viability of the basic concept. It was tied to the GUI shell, not easily extended etc. PowerConsole is next
iteration if this development.</p>
</div>
<div class="section" id="powerconsole-design">
<h2>PowerConsole Design<a class="headerlink" href="#powerconsole-design" title="Permalink to this headline">¶</a></h2>
<div class="section" id="functional-packages">
<h3>Functional packages<a class="headerlink" href="#functional-packages" title="Permalink to this headline">¶</a></h3>
<p>First initial requirement was to have simple execution system that would allow pluggable packages of functions.
The idea is that anyone can write domain or task-specific set of functions wrapped into self-contained package
that could be easily deployed and used by end users. To achieve that, PowerConsole utilizes <a class="reference external" href="http://peak.telecommunity.com/DevCenter/setuptools">setuptools</a> and
<a class="reference external" href="http://peak.telecommunity.com/DevCenter/PkgResources">resources</a>, so packages are Python eggs installed via <em>easy_install</em> and execution core uses various entry points
to discover and import functions advertised by setup.py of the package.</p>
<p>Example setup.py for package:</p>
<div class="highlight-python"><pre>from setuptools import setup, find_packages

setup(
    ...
    entry_points = {
        'powerconsole.commands': [
            'list = pwc.stdcmd:cmdList',
            'help = pwc.stdcmd:cmdHelp',
            'run = pwc.stdcmd:cmdRun'
        ],
        'powerconsole.help_providers': [
            'python = pwc.stdcmd:helpPython',
            'builtin = pwc.stdcmd:helpBuiltin',
        ]
    },
    ...
    ],
    )</pre>
</div>
</div>
<div class="section" id="execution-engine">
<h3>Execution engine<a class="headerlink" href="#execution-engine" title="Permalink to this headline">¶</a></h3>
<p>Because packages have to be self-contained, the main problem is the interface between functions in package and
UI. CLI uses commands with arguments on command line that have (usually text) output to files (stdout is file
too), while GUI and web interfaces use various widgets to collect input, call functions in the engine directly
and render their output in various formats. If package would be just a set of functions or classes, then all
this UI specific handling must be included in execution engine, which would make it overly complex. Moving it
down to the package is not a solution either, unless the interface is not radically simplified. PowerConsole
solves this problem by coupling single function with it&#8217;s command-line definition (a command to invoke it), so
there is only one entry point regardless of the UI type. Each command is defined as <a class="reference external" href="http://pyparsing.wikispaces.com/">PyParsing</a> grammar that
automatically converts the input line into Python function call with parameters. Execution core then uses this
information to create global grammar that&#8217;s then used to process input into sequence of function calls in
CLI-style processing. It can also call the entry point directly with required parameters when other UI style is
used.</p>
<p>So the functional unit in PowerConsole is a command, and a package can contain several commands. Each command
is implemented as class inherited from <a title="pwc.base.Command" class="reference external" href="pwc.html#pwc.base.Command"><tt class="xref docutils literal"><span class="pre">Command</span></tt></a>. It defines the main entry point
<a title="pwc.base.Command.execute" class="reference external" href="pwc.html#pwc.base.Command.execute"><tt class="xref docutils literal"><span class="pre">execute()</span></tt></a> that has to be overriden by command developer and two public methods used by
execution core: <a title="pwc.base.Command.getName" class="reference external" href="pwc.html#pwc.base.Command.getName"><tt class="xref docutils literal"><span class="pre">getName()</span></tt></a> and <a title="pwc.base.Command.getGrammar" class="reference external" href="pwc.html#pwc.base.Command.getGrammar"><tt class="xref docutils literal"><span class="pre">getGrammar()</span></tt></a>.</p>
<p>But execution core can do more than processing of defined commands. Current executor is written on top
of Python&#8217;s code compiler so it can process valid Python code as well. You can even mix Python and user commands
together. Because the input is first scanned for user commands that are then replaced with equivalent function
calls before processing in Python code compiler, it&#8217;s possible to use them <em>inside</em> Python functions and other
code blocks. However, the current implementation has a limitation that user and python commands couldn&#8217;t be
mixed on the same line of code.</p>
<p>Because executor is implemented as fully compatible replacement for standard <a title="(in Python v2.6)" class="reference external" href="http://docs.python.org/library/code.html#code.InteractiveInterpreter"><tt class="xref docutils literal"><span class="pre">code.InteractiveInterpreter</span></tt></a>
class (equivalent to <a title="(in Python v2.6)" class="reference external" href="http://docs.python.org/library/code.html#code.InteractiveConsole"><tt class="xref docutils literal"><span class="pre">code.InteractiveConsole</span></tt></a> is also provided), it&#8217;s possible to easily create custom
Python intrepreters extendable with user defined commands. PowerConsole is currently distributed with simple
interactive CLI console (<em>ipwc.py</em>), and more shells (wxPython and Qt-based) are planned for future releases.</p>
<p>The executor also maintains an execution context (local and global namespace) for executed code and provides
access to generic UI functions.</p>
</div>
<div class="section" id="interface-provider">
<h3>Interface Provider<a class="headerlink" href="#interface-provider" title="Permalink to this headline">¶</a></h3>
<p>Executor is not tied to any particular user interface. Instead it uses externaly provided
<a title="pwc.base.UserInterfaceProvider" class="reference external" href="pwc.html#pwc.base.UserInterfaceProvider"><tt class="xref docutils literal"><span class="pre">UserInterfaceProvider</span></tt></a>. This provider is then called by individual commands or python code to
obtain access to specific UI elements. PowerConsole is currently distributed with interface provider that can
accept external UI element factory object. If external factory is not provided, it uses internal factory that
provides simple text-based UI elements suitable for CLI tools. Future releases may contain additional, more
sophisticated providers, UI factories and UI handlers, but idea is that tool developers would make their own
objects that would integrate the PowerConsole system with their own UI environment.</p>
<p>There could be number of various UI element types (see next sections) according to function and data their
handle, and each type could be accessed for different purpose. The <em>purpose</em> is defined as string name (<cite>&#8216;main&#8217;</cite>
for example) and could be hierarchical using dot notation (for example <cite>&#8216;main.stderr&#8217;</cite>). The idea is that
InterfaceProvider can use different widgets or configuration for various UI elements according to their use. For
example separation of standard text output and standard error output.</p>
</div>
<div class="section" id="generic-ui-output">
<span id="display-abstraction"></span><h3>Generic UI output<a class="headerlink" href="#generic-ui-output" title="Permalink to this headline">¶</a></h3>
<p>Output in PowerConsole is processed by abstract display. The display is &#8220;divided&#8221; into different areas by
<em>purpose</em> and <em>writting method</em>. The actual display implementation can map these &#8220;slices&#8221; to single output or
into various screens, widgets or files.</p>
<p>The <em>purpose</em> is specified by code that requests access to the display as string name. There are no predefined
purpose names beside (implicit) name &#8216;main&#8217;.</p>
<p>The <em>writting method</em> specification represents the interface requirements that display must handle. Code that
needs access to the display may request more than one interface, but should ask only for interfaces that would
be actually used. The rationale for <em>writting method</em> specification is that display implementors may use various
widgets for different type of output (especially in GUI tools), for example grids for tables.</p>
<p>PowerConsole currently defines next display interfaces:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">UI_TEXT:</th><td class="field-body">Basic text display. Supports methods <a title="pwc.base.Display.write" class="reference external" href="pwc.html#pwc.base.Display.write"><tt class="xref docutils literal"><span class="pre">write()</span></tt></a>, <a title="pwc.base.Display.writeLine" class="reference external" href="pwc.html#pwc.base.Display.writeLine"><tt class="xref docutils literal"><span class="pre">writeLine()</span></tt></a> and
<a title="pwc.base.Display.writeLines" class="reference external" href="pwc.html#pwc.base.Display.writeLines"><tt class="xref docutils literal"><span class="pre">writeLines()</span></tt></a>.</td>
</tr>
<tr class="field"><th class="field-name">UI_LIST:</th><td class="field-body">Display that handles list of items. Supports method <a title="pwc.base.Display.writeList" class="reference external" href="pwc.html#pwc.base.Display.writeList"><tt class="xref docutils literal"><span class="pre">writeList()</span></tt></a></td>
</tr>
<tr class="field"><th class="field-name">UI_OBJECT:</th><td class="field-body">Display that handles object rendering. Support method <a title="pwc.base.Display.writeObject" class="reference external" href="pwc.html#pwc.base.Display.writeObject"><tt class="xref docutils literal"><span class="pre">writeObject()</span></tt></a></td>
</tr>
<tr class="field"><th class="field-name">UI_OBJECTLIST:</th><td class="field-body">Display that handles list of objects. Supports method <a title="pwc.base.Display.writeObjectList" class="reference external" href="pwc.html#pwc.base.Display.writeObjectList"><tt class="xref docutils literal"><span class="pre">writeObjectList()</span></tt></a></td>
</tr>
<tr class="field"><th class="field-name">UI_TABLE:</th><td class="field-body">Display that handles tables. Supports method <a title="pwc.base.Display.writeTable" class="reference external" href="pwc.html#pwc.base.Display.writeTable"><tt class="xref docutils literal"><span class="pre">writeTable()</span></tt></a>.</td>
</tr>
</tbody>
</table>
<p>Future PowerConsole releases may introduce additional interfaces.</p>
<p>PowerConsole is distributed with basic <a title="pwc.base.Display" class="reference external" href="pwc.html#pwc.base.Display"><tt class="xref docutils literal"><span class="pre">Display</span></tt></a> implementation that handles all interfaces and directs
output to <cite>stdout</cite>.</p>
</div>
<div class="section" id="object-renderes">
<h3>Object Renderes<a class="headerlink" href="#object-renderes" title="Permalink to this headline">¶</a></h3>
<p>Displays that handle objects should use or inherit from <a title="pwc.base.ObjectVisitor" class="reference external" href="pwc.html#pwc.base.ObjectVisitor"><tt class="xref docutils literal"><span class="pre">ObjectVisitor</span></tt></a> to allow special rendering for
specific objects. Command developers can register resources that can display processed object in more suitable
way than default one (for example using PrettyPrint etc.). However, if this system should work as intended,
the display must support additional interfaces that these renderers can use and not only the object ones.</p>
</div>
<div class="section" id="generic-ui-input">
<h3>Generic UI input<a class="headerlink" href="#generic-ui-input" title="Permalink to this headline">¶</a></h3>
<p>Generic UI input is not yet defined (in version 0.7). First release is planned for 0.8.</p>
</div>
<div class="section" id="help-providers">
<h3>Help Providers<a class="headerlink" href="#help-providers" title="Permalink to this headline">¶</a></h3>
<p>PowerConsole comes with several built-in commands. One of them is HELP command that shows information about
installed commands and other usefull information about various topics that command and tools develoepers wants
to provide to end users. The built-in help systems uses infromation extracted from <cite>docstrings</cite> and from
registered <a title="pwc.base.HelpProvider" class="reference external" href="pwc.html#pwc.base.HelpProvider"><tt class="xref docutils literal"><span class="pre">HelpProvider</span></tt></a> objects. Help providers are registerd to PowerConsole as resources in setup.py.</p>
</div>
<div class="section" id="controller-extensions">
<h3>Controller Extensions<a class="headerlink" href="#controller-extensions" title="Permalink to this headline">¶</a></h3>
<p>Command developers could register resources that can augment the execution engine (<a title="pwc.interpreter.Interpreter" class="reference external" href="pwc.html#pwc.interpreter.Interpreter"><tt class="xref docutils literal"><span class="pre">Interpreter</span></tt></a>) during
its initialization. It could be used to install shared data used by commands, check the environment etc.</p>
</div>
</div>
<div class="section" id="command-processing">
<h2>Command processing<a class="headerlink" href="#command-processing" title="Permalink to this headline">¶</a></h2>
<p>When PowerConsole processes input, it takes a whole line of text and analyzes it with so called <cite>check grammar</cite>.
This grammar is a subset of <cite>complete grammar</cite> for each command that consists only minimal part of it to clearly
identify a chunk of text as command. This approach is necessary to support commands that span over multiple
lines without special support in grammar itself (which would make the grammar definition unnecessarily complex).
PowerConsole supports two types of command definitions:</p>
<ol class="arabic simple">
<li>Commands terminated with special text sequence - <cite>terminator</cite> (for example SQL commands has to be terminated
by &#8216;;&#8217;)</li>
<li>Commands without terminator sequence.</li>
</ol>
<p>The type of command is very important for multiline command handling. The terminated command is not considered
complete until terminator sequence is found at the end of line, while non-terminated commands are considered complete if there is not a command continuation sequence at the end of line (line continuation marker,&#8217;&#8217; by
default).</p>
<p>If command is not complete, PowerConsole adds next line to the code block and tries again, until command&#8217;s
completion. Complete command is then processed by <cite>full grammar</cite> to transform it into function call and feeds it
to code compiler.</p>
<p>Code compiler uses similar loop to complete Python command/code block. All additional lines are also preprocessed
by internal commands &#8220;compiler&#8221;.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">Basic Concepts</a><ul>
<li><a class="reference external" href="#history-of-powerconsole">History of PowerConsole</a></li>
<li><a class="reference external" href="#powerconsole-design">PowerConsole Design</a><ul>
<li><a class="reference external" href="#functional-packages">Functional packages</a></li>
<li><a class="reference external" href="#execution-engine">Execution engine</a></li>
<li><a class="reference external" href="#interface-provider">Interface Provider</a></li>
<li><a class="reference external" href="#generic-ui-output">Generic UI output</a></li>
<li><a class="reference external" href="#object-renderes">Object Renderes</a></li>
<li><a class="reference external" href="#generic-ui-input">Generic UI input</a></li>
<li><a class="reference external" href="#help-providers">Help Providers</a></li>
<li><a class="reference external" href="#controller-extensions">Controller Extensions</a></li>
</ul>
</li>
<li><a class="reference external" href="#command-processing">Command processing</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">PowerConsole - The Advanced Command Console</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="stdcmd.html"
                                  title="next chapter">Standard Commands</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/concept.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="stdcmd.html" title="Standard Commands"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="PowerConsole - The Advanced Command Console"
             >previous</a> |</li>
        <li><a href="index.html">PowerConsole v0.7 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Pavel Cisar.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
  </body>
</html>