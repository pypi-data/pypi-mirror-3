<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">
 
<body>
  <div metal:fill-slot="main"
       tal:define="utool context/@@plone_portal_state/portal_url">
      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" 
               tal:attributes="src string:${utool}/${icon}">&nbsp;<span tal:replace="context/Title | context/getId"/> Reports</h1>

        <a href=""
           class="link-parent"
           tal:define="parent_url python:context.navigationParent(context.aq_parent, template.getId())"
           tal:condition="parent_url"
           tal:attributes="href parent_url"
           i18n:translate="go_to_parent_url">
        Up one level
        </a>

        <div class="documentDescription" tal:content="structure context/Description">
            description
        </div>

        <metal:listingmacro define-macro="listing">
        <tal:foldercontents define="folderContents context/Reports/objectValues">
        <tal:listing condition="folderContents"
                     define="global getObjSize nocall:context/getObjSize;
                             global toLocalizedTime nocall:context/toLocalizedTime;">

            <dl>
	        <tal:entry tal:repeat="obj folderContents">

                <dt metal:define-macro="listitem"
                    tal:define="url obj/absolute_url;
                                icon python: obj.getIcon(1)">
                <a href="#" tal:attributes="href url">
                        <img src="" alt=""
                                        tal:attributes="src string:${utool}/${icon};alt context/pretty_title_or_id" />
                </a>

                <a href="#"  tal:attributes="href url"
                            tal:content="obj/pretty_title_or_id" />

                </dt>

                <dd>

                    <span tal:content="structure python:test(obj.Description(), obj.Description(), '&nbsp;')"> description </span>
                </dd>
		    </tal:entry>
            </dl>

        </tal:listing>
        
        <p class="discreet"
           tal:condition="not: folderContents" i18n:translate="description_no_items_in_folder">
         There are currently no reports for this process.
        </p>

        </tal:foldercontents>
        </metal:listingmacro>

      <div tal:replace="structure provider:plone.documentactions">
           Document actions (print, sendto etc)
      </div>

  </div>
 
</body>
</html>
