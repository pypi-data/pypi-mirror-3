

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Document Management &mdash; Camelot  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot  documentation" href="../index.html" />
    <link rel="up" title="Camelot Documentation" href="index.html" />
    <link rel="next" title="Build in data models" href="data_model.html" />
    <link rel="prev" title="Charts" href="charts.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2652891-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="data_model.html" title="Build in data models"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="charts.html" title="Charts"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="document-management">
<span id="doc-documents"></span><h1>Document Management<a class="headerlink" href="#document-management" title="Permalink to this headline">¶</a></h1>
<p>Camelot provides some features for the management of documents.  Notice that
documents managed by Camelot are stored in a specific location (either an
application directory on the local disk, a network share or a remote server).</p>
<p>This in contrast with some application that just store the link to a file in
the database, and don&#8217;t store the file itself.</p>
<p>Three concepts are important for understanding how Camelot handles documents :</p>
<blockquote>
<div><ul class="simple">
<li>The <strong>Storage</strong> : this is the place where Camelot stores its documents,
by default this is a directory on the local system.  When a file is
checked in into a storage, a StoredFile is returned.  Files are checked
out from the storage by their StoredFile representation.</li>
<li>The <strong>StoredFile</strong> : a stored file is a representation of a file stored
in a storage.  It does not contain the file itself but its name and meta
information.</li>
<li>The <strong>File</strong> Field type : is a custom field type to write and read the
StoredFile into the database.  The actual name of the StoredFile is the
only thing stored in the database.</li>
</ul>
</div></blockquote>
<div class="section" id="the-file-field-type">
<h2>The File field type<a class="headerlink" href="#the-file-field-type" title="Permalink to this headline">¶</a></h2>
<p>Usually the first step when working with documents is to use the File field
type somewhere in the model definition.  Alternatively the Image field type
can be used if one only wants to store images in that field.</p>
<dl class="class">
<dt id="camelot.types.File">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">File</tt><big>(</big><em>max_length=100</em>, <em>upload_to=''</em>, <em>storage=&lt;class 'camelot.core.files.storage.Storage'&gt;</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/camelot/types.html#File"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Sqlalchemy column type to store files.  Only the location of the file is stored</p>
<p>This column type accepts and returns a StoredFile. The name of the file is 
stored as a string in the database.  A subdirectory upload_to can be specified:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
  <span class="n">script</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">&#39;script&#39;</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../_images/FileEditor_editable.png" src="../_images/FileEditor_editable.png" />
<p>Retrieving the actual storage from a File field can be a little cumbersome.
The easy way is taking it from the field attributes, in which it will be
put by default.  If no field attributes are available at the location where
the storage is needed, eg in some function doing document processing, one 
needs to go through SQLAlchemy to retrieve it.</p>
<p>For an &#8216;task&#8217; object  with a File field named &#8216;document&#8217;, the
storage can be retrieved:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">orm</span>

<span class="n">task_mapper</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">object_mapper</span><span class="p">(</span> <span class="n">task</span> <span class="p">)</span>
<span class="n">document_property</span> <span class="o">=</span> <span class="n">task_mapper</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s">&#39;document&#39;</span><span class="p">)</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">document_property</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">storage</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="camelot.types.Image">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Image</tt><big>(</big><em>max_length=100</em>, <em>upload_to=''</em>, <em>storage=&lt;class 'camelot.core.files.storage.Storage'&gt;</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/camelot/types.html#Image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Image" title="Permalink to this definition">¶</a></dt>
<dd><p>Sqlalchemy column type to store images</p>
<p>This column type accepts and returns a StoredImage, and stores them in the directory
specified by settings.CAMELOT_MEDIA_ROOT.  The name of the file is stored as a string in
the database.</p>
<p>The Image field type provides the same functionallity as the File field type, but
the files stored should be images.</p>
<img alt="../_images/ImageEditor_editable.png" src="../_images/ImageEditor_editable.png" />
</dd></dl>

</div>
<div class="section" id="the-storedfile">
<h2>The StoredFile<a class="headerlink" href="#the-storedfile" title="Permalink to this headline">¶</a></h2>
<p>When the File field type is used in the code, it returns and accepts objects of
type StoredFile.</p>
<dl class="class">
<dt id="camelot.core.files.storage.StoredFile">
<em class="property">class </em><tt class="descclassname">camelot.core.files.storage.</tt><tt class="descname">StoredFile</tt><big>(</big><em>storage</em>, <em>name</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#StoredFile"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.StoredFile" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class for the File field type.
Stored file objects can be used within the GUI thread, as none of
its methods should block.</p>
<dl class="attribute">
<dt id="camelot.core.files.storage.StoredFile.verbose_name">
<tt class="descname">verbose_name</tt><a class="reference internal" href="../_modules/camelot/core/files/storage.html#StoredFile.verbose_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.StoredFile.verbose_name" title="Permalink to this definition">¶</a></dt>
<dd><p>The name of the file, as it is to be displayed in the GUI</p>
</dd></dl>

</dd></dl>

<p>The Image field type will return objects of type StoredImage.</p>
<dl class="class">
<dt id="camelot.core.files.storage.StoredImage">
<em class="property">class </em><tt class="descclassname">camelot.core.files.storage.</tt><tt class="descname">StoredImage</tt><big>(</big><em>storage</em>, <em>name</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#StoredImage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.StoredImage" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class for the Image field type Class linking an image and the
location and filename where the image is stored</p>
<dl class="method">
<dt id="camelot.core.files.storage.StoredImage.checkout_image">
<tt class="descname">checkout_image</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#StoredImage.checkout_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.StoredImage.checkout_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Checkout the image from the storage, this function is only to be
used in the model thread.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a QImage</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.StoredImage.checkout_thumbnail">
<tt class="descname">checkout_thumbnail</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#StoredImage.checkout_thumbnail"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.StoredImage.checkout_thumbnail" title="Permalink to this definition">¶</a></dt>
<dd><p>Checkout a thumbnail for this image from the storage, this function
is only to be used in the model thread
:param width: the requested width of the thumbnail</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a QImage</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="the-storage">
<h2>The Storage<a class="headerlink" href="#the-storage" title="Permalink to this headline">¶</a></h2>
<p>This is where the actual file is stored.  The default storage implementation
simply represents a directory on the file system.</p>
<dl class="class">
<dt id="camelot.core.files.storage.Storage">
<em class="property">class </em><tt class="descclassname">camelot.core.files.storage.</tt><tt class="descname">Storage</tt><big>(</big><em>upload_to=''</em>, <em>stored_file_implementation=&lt;class 'camelot.core.files.storage.StoredFile'&gt;</em>, <em>root=None</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper class that opens and saves StoredFile objects
The default implementation stores files in the settings.CAMELOT_MEDIA_ROOT
directory.  The storage object should only be used within the model thread,
as all of it&#8217;s methods might block.</p>
<p>The methods of this class don&#8217;t verify if they are called on the model
thread, because these classes can be used server side or in a non-gui
script as well.</p>
<dl class="method">
<dt id="camelot.core.files.storage.Storage.available">
<tt class="descname">available</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.available"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.available" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if the storage is available</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if the storage is available, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.checkin">
<tt class="descname">checkin</tt><big>(</big><em>local_path</em>, <em>filename=None</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.checkin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.checkin" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the file pointed to by local_path into the storage, and
return a StoredFile</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>local_path</strong> &#8211; the path to the local file that needs to be checked in</li>
<li><strong>filename</strong> &#8211; a hint for the filename to be given to the checked in file, if None</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>is given, the filename from the local path will be taken.</p>
<p>The stored file is not guaranteed to have the filename asked, since the
storage might not support this filename, or another file might be named
like that.  In each case the storage will choose the filename.</p>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.checkin_stream">
<tt class="descname">checkin_stream</tt><big>(</big><em>prefix</em>, <em>suffix</em>, <em>stream</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.checkin_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.checkin_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the datastream in as a file into the storage</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>prefix</strong> &#8211; the prefix to use for generating a file name</li>
<li><strong>suffix</strong> &#8211; the suffix to use for generating a filen name, eg &#8216;.png&#8217;</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">a StoredFile</p>
</td>
</tr>
</tbody>
</table>
<p>This method can also be used in combination with the StringIO module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">StringIO</span>
    
<span class="n">stream</span> <span class="o">=</span> <span class="n">StringIO</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
<span class="c"># write everything to the stream</span>
<span class="n">stream</span><span class="o">.</span><span class="n">write</span><span class="p">(</span> <span class="s">&#39;bla bla bla&#39;</span> <span class="p">)</span>
<span class="c"># prepare the stream for reading</span>
<span class="n">stream</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span> <span class="mi">0</span> <span class="p">)</span>
<span class="n">stored_file</span> <span class="o">=</span> <span class="n">storage</span><span class="o">.</span><span class="n">checkin_stream</span><span class="p">(</span> <span class="s">&#39;document&#39;</span><span class="p">,</span> <span class="s">&#39;.txt&#39;</span><span class="p">,</span> <span class="n">stream</span> <span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.checkout">
<tt class="descname">checkout</tt><big>(</big><em>stored_file</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.checkout"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.checkout" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the file pointed to by the local_path out of the storage and return
a local filesystem path where the file can be opened</p>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.checkout_stream">
<tt class="descname">checkout_stream</tt><big>(</big><em>stored_file</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.checkout_stream"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.checkout_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Check the file stored_file out of the storage as a datastream</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a file object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.exists">
<tt class="descname">exists</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.exists"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.exists" title="Permalink to this definition">¶</a></dt>
<dd><p>True if a file exists given some name</p>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.list">
<tt class="descname">list</tt><big>(</big><em>prefix='*'</em>, <em>suffix='*'</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.list" title="Permalink to this definition">¶</a></dt>
<dd><p>Lists all files with a given prefix and or suffix available in this storage</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">a iterator of StoredFile objects</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.path">
<tt class="descname">path</tt><big>(</big><em>name</em><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.path" title="Permalink to this definition">¶</a></dt>
<dd><p>The local filesystem path where the file can be opened using Python standard open</p>
</dd></dl>

<dl class="method">
<dt id="camelot.core.files.storage.Storage.writeable">
<tt class="descname">writeable</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/camelot/core/files/storage.html#Storage.writeable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.core.files.storage.Storage.writeable" title="Permalink to this definition">¶</a></dt>
<dd><p>Verify if the storage is available and writeable</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">True if the storage is writeable, False otherwise</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Document Management</a><ul>
<li><a class="reference internal" href="#the-file-field-type">The File field type</a></li>
<li><a class="reference internal" href="#the-storedfile">The StoredFile</a></li>
<li><a class="reference internal" href="#the-storage">The Storage</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="charts.html"
                        title="previous chapter">Charts</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="data_model.html"
                        title="next chapter">Build in data models</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/doc/documents.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="data_model.html" title="Build in data models"
             >next</a> |</li>
        <li class="right" >
          <a href="charts.html" title="Charts"
             >previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>

<br/>
<a href="http://example.com/my_article.html#disqus_thread">Comments</a>
<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */

  /** var disqus_developer = 1 **/

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://camelot.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=camelot">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2009 - 2011, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
<div class="footer">
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

<script type="text/javascript">
var disqus_shortname = 'camelot';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/camelot/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



  </body>
</html>