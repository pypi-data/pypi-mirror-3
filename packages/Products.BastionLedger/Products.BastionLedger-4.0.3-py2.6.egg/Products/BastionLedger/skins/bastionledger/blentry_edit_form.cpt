<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionledger">
 
<body>
 
    <div metal:fill-slot="main"
         tal:define="errors options/state/getErrors;
                   utool context/@@plone_portal_state/portal_url;">

      <h1><img src="" alt="" tal:define="icon python:context.getIcon(1)" tal:attributes="src string:${utool}/${icon}"/>&nbsp;Edit Entry</h1>

        <a href=""
           class="link-parent"
           tal:define="ledger_url python:context.navigationParent(context, template.getId())"
           tal:condition="ledger_url"
           tal:attributes="href ledger_url"
           i18n:translate="go_to_ledger_url">
        Up one Level
        </a>

      <form name="edit_form"  action="."  method="post" 
            tal:attributes="action string:${context/getId}/${template/getId}" >

             <div tal:define="error errors/title|nothing;
                  Title request/title | context/Title"
                  tal:attributes="class python:test(error, 'field error', 'field')">

                 <div class="label">Description</div>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="title" name="title" value="" size="50"
                         tal:attributes="value Title;"/>
             </div>

             <div tal:condition="python: context.status() not in ('posted', 'reversed', 'cancelled')"
                  tal:define="error errors/amount|nothing;
                  Amount request/amount | context/amount"
                  tal:attributes="class python:test(error, 'field error', 'field')">

                 <div class="label">Amount</div>

                 <div tal:content="error">Validation error output</div>

                 <input type="text" id="amount" name="amount:currency" value="" size="12"
                         tal:attributes="value Amount;"/>
             </div>

             <div tal:condition="exists: context/posted_amount"
                  tal:define="error errors/posted_amount|nothing;
                  Amount request/posting_amount | context/posted_amount"
                  tal:attributes="class python:test(error, 'field error', 'field')">

                 <div class="label">Posting Amount</div>

                 <div tal:content="error">Validation error output</div>

                 <div class="formHelp" i18n:translate="help_posted_amount">
                     This is a multi-currency transaction.  The underlying ledger FX valuation
                     of this entry is/will be fixed at this amount.
                 </div>

                 <input type="text" id="posting_amount" name="posting_amount:currency" value="" size="12"
                         tal:attributes="value Amount;"/>
             </div>

             <div>
                 <input class="context"
                        
                        type="submit"
                        name="form.button.Edit"
                        value="Edit"
                        i18n:attributes="value" />
             </div>
  

             <input type="hidden" name="form.submitted" value="1" />

      </form>


    </div>
 
</body>
</html>
