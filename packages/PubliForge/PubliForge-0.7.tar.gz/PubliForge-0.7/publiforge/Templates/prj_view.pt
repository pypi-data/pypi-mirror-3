<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="base">
<head><title></title></head>
<body>
<div id="mainPanel" metal:fill-slot="main">
  ${form.begin()}
  <!-- ............................... Buttons ............................ -->
  <div id="buttons">
    <div class="first">
      ${request.breadcrumbs.back_button()}
    </div>
    <div class="last">
      <div tal:condition="i_editor" tal:omit-tag="">
        ${form.button(route('project_edit', project_id=project.project_id), _('Edit'), class_='buttonMain')}
      </div>
      ${form.submit('exp!.x', _('Export'))}
      ${form.button(route('project_dashboard', project_id=project.project_id), _('View dashboard'))}
    </div>
    <hr class="hidden"/>
  </div>
  <div id="main">
    <h2 id="subtitle" class="project" title="${_('Project settings')}">${project.label}</h2>
    <!-- ................................ Tabs ............................ -->
    <div id="tabSet">
      ${tab_set.toc('tabProject')}
      <!-- ...... Description ..... -->
      ${tab_set.tab_begin(0, 'd')}
      ${form.grid_item(None, _('Status:'), _(PROJECT_STATUS[project.status]), class_='')}
      ${form.grid_item(None, _('Project label:'), project.label, class_='')}
      ${form.grid_item(None, _('Description:'), project.description, class_='')}
      <div tal:condition="project.deadline" tal:omit-tag="">
        ${form.grid_item(None, _('Deadline:'), project.deadline.strftime(_('%m/%d/%Y')), class_='')}
      </div>
      ${tab_set.tab_end()}
      <!-- ......... Roles ........ -->
      ${tab_set.tab_begin(1, 'r')}
      <div class="listActions" tal:condition="project.roles">
        <div class="first"><img src="/Static/Images/role22.png" alt="${_('Roles')}"/></div>
        <div class="last"> </div>
      </div>
      <table class="list smallList" tal:condition="project.roles">
        <caption>${_('Roles')}</caption>
        <tr>
          <th>${_('Label')}</th>
          <th>${_('Description')}</th>
          <th>${_('Operators')}</th>
        </tr>
        <tr tal:repeat="role project.roles">
          <td>
            <a href="${route('role_view', project_id=project.project_id, role_id=role.role_id)}">
              ${role.label}
            </a>
          </td>
          <td class="info">${role.description}</td>
          <td>${len(role.users)}</td>
        </tr>
      </table>
      <div tal:condition="not project.roles">${_('No role.')}</div>
      ${tab_set.tab_end()}
      <!-- ...... Processings ..... -->
      ${tab_set.tab_begin(2, 'p')}
      <div class="listActions" tal:condition="project.processings">
        <div class="first"><img src="/Static/Images/processing22.png" alt="${_('Processings')}"/></div>
        <div class="last"> </div>
      </div>
      <table class="list smallList" tal:condition="project.processings">
        <caption>${_('Processings')}</caption>
        <tr>
          <th>${_('Label')}</th>
          <th>${_('Description')}</th>
        </tr>
        <tr tal:repeat="processing project.processings">
          <td>
            <a href="${route('processing_view', project_id=project.project_id, processing_id=processing.processing_id)}">
              ${processing.label}
            </a>
          </td>
          <td class="info">${processing.description}</td>
        </tr>
      </table>
      <div tal:condition="not project.processings">${_('No processing.')}</div>
      ${tab_set.tab_end()}
      <!-- ......... Tasks ........ -->
      ${tab_set.tab_begin(3, 't')}
      <div class="listActions" tal:condition="project.tasks">
        <div class="first"><img src="/Static/Images/task22.png" alt="${_('Tasks')}"/></div>
        <div class="last"> </div>
      </div>
      <table class="list smallList" tal:condition="project.tasks">
        <caption>${_('Tasks')}</caption>
        <tr>
          <th>${_('Label')}</th>
          <th>${_('Description')}</th>
          <th>${_('Operator')}</th>
        </tr>
        <tr tal:repeat="task project.tasks">
          <td>
            <a href="${route('task_view', project_id=project.project_id, task_id=task.task_id)}">
              ${task.label}
            </a>
          </td>
          <td class="info">${task.description}</td>
          <td>${operator_labels['%s%s' % (task.operator_type, str(task.operator_id))]}</td>
        </tr>
      </table>
      <div tal:condition="not project.tasks">${_('No task.')}</div>
      ${tab_set.tab_end()}
      <!-- ..... Documentation .... -->
      <!-- ........ Members ....... -->
      ${tab_set.tab_begin(4, 'u')}
      <div tal:define="mbr_view load: mbr_view.macro.pt" metal:use-macro="mbr_view"/>
      <div tal:condition="not members">${_('No team.')}</div>
      ${tab_set.tab_end()}
      <!-- ..... Member groups .... -->
      ${tab_set.tab_begin(5, 'g')}
      <div tal:define="mbr_groups_view load: mbr_groups_view.macro.pt" metal:use-macro="mbr_groups_view"/>
      <div tal:condition="not member_groups">${_('No group.')}</div>
      ${tab_set.tab_end()}
    </div>
  </div>
  ${form.end()}
</div>
</body>
</html>
