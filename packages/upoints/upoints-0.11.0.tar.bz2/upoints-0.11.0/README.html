<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.4: http://docutils.sourceforge.net/" />
<title>upoints</title>
<link rel="stylesheet" href="doc/docutils.css" type="text/css" />
</head>
<body>
<div class="document" id="upoints">
<h1 class="title"><tt class="docutils literal"><span class="pre">upoints</span></tt></h1>
<div class="section">
<h1><a id="modules-for-working-with-points-on-earth" name="modules-for-working-with-points-on-earth">Modules for working with points on Earth</a></h1>
</div>
<div class="section">
<h1><a id="introduction" name="introduction">Introduction</a></h1>
<p><tt class="docutils literal"><span class="pre">upoints</span></tt> is a collection of <a class="reference" href="http://www.gnu.org/licenses/">GPL v3</a> licensed modules for working
with points on Earth, or other near spherical objects.  It allows you to
calculate the distance and bearings between points, mangle
<a class="reference" href="http://www.cs.colorado.edu/~tuna/xearth/">xearth</a>/<a class="reference" href="http://xplanet.sourceforge.net/">xplanet</a> data files, work with online UK trigpoint databases,
<a class="reference" href="http://weather.noaa.gov/">NOAA</a>'s weather station database and other such location databases.</p>
<p>Previous versions of <tt class="docutils literal"><span class="pre">upoints</span></tt> were called <tt class="docutils literal"><span class="pre">earth_distance</span></tt>, but the
name was changed as it no longer reflected the majority of uses the
packages was targeted at.</p>
</div>
<div class="section">
<h1><a id="requirements" name="requirements">Requirements</a></h1>
<p><tt class="docutils literal"><span class="pre">upoints</span></tt> does not strictly depend on any modules that aren't included
in <a class="reference" href="http://www.python.org/">Python</a>'s standard library, and as such should run with Python 2.5 or
newer <a class="footnote-reference" href="#id2" id="id1" name="id1">[1]</a>.  If <tt class="docutils literal"><span class="pre">upoints</span></tt> doesn't work with the version of Python you
have installed, drop me a <a class="reference" href="mailto:jnrowe&#64;ukfsn.org">mail</a> and I'll endeavour to fix it.</p>
<p>However, <tt class="docutils literal"><span class="pre">upoints</span></tt> can make use of <a class="reference" href="http://codespeak.net/lxml/">lxml</a> if it is installed on systems
that don't have the <tt class="docutils literal"><span class="pre">cElementTree</span></tt> module.  If neither
<tt class="docutils literal"><span class="pre">cElementTree</span></tt> nor <tt class="docutils literal"><span class="pre">lxml</span></tt> are installed it falls back to
<tt class="docutils literal"><span class="pre">ElementTree</span></tt>, but will operate much slower on XML data.</p>
<p>The modules have been tested on many UNIX-like systems, including Linux,
Solaris and OS X, but it should work fine on other systems too.  The
modules and scripts contain a large collection of <tt class="docutils literal"><span class="pre">doctest</span></tt> tests that
can be checked with <tt class="docutils literal"><span class="pre">./setup</span> <span class="pre">test_code</span></tt>, and the code examples in the
documentation can be tested with <tt class="docutils literal"><span class="pre">./setup</span> <span class="pre">test_doc</span></tt>.</p>
<table class="docutils footnote" frame="void" id="id2" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id1" name="id2">[1]</a></td><td>If you still use Python v2.4 only small changes are required, for
example to the base class definitions and the unrolling of
conditional expressions.</td></tr>
</tbody>
</table>
<table class="docutils footnote" frame="void" id="id3" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id4" name="id3">[2]</a></td><td>Some tests may fail due to rounding errors depending on the
system the tests are being run on, but such instances should be
obvious even to the casual user and some effort has been put in
to reduce the likelihood of such failures.</td></tr>
</tbody>
</table>
</div>
<div class="section">
<h1><a id="example" name="example">Example</a></h1>
<p>The simplest way to show how <tt class="docutils literal"><span class="pre">upoints</span></tt> works is by example, and here
goes:</p>
<div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">from</span> <span class="nn">upoints</span> <span class="k">import</span> <span class="n">point</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Home</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="mf">52.015</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.221</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Telford</span> <span class="o">=</span> <span class="n">point</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="mf">52.6333</span><span class="p">,</span> <span class="o">-</span><span class="mf">2.5000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;</span><span class="si">%d</span><span class="s"> kM, with an initial bearing of </span><span class="si">%d</span><span class="s">°&quot;</span>
<span class="gp">... </span>      <span class="o">%</span> <span class="p">(</span><span class="n">Home</span><span class="o">.</span><span class="n">distance</span><span class="p">(</span><span class="n">Telford</span><span class="p">),</span> <span class="n">Home</span><span class="o">.</span><span class="n">bearing</span><span class="p">(</span><span class="n">Telford</span><span class="p">)))</span>
<span class="go">169 kM, with an initial bearing of 294°</span>
</pre></div>
<p>All the class definitions, methods and independent functions contain
hopefully useful usage examples in the docstrings.  The <tt class="docutils literal"><span class="pre">html/</span></tt>
directory contains the preprocessed <a class="reference" href="http://epydoc.sourceforge.net/">epydoc</a> output for reference.</p>
<p>There is some accompanying text and examples for <tt class="docutils literal"><span class="pre">point.py</span></tt>, formerly
<tt class="docutils literal"><span class="pre">edist.py</span></tt>, available in <a class="reference" href="doc/geolocation_and_pathcross.html">geolocation and path cross</a>.  More examples
are available for <tt class="docutils literal"><span class="pre">xearth.py</span></tt> in <a class="reference" href="doc/xearth_and_pathcross.html">xearth and path cross</a>.  Some
background and more examples for <tt class="docutils literal"><span class="pre">trigpoints.py</span></tt> is online in
<a class="reference" href="doc/trigpointing_and_point_py.html">Trigpointing and point.py</a>.  Usage examples for <tt class="docutils literal"><span class="pre">cities.py</span></tt> is
available in <a class="reference" href="doc/python_cities.html">Cities and cities.py</a>.  And finally, <a class="reference" href="doc/pythons_on_a_plane.html">Pythons on
a plane</a> contains information on <tt class="docutils literal"><span class="pre">weather_stations.py</span></tt>.  All the
examples in the <tt class="docutils literal"><span class="pre">doc/</span></tt> directory can be executed using <tt class="docutils literal"><span class="pre">./setup.py</span>
<span class="pre">test_doc</span></tt>.</p>
</div>
<div class="section">
<h1><a id="thanks" name="thanks">Thanks</a></h1>
<p>The following people have submitted patches, testing and feedback:</p>
<blockquote>
<ul class="simple">
<li>Cédric Dufour - <tt class="docutils literal"><span class="pre">edist.py</span></tt>'s CSV import, and flight plan output</li>
<li>Kelly Turner - <a class="reference" href="http://www.cs.colorado.edu/~tuna/xearth/">Xearth</a> import idea, and copious testing</li>
<li>Simon Woods - Testing</li>
</ul>
</blockquote>
</div>
<div class="section">
<h1><a id="api-stability" name="api-stability">API Stability</a></h1>
<p>API stability isn't guaranteed across versions, although frivolous
changes won't be made.</p>
<p>When <tt class="docutils literal"><span class="pre">upoints</span></tt> 1.0 is released the API will be frozen, and any changes
which aren't backwards compatible will force a major version bump.</p>
</div>
<div class="section">
<h1><a id="limitations" name="limitations">Limitations</a></h1>
<p>The modules assume the caller will take care of significant digits, and
output formatting <a class="footnote-reference" href="#id3" id="id4" name="id4">[2]</a>.  All results are returned with whatever
precision your Python install or system generates; unintuitive float
representation, rounding errors, warts and all.</p>
<p>The reasoning is simple, the caller should always know what is required
and any heuristics added to the code would be just that -- guesses,
which can and will be wrong.</p>
<p>The <tt class="docutils literal"><span class="pre">upoints</span></tt> modules do not take flattening in to account, as in
calculations based in most populated areas of the earth the errors
introduced by ignoring the earth's flattening are quite small.  Future
versions may change if the limitation becomes an issue in real use.</p>
<p>Although not really a limitation one should also be careful to use
data sources that are based around the same datum, and even within two
data sources that use the same datum you should make sure they use the
same representations.  It isn't unusual to find data sources from the
USA that specify longitudes west of Greenwich as positive for example.</p>
<table class="docutils footnote" frame="void" id="id5" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a name="id5">[3]</a></td><td>A future release may include more standard output definitions,
but there is no intention to add &quot;magic&quot; data mangling.</td></tr>
</tbody>
</table>
</div>
<div class="section">
<h1><a id="hacking" name="hacking">Hacking</a></h1>
<p>Patches are most welcome, but I'd appreciate it if you could follow the
guidelines below to make it easier to integrate your changes.  These are
guidelines however, and as such can be broken if the need arises or you
just want to convince me that your style is better.</p>
<blockquote>
<ul class="simple">
<li><a class="reference" href="http://www.python.org/dev/peps/pep-0008/">PEP 8</a>, the style guide, should be followed where possible.</li>
<li>While support for Python versions prior to v2.5 may be added in the
future if such a need were to arise, you are encouraged to use v2.5
features now.</li>
<li>All new classes and methods should be accompanied by new
<tt class="docutils literal"><span class="pre">doctest</span></tt> examples, and <a class="reference" href="http://epydoc.sourceforge.net/">epydoc</a>'s epytext formatted descriptions if
at all possible.</li>
<li>Tests <em>must not</em> span network boundaries, see <tt class="docutils literal"><span class="pre">test.mock</span></tt> for
workarounds.</li>
<li><tt class="docutils literal"><span class="pre">doctest</span></tt> tests in modules are only for unit testing in general,
and should not rely on any modules that aren't in Python's standard
library.</li>
<li>Functional tests should be in the <tt class="docutils literal"><span class="pre">doc</span></tt> directory in
<a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> formatted files, with actual tests in <tt class="docutils literal"><span class="pre">doctest</span></tt>
blocks.  Functional tests can depend on external modules, but they
must be Open Source.</li>
</ul>
</blockquote>
<p>New examples for the <tt class="docutils literal"><span class="pre">doc</span></tt> directory are as appreciated as code
changes.</p>
</div>
<div class="section">
<h1><a id="bugs" name="bugs">Bugs</a></h1>
<p>If you find a bug don't hesitate to drop me a <a class="reference" href="mailto:jnrowe&#64;ukfsn.org">mail</a> preferably including
a minimal testcase, or even better a patch!</p>
<!-- :vim: set ft=rst ts=2 sw=2 et: -->
</div>
</div>
<div class="footer">
<hr class="footer" />
<a class="reference" href="README">View document source</a>.
Generated by <a class="reference" href="http://docutils.sourceforge.net/">Docutils</a> from <a class="reference" href="http://docutils.sourceforge.net/rst.html">reStructuredText</a> source.

</div>
</body>
</html>
