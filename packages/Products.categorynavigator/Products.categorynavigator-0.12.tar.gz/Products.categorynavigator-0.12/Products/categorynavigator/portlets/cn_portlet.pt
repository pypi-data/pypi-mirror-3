<div metal:define-macro="portlet" tal:omit-tag="">

    <tal:block>

        <dl id="category-selector" class="portlet">

            <dt class="portletHeader">Maatregelen</dt>
            
            <div class="cn-description" tal:content="view/Description">
                description
            </div>

            <dd class="portletItemSingle odd" tal:define="selectedCategories request/Subject | nothing;
                                                          portal context/@@plone_portal_state/portal;">
                <div tal:condition="view/vtcExists">
                    <ul>
                         <li tal:repeat="vtcCat view/getVTCategories">
                                 <div class="cn-category-title" tal:content="python: vtcCat.title">
                                     category
                                 </div>
                                 <ul>
                                     <li class="nc-category" tal:attributes="class python:selectedCategories is not None and cat in selectedCategories and 'nc-category nc-category_selected' or 'nc-category'" tal:repeat="cat vtcCat/keywords">
                                         <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString([], subtracting=cat) or portal.absolute_url() + view.generateQueryString([], adding=cat)">
                                             <span tal:condition="python:selectedCategories is not None and cat in selectedCategories" class="marker">
                                                 &gt;
                                             </span>
                                             <span tal:condition="python:selectedCategories is None or cat not in selectedCategories" class="marker">
                                                    +
                                             </span>
                                             <span tal:content="cat">
                                                 category
                                             </span>
                                         </a>
                                     </li>
                                 </ul>
                         </li>
                    </ul>
                 </div>
                 
                 <div tal:condition="not: view/vtcExists">
                    <ul>
                         <li tal:repeat="cat view/getSiteCategoriesAsList" tal:attributes="class python:selectedCategories is not None and cat in selectedCategories and 'nc-category nc-category_selected' or 'nc-category'">
                            <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString(selectedCategories, subtracting=cat) or portal.absolute_url() + view.generateQueryString(selectedCategories, adding=cat)">
                                <span tal:condition="python:selectedCategories is not None and cat in selectedCategories" class="marker">
                                    &gt;
                                </span>
                                <span tal:condition="python:selectedCategories is None or cat not in selectedCategories" class="marker">
                                       +
                                </span>
                                <span tal:content="cat">
                                    category
                                </span>
                             </a>
                         </li>
                    </ul>
                 </div>
            </dd>

        </dl>

    </tal:block>

</div>