from string import maketrans
import random
import re
import hashlib
import string

ZOMBISH_LETTER_MAPPING = {
    "a": "Ar",
    "b": "AA",
    "c": "Ab",
    "d": "RA",
    "e": "bb",
    "f": "BA",
    "g": "ll",
    "h": "bG",
    "i": "Gn",
    "j": "GA",
    "k": "GG",
    "l": "nh",
    "m": "hh",
    "n": "MM",
    "o": "hr",
    "p": "hA",
    "q": "hb",
    "r": "rr",
    "s": "hG",
    "t": "Gg",
    "u": "GM",
    "v": "nr",
    "w": "Mr",
    "x": "Gl",
    "y": "nn",
    "z": "KA",
    "A": "aR",
    "B": "aa",
    "C": "aB",
    "D": "ra",
    "E": "BB",
    "F": "ba",
    "G": "LL",
    "H": "Bg",
    "I": "gN",
    "J": "ga",
    "K": "gg",
    "L": "NH",
    "M": "HH",
    "N": "mm",
    "O": "HR",
    "P": "Ha",
    "Q": "HB",
    "R": "RR",
    "S": "Hg",
    "T": "gG",
    "U": "gm",
    "V": "NR",
    "W": "mR",
    "X": "gL",
    "Y": "NN",
    "Z": "ka"
}

REVERSE_ZOMBISH_LETTER_MAPPING = {k: v for v, k in ZOMBISH_LETTER_MAPPING.iteritems()}
VALID_LETTERS = []

for k, v in ZOMBISH_LETTER_MAPPING.iteritems():
    for l in v:
        if not l in VALID_LETTERS:
            VALID_LETTERS.append(l)

BAD_WORD_SHA1S = ['74a4297365735b6c107b85e034347ce013eeae01', 'e0e18955d533e74a5351d5607d2f865d9fbe11e1', '540837e91f91c03c7bbbc24b69cb099d22a841f4', '666789aff6f0018d2e4cf718304c1a19f706cbb9', '8a54cc42562083149d1ed9c6ec99ddf2d8fab91c', '531119893fe30f33435cbae9c4d5444246debd09', '86a5c26f3b38e1d5b1ed15b3b6faf207441e6f53', 'f0bc8cda60f9806593744fc234b222d06fc937f4', '3d0405fe6d96ff4d6eae29fcf54871e38aa9c6cc', '5a6829cf110c007985d094ed7671cdc67ccad1e5', 'b8e3a38c3983b92b50055911c431b85eea88b0af', '4e3193331533ab82fa7d23612dcfadab41116d1d', 'fc224f2c3ac166965e2a45f91a23839b85ede24f', '3285af9eedadfc63a3806e85c8c06187ab4d0fca', 'd5b52124e8163f8afb25272fcd2993fe5f5f2a45', '9d3e79df2dc14212972ae5c556dfaf66cd4878d5', '2e9da8a1da64de4bc5faf7077ac735296b2a780b', 'e5e0c0a87be00fa5b7b5f687da5f7c0881e58f0d', '28e1bb38e3016e807de7ba854d310b536849e4a6', '61a91e2c746c89ee196a8d6405e159d2418f7c60', '97f87c14f8e48e7e226190c77a22c16bf5a88315', '67470f7d5ff1a80bd458d5b5711f3e55406ffdd0', '149f4c39fa2a88da4e00b85a795e1885b8aad4f7', 'cbd7b9d8b84782f43a9efbda03dac651949982e7', '55e0aa148f148ab1d46b633e83134d130fa9a709', 'bc4a26308f29d2e814e3f396a893d579e1f54f02', '2c82b2d5584bbffbc62ab9b7001438a9809beb7f', '7a71feae9f408177ccf61d58387395221811cf4c', 'a747e81cbca2cf2c2546d779e53eba4ec7455040', '2b21eafef31bbfa9b15d0af031dcb86dc9e545b2', 'faf4b101e0b32b1405b00a4036040e0b1a22882d', '9e3d61a6131d891950c51dd06b903679b5c4c9b8', 'd058fac6bba05d32e53ec1e167d81ca2e7665e70', '9942eb698d686a1a9b998c9476c258c9aafe1293', 'd2433614e75096963e0c4c7eef3d977f5d98b495', '9e325ce34b98f9704e8070c6f8687ce054f005c5', '097b6efe50dcd775f5d7dbfa0e8dbe8c8f4c2dc7', '7f503657e909b851d988a015286c3bf10d32aa93', 'c4107c86edd84ecdfca1d9b795fddb11b353008d', '8106bc4e517faad1c2f1f30a029224b3167f83fd', '807acd61b28d763dace0ab53dc1db211a9cb5dd0', '76c54245f3657706eecd6acbe2cdc204650ed092', '6fbf5d5685f1936b3ddd382237478b56a0c4ed0e', '7843f9623df90c487c94abf2521de7f90fc91cdd', 'a56e7b1f5c822a678289aff3bfa7f3ff09dd1af3', '58f7c55efa650924ad8006c424df3c51648ee96b', '26cb1af6f5d38a4defcd7461e64fade8752127e4', '579efa51d770b36547bc5c493c8ca7b750fa2f7d', '1f11f04ca8a528b70a320c4991143fc14ca9ce07', 'ffcd0d4ae5093b26561a8fca6096311d2a7df2dd', '755d3ffeb93ea2549e2bb8c8d49e60bf92b15f8a', '6c745098db2588df94808e4de38bb57bd14ea3d3', '64f74105e8d2f019a8a1aafa478a05eea4f343ea', '32799caae956abd598340df2c7a096dc8ea1e906', 'e1fc850eec208673b766281c093586f24046da62', '810035a11572c3e9dea0947376c35bbd0d6a1429', 'a1c79d345c0eb74679957f8acd04a5d7daf02d81', '62c25b59cd0ffd8a738a97ee052939f90cc9a421', 'e2ebbd7d504c5e4b47f3e130649151dc5cf355ef', '180481b8278b20daa9df98351dc96762dde37761', '04bcf789c82a5b6079de7a15014e261cb0a9825e', '0ebeadec39a44538c1ecca90713971c956227621', 'bc99c4bc648cf6cd9ca1e52fc51e06a5b768fb2c', '3d61943d80528aea50e1199bb20ddd714a2c4b18', 'cae7d64249d61a5417bb2592b389f9f9e7c3cbc8', '13b00fbc9da3818d080e92923cd2a7006830fc02', '7ccf656841628096f935d24149c9501be29b11c0', '41098d044b8668cd4300fa835f306252f39b2325', '26b6814d19965ecfdf01a7d0a21fce3536567120', 'cfbfa04462abbc9e8009057581bb45348a4c3a93', 'f266f5668150fe2ce8b33196b0f96ecf8855be4a', '7baacfff3bced0e0bc2ab16b63049ac1fb18a15a', '1b99738c6a82ea273cc7e7a2e81e88e940f2220f', '2324b408bd50b5e5a540000ce21f319c7d59d0d6', 'a0c678616db2a6128dd55af9842568f51fed64df', 'f8709496ee6002b5174ac0b0bfdc3fb1e3844ebf', 'de56a83bc36ac47b33324164a681294e30dbcf03', 'ec19d1e6ebc5561069d71b3ba2958b0cb1a84723', '06360bb2a813ff952e394286266a108cbd13714f', 'a269e24a0c0e29408b54c935ef6bd4818e61a5a8', '66ff1d22ed26adb6adc15cb2f87b59cb61d2d54f', 'b83faf32eefbd3eac8aa6f02c91fe4628664263a', '6c2c707e0d1f8e86fd9b5d3989201e7c75737950', 'd92d875cc0775b1cc8a9125bead4dbf840999858', '48770dfd3d23f09e02c2c70a37039de833009894', '6b86036bcaa1775b61ffca0406a8beb12e536ead', 'bb2202f38a5d70849a24466e24679dbb400901f0', '9a780aa0bb67eb4a88f5e45d153b78e17e8fcfb7', 'bc8b92e977301d0e35f53fe15d304d10e28ddcf3', '6d2705f87117603eb8396ea0ee6b9673317857f3', '6623a746cbaa591c50682a2ddd708660626609dd', '6be46662fb74a8a8affcaba45eae659bc5f9caa9', 'dc8b0b70574dbe838f27f918970043a7b3efc86a', '7327a89fda77ee4c71a4672281aeb418f76c4b54', 'c0e4c78af86ecbd0526fb47130c718948770699a', 'd6132624d10d5825aaa12d0eb471c2d1660eb860', '174f8037317a5bcd149b3c6b2629a9dd8d664f5f', 'dc4aee52e86c2b5b7d5f1406cd3cd701d55a1115', '8f29949c28fc25662aaab699adca56089de9bf9f', 'ffff3477a373c7d00b0f94dfb85c6df895962348', 'c9721c9e20e0da98f1cc81539b4514f002bec671', 'b467b0eda7936c8c77ae2ae16f1f82785154ca17', '63c3ea5b0e579f7aec8c253d53e9aeadce619f74', 'ecdcb8632194d3dcb87d00686b162a2bafb0fbc3', '8f6d4a3505bbd0ce7af49cff6fdac9bd0777c80e', '69a81c38266326ecb438e58e940bf9e26c7369e0', '581b46bd68fac4aa98a02b2fabfb2f8ed8287088', '61810241b6d720bc9cf28e8a4282f0fdf4099d3b', 'cc5a32eb62a66a887bb8decb697fabbddccadc30', 'a5332254d71129e69ee07fd42f68bfb361d6cf48', '4a1450ad6d7da5e9008d5f81db57594810b0fd83', '5df23f5917c523d7131a331c18009af96be06dc4', '7f133b2b30980a528ae20efc8dbddc2afbd4eef9', 'e96e09c97c160f130aba4b5ae0589861253e0208', '7d580d3f1a124fa8256dae33efda9c00ae68e7e2', '082d4cfdca498d1e49a6466de0dcd3851500e9f7', '1219eae2ebd8608bb4f2ea25b8a1d1ddf8792240', 'b3599b578fcc782af9f312f1f9d2d2ded1e2e714', 'ab8772b95851dc87daba09deba1fadd21527d971', '641b29dccca3839e691df3dd3a12605f32a25e3f', 'bc5a44c95fb0a47e2adc9b973e26ffefccecf9d5', '2f77f3ec2adbfd32a729d01aac988bc1273ea64a', '195028153f175b4519d43658b8dd722c01216878', 'a724b56acebfc52dcec35a8f8e2713f8e877d832', 'eac9159146e38e4424594e52ae418736924605a4', '8c9dc9686879985aa72c6c118143a8031cf9f559', 'b5a06f00909ccf8cdbba574084dff7837698774c', 'eaf42a99834830647e206fa268d816c467bcb345', '0512c8e32850c598343ffdd1ddfba8ab8aa22271', '7c0bdf13e57b6330fb4b8db4e5d1effd4bb10598', '9c1ca9b504a60a6d1e6e88c080955cbd123c76ec', 'b2917257bb11e96bdac4c32d3533cfb82506cd5b', 'bcff6cf4d3a94403b07e46a4f4ca59ddd0e119f5', 'c6f61a3fb02414445505cb6bd4416d9a4045260c', 'dfbba6752465bec0209e94898f6525c53f7e677a', '74f131f6d3afc2c053ec0f48e95e88ebc7799db2', '337c9ad9a08378f54211bb9141808618cdeb0b47', 'd2ca5005532010b8e4f2c0ba8d45046bbaebc9c0', '868ddf608f922e08a3c281c98286c89574898f8f', '4591be1c58b7b954d73630865f9e64ba6445ea47', 'f0cdfcb50aa0bea8e35aabfbb63a4037825e59b3', '46844855499713f4d693dffc053ea785309dd762', 'af94ef294a835b6d162a3752aeff845e7d2d6d60', '450cb84e7e1bd554fa2a318644860dd029ecd163', 'da62423d3acc45800bd5fbea93ee17917a79b298', '876647977fd005f7eab4681817d8ec95d3ddbafc', '82c2ebd0824723a8a7a3da71a41a3c3149380091', 'f44691bd4d3f35674aed19b766653e1476df7463', '7fe1e202ea26389e93483d1f46a90e017a0b06cd', '5838903532d749bd6171c8ca84ea55bdd59838b0', 'c96916c4ebae3cee333b1bfcb1d2e1c6383670db', 'ae95092fa28e19432d8f12f81aec5157faabdbf0', '3a75def94b98208ab18f76670316d77cf584462e', 'b3642f6e5f53fd0bb9e1c9fc163ffbca3d00d989', 'ab0f37ea4ab2633a17248c0165b4eb1e56c2c3c4', '8099e239e901d197b69e1ebff89e179b93fd8902', '27b070a93b65923efb18e5ce4d2c2c79c56220bb', '2554fab316fbb12f093b74852c9ed01c071e7bd0', '5c3b0ace776870484c851e194637f6af2f562032', '2e5304fa9ee7d29f5296356a2070b2dbea64d65e', '6f014e8bc8f386055caa50374287aa1938e1ecdc', '921f5f93f47447369b07442197b298c807ffd73f', 'a968d43478abb3462a238f015442857e9126d19d', '9cdaee6cc41399b86b4c71c5bc82568a396b8a3c', '34e209d8131973758cbea46308bd3610bc66334b', '3d1e4c66bc9e57f30897c66d0e43e7c0ae8a1c73', '27bc0234c37c1ab56aaedc99e7c9cf57ceaa191d', '840ed1f019b16f78650e2587e42d888f48eaa724', '245bd1c0bf855c6c9edbbc1642815d59838802e8', '7127fae89974b1c323c977e2fbf6e0aacdd4f701', '9b4992f9095ca7d60e3e467b84b75259fe76173e', 'fa36cb1c46904477e716f6f490bbca402c6e7808', '5cc44c54c973b898dbc93c2dec3a13e59e02a373', '523514dae9842d80e3e1c0c17353ca96da13f4ce', '447e7ac5a9aef1c2e096e70c969d5024bda6baaa', '1bff016ef7669a9e94cb996e4bd3f1c73189a859', '5c9178150a2e3d14bcce171b296296d3f2d08464', '69d396d266f235b74f988d9c29b32a4301e05827', '9324702348d8f30cf8c99b672286c62805417ce3', '9149f06a521ee3230dc5825909a4df75ead922b5', '510e70573bca51a824e345d5cff7448f740203fb', '9365c2ba9b62db6fec6366a78e534ca97249b4f8', '6dc17b64b544b9fc692f5f6f38bc3254c9d4f0d4', '3fec80d8b65cab10eb4b88323f64c201480190ef', '6f4c4cc83f34b063e5b0ccce151e44f4dcc233e4', '307047711c406ce65fa634f83027a4d25e38484b', '3884a5548634fda8f937f51c3a5397fa2bd1dcc0', 'a98ad99ae5ea1c7493dadee1078b4562e8f5f677', '87635340d332e11e30873341c5a2feeab12a32ae', '84adb93d36cb553c8fd47918dc6a6a0c102482ba', 'c10879a536b888c21b5ae27341acd66b75c2a09d', '324e4785d1302b06fd172ba3347e6162e9bccefe', '8bbfb23d05e4f9a1c20589a7ab77a896c4c21329', '34210979361f7ed821f0d21429965b9ccef00b10', 'dbfd71d987baafa03e32416302f41146aa05fd82', '9bff4fa606e39cad1aa94850e09b8db2cdd386ed', '46e955108e0ea67be7ab4a2faf2463b517e66a34', '7b758cbf4bf58184204b535fc0343ade3bcffaed', '60933ff3da52bd815f27360d3974424de402af90', 'd977078247822fb289ae1dbc03e552dfd902adbc', '9057a25d21e1f676c441019bf0dbd2cb10dfb563', '8facf342691143f5a7dea4e7ef5867bc3bf02110', '98c2f6b3c36e3d414ddc6e82ff868ed7db79910e', '486e42a249d6c7d1c87097d0e671ec7f0ebbb0f2', '272d19f2952781b02319ee0668c3349186d54a7b', 'b67ea5bb22d0083ef38ea611f0ef243084bfb768', 'f839285c92f4984a73ed980cc1e66f08142c045f', '7be42345af70a9a5bf343195f7d1292a64a1d9e8', '7ef34a651ba297fe59831497bf8c06f593e2f7ad', '44dadead9563dadd11d96466c02ff2ddd217fcfa', '252d9e5637dcbd5675aa62602dda7fbaa56d63ef', '1fa86438b81ff9f5c53f98ce2c07bf02f29463e9', 'bb00371f7e5955c5d08528afbe259117e2a1be84', '9ef9db6de61e6979e2af93e5eb61d0b5541cb033', 'ada3f3766a3a9b7dababd207b04ac7b0bedeec2f', 'b2af2c4b99cb997a1a157fccb12b951616b9ad47', '9969905ddfd027de48929288f193ac24258b7486', '436e8b13dd5c390d8904dc98695f22f492f190c8', 'b513aed7b9790904f01a8140b065935de404f3bc', '48db1e01b2e380bc35890bbda4bdf507f68443c1', '8bd88c4c56c56f6775aaccae23edde6a55c3cc34', '83c2613f95db6abab9c96ecc266ba54d72f73e4c', '7ad82de7b8ab8215089975f7c172df81e874f4dd', '4236ed4ffb09a16d92261aeb6dd8c9d90f39cb87', 'ba4e62382274e7bf3dccdbd7493d7ef114efb116', '17ded59b33ab74a04abdd18e82ecd447f2d1f56d', 'a25d3e45132b010b0b8d181bc1132c73b4624095', '8249e8333799081d901af830eca3573540d3ce8f', 'f6fabbf470b171d8af59092ac02a8fa66b79d560', 'af1522fbd00e3e3acc6564bb8af06e8e66f6eb76', '14e6b525316b7d069ff284f6082afc76ad277cf1', 'fe1308e858615956bccb18cbde9422a3b7aedd5e', '48a81b4debee9bbee6acf56e8d220d2aa2466a68', '291156139da450f7706aa3562fa85ca09a1171f2', '5ed236b191579ad08ad06a83df28febce1f9338f', '5ed236b191579ad08ad06a83df28febce1f9338f', 'bdb82ae49323035f0b6943c4e6fec927e6172c81', '2d2d9257e56326b9b61327bb6c45d45549d52abf', '7f64058904746c76208290c70f5b3c6a8234f8d3', 'ec8ac645d4f69c211e26df634dd4f9480ef545db', 'b98dd50a74e2c2be2bff3a3e095cb641c24aed0b', '303087276eea5322943dfca3b677776330c84e19', 'de9cc12b814581504eefd2a52ae7b5819d841c4a', '51cc05eb2731b27879af7bb84f6508b22cfebd31', '6778db7e23dcb2db59cf4c978bd52087983d4d70', '46d7c1a0dc1c803a5bf6482293af2d35774b65dc', '6528427efd3b0d2ff2b44c850c862b65ea0d2a51', 'abcf058aa37827b8bc4631ef427154842236d700', '04808087aebbe99b8ff92441af5a9aec97fc4e93', 'f35c3575d14333d01b0a1851e0cef7d6c7177213', 'f2043be4a04b633f7526956d9449592c66fcccf4', 'cc51e086a43a8566a6a3bab2ae51afc448f2100f', 'dea7d3964897af59b89e23fe7a02629543d68615', 'ec5661e3e7c8adc29680bca712b7fa029cf69107', '286dae502dee8ab1353983e69d2667b7b68e7aac', 'b909a4b05a7dc8b442f7cd65540ffc66b07b6ff7', '260df8bd7b170a245f09426d3c3a7cc201af96c1', 'a54a669720cec76a0af2696c0b53d3708cdb0003', '49ac5ae9620b60a27df7030aeb2f7f860bee2ed8', '5d0d572ec9c419ce3506295b6f0831ae7cc424dd', '88c6cd46c1caa37a9f1ca9ec7add73d5dfb242eb', '0f0a2b9f07d42f7ec58c90f9707e8683c67f7489', 'aa50dca9846d6726d4fc595616ab9ba08b0c619e', 'aa242a02301a19fcc8b1cc12b6934de487e1d397', '03a2c944359fed87420635da4b8b964824bb3eeb', '6d463a70ca07c74c51e49e47340304149d4198a2', '8e8a52afe8258cab4f60f1b6a7ca9e3dc6abd424', '951a9d6343c6c72ca222b80135a379674174e3b6', '5093ef689d06f519daae8269e711e65e88ac69b7', '1d59fd49915f424610f12e57820e1e7a7999d716', '633d4f313d6b1d37dc416e068299954f8d847920', 'fbfe9043751aa6389e65dda3dabccffca0b498b1', 'e46f6e478b8b94f87e048d871dd906929a563ceb', 'ccc21609ed2e31aba89325f8ca738cc771381b6e', '330a37997e6ec643636a18d5563dc786cfe25490', '69121b78d0379c81643d6cc0842c18597d14a668', 'a7f6d9ca01347643cd84d0c16c40d727be8a8967', '1d6694e053e6c1c2b2a66638a24b5f8da766a49b', '44ea6fc98b740e7ad626b920466801820e39ff57', 'cd4a78a1cbd00d2021b4d89c57820d87c6d1f3f4', 'ed873ead115d907b8a5ad079ad75ca35defbf399', '7f674d9e97d92f42cb3e195ffa0d71d6164c411d', 'b29825fbbb37e2c8e0435f9aa38190c029e06688', '82756d8ae7493a4f734cb23e4bfe2050ab460d67', '30a9a58048ab9e0b28be8c36c7d42772929c0de9', '3beb6b85304b166158d7803182a81746687d3e7b', '4f473f0a7352a26d710964ea2bcc1c7ea3b88269', '0b1bc227cbf0d212bacab313d7ef965f653412fc', '9ef0406bd2abbad65245127c0e24f41408f68675', 'bf0e7f84fecbdab4f9e544cbaeb0d0e6004d1b53', '21ab87fc69ae3796abce88faf13c0b3bbe6adedf', '918a4c4105eeb818105424c024b056885b5fa635', 'd9e4662ed4ebc283b5e82af1e0cf60da3d25fd76', 'd1f75551f2beb6f1296706bcb1fcb48f954b0eda', 'f35e2617bf00a361742686a9ffc4a3b2832c7a82', '4f76c7aa8ebd3465d064a98d2a9769c9c1a78dd4', 'c89f8cf174ef19ed42b4dc61f7b6aa153ba83a0a', 'ef0f1d453855fe2a3dd80274a689b5ebfbe7fdef', '0ddd02544cf821431a95839226d4879a22b1640b', '9e5dec4bda33388f48a2c9e4c9321ee38a0d3b36', 'c9c2d50133c0db554256abdbf884203a40091a94', '9e3ee848bcbac689dd438c76433542c1c0cbb33d', '3aaf739d9a15d799c261b206fbb2fccdb60c1966', 'd39dc9d503e0b9fce898b1d9eaad1c680995f065', '7d99bce601b524c0985fa78f52acb6be5965b76a', '51b51e51170a6560deb21afeab19a4192ba95e38', '6a9c1475da5bb76455ec1e186a1d71ccbaa8c609', '0641a9a29b7378aba46df3f3f5fe47099fdef569', 'cc39047cb415b1c27b64ec1fbea0325b9863ed9f', 'be40d3d93776d23e2bc1870765248d7abc12ca38', '5b7e8bcc0ecb01cbb84d2de7637893f4a718986b', '12f2efdd14b14489d4d65a015c56c86a2de96ee1', '88aaa81303df2a5be87b51597834499cab6e7549', 'dcc1518b9ebc889df4174b63dd3fbf9145ac3587', '6865cd9bf4296866e5389d60d2582d50b3d97812', '8e9a4538d28fb432fe8634678adce50492fd8b7f', '3c0c7fa139a7f068a9730ea6a5a9d75201420d79']
BETTER_WORDS = ["GRAANH", "MRRR", "ERRRR", "GRAGH", "MRAAH"]


def better_word():
    return random.choice(BETTER_WORDS)


def to_zombish(phrase, with_profanity_filter=True):

    if with_profanity_filter:
        delchars = ''.join(c for c in map(chr, range(256)) if not c.isalpha())
        words_split = phrase.split(" ")
        pattern = re.compile('[\W_]+')
        for i in range(0, len(words_split)):
            good_word = ""
            for w in re.findall(r"[\w\n]+|[^\s\w]", words_split[i]):
                if hashlib.sha1(pattern.sub('', w).upper()).hexdigest() in BAD_WORD_SHA1S:
                    good_word += better_word()
                else:
                    good_word += w
            words_split[i] = good_word

        phrase = " ".join(words_split)

    new_str = ""
    for c in phrase:
        try:
            new_str += ZOMBISH_LETTER_MAPPING[c]
        except KeyError:
            new_str += c

    return new_str


def from_zombish(phrase):
    new_str = ""
    string_pairs = []
    first = True
    pair = ""
    for s in phrase:
        if s in VALID_LETTERS:
            if first:
                pair = s
                first = False
            else:
                pair += s
                string_pairs.append(pair)
                pair = ""
                first = True
        else:
            if pair is not "":
                string_pairs.append(pair)
            pair = ""
            first = True
            string_pairs.append(s)

    new_phrase = ""
    for p in string_pairs:
        try:
            new_phrase += REVERSE_ZOMBISH_LETTER_MAPPING[p]
        except:
            new_phrase += p

    return new_phrase
