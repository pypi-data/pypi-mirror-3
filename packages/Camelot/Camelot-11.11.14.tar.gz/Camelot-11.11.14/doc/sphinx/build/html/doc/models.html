

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Creating models &mdash; Camelot  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot  documentation" href="../index.html" />
    <link rel="up" title="Camelot Documentation" href="index.html" />
    <link rel="next" title="Fields" href="fields.html" />
    <link rel="prev" title="Camelot Installation" href="install.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2652891-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Camelot Installation"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="creating-models">
<span id="doc-models"></span><h1>Creating models<a class="headerlink" href="#creating-models" title="Permalink to this headline">Â¶</a></h1>
<p><em>Camelot</em> makes it easy to create views for any type of <em>Python</em> objects.  An important part of Camelot
is introspection on Python objects mapped to a database with <em>SQLAlchemy</em>.  This allows a developer to
only define his SQLAlchemy model and the views will reflect all properties defined in the model, such
as field types and relations.</p>
<p id="index-0">SQLAlchemy is a very powerful Object Relational Mapper (ORM) with lots of possibilities for handling
complex and large datastructures. The <a class="reference external" href="http://www.sqlalchemy.org">SQLAlchemy website</a> has extensive
documentation on all these features.</p>
<p id="index-1">To facilitate the use of SQLAlchemy in less advanced use cases, like the Active Record Pattern, layers
exist on top SQLAlchemy to make those things easy and the complex things still possible.  One such
layer is <em>Elixir</em>.  Most of the code samples in the documentation make use of Elixir, an Elixir model
definition is very simple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">GeographicBoundary</span><span class="p">(</span> <span class="n">Entity</span> <span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;The base class for Country and City&quot;&quot;&quot;</span>
    <span class="n">using_options</span><span class="p">(</span> <span class="n">tablename</span> <span class="o">=</span> <span class="s">&#39;geographic_boundary&#39;</span> <span class="p">)</span>
    <span class="n">code</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span> <span class="n">Unicode</span><span class="p">(</span> <span class="mi">10</span> <span class="p">)</span> <span class="p">)</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span> <span class="n">Unicode</span><span class="p">(</span> <span class="mi">40</span> <span class="p">),</span> <span class="n">required</span> <span class="o">=</span> <span class="bp">True</span> <span class="p">)</span>

    <span class="nd">@ColumnProperty</span>
    <span class="k">def</span> <span class="nf">full_name</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span> <span class="o">+</span> <span class="s">&#39; &#39;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>

    <span class="k">def</span> <span class="nf">__unicode__</span><span class="p">(</span> <span class="bp">self</span> <span class="p">):</span>
        <span class="k">return</span> <span class="s">u&#39;</span><span class="si">%s</span><span class="s"> </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="p">)</span>
</pre></div>
</div>
<p>The code above defines the model for a <cite>GeographicBoundary</cite> class, a base class that will be used later
on to subclass into <cite>Countries</cite> and <cite>Cities</cite>, and is part of the default <a class="reference internal" href="data_model.html#model-persons"><em>Persons and Organizations</em></a> data
model of Camelot.  This code has some things to notice :</p>
<blockquote>
<div><ul class="simple">
<li><cite>GeographicBoundary</cite> is a subclass of <cite>Entity</cite>, <cite>Entity</cite> is the base class for all classes that are mapped
to the database</li>
<li>the <cite>using_options</cite> statement allows us to fine tune the ORM, in this case the <cite>GeographicBoundary</cite> class
will be mapped to the <cite>geographic_boundary</cite> table</li>
<li>The <cite>Field</cite> statement add fields of a certain type, in this case <cite>Unicode</cite>, to the <cite>GeographicBoundary</cite> class
as well as to the <cite>geographic_boundary</cite> table</li>
<li>The <cite>ColumnProperty</cite> <cite>full_name</cite> is a more advanced feature of the ORM, when an <cite>GeographicBoundary</cite> object
is read from the database, the ORM will ask the database to concatenate the fields code and name, and
map the result to the <cite>full_name</cite> attribute of the object</li>
<li>The <cite>__unicode__</cite> method is implemented, this method will be called within Camelot whenever a textual
representation of the object is needed, eg in a window title or a many to one widget</li>
</ul>
</div></blockquote>
<p>The <a class="reference external" href="http://elixir.ematia.de/trac/wiki/TutorialDivingIn">Elixir website</a> provides a complete overview of
the creation of models with elixir.</p>
<p>When a new Camelot project is created, the <em class="xref std std-ref">camelot-admin</em> tool creates an empty <tt class="docutils literal"><span class="pre">models.py</span></tt> file that
can be used as a place to start the model definition.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="fields.html">Fields</a><ul>
<li class="toctree-l2"><a class="reference internal" href="fields.html#sqlalchemy-field-types">SQLAlchemy field types</a></li>
<li class="toctree-l2"><a class="reference internal" href="fields.html#camelot-field-types">Camelot field types</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="calculated_fields.html">Calculated Fields</a><ul>
<li class="toctree-l2"><a class="reference internal" href="calculated_fields.html#python-properties-as-fields">Python properties as fields</a></li>
<li class="toctree-l2"><a class="reference internal" href="calculated_fields.html#attach-actions-to-field-changes">Attach actions to field changes</a></li>
<li class="toctree-l2"><a class="reference internal" href="calculated_fields.html#fields-calculated-by-the-database">Fields calculated by the database</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="views.html">Views</a><ul>
<li class="toctree-l2"><a class="reference internal" href="views.html#the-model-to-start-from">The model to start from</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#definition-of-the-view">Definition of the view</a></li>
<li class="toctree-l2"><a class="reference internal" href="views.html#put-into-action">Put into action</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="under_the_hood.html">Under the hood</a><ul>
<li class="toctree-l2"><a class="reference internal" href="under_the_hood.html#setting-up-the-model">Setting up the model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="under_the_hood.html#metadata">Metadata</a></li>
<li class="toctree-l3"><a class="reference internal" href="under_the_hood.html#engine">Engine</a></li>
<li class="toctree-l3"><a class="reference internal" href="under_the_hood.html#setup-model">Setup model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="under_the_hood.html#working-without-the-default-model">Working without the default model</a></li>
<li class="toctree-l2"><a class="reference internal" href="under_the_hood.html#using-camelot-without-the-gui">Using Camelot without the GUI</a></li>
</ul>
</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="install.html"
                        title="previous chapter">Camelot Installation</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="fields.html"
                        title="next chapter">Fields</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/doc/models.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="fields.html" title="Fields"
             >next</a> |</li>
        <li class="right" >
          <a href="install.html" title="Camelot Installation"
             >previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>

<br/>
<a href="http://example.com/my_article.html#disqus_thread">Comments</a>
<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */

  /** var disqus_developer = 1 **/

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://camelot.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=camelot">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2009 - 2011, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
<div class="footer">
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

<script type="text/javascript">
var disqus_shortname = 'camelot';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/camelot/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



  </body>
</html>