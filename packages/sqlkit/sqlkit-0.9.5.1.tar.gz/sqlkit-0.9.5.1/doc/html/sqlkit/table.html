<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
      
      <title>
    SqlTable
 &mdash; sqlkit v0.9.5.1 documentation</title>
      
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/sqlkit.css" type="text/css" />
    <link rel="stylesheet" href="../_static/print.css" type="text/css" media="print" />

    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="sqlkit v0.9.5.1 documentation" href="../index.html" />
        <link rel="up" title="Widgets" href="widgets.html" />
        <link rel="next" title="Printing" href="printing.html" />
        <link rel="prev" title="SqlMask" href="mask.html" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
          URL_ROOT:    '../',
          VERSION:     '0.9.5.1',
          COLLAPSE_MODINDEX: false,
          FILE_SUFFIX: '.html'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>


<!-- <link rel="stylesheet" href="http://www.myjqueryplugins.com/plugins/jmenu/demo/jquery/jMenu.jquery.css" type="text/css" /> -->
      <link rel="stylesheet" href="../_static/jMenu.jquery.css" type="text/css" />

      <!-- <script type="text/javascript" src="http://www.myjqueryplugins.com/plugins/jmenu/demo/jquery/jMenu.jquery.js"></script> -->

      <script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-18221996-2']);
	_gaq.push(['_trackPageview']);

	(function() {
	  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
	  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
	  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
	})();

      </script>
      <script type="text/javascript" src="../_static/jMenu.jquery.js"></script>
      <script type="text/javascript">
	      $(document).ready(function(){
		      $("#jMenu").jMenu({
			      ulWidth : '150',
			      effects : {
				      effectSpeedOpen : 300,
				      effectSpeedClose : 300,
				      effectTypeOpen : 'slide',
				      effectTypeClose : 'slide',
				      effectOpen : 'linear',
				      effectClose : 'linear'
			      },
			      TimeBeforeOpening : 100,
			      TimeBeforeClosing : 400,
			      animatedText : false,
			      paddingLeft: 1		});
	      })
      </script>
<!-- Preview -->
     <script type="text/javascript" src="../_static/imgpreview.js"></script>
     <script type="text/javascript">
       $(document).ready(function(){
           $('.preview').imgPreview();
       });
     </script>
     
     <!--[if !IE 7]>
	     <style type="text/css">
		     #wrap {display:table;height:100%}
	     </style>
     <![endif]-->
    </head>
    <body>
        




<div id="wrap">
    
<div id="header">

	<div class="logo"><a href="../misc/tour.html">
       <img src="../_static/sqlkit.png" align="left"  alt="Logo" border="0"/></a>
        </div>
	<div id="description">Acces to db made easy</div>
</div>


   <div style="clear:left;"></div>


<div >
	<ul id="jMenu">
            <li><a class="fNiv" href="../index.html" title="Home" 
                  >Home</a></li>

            <li><a li class="fNiv" href="contents.html"
                  title="Sqlkit - the python package" 
                  >Sqlkit</a>

	       <ul>
		 <li ><a href="contents.html"
		       title="Sqlkit - the python package" 
		       >Sqlkit</a></li>

		 <li ><a href="sqlwidget.html" title="Widgets" 
		       >Widgets</a>
		       <ul> 
			 <li ><a href="mask.html" title="Mask" 
			       >Mask view</a></li>
			 <li ><a href="#" title="Table" 
			       >Table view</a></li>
		       </ul>
                 </li>
		 <li ><a href="browsing.html" title="Browsing Data" 
		       >Browsing data</a>
		    <ul> 
		      <li ><a href="constraints.html" title="Constraints" 
			    >Constraints</a></li>
		      <li ><a href="filters.html" title="Filters" 
			    >Filters</a></li>
		      <li ><a href="totals.html" title="Totals" 
			    >Totals</a></li>
		    </ul>
                 </li>
		 <li ><a href="editing.html" title="Editing Data" 
		       >Editing data</a>
			 <ul> 
			   <li ><a href="completion.html" title="Completion" 
				 >Completion</a></li>
			   <li ><a href="validation.html" title="Validation" 
				 >Validation</a></li>
			   <li ><a href="relationship.html" title="Relationships" 
				 >Relationships</a></li>
			 </ul>
		       </li>
		 <li ><a href="printing.html" title="Printing" 
		       ><span>Printing</span></a></li>
		 <li ><a href="advanced/contents.html" title="Advanced configuration" 
		       >Advanced configuration</a>
			 <ul> 
			   <li ><a href="advanced/fields.html" title="Fields" 
				 >Fields</a></li>
			   <li ><a href="advanced/views.html" title="Views" 
				 >Views</a></li>
			 </ul>
		       </li>

	       </ul>
            </li>

            <li><a class="fNiv" href="../misc/sqledit.html"
                  title="Sqledit GUI" 
                  >Sqledit GUI</a></li>

            <li><a class="fNiv" href="../misc/tutorials.html"
                  title="Support & tutorials" 
                  >Support & Tutorials</a>
	       <ul>
		 <li ><a href="../misc/sqledit.html"
		       title="Sqledit - the application" 
		       >Sqledit - the application</a></li>
		 <li ><a href="../misc/tour.html"
		       title="Sqlkit - the features'tour"
		       >Sqlkit - features' tour</a></li>
		 <li ><a href="../misc/sqledit.html"
		       title="Sqledit - the application" 
		       >Installing instructions</a></li>
		</ul> 
            </li>

            <li><a class="fNiv" href="../layout/contents.html" title="Layout"
                  >Layout</a></li>

            <li><a  class="fNiv"href="../misc/contents.html" title="Download" 
                  >Download</a>

	       <ul>
		 <li ><a href="../misc/contents.html"
		       title="Download"
		       >Download</a></li>
		 <li ><a href="http://sqlkit.argolinux.org/download/Changelog"  title="Changelog"
		       title="Changelog"
		       >Changelog</a></li>
		 <li ><a href="../misc/backward_incompatibilities.html"
		       title="Backward incompatibilities"
		       >Backward incompatibilities</a></li>
	       </ul>
            </li>



        </ul>
</div>
   <div style="clear:left;"></div>

    
    <div class="related">
      <ul>
	
<!-- <div class="prevnext"> -->
<!--    <li class="right"  style="margin-right: 10px">Indice -->
<!--      <a href="../genindex.html" title="Indice generale" -->
<!--                accesskey="I">indice</a></li> -->

        <li class="right">Prev:
        <a href="mask.html" title="previous chapter">SqlMask</a></li>
        <li class="right">Next:
        <a href="printing.html" title="next chapter">Printing</a></li>
<!-- </div> -->


      </ul>

    </div>

    
  <div class="sphinxsidebar">
     <div class="sphinxsidebarwrapper">


	    <div class="topnav">
    <h3>Table of contents</h3>
		    <ul>
<li><a class="reference external" href="#">SqlTable</a><ul>
<li><a class="reference external" href="#column-headers">Column headers</a></li>
<li><a class="reference external" href="#cell-renderers">Cell renderers</a><ul>
<li><a class="reference external" href="#boolean">Boolean</a></li>
<li><a class="reference external" href="#text">Text</a></li>
</ul>
</li>
<li><a class="reference external" href="#export">Export</a></li>
<li><a class="reference external" href="#shortcut">Shortcut</a><ul>
<li><a class="reference external" href="#in-the-treeeview">in the treeeview</a></li>
<li><a class="reference external" href="#in-the-editable-cell">in the editable cell</a></li>
</ul>
</li>
<li><a class="reference external" href="#signals">Signals</a></li>
<li><a class="reference external" href="#recordinmask">RecordInMask</a></li>
<li><a class="reference external" href="#recordinmask-for-foreignkeys">RecordInMask for ForeignKeys</a></li>
<li><a class="reference external" href="#views">Views</a><ul>
<li><a class="reference external" href="#adding-a-column">Adding a column</a></li>
</ul>
</li>
<li><a class="reference external" href="#sorting-columns">Sorting columns</a></li>
<li><a class="reference external" href="#duplicating-a-row">Duplicating a row</a></li>
</ul>
</li>
</ul>

		<div class="clearboth"></div>
	    </div>



    <h3>Questions?</h3>

    <p>Subscribe to out mailing list <a href="http://groups.google.com/group/sqlkit">
       Google group</a>:</p>

    <form action="http://groups.google.com/group/sqlkit/boxsubscribe" style="padding-left: 1em">
      <input type="text" name="email" value="your@email"/>
      <input type="submit" name="sub" value="Subscribe" />
    </form>
    <div id="searchbox" style="display: none">

    <h3>Quick search</h3>
	<form class="search" action="../search.html" method="get">
	  <input type="text" name="q" size="18" />
	  <input type="submit" value="Search" />
	  <input type="hidden" name="check_keywords" value="yes" />

	  <input type="hidden" name="area" value="default" />
	</form>
	<p class="searchtip" style="font-size: 90%">
        Enter search terms or a module, class or function name.
	</p>
    <h3>License</h3>
	<img src="../_static/gplv3.png" alt="logo GPLv3">

    </div>
    <script type="text/javascript">$('#searchbox').show(0);</script>

     </div>
  </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">

            <div class="body">
                
<div class="section" id="sqltable">
<span id="table"></span><h1>SqlTable<a class="headerlink" href="#sqltable" title="Permalink to this headline">¶</a></h1>
<a class="preview reference external image-reference" href="../_images/table-demo.png"><img align="right" alt="table opened on movies" class="preview align-right" src="../_images/table-demo.png" style="width: 334.5px; height: 193.0px;" /></a>
<p>SqlTable is a widget that presents data in a table mode. Columns that are
foreign keys are presented in blue and a <a class="reference external" href="completion.html#description"><em>foreign key description &amp; search field</em></a> of
the foreign key is used.</p>
<dl class="class">
<dt id="sqlkit.widgets.SqlTable">
<em class="property">class </em><tt class="descclassname">sqlkit.widgets.</tt><tt class="descname">SqlTable</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable" title="Permalink to this definition">¶</a></dt>
<dd><p>Main widget to represent data of a sqlalchemy selectable (SELECT of a TABLE or JOIN
&amp; similar).</p>
<p>A SqlTable can have different <a class="reference internal" href="#views"><em>views</em></a> of the same data
represented in different TreeViews.</p>
<p>A SqlTable can be viewed alone or as part of a composite widget, that is
normally a mask with <a class="reference external" href="relationship.html#relationships"><em>Relationships</em></a>: be sure to understand this
part as it&#8217;s probably one of the more powerfull features of Sqlkit.</p>
<p>SqlTables can have both ListStores or TreeStores. The latter allows to represent
rows in a hierarchy.</p>
<p>SqlTable inherits from <a title="sqlkit.widgets.common.sqlwidget.SqlWidget" class="reference external" href="sqlwidget.html#sqlkit.widgets.common.sqlwidget.SqlWidget"><tt class="xref docutils literal"><span class="pre">sqlkit.widgets.common.sqlwidget.SqlWidget</span></tt></a></p>
<dl class="attribute">
<dt id="sqlkit.widgets.SqlTable.views">
<tt class="descname">views</tt><a class="headerlink" href="#sqlkit.widgets.SqlTable.views" title="Permalink to this definition">¶</a></dt>
<dd>A container for the possible <a class="reference internal" href="#views"><em>Views</em></a>. It always have a default view named <tt class="docutils literal"><span class="pre">main</span></tt></dd></dl>

<dl class="attribute">
<dt id="sqlkit.widgets.SqlTable.totals">
<tt class="descname">totals</tt><a class="headerlink" href="#sqlkit.widgets.SqlTable.totals" title="Permalink to this definition">¶</a></dt>
<dd>class for <a class="reference external" href="totals.html#totals"><em>Totals</em></a>: see the specific documentation for further info</dd></dl>

<dl class="attribute">
<dt id="sqlkit.widgets.SqlTable.edited_path">
<tt class="descname">edited_path</tt><a class="headerlink" href="#sqlkit.widgets.SqlTable.edited_path" title="Permalink to this definition">¶</a></dt>
<dd>The path of the edited row (a tuple). It&#8217;s not the output of
<tt class="xref docutils literal"><span class="pre">get_selected_path()</span></tt> since when you change the selected row the
validation is triggered on the <em>previuos</em> selected_row that is pointed
to by <tt class="docutils literal"><span class="pre">edited_path</span></tt>.</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.create_view">
<tt class="descname">create_view</tt><big>(</big><em>name='main'</em>, <em>treeview=None</em>, <em>field_list=None</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.create_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <a class="reference internal" href="#views"><em>view</em></a>, i.e.: a list of columns one for each
field in self.field_list. Columns are setup according to the type of
the database field, introspected from the mapper. There may be more
than one view in a SqlTable. The first one is created mandatorily;
possible further ones are created by hand, passing a view name, a
treeview and -normally- a field_list. The filter panel output page
is a view of the filtered records.</p>
<p>All the views of a SqlTable share the same model.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>view</em> &#8211; the name of the view</li>
<li><em>treeview</em> &#8211; the treeview</li>
<li><em>field_list</em> &#8211; a list of field_name for which we want the view</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.set_field_list">
<tt class="descname">set_field_list</tt><big>(</big><em>field_list</em>, <em>view_name='main'</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.set_field_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Set field of visible columns. Accepts both a list or a string (space or comma separated)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>field_list</em> &#8211; the field name list</li>
<li><em>view</em> &#8211; the view for which we set the field_list</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.set_editable">
<tt class="descname">set_editable</tt><big>(</big><em>editable=True</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.set_editable" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn this table into a normal editable table.
A tables is not normally editable if it has <tt class="docutils literal"><span class="pre">relationship_mode</span> <span class="pre">=</span> <span class="pre">m2m</span></tt></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>editable</em> (boolean) &#8211; Only meaningful for table that represent an
m2m relationship: turns the table from non editable to editable, 
read the explanation in <a class="reference external" href="relationship.html#relationships"><em>Relationships</em></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.set_opts">
<tt class="descname">set_opts</tt><big>(</big><em>icons=True</em>, <em>scroll='xy'</em>, <em>width=None</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.set_opts" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify default appearance of some features:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>scroll</em> (boolean) &#8211; eliminate scrollbars (values: x|y|xy|None)</li>
<li><em>icons</em> (boolean) &#8211; allows to disable icons in a m2m relationship</li>
<li><em>width</em> &#8211; set the maximum width of the widget</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.select_path">
<tt class="descname">select_path</tt><big>(</big><em>path=None</em>, <em>obj=None</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.select_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Select path <tt class="docutils literal"><span class="pre">path</span></tt>. If path is null and obj is not null try finding path at which is obj</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>path</em> &#8211; the path to be selected or None</li>
<li><em>obj</em> &#8211; if path is None, the object to be searched for and selected</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.hide_fields">
<tt class="descname">hide_fields</tt><big>(</big><em>field_name_list=''</em>, <em>view_name='main'</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.hide_fields" title="Permalink to this definition">¶</a></dt>
<dd><p>Hide a column and add the entry in the menu to make it show up again</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>field_name_list</em> &#8211; may be a list or a string (in which case it is split with, and spaces)</li>
<li><em>view</em> &#8211; the view for which we set the list of hidden fields</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.get_selected_path">
<tt class="descname">get_selected_path</tt><big>(</big><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.get_selected_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the path of the selected row or None</p>
<dl class="docutils">
<dt>NOTE: treeselection &#8216;changed&#8217; signal arrives when the selection change has</dt>
<dd>already occurred. Use <tt class="xref docutils literal"><span class="pre">edited_path</span></tt> to get the path that
is being currently edited</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.get_obj_at_path">
<tt class="descname">get_obj_at_path</tt><big>(</big><em>path</em>, <em>all=False</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.get_obj_at_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the object at path. Return None if no selection.
If the object at path is a total object (see <a class="reference external" href="totals.html#totals"><em>Totals</em></a>) it
will be discarder unless you use param all=True</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>path</em> &#8211; the modelproxy.modelstore path</li>
<li><em>all</em> &#8211; boolean: only return object of the main class (no totals)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.add_record">
<tt class="descname">add_record</tt><big>(</big><em>obj</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.add_record" title="Permalink to this definition">¶</a></dt>
<dd><p>Add record to the model and setup all what is needed</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>obj</em> &#8211; an object of type <tt class="docutils literal"><span class="pre">table.mapper.class_</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.set_fk_layout">
<tt class="descname">set_fk_layout</tt><big>(</big><em>field_name</em>, <em>layout_nick</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.set_fk_layout" title="Permalink to this definition">¶</a></dt>
<dd><p>set a layout to be used if opening a mask to edit the foreign key</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>field_name</em> &#8211; the field_nme of the column</li>
<li><em>layout_nick</em> &#8211; the nick name of the layout to be used a &#8216;layout_nick&#8217;</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.record_in_mask">
<tt class="descname">record_in_mask</tt><big>(</big><em>widget=None</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.record_in_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a SqlMask to show self.current if any and to follow selection.</p>
<p>Hooks are set on the newly created mask so that validation is retained
Remember to set any possible configuration of the table in an <tt class="docutils literal"><span class="pre">on_init</span></tt>
hook so that it will be propagated.</p>
<p>If there are pending modification, a save dialog is opened. This function is normally
invoked by the first menu entry of the menu popped by right click on a table <em>view this
record in a mask</em>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>widget</em> &#8211; the menu entry that invoked it, can be ignored when calling it by hand</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Returns SqlMask:</th></tr>
<tr><td>&nbsp;</td><td class="field-body">the SqlMask widget</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.fkey_record_in_mask">
<tt class="descname">fkey_record_in_mask</tt><big>(</big><em>widget=None</em>, <em>field_name=None</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.fkey_record_in_mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Open a SqlMask to show the fkey of this field</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><em>widget</em> &#8211; the menu entry that invoked it, can be ignored when calling it by hand</li>
<li><em>field_name</em> &#8211; the foreign key attribute name that should be displayed</li>
</ul>
</td>
</tr>
<tr class="field"><th class="field-name" colspan="2">Returns SqlMask:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first last">the SqlMask widget</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="sqlkit.widgets.SqlTable.add_row_filter">
<tt class="descname">add_row_filter</tt><big>(</big><em>func</em><big>)</big><a class="headerlink" href="#sqlkit.widgets.SqlTable.add_row_filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Add a filter that selects which rows should be displayed</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameter:</th><td class="field-body"><em>func</em> &#8211; the function that will be called with the obj as argument
and must return a bool</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<img align="right" alt="../_images/menu.png" class="align-right" src="../_images/menu.png" />
<div class="section" id="column-headers">
<h2>Column headers<a class="headerlink" href="#column-headers" title="Permalink to this headline">¶</a></h2>
<p>Each column is clickable. Clicking on the column pops up a menu that enables:</p>
<blockquote>
<ul>
<li><p class="first">to add a filter on this field (see <a class="reference external" href="filters.html#filters"><em>Filters</em></a>). This same action can
be done by pressing <tt class="docutils literal"><span class="pre">f</span></tt> on the column w/o opening the column menu. Only
persisted fields can be filtered on.</p>
</li>
<li><p class="first">to sort on this field (database sorting). Note that sorting on a
ForeignKey will trigger a join with the referenced table and an attempt
to sort on the <a class="reference external" href="completion.html#description"><em>foreign key description &amp; search field</em></a> (In general you don&#8217;t want to
sort on the <tt class="docutils literal"><span class="pre">id</span></tt>).</p>
<p>A &#8220;local sort&#8221;, i.e. a sort done without hitting the database is
performed when you sort a related table (e.g.: as explained in
<a class="reference external" href="relationship.html#relationships"><em>Relationships</em></a>) or when you press <tt class="docutils literal"><span class="pre">s</span></tt> on a column after clicking
the table (to set the <em>focus</em> on the table)</p>
</li>
<li><p class="first">to add a total on this column (if the column is numeric). This same action can
be done by pressing <tt class="docutils literal"><span class="pre">t</span></tt> on the column w/o opening the column menu.</p>
</li>
<li><p class="first">to toggle a brake on this column (see docs for <a class="reference external" href="totals.html#totals"><em>Totals</em></a>). This same action can
be done by pressing <tt class="docutils literal"><span class="pre">b</span></tt> on the column w/o opening the column menu.</p>
</li>
<li><p class="first">to hide a column. This same action can
be done by pressing <tt class="docutils literal"><span class="pre">h</span></tt> on the column w/o opening the column menu.</p>
</li>
</ul>
</blockquote>
</div>
<div class="section" id="cell-renderers">
<h2>Cell renderers<a class="headerlink" href="#cell-renderers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="boolean">
<h3>Boolean<a class="headerlink" href="#boolean" title="Permalink to this headline">¶</a></h3>
<p>Booleans are represented with CellRendererToggle, if the field is nullable,
the value loops over 3 states.</p>
</div>
<div class="section" id="text">
<h3>Text<a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h3>
<p>I don&#8217;t have a satisfactory CellRender for long text. Any hint is appreciated.</p>
</div>
</div>
<div class="section" id="export">
<h2>Export<a class="headerlink" href="#export" title="Permalink to this headline">¶</a></h2>
<p>A very minimal export function allows to export visible data in a .csv (comma
separated value) format. Follow File -&gt; Export. That function can be reach
also right-clicking on the table, thus allowing to export that particular
<a class="reference internal" href="#views"><em>view</em></a>.</p>
</div>
<div class="section" id="shortcut">
<h2>Shortcut<a class="headerlink" href="#shortcut" title="Permalink to this headline">¶</a></h2>
<div class="section" id="in-the-treeeview">
<h3>in the treeeview<a class="headerlink" href="#in-the-treeeview" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Control-x:</th><td class="field-body">eliminates a line</td>
</tr>
<tr class="field"><th class="field-name">Control-k:</th><td class="field-body">eliminates a line</td>
</tr>
<tr class="field"><th class="field-name">Control-s:</th><td class="field-body">saves the record</td>
</tr>
<tr class="field"><th class="field-name">Control-q:</th><td class="field-body">quits the table</td>
</tr>
<tr class="field"><th class="field-name">Control-n:</th><td class="field-body">opens a new record</td>
</tr>
<tr class="field"><th class="field-name">Control-z:</th><td class="field-body">zoom the treeview</td>
</tr>
<tr class="field"><th class="field-name">Shift-Z:</th><td class="field-body">zoom the treeview in a related table (nested in a mask)</td>
</tr>
<tr class="field"><th class="field-name">s:</th><td class="field-body">sorts the table locally (toggle between ascending and descending)</td>
</tr>
<tr class="field"><th class="field-name">f:</th><td class="field-body">open a filter for this column</td>
</tr>
<tr class="field"><th class="field-name">t:</th><td class="field-body">create a total if the column is numeric</td>
</tr>
<tr class="field"><th class="field-name">v:</th><td class="field-body">toggle visibility of some rows, needs that you set a visibility
function via <a title="sqlkit.widgets.SqlTable.add_row_filter" class="reference internal" href="#sqlkit.widgets.SqlTable.add_row_filter"><tt class="xref docutils literal"><span class="pre">sqlkit.widgets.SqlTable.add_row_filter()</span></tt></a></td>
</tr>
<tr class="field"><th class="field-name">b:</th><td class="field-body">toggles a break for subtotals on this column. In addition to this operation it
also sort on the column as it often happens you want a subtotal after
having ordered. Adding a break from the column menu does not order.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="in-the-editable-cell">
<h3>in the editable cell<a class="headerlink" href="#in-the-editable-cell" title="Permalink to this headline">¶</a></h3>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Control-Enter:</th><td class="field-body">pops a completion (regexp mode)</td>
</tr>
<tr class="field"><th class="field-name">Shift-Enter:</th><td class="field-body">pops a completion (start mode)</td>
</tr>
<tr class="field"><th class="field-name">Esc:</th><td class="field-body">aborts editing</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="signals">
<h2>Signals<a class="headerlink" href="#signals" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">button-press-event:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><dl class="first docutils">
<dt>this event is emitted when clicking in the treeview if</dt>
<dd><p class="first last">there are no pending validation errors (in which case you are forced
to solve them before). It is mainly used to handle the default
menu. Look in the example to see how you can manipulate the menu.</p>
</dd>
</dl>
<dl class="last method">
<dt id="button_press_cb">
<tt class="descname">button_press_cb</tt><big>(</big><em>table</em>, <em>event</em>, <em>obj</em>, <em>field_name</em>, <em>menu</em>, <em>treeview</em><big>)</big><a class="headerlink" href="#button_press_cb" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>table</em> &#8211; the SqlTable that emitted the signal</li>
<li><em>event</em> &#8211; the gtk.gdk.Event associated</li>
<li><em>obj</em> &#8211; the object currently selected or None</li>
<li><em>field_name</em> &#8211; the field_name of the selected column</li>
<li><em>menu</em> &#8211; the default menu that il popped up by this
button-press-event if event.button == 3 or None</li>
<li><em>treeview</em> &#8211; <p>the TreeView widget that was clicked. You may get the
view the treeview belongs to with <tt class="docutils literal"><span class="pre">treeview.get_data('view')</span></tt></p>
<p>
<span class="versionmodified">New in version 8.7.</span></p>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" id="context-changed" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">context-changed:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><p class="first">Records have been displayed or selection was changed.
This is used to track any change in the records both selected or displayed
and was added to be used by RecordInMask below</p>
<dl class="last function">
<dt>
<tt class="descname">records_displayed_cb(sqlwidget, current):</tt></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><em>sqlwidget</em> &#8211; the widget that emitted the signal</li>
<li><em>current</em> &#8211; the obj that was current in the row or the first
record in the liststore.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="recordinmask">
<span id="id1"></span><h2>RecordInMask<a class="headerlink" href="#recordinmask" title="Permalink to this headline">¶</a></h2>
<p>Clicking on any row of the treeview gives the possibility to show the record
in a Mask View. If a layout was passed to the <tt class="docutils literal"><span class="pre">SqlTable</span></tt>, it will be
passed to SqlMask. In this case all hooks, fields possibly configured
and completions will be copied in the new Mask. Same for the hooks.</p>
<p>If you need to configure this Mask in a particular fashion you can put all
configuration in a hook named <a class="reference external" href="sqlwidget.html#hooks"><em>on_init</em></a>. This code will be executed
both for Table and Mask generation that allows to use the same Hook for both
widgets.</p>
<p>Signals and callbacks are arranged so that it will follow the selection of
the table. The newly created mask will inherit the <a class="reference external" href="sqlwidget.html#set-mode"><em>mode</em></a> of the table,
i.e. if the table was read-only the mask will be opened in read-only mode.
On the other hand the mask will be have browsing inhibited.</p>
<p>If a layout was registered for the database table it will be used.</p>
<p>You can programmatically open this SqlMask using
<a title="sqlkit.widgets.SqlTable.fkey_record_in_mask" class="reference internal" href="#sqlkit.widgets.SqlTable.fkey_record_in_mask"><tt class="xref docutils literal"><span class="pre">fkey_record_in_mask</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">SqlTable</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">record_in_mask</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="recordinmask-for-foreignkeys">
<h2>RecordInMask for ForeignKeys<a class="headerlink" href="#recordinmask-for-foreignkeys" title="Permalink to this headline">¶</a></h2>
<p>Similarly, if the column in which you click is a ForeignKey, the popped menu
will show an entry to edit the referenced record in a mask.</p>
<p>To be sure it will have the customization you want you can
<a class="reference external" href="advanced/dbutils.html#dbutils"><em>register</em></a> Layout, Hooks and Class.</p>
<p>In the case you have several possible layout for the same fk, and you want
to use a layout that is not the default one, you can use <tt class="docutils literal"><span class="pre">set_fk_layout</span></tt></p>
<p>You can programmatically open the foreign key mask using
<a title="sqlkit.widgets.SqlTable.record_in_mask" class="reference internal" href="#sqlkit.widgets.SqlTable.record_in_mask"><tt class="xref docutils literal"><span class="pre">record_in_mask</span></tt></a>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">SqlTable</span><span class="p">(</span><span class="n">model</span><span class="o">.</span><span class="n">Movie</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">fkey_record_in_mask</span><span class="p">(</span><span class="s">&#39;director_id&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="views">
<span id="id2"></span><h2>Views<a class="headerlink" href="#views" title="Permalink to this headline">¶</a></h2>
<p>Views (added in rel 0.8.8) are a way to view the same data in two different
TreeViews.  This way you can split a very large table into different chunks
(vertically), leaving some columns to a view and others to a different
view. The same column may be repeated in different views.</p>
<div class="figure align-right">
<img alt="../_images/table-views.png" src="../_images/table-views.png" />
<p class="caption">An example of a table with views: <em>numbers</em> and <em>dates</em> are really fields
of the same table in the database.</p>
</div>
<div class="section" id="adding-a-column">
<span id="add-view-column"></span><h3>Adding a column<a class="headerlink" href="#adding-a-column" title="Permalink to this headline">¶</a></h3>
<p>You can add columns to a view if there&#8217;s a corresponding <tt class="docutils literal"><span class="pre">field</span></tt>
(sqlkit.fields.Field) in <tt class="docutils literal"><span class="pre">table.gui_field</span></tt>. Examples #31 and
#32 show how to do that that essentially boils down to:</p>
<ol class="arabic simple">
<li>Create a Field class that has a method that uses as input the object and
produces the output, you&#8217;ll need a clean_value() method s well if you
want to be able to create a total on that column (see example #32)</li>
<li>Add an instance of that Field to the fields used in the gui:
table.gui_fields</li>
<li>Create a Column and add it to the View</li>
</ol>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">ObjField</span><span class="p">(</span><span class="n">fields</span><span class="o">.</span><span class="n">VarcharField</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A field that presents the obj</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">clean_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">value</span> <span class="ow">and</span> <span class="s">&quot;</span><span class="si">%(year)s</span><span class="s"> </span><span class="si">%(title)s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">DictLike</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>

<span class="n">my_field</span> <span class="o">=</span> <span class="n">ObjField</span><span class="p">(</span><span class="s">&#39;new_column&#39;</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;editable&#39;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span> <span class="s">&#39;type&#39;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="s">&#39;length&#39;</span> <span class="p">:</span> <span class="mi">30</span><span class="p">})</span>
<span class="n">t</span><span class="o">.</span><span class="n">gui_fields</span><span class="p">[</span><span class="s">&#39;new_column&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">my_field</span>
<span class="c">## create a column</span>
<span class="n">col</span> <span class="o">=</span> <span class="n">columns</span><span class="o">.</span><span class="n">VarcharColumn</span><span class="p">(</span><span class="n">t</span><span class="p">,</span> <span class="s">&#39;new_column&#39;</span><span class="p">,</span> <span class="s">&#39;My New Column&#39;</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="n">my_field</span><span class="p">)</span>
<span class="c">## add it to the view</span>
<span class="n">t</span><span class="o">.</span><span class="n">views</span><span class="p">[</span><span class="s">&#39;main&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">add_column</span><span class="p">(</span><span class="n">col</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Adding a column that is not mapped to any db-field leads to a column that
cannot be filtered on. On the other hand you can sort (locally, read
below) on that column and also get totals.</p>
</div>
</div>
</div>
<div class="section" id="sorting-columns">
<h2>Sorting columns<a class="headerlink" href="#sorting-columns" title="Permalink to this headline">¶</a></h2>
<p>Sorting columns can be done in 2 different ways:</p>
<ol class="arabic">
<li><p class="first">using <tt class="xref docutils literal"><span class="pre">sqlkit.widgets.common.SqlWidget.order_by</span></tt> attribute of sqlwidget, that triggers an
<tt class="docutils literal"><span class="pre">ORDER</span> <span class="pre">BY</span></tt> clause on the database</p>
</li>
<li><p class="first">using <tt class="docutils literal"><span class="pre">order_by</span></tt> clause of <tt class="docutils literal"><span class="pre">modelproxy</span></tt>, that triggers a function
locally. This option is faster since you don&#8217;t need to reload data</p>
<p>This is the only method you can use to order related table, apart from
playing with relation&#8217;s order_by attribute in the model</p>
<p>Currently it can be done:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name" colspan="2">programmatically:</th></tr>
<tr><td>&nbsp;</td><td class="field-body"><blockquote class="first">
<p>by <tt class="docutils literal"><span class="pre">modelproxy.order_by</span></tt> with argument a string with field_names possibly
prefixed by + or - to define the order:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">t</span> <span class="o">=</span> <span class="n">SqlTable</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">t</span><span class="o">.</span><span class="n">modelproxy</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;status -description&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>it can also be used to order a related table:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lay</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;</span>
<span class="s">     director</span>
<span class="s">     o2m=movies</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="n">m</span> <span class="o">=</span> <span class="n">SqlMask</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">layout</span><span class="p">)</span>
<span class="n">m</span><span class="o">.</span><span class="n">related</span><span class="o">.</span><span class="n">movies</span><span class="o">.</span><span class="n">modelproxy</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-year title&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>when sorting a field that represent a foreign key, the value of the
lookup (i.e.: the value shown) is used rather than the value of the key</p>
</blockquote>
<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">interactively:</th><td class="field-body">currently limited to just one column at a time pressing
<tt class="docutils literal"><span class="pre">s</span></tt> when <strong>focus in in the treeview</strong> (i.e. you ave already
clicked the treeview). Sorting will toggle ascending and descending.</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</li>
</ol>
</div>
<div class="section" id="duplicating-a-row">
<span id="row-duplicating"></span><h2>Duplicating a row<a class="headerlink" href="#duplicating-a-row" title="Permalink to this headline">¶</a></h2>
<p>The row menu (right click) allows to duplicate a row, it requires some
understanding of the related issues:</p>
<ol class="arabic simple">
<li>Only visible fields are copied</li>
<li>Primary keys are not copied</li>
<li>If a foreig key is copied and that corresponds to a relation that has
<tt class="docutils literal"><span class="pre">cascade='delete-orphan'</span></tt> that relation requires an instance to be
attached. The field is able to retrieve such instance and attach it only
if you configure the model&#8217;s class properly. You can read more info on
the field&#8217;s method <a title="sqlkit.fields.ForeignKeyField.add_related_object" class="reference external" href="advanced/fields.html#sqlkit.fields.ForeignKeyField.add_related_object"><tt class="xref docutils literal"><span class="pre">add_related_object</span></tt></a></li>
</ol>
<p>As for <a class="reference external" href="mask.html#save-as"><em>Save as</em></a> mask function, there&#8217;s a hook named
<a class="reference external" href="sqlwidget.html#on-save-as"><em>on_save_as</em></a> that can be used to
configure proper action to be taken before saving the duplicated row</p>
</div>
</div>


            </div>
        </div>
     </div>
   </div>

        
</div> <!-- wrap -->

            <div class="bottomnav footer">
                <div class="doc_copyright">
                Alessandro Dentella -- Copyright 2006-2007-2008-2009-2010
		  Sqlkit release 0.9.5.1
<!--                 % if hasdoc('copyright'): -->
<!--                     &copy; <a href="../copyright.html">Copyright</a> 2008, Sandro Dentella. -->
<!--                 % else: -->
<!--                     &copy; Copyright 2008, Sandro Dentella. -->
<!--                 % endif -->
                    creato usando  <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
                </div>
            </div>
        












<br style="clear: left" />

    </body>
</html>




