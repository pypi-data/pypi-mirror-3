#Pipe pipe_HBXVrI6n3RGE9RZ3rLQIDg generated by pipe2py

from pipe2py import Context
from pipe2py.modules import *


def pipe_HBXVrI6n3RGE9RZ3rLQIDg(context, _INPUT, conf=None, **kwargs):
    "Pipeline"
    if conf is None:
        conf = {}

    if context.describe_input:
        return [(u'', u'AddressofComic', u'Enter the address of the Comic from which you would like to fetch the News URL', u'url', u'')]

    forever = pipeforever.pipe_forever(context, None, conf=None)

    sw_136 = pipestrreplace.pipe_strreplace(context, forever, conf={u'RULE': {u'find': {u'type': u'text', u'value': u'/comic/'}, u'param': {u'type': u'text', u'value': u'1'}, u'replace': {u'type': u'text', u'value': u'/'}}})
    sw_151 = pipeitembuilder.pipe_itembuilder(context, forever, conf={u'attrs': {u'value': {u'terminal': u'attrs_1_value', u'type': u'text'}, u'key': {u'type': u'text', u'value': u'link'}}}, attrs_1_value = sw_136)
    sw_117 = pipeurlinput.pipe_urlinput(context, forever, conf={u'default': {u'type': u'url', u'value': u''}, u'position': {u'type': u'number', u'value': u''}, u'prompt': {u'type': u'text', u'value': u'Enter the address of the Comic from which you would like to fetch the News URL'}, u'name': {u'type': u'text', u'value': u'AddressofComic'}, u'debug': {u'type': u'url', u'value': u'http://www.penny-arcade.com/comic/2010/10/13/more-things-are-dreamt-your-philosophy/'}})
    sw_467 = pipefetchpage.pipe_fetchpage(context, forever, conf={u'URL': {u'terminal': u'URL', u'type': u'url'}, u'to': {u'type': u'text', u'value': u'</ul>'}, u'token': {u'type': u'text', u'value': u'<li'}, u'from': {u'type': u'text', u'value': u'<ul class="spritemap">'}}, URL = sw_117)
    sw_487 = pipefilter.pipe_filter(context, sw_467, conf={u'COMBINE': {u'type': u'text', u'value': u'and'}, u'MODE': {u'type': u'text', u'value': u'permit'}, u'RULE': {u'field': {u'type': u'text', u'value': u'content'}, u'value': {u'type': u'text', u'value': u'News<\\/a>'}, u'op': {u'type': u'text', u'value': u'matches'}}})
    sw_498 = piperegex.pipe_regex(context, sw_487, conf={u'RULE': [{u'field': {u'type': u'text', u'value': u'link'}, u'match': {u'type': u'text', u'value': u'^'}, u'replace': {u'type': u'text', u'value': u'${content}'}}, {u'field': {u'type': u'text', u'value': u'link'}, u'match': {u'type': u'text', u'value': u'.*?href=\\"(.*?)\\".*?>News.*?'}, u'replace': {u'type': u'text', u'value': u'$1'}}]})
    _OUTPUT = pipeoutput.pipe_output(context, sw_498, conf=None)
    return _OUTPUT

if __name__ == "__main__":
    context = Context()
    p = pipe_HBXVrI6n3RGE9RZ3rLQIDg(context, None)
    for i in p:
        print i

