<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.7: http://docutils.sourceforge.net/" />
<title>ts2avi</title>
<style type="text/css">

/*
:Author: David Goodger (goodger@python.org)
:Id: $Id: html4css1.css 6253 2010-03-02 00:24:53Z milde $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

/* Uncomment (and remove this text!) to get bold-faced definition list terms
dl.docutils dt {
  font-weight: bold }
*/

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

/* Uncomment (and remove this text!) to get reduced vertical space in
   compound paragraphs.
div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }
*/

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin: 0 0 0.5em 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left, .figure.align-left, object.align-left {
  clear: left ;
  float: left ;
  margin-right: 1em }

img.align-right, .figure.align-right, object.align-right {
  clear: right ;
  float: right ;
  margin-left: 1em }

img.align-center, .figure.align-center, object.align-center {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

.align-left {
  text-align: left }

.align-center {
  clear: both ;
  text-align: center }

.align-right {
  text-align: right }

/* reset inner alignment in figures */
div.align-right {
  text-align: left }

/* div.align-center * { */
/*   text-align: left } */

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic }

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font: inherit }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

ul.auto-toc {
  list-style-type: none }

</style>
</head>
<body>
<div class="document" id="ts2avi">
<h1 class="title">ts2avi</h1>

<p>Other languages : <a class="reference external" href="LISEZMOI.html">fr</a></p>
<div class="section" id="introduction">
<h1>Introduction</h1>
<p>Boxes like the freebox provided by the french ISP &quot;free&quot; allow
recording of TV channels. Such records are encoded using an internal
vlc service in <em>Transport Stream</em> format. Usually for a common 2h
movie the size of the records can reach 3 to 4Gb -- and if you
intend to record at least 2 movies each week then you will reach
your hard disk capacity sooner than expected!</p>
<p><cite>ts2avi</cite> is a python script that will allow conversion of all your
ts videos into a common divx container (with MPEG4 for video format
and MP3 for audio format). The sizes of the produced video files
are 4 to 6 times lesser than the original ones -- with however a
minimum degradation of image quality.</p>
</div>
<div class="section" id="prerequisites">
<h1>Prerequisites</h1>
<p>ts2avi being a python script, of course you will need a recent
installation of python. It is recommended to have a 2.7 version
although the script might work with a 2.6 version, as it uses the
subprocess module.</p>
<p>For video conversion the script relies on <cite>mencoder</cite>, please check
that it is installed or download it from
<a class="reference external" href="http://www.mplayerhq.hu/design7/dload.html">http://www.mplayerhq.hu/design7/dload.html</a>.
For most GNU/Linux distributions it should be available alongside
with mplayer.</p>
<p>ts2avi is at present working only for linux-based platforms. However
it can be easily tuned for MS Windows ones, if the prerequisites are
installed, but it should need a small tuning of the script to
overwrite the default path for <cite>mencoder</cite>.</p>
</div>
<div class="section" id="installation">
<h1>Installation</h1>
<p>The ts2avi script is shipped as a distutils package. To install
the library, unpack the distribution archive, and issue the
following command:</p>
<pre class="literal-block">
$ python setup.py install
</pre>
<p>If you want to have a <em>local</em> installation of the script, or
equivalently if you don't have root access for installing
site-packages, you may want to make benefit from the new 'user'
option which is provided by recent versions of distutils:</p>
<pre class="literal-block">
$ python setup.py install --user
</pre>
<p>This will install everything in your <tt class="docutils literal"><span class="pre">$HOME/.local</span></tt> directory for
POSIX users. Don't forget to add your <tt class="docutils literal"><span class="pre">$HOME/.local/bin</span></tt> to your
path for instance in you <cite>.bashrc</cite> source bash configuration file.</p>
<p>You might also install ts2avi as an egg package using the
setuptools <cite>easy_install</cite> script:</p>
<pre class="literal-block">
$ easy_install ts2avi
</pre>
<p>would do everything for you: download and install ts2avi.</p>
</div>
<div class="section" id="usage">
<h1>Usage</h1>
<p>Basic usage is as follows:</p>
<pre class="literal-block">
$ ts2avi.py &lt;myrecord&gt;.ts
</pre>
<p>This would convert the argument TS file into an MPEG4 &lt;myrecord&gt;.avi
file in the same current directory. Please notice that the script
recognizes all current Unix pattern expansion, so for instance if
you would like to convert all records from a given TV channel:</p>
<pre class="literal-block">
$ ts2avi.py TMC*.ts
</pre>
<p>For storage of output files in a different directory, which could be
usefull if you intend to copy the avi files on an external hard disk
for instance, use the <cite>--output_dir</cite> option:</p>
<pre class="literal-block">
$ ts2avi.py --output_dir=/media/hdd/Videos *.ts
</pre>
<p>Video conversion is done using different profiles (see <a class="reference internal" href="#how-it-works">How it works</a>).
To select a given profile issue the following command:</p>
<pre class="literal-block">
$ ts2avi.py --profile='fast' &lt;myrecord&gt;.ts
</pre>
<p>For full explanation on the different options of ts2avi, try:</p>
<pre class="literal-block">
$ ts2avi.py --help
</pre>
</div>
<div class="section" id="how-it-works">
<h1>How it works</h1>
<p>For each argument file, the video conversion is performed in a
temporary directory. The different steps are the followings:</p>
<ol class="arabic simple">
<li>The container is transformed into MPEG (audio and video
encoding are however totally preserved during this operation,
it is a pure copy)</li>
<li>Audio is extracted and converted separatly into MP3</li>
<li>Finally a video encoding into MPG4 is performed using a two
pass process.</li>
</ol>
<p>Different profiles are available however. To select one of them,
use the <cite>--profile</cite> option. The previous steps refer to the
default profile which is supposed to provide the best quality
possible.</p>
</div>
<div class="section" id="drawbacks-v-0-1-1">
<h1>Drawbacks (v. 0.1.1)</h1>
<ul class="simple">
<li>For the moment, the script is working on Unix-like platforms.
Tuning it for MS Windows is however not very complicated: just
use the '--mencoder_path' option to set the precise path to your
local installation of <cite>mencoder</cite>.</li>
<li>Multiprocessing is not working at present. This could be usefull
since video conversion can last several hours especially when
converting more than one video files. This will be probably
developped in a further version by using the multiprocessing
python module.</li>
<li>The original files are not deleted after conversion, and won't be
either in a further version. This is done on purpose, just in case
the quality of the converted video is not good enough, and you would
like to try another profile.</li>
<li>Of course, ts2avi will not remove advertising. For that purpose,
use some video editor like
<a class="reference external" href="http://avidemux.sourceforge.net">Avidemux</a>.
Performing this operation <em>before</em> the video conversion is even
better since you will gain the time due to advertising conversion.</li>
</ul>
</div>
<div class="section" id="todo-v-0-1-1">
<h1>TODO (v. 0.1.1)</h1>
<ul class="simple">
<li>allow the user to define its own profiles in a &quot;ts2avi.ini&quot; file</li>
<li>adjust error treatment</li>
<li>instead of using the python <cite>print</cite> command, make use of the
<cite>logging</cite> module</li>
<li>allow multiple conversions at the same time using the
<cite>multiprocessing</cite> python module</li>
</ul>
</div>
</div>
</body>
</html>
