<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8">
<title>jQuery File Upload Example</title>
</head>
<body>
<form id="wtf" method="POST" enctype="multipart/form-data" action="/file_upload_action">
	<input id="submitme" type="submit" />
</form>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script src="/static/js/vendor/jquery.ui.widget.js"></script>
<script src="/static/js/jquery.iframe-transport.js"></script>
<script src="/static/js/jquery.fileupload.js"></script>
<script>
var allFiles = [];
function onDragOver(evt) {
  evt.stopPropagation();
  evt.preventDefault();
  //console.log(evt);
  evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
}
function penis(e) {
	e.stopPropagation();
	e.preventDefault();
	console.log("HERE");
	console.log(e);
	console.log(e.dataTransfer.files);
	var files = e.dataTransfer.files;
	for(i=0; i<files.length; i++) {
		allFiles.push(files[i]);
	}
	
}
$$("#wtf").submit(function(e) {
	console.log(e);
	console.log("HERE");
	e.preventDefault();
	$$(this).fileupload({url : "/file_upload_action", paramName : "myfiles"});
	$$(this).fileupload("send", {files : allFiles});
	$$(this).fileupload("destroy");
	allFiles = [];
});
var blah = document;
//$$(document).bind('dragover', onDragOver);
//$$(document).bind('drop', penis);
blah.addEventListener('dragover', onDragOver, false);
blah.addEventListener('drop', penis, false);
</script>
</body> 
</html>