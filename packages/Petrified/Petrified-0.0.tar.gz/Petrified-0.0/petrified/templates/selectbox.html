{%- import 'lib.html' as lib -%}

{%- macro field(): -%}
    <select name="{{ widget.name }}" {{ lib.id(widget) }}{{ lib.attrs(widget) }}>
        {%- for option in widget.options %}
            {%- if widget.value == option[0] %}
            <option selected="selected" value="{{ option[0] }}">{{ option[1] }}</option>
            {%- else %}
            <option value="{{ option[0] }}">{{ option[1] }}</option>
            {%- endif %}
        {%- endfor %}
        </select>
{%- endmacro -%}

{% if fragment == 'label' %}
    {{ lib.label(widget) }}
{% elif fragment == 'field' %}
    {{ field() }}
{% else %}
    {%- block widget %}
    <div class="petrified widget selectbox">
        {{- lib.error(widget) }}
        {{- lib.label(widget) }}
        {{ field() }}
    </div>
    {%- endblock %}
{% endif %}
