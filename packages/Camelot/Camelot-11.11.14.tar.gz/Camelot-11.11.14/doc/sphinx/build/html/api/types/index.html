

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>types &mdash; Camelot  documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../../copyright.html" />
    <link rel="top" title="Camelot  documentation" href="../../index.html" />
    <link rel="up" title="Camelot API" href="../index.html" />
    <link rel="next" title="view" href="../view/index.html" />
    <link rel="prev" title="test_proxy" href="../test/test_proxy.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2652891-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../view/index.html" title="view"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../test/test_proxy.html" title="test_proxy"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">Camelot API</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-camelot.types">
<span id="types"></span><h1>types<a class="headerlink" href="#module-camelot.types" title="Permalink to this headline">¶</a></h1>
<p>Camelot extends the SQLAlchemy field types with a number of its own field
types. Those field types are automatically mapped to a specific delegate taking
care of the visualisation.</p>
<p>Those fields are stored in the <a class="reference internal" href="../../api2/camelot.types.html#module-camelot.types" title="camelot.types"><tt class="xref py py-mod docutils literal"><span class="pre">camelot.types</span></tt></a> module.</p>
<dl class="class">
<dt id="camelot.types.Code">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Code</tt><big>(</big><em>parts</em>, <em>separator=u'.'</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#Code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Code" title="Permalink to this definition">¶</a></dt>
<dd><p>SQLAlchemy column type to store codes.  Where a code is a list of strings
on which a regular expression can be enforced.</p>
<p>This column type accepts and returns a list of strings and stores them as a
string joined with points.</p>
<p>eg: <tt class="docutils literal"><span class="pre">['08',</span> <span class="pre">'AB']</span></tt> is stored as <tt class="docutils literal"><span class="pre">08.AB</span></tt></p>
<img alt="../../_images/CodeEditor_editable.png" src="../../_images/CodeEditor_editable.png" />
<dl class="attribute">
<dt id="camelot.types.Code.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.Code.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Unicode</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.Color">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Color</tt><a class="reference internal" href="../../_modules/camelot/types.html#Color"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Color" title="Permalink to this definition">¶</a></dt>
<dd><p>The Color field returns and accepts tuples of the form (r,g,b,a) where
r,g,b,a are integers between 0 and 255. The color is stored as an hexadecimal
string of the form AARRGGBB into the database, where AA is the transparency, 
RR is red, GG is green BB is blue:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">MovieType</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
    <span class="n">color</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Color</span><span class="p">())</span>
</pre></div>
</div>
<img alt="../../_images/ColorEditor_editable.png" src="../../_images/ColorEditor_editable.png" />
<p>The colors are stored in the database as strings.</p>
<p>Use:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">QColor</span><span class="p">(</span><span class="o">*</span><span class="n">color</span><span class="p">)</span> 
</pre></div>
</div>
<p>to convert a color tuple to a QColor.</p>
<dl class="attribute">
<dt id="camelot.types.Color.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.Color.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Unicode</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.Enumeration">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Enumeration</tt><big>(</big><em>choices=</em><span class="optional">[</span><span class="optional">]</span>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#Enumeration"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Enumeration" title="Permalink to this definition">¶</a></dt>
<dd><p>The enumeration field stores integers in the database, but represents them as
strings.  This allows efficient storage and querying while preserving readable code.</p>
<p>Typical use of this field would be a status field.</p>
<p>Enumeration fields are visualized as a combo box, where the labels in the combo
box are the capitalized strings:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
  <span class="n">title</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  <span class="n">state</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Enumeration</span><span class="p">([(</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;planned&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;recording&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s">&#39;finished&#39;</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="s">&#39;canceled&#39;</span><span class="p">)]),</span> 
                                          <span class="n">index</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s">&#39;planning&#39;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="../../_images/ChoicesEditor_editable.png" src="../../_images/ChoicesEditor_editable.png" />
<p>If None should be a possible value of the enumeration, add (None, None) to the list of
possible enumerations.  None will be presented as empty in the GUI.</p>
<dl class="attribute">
<dt id="camelot.types.Enumeration.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.Enumeration.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Integer</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.File">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">File</tt><big>(</big><em>max_length=100</em>, <em>upload_to=''</em>, <em>storage=&lt;class 'camelot.core.files.storage.Storage'&gt;</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#File"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Sqlalchemy column type to store files.  Only the location of the file is stored</p>
<p>This column type accepts and returns a StoredFile. The name of the file is 
stored as a string in the database.  A subdirectory upload_to can be specified:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
  <span class="n">script</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="n">upload_to</span><span class="o">=</span><span class="s">&#39;script&#39;</span><span class="p">))</span>
</pre></div>
</div>
<img alt="../../_images/FileEditor_editable.png" src="../../_images/FileEditor_editable.png" />
<p>Retrieving the actual storage from a File field can be a little cumbersome.
The easy way is taking it from the field attributes, in which it will be
put by default.  If no field attributes are available at the location where
the storage is needed, eg in some function doing document processing, one 
needs to go through SQLAlchemy to retrieve it.</p>
<p>For an &#8216;task&#8217; object  with a File field named &#8216;document&#8217;, the
storage can be retrieved:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">orm</span>

<span class="n">task_mapper</span> <span class="o">=</span> <span class="n">orm</span><span class="o">.</span><span class="n">object_mapper</span><span class="p">(</span> <span class="n">task</span> <span class="p">)</span>
<span class="n">document_property</span> <span class="o">=</span> <span class="n">task_mapper</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s">&#39;document&#39;</span><span class="p">)</span>
<span class="n">storage</span> <span class="o">=</span> <span class="n">document_property</span><span class="o">.</span><span class="n">columns</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">storage</span>
</pre></div>
</div>
<dl class="attribute">
<dt id="camelot.types.File.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.File.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Unicode</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="camelot.types.File.stored_file_implementation">
<tt class="descname">stored_file_implementation</tt><a class="headerlink" href="#camelot.types.File.stored_file_implementation" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">StoredFile</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.Image">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Image</tt><big>(</big><em>max_length=100</em>, <em>upload_to=''</em>, <em>storage=&lt;class 'camelot.core.files.storage.Storage'&gt;</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#Image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Image" title="Permalink to this definition">¶</a></dt>
<dd><p>Sqlalchemy column type to store images</p>
<p>This column type accepts and returns a StoredImage, and stores them in the directory
specified by settings.CAMELOT_MEDIA_ROOT.  The name of the file is stored as a string in
the database.</p>
<p>The Image field type provides the same functionallity as the File field type, but
the files stored should be images.</p>
<img alt="../../_images/ImageEditor_editable.png" src="../../_images/ImageEditor_editable.png" />
<dl class="attribute">
<dt id="camelot.types.Image.stored_file_implementation">
<tt class="descname">stored_file_implementation</tt><a class="headerlink" href="#camelot.types.Image.stored_file_implementation" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">StoredImage</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.Language">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Language</tt><a class="reference internal" href="../../_modules/camelot/types.html#Language"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Language" title="Permalink to this definition">¶</a></dt>
<dd><p>The languages are stored as a string in the database of 
the form language[_country], where :</p>
<blockquote>
<div><ul class="simple">
<li>language is a lowercase, two-letter, ISO 639 language code,</li>
<li>territory is an uppercase, two-letter, ISO 3166 country code</li>
</ul>
</div></blockquote>
<p>This used to be implemented using babel, but this was too slow and
used too much memory, so now it&#8217;s implemented using QT.</p>
<dl class="attribute">
<dt id="camelot.types.Language.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.Language.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Unicode</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.Rating">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">Rating</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#Rating"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.Rating" title="Permalink to this definition">¶</a></dt>
<dd><p>The rating field is an integer field that is visualized as a number of stars that
can be selected:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
  <span class="n">title</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="n">required</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
  <span class="n">rating</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">camelot</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">Rating</span><span class="p">())</span>
</pre></div>
</div>
<img alt="../../_images/StarEditor_editable.png" src="../../_images/StarEditor_editable.png" />
<dl class="attribute">
<dt id="camelot.types.Rating.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.Rating.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Integer</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.RichText">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">RichText</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#RichText"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.RichText" title="Permalink to this definition">¶</a></dt>
<dd><p>RichText fields are unlimited text fields which contain html.  The html will be
rendered in a rich text editor.</p>
<blockquote>
<div><img alt="../../_images/RichTextEditor_editable.png" src="../../_images/RichTextEditor_editable.png" />
</div></blockquote>
<dl class="attribute">
<dt id="camelot.types.RichText.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.RichText.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">UnicodeText</span></tt></p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.types.VirtualAddress">
<em class="property">class </em><tt class="descclassname">camelot.types.</tt><tt class="descname">VirtualAddress</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/camelot/types.html#VirtualAddress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.types.VirtualAddress" title="Permalink to this definition">¶</a></dt>
<dd><p>A single field that can be used to enter phone numbers, fax numbers, email
addresses, im addresses.  The editor provides soft validation of the data
entered.  The address or number is stored as a string in the database.</p>
<p>This column type accepts and returns tuples of strings, the first string is
the <tt class="xref py py-attr docutils literal"><span class="pre">virtual_address_type</span></tt>, and the second the address itself.</p>
<p>eg: <tt class="docutils literal"><span class="pre">('email','project-camelot&#64;conceptive.be')</span></tt> is stored as
<tt class="docutils literal"><span class="pre">email://project-camelot&#64;conceptive.be</span></tt></p>
<img alt="../../_images/virtualaddress_editor.png" src="../../_images/virtualaddress_editor.png" />
<dl class="attribute">
<dt id="camelot.types.VirtualAddress.impl">
<tt class="descname">impl</tt><a class="headerlink" href="#camelot.types.VirtualAddress.impl" title="Permalink to this definition">¶</a></dt>
<dd><p>alias of <tt class="xref py py-class docutils literal"><span class="pre">Unicode</span></tt></p>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="../test/test_proxy.html"
                        title="previous chapter">test_proxy</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../view/index.html"
                        title="next chapter">view</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/types/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../view/index.html" title="view"
             >next</a> |</li>
        <li class="right" >
          <a href="../test/test_proxy.html" title="test_proxy"
             >previous</a> |</li>
        <li><a href="../../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../index.html" >Camelot API</a> &raquo;</li> 
      </ul>
    </div>

<br/>
<a href="http://example.com/my_article.html#disqus_thread">Comments</a>
<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */

  /** var disqus_developer = 1 **/

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://camelot.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=camelot">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    <div class="footer">
        &copy; <a href="../../copyright.html">Copyright</a> 2009 - 2011, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
<div class="footer">
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

<script type="text/javascript">
var disqus_shortname = 'camelot';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/camelot/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



  </body>
</html>