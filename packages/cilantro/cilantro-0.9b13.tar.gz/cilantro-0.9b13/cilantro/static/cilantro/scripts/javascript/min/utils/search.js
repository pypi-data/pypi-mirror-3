var __hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},__indexOf=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(this[b]===a)return b;return-1},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define(["common/views/collection","common/models/state","common/views/state"],function(a,b,c){var d,e,f,g;return e=function(){function a(){a.__super__.constructor.apply(this,arguments)}return __extends(a,b.Model),a}(),f=function(){function a(){a.__super__.constructor.apply(this,arguments)}return __extends(a,Backbone.Collection),a.prototype.model=e,a.prototype.query=function(a){return $.get(this.url,{q:a},__bind(function(a){return this.each(function(b){var c;return(c=b.id,__indexOf.call(a,c)<0)?b.disable():b.enable()})},this))},a}(),d=function(){function a(){a.__super__.constructor.apply(this,arguments)}return __extends(a,Backbone.View),a.prototype.events={focus:"focus",blur:"blur",keyup:"keyup"},a.prototype.focus=function(){this.focused=!0;if(this.el.val()!=="")return this.results.show()},a.prototype.blur=function(){this.focused=!1;if(!this.results.entered)return this.results.hide()},a.prototype.keyup=function(){return this.results.show(),clearTimeout(this._searchTimer),this._searchTimer=setTimeout(__bind(function(){return this.results.query(this.el.val())},this),200)},a}(),g=function(){function b(){this.reposition=__bind(this.reposition,this),b.__super__.constructor.apply(this,arguments)}return __extends(b,a.View),b.prototype.inputViewClass=d,b.prototype.defaultContent='<div class="info">No results found</div>',b.prototype.elements={".content":"content"},b.prototype.events={mouseenter:"mouseenter",mouseleave:"mouseleave"},b.prototype.initialize=function(a){return this.input||(this.input=new this.inputViewClass,this.input.results=this,this.defaultContent=$(this.defaultContent)),this.render(),b.__super__.initialize.apply(this,arguments)},b.prototype.insertChild=function(a){return this.content.append(a.el)},b.prototype.render=function(){return this.el.appendTo("body"),$(window).bind("resize",this.reposition),this},b.prototype.reposition=function(){var a,b,c,d;return d=this.el.outerWidth(),b=this.input.el.offset(),a=this.input.el.outerHeight(),c=this.input.el.outerWidth(),this.el.css({top:b.top+a+5,left:b.left-(d-c)/2})},b.prototype.query=function(a){return this.collection.query(a).success(__bind(function(a){return a.length?this.defaultContent.detach():this.defaultContent.show().prependTo(this.content)},this))},b.prototype.mouseenter=function(){return this.entered=!0},b.prototype.mouseleave=function(){this.entered=!1;if(!this.input.focused)return this.hide()},b.prototype.show=function(){return this.reposition(),this.el.fadeIn("fast")},b.prototype.hide=function(){return this.el.fadeOut("fast")},b}(),{ResultModel:e,ResultCollection:f,ResultListView:g,InputView:d}})