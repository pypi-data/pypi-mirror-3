<head>
	<script type="text/javascript" src="../static/js/jquery-1.7.1.min.js"></script>
	<script type="text/javascript" src="../static/js/jquery-ui-1.8.16.custom.min.js"></script>
	<script type="text/javascript" src="../static/js/jquery.ba-dotimeout.min.js"></script>
	<script src="../static/js/vendor/jquery.ui.widget.js"></script>
	<script src="../static/js/jquery.iframe-transport.js"></script>
	<script src="../static/js/jquery.fileupload.js"></script>
</head>
<form>
	<span>Upload Torrent: </span><input type="file" id="files"/>
	<table></table>
	<input type="submit" value="Upload" /><input type="button" value="Cancel" />
</form>

<script>
	filesToUpload = [];
	function buildFileTable() {
		for (i=0; i<filesToUpload.length; i++) {
			$("table").append($("<tr>").append($("<td>").text(filesToUpload[i].fileName)));
		}
	}
	function handleFileSelect(evt) {
	    var files = evt.target.files; // FileList object
		console.log(files);
		filesToUpload.push(files[0]);
		buildFileTable();
	}
	function onDragOver(evt) {
	  evt.stopPropagation();
	  evt.preventDefault();
	  //console.log(evt);
	  evt.dataTransfer.dropEffect = 'copy'; // Explicitly show this is a copy.
	}
	function handleFileDrop(e) {
		e.stopPropagation();
		e.preventDefault();
		console.log("HERE");
		console.log(e);
		console.log(e.dataTransfer.files);
		var files = e.dataTransfer.files;
		for(i=0; i<files.length; i++) {
			filesToUpload.push(files[i]);
		}
		buildFileTable();
	
	}
	document.addEventListener('dragover', onDragOver, false);
	document.addEventListener('drop', handleFileDrop, false);
	document.getElementById('files').addEventListener('change', handleFileSelect, false);
</script>