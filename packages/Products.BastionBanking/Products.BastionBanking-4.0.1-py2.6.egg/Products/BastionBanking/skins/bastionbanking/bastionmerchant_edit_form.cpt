<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="bastionbanking">

<body>
  <div metal:fill-slot="main">

      <h1><img src="" tal:attributes="src context/icon">&nbsp;<span tal:replace="context/title_or_id"/></h1>

      <a href=""
           class="link-parent"
           tal:define="parent_url python:context.navigationParent(context, template.getId())"
           tal:condition="parent_url"
           tal:attributes="href parent_url"
           i18n:translate="go_to_parent_url">Up one level</a>

      <form name="form"  action="."  method="post" tal:attributes="action template/getId">

          <div class="field"
               tal:define="error errors/title|nothing;
                           Title request/title | context/Title;"
               tal:attributes="class python:test(error, 'field error', 'field')">

             <label for="title" i18n:translate="label_title">Title</label>

             <span class="fieldRequired" title="Required"
                   i18n:attributes="title"
                   i18n:translate="label_required">(Required)</span>

             <div tal:content="error">Validation error output</div>

             <input type="text" id="title" name="title" value="" size="40"
                    tal:attributes="value Title;"/>
          </div>

          <div class="field"
               tal:define="description request/description | context/Description ">

            <label for="description" 
                   i18n:translate="label_description">Description</label>

            <div class="formHelp" i18n:translate="help_description">
              A brief description of the Merchant Service.
            </div>

            <textarea cols="80" rows="5" id="description" name="description"
                      tal:content="description">
              Description
            </textarea>
          </div>

          <div class="field"
               tal:define="error errors/mode|nothing;
                           Mode request/mode | context/mode;"
               tal:attributes="class python:test(error, 'field error', 'field')">

             <label for="mode" i18n:translate="label_mode">Mode</label>

             <span class="fieldRequired" title="Required"
                   i18n:attributes="title"
                   i18n:translate="label_required">(Required)</span>

            <div class="formHelp" i18n:translate="help_mode">
               Whether this is running against the providers live or test system.
            </div>

             <div tal:content="error">Validation error output</div>

             <tal:modes repeat="mode context/modes">
                <input type="radio" name="mode" value=""
                        tal:attributes="value mode; checked python: test(mode==Mode, 1,0)"/>
                <i tal:content="mode"/>&nbsp;&nbsp;&nbsp;
             </tal:modes>
          </div>

          <div class="field"
               tal:define="error errors/number_retention|nothing;
                           Number_Retention request/number_retention | context/number_retention;"
               tal:attributes="class python:test(error, 'field error', 'field')">

             <label for="number_retention" i18n:translate="label_number_retention">Card Number Retention Policy</label>

             <span class="fieldRequired" title="Required"
                   i18n:attributes="title"
                   i18n:translate="label_required">(Required)</span>


            <div class="formHelp" i18n:translate="help_retentions">
               Some jurisdictions have different policies regarding what must be done regarding storing
               credit card/payee details as we process transactions.  You can choose how card numbers are
               saved here.
            </div>

             <div tal:content="error">Validation error output</div>

             <tal:number_retentions repeat="number_retention context/retentions">
                <input type="radio" name="number_retention" value=""
                        tal:attributes="value number_retention; checked python: test(number_retention==Number_Retention, 1,0)"/>
                <i tal:content="number_retention"/>&nbsp;&nbsp;&nbsp;
             </tal:number_retentions>
          </div>

          <div class="field"
               tal:define="error errors/store_identifier|nothing;
                           Store_Identifier request/store_identifier | context/store_identifier;"
               tal:attributes="class python:test(error, 'field error', 'field')">

             <label for="title" i18n:translate="label_store_identifier">Store Identifier</label>

             <div class="formHelp" i18n:translate="help_store_identifier">
                  We attach this identifer to transactions so that you can configure multiple
                  Bastion Merchant Service's to your merchant facility and clearly see where the 
                  transactions are originating.
             </div>

             <div tal:content="error">Validation error output</div>

             <input type="text" id="store_identifier" name="store_identifier" value="" size="20"
                    tal:attributes="value Store_Identifier;"/>
          </div>

          <div class="field"
               tal:define="error errors/store_name|nothing;
                           Store_Name request/store_name | context/store_name;"
               tal:attributes="class python:test(error, 'field error', 'field')">

             <label for="title" i18n:translate="label_store_name">Store Name</label>

             <div class="formHelp" i18n:translate="help_store_name">
                  It's sometimes possible to have/send store details to a third-party.  You can set this here.
             </div>

             <div tal:content="error">Validation error output</div>

             <input type="text" id="store_name" name="store_name" value="" size="40"
                    tal:attributes="value Store_Name;"/>
          </div>

          <div class="formControls" colspan="2">
               <input class="context" type="submit" name="form.button.Edit"
                      value="Edit" i18n:attributes="Edit" />
          </div>

          <input type="hidden" name="form.submitted" value="1"/>
      </form>

  </div>
 
</body>
</html>
