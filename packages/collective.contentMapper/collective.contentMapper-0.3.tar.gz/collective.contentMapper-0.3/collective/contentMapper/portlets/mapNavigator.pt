<div metal:define-macro="portlet" tal:omit-tag="">

    <tal:block>

        <dl id="category-selector" class="portlet">

            <dd class="portletItemSingle odd" tal:define="selectedCategories request/Subject | nothing;
                                                          portal context/@@plone_portal_state/portal;">
                <div tal:condition="view/vtcExists">
                    <ul>
                         <li tal:repeat="vtcCat python:view.getVTCategories('/')">
                            <tal:block tal:condition="python: vtcCat.title == view.rootCategory">
                                 <div class="cn-category-title" tal:content="python: view.Title()">
                                     Title
                                 </div>
                                 
                                 <div class="mapNavigator" style="position:relative">
                                    <img class="mapNavigatorPortletMap" src="++resource++collective.contentMapper.images/NoordHollandMap.png" />
                                    
                                    <div class="marker" tal:repeat="cat python:view.getAllKeywordsBelow('/'+vtcCat.id)" tal:attributes="style python: view.getPositionCSSFor(cat)">
                                        
                                        <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString([], subtracting=cat) or portal.absolute_url() + view.generateQueryString([], adding=cat);">
                                            <img src="++resource++collective.contentMapper.images/SmallMarker.png"
                                                 tal:attributes="alt cat" />
                                        </a>
                                        <div style="position:relative">
                                            <span class="tooltip" tal:content="cat">
                                                    Name
                                            </span>
                                        </div>
                                    </div>
                                 </div>
                                 
                                 <!-- ul>
                                     <li class="nc-category"
                                        tal:repeat="cat python:view.getAllKeywordsBelow('/'+vtcCat.id)"
                                        tal:attributes="class python:selectedCategories is not None and cat in selectedCategories and 'nc-category nc-category_selected' or 'nc-category'"
                                    >
                                         
                                         <a href="" tal:attributes="href python:selectedCategories is not None and cat in selectedCategories and portal.absolute_url() + view.generateQueryString([], subtracting=cat) or portal.absolute_url() + view.generateQueryString([], adding=cat)">
                                             <span tal:condition="python:selectedCategories is not None and cat in selectedCategories" tal:omit-tag="">
                                                 &gt;
                                             </span>
                                             <span tal:condition="python:selectedCategories is None or cat not in selectedCategories" tal:omit-tag="">
                                                    +
                                             </span>
                                             <span tal:content="cat">
                                                 category 
                                             </span> - <span tal:content="python: view.getXPosition(cat)"></span> x <span tal:content="python: view.getYPosition(cat)"></span>
                                         </a>
                                         
                                     </li>
                                 </ul -->
                            </tal:block>
                            
                         </li>
                    </ul>
                </div>
                
            </dd>

        </dl>

    </tal:block>

</div>