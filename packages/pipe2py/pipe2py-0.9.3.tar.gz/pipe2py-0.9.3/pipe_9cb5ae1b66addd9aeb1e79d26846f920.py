#Pipe pipe_9cb5ae1b66addd9aeb1e79d26846f920 generated by pipe2py

from pipe2py import Context
from pipe2py.modules import *


def pipe_9cb5ae1b66addd9aeb1e79d26846f920(context, _INPUT, conf=None, **kwargs):
    "Pipeline"
    if conf is None:
        conf = {}

    if context.describe_input:
        return [(u'1', u'asin', u'asin', u'text', u'B002Y27P3M'), (u'2', u'pagenumn', u'pagenumn', u'number', u'1'), (u'3', u'track', u'track', u'text', u'9999'), (u'5', u'img', u'img', u'text', u'img')]

    forever = pipeforever.pipe_forever(context, None, conf=None)

    sw_645 = pipetextinput.pipe_textinput(context, forever, conf={u'default': {u'type': u'text', u'value': u'img'}, u'position': {u'type': u'number', u'value': u'5'}, u'prompt': {u'type': u'text', u'value': u'img'}, u'name': {u'type': u'text', u'value': u'img'}, u'debug': {u'type': u'text', u'value': u'img'}})
    def pipe_sw_768(context, _INPUT, conf=None, **kwargs):
        "Submodule"
        sw_768 = pipesubstr.pipe_substr(context, _INPUT, conf={u'length': {u'type': u'number', u'value': u'10'}, u'from': {u'type': u'number', u'value': u'150'}})
        return sw_768
    sw_292 = pipetextinput.pipe_textinput(context, forever, conf={u'default': {u'type': u'text', u'value': u'B002Y27P3M'}, u'position': {u'type': u'number', u'value': u'1'}, u'prompt': {u'type': u'text', u'value': u'asin'}, u'name': {u'type': u'text', u'value': u'asin'}, u'debug': {u'type': u'text', u'value': u'B002Y27P3M'}})
    sw_5 = pipenumberinput.pipe_numberinput(context, forever, conf={u'default': {u'type': u'number', u'value': u'1'}, u'position': {u'type': u'number', u'value': u'2'}, u'prompt': {u'type': u'text', u'value': u'pagenumn'}, u'name': {u'type': u'text', u'value': u'pagenumn'}, u'debug': {u'type': u'number', u'value': u'1'}})
    sw_681 = pipeurlbuilder.pipe_urlbuilder(context, forever, conf={u'PATH': {u'type': u'text', u'value': u''}, u'BASE': {u'type': u'text', u'value': u'http://shopper-euphoria.com/scrtest.php'}, u'PARAM': [{u'value': {u'terminal': u'PARAM_1_value', u'type': u'text'}, u'key': {u'type': u'text', u'value': u'asin'}}, {u'value': {u'terminal': u'PARAM_2_value', u'type': u'text'}, u'key': {u'type': u'text', u'value': u'pagen'}}]}, PARAM_1_value = sw_292, PARAM_2_value = sw_5)
    sw_84 = pipefetchpage.pipe_fetchpage(context, forever, conf={u'URL': {u'terminal': u'URL', u'type': u'url'}, u'to': {u'type': u'text', u'value': u'<table class="CMheadingBar"'}, u'token': {u'type': u'text', u'value': u'<span>Comment</span>'}, u'from': {u'type': u'text', u'value': u'<table id="productReviews"'}}, URL = sw_681)
    sw_298 = pipetruncate.pipe_truncate(context, sw_84, conf={u'count': {u'type': u'number', u'value': u'10'}})
    sw_708 = pipefilter.pipe_filter(context, sw_298, conf={u'COMBINE': {u'type': u'text', u'value': u'and'}, u'MODE': {u'type': u'text', u'value': u'block'}, u'RULE': {u'field': {u'type': u'text', u'value': u'content'}, u'value': {u'type': u'text', u'value': u'Length::'}, u'op': {u'type': u'text', u'value': u'contains'}}})
    sw_637 = pipetextinput.pipe_textinput(context, forever, conf={u'default': {u'type': u'text', u'value': u'9999'}, u'position': {u'type': u'number', u'value': u'3'}, u'prompt': {u'type': u'text', u'value': u'track'}, u'name': {u'type': u'text', u'value': u'track'}, u'debug': {u'type': u'text', u'value': u'9999'}})
    sw_174 = piperegex.pipe_regex(context, sw_708, conf={u'RULE': [{u'field': {u'type': u'text', u'value': u'content'}, u'globalmatch': {u'type': u'text', u'value': u'1'}, u'match': {u'type': u'text', u'value': u'[\\n\\r]'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'content'}, u'match': {u'type': u'text', u'value': u'.*<!-- BOUNDARY -->'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'asin'}, u'match': {u'type': u'text', u'value': u',*'}, u'replace': {u'terminal': u'RULE_3_replace', u'type': u'text'}}, {u'field': {u'type': u'text', u'value': u'afflinkp'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'afflinkp'}, u'match': {u'type': u'text', u'value': u'(.*)'}, u'replace': {u'type': u'text', u'value': u'$1amznp/${asin}'}}, {u'field': {u'type': u'text', u'value': u'afflinkr'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'${afflinkp}'}}, {u'field': {u'type': u'text', u'value': u'afflinkr'}, u'match': {u'type': u'text', u'value': u'amznp'}, u'replace': {u'type': u'text', u'value': u'amznr'}}, {u'field': {u'type': u'text', u'value': u'site'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'comment'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'B001G7QUU0 - no from.  B002WENMX4 - no creator'}}, {u'field': {u'type': u'text', u'value': u'comm2'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'http://alekdavis.blogspot.com/2008/09/more-fun-with-yahoo-pipes.html'}}, {u'field': {u'type': u'text', u'value': u'track'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'terminal': u'RULE_11_replace', u'type': u'text'}}, {u'field': {u'type': u'text', u'value': u'img'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'terminal': u'RULE_12_replace', u'type': u'text'}}, {u'field': {u'type': u'text', u'value': u'content'}, u'match': {u'type': u'text', u'value': u'(.*)<script>.*</script>(.*)'}, u'replace': {u'type': u'text', u'value': u'$1$2'}}]}, RULE_3_replace = sw_292, RULE_12_replace = sw_645, RULE_11_replace = sw_637)
    sw_367 = pipefilter.pipe_filter(context, sw_174, conf={u'COMBINE': {u'type': u'text', u'value': u'and'}, u'MODE': {u'type': u'text', u'value': u'permit'}, u'RULE': {u'field': {u'type': u'text', u'value': u'content'}, u'value': {u'type': u'text', u'value': u'Help other customers find the most helpful reviews'}, u'op': {u'type': u'text', u'value': u'contains'}}})
    sw_260 = piperename.pipe_rename(context, sw_367, conf={u'RULE': [{u'newval': {u'type': u'text', u'value': u'title'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'description'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'dc:creator'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'pubDate'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'stars'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'permalink'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'from'}, u'field': {u'type': u'text', u'value': u'content'}, u'op': {u'type': u'text', u'value': u'rename'}}]})
    sw_132 = piperegex.pipe_regex(context, sw_260, conf={u'RULE': [{u'field': {u'type': u'text', u'value': u'title'}, u'match': {u'type': u'text', u'value': u'.*<span style="vertical-align:middle;"><b>([^<]+)</b>.*'}, u'replace': {u'type': u'text', u'value': u'$1'}}, {u'field': {u'type': u'text', u'value': u'pubDate'}, u'match': {u'type': u'text', u'value': u'.*<nobr>([^<]+).*'}, u'replace': {u'type': u'text', u'value': u'$1'}}, {u'field': {u'type': u'text', u'value': u'dc:creator'}, u'match': {u'type': u'text', u'value': u'.*d;">([^<]*)</span></a>([^<]*).*'}, u'replace': {u'type': u'text', u'value': u'$1 $2'}}, {u'field': {u'type': u'text', u'value': u'pubDate'}, u'match': {u'type': u'text', u'value': u','}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'dc:creator'}, u'match': {u'type': u'text', u'value': u'-[ ]*$'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'stars'}, u'match': {u'type': u'text', u'value': u'.*title="([^"]*)".*'}, u'replace': {u'type': u'text', u'value': u'$1'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'<div style="padding-top: 10px;.*'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'.*</div>'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'from'}, u'match': {u'type': u'text', u'value': u'.*(This review is from: </span>)<a([^>]*)>([^<]*).*'}, u'replace': {u'type': u'text', u'value': u'$1$3.'}}, {u'field': {u'type': u'text', u'value': u'dc:creator'}, u'match': {u'type': u'text', u'value': u'.*stars.*'}, u'replace': {u'type': u'text', u'value': u'!@#$%auth1 !@#$%auth2 !@#$%auth3'}}, {u'field': {u'type': u'text', u'value': u'from'}, u'match': {u'type': u'text', u'value': u'.*(This review is from: </span>)([^<]*)</b>.*'}, u'replace': {u'type': u'text', u'value': u'$1$2.'}}, {u'field': {u'type': u'text', u'value': u'from'}, u'match': {u'type': u'text', u'value': u'.*stars.*'}, u'replace': {u'type': u'text', u'value': u''}}]})
    sw_521 = piperegex.pipe_regex(context, sw_132, conf={u'RULE': [{u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'<div style="padding-top: 10px;.*'}, u'replace': {u'type': u'text', u'value': u''}}, {u'field': {u'type': u'text', u'value': u'permalink'}, u'match': {u'type': u'text', u'value': u'(.*)Permalink.*'}, u'replace': {u'type': u'text', u'value': u'$1'}}, {u'field': {u'type': u'text', u'value': u'permalink'}, u'match': {u'type': u'text', u'value': u'.*"([^"]*)".*'}, u'replace': {u'type': u'text', u'value': u'$1'}}, {u'field': {u'type': u'text', u'value': u'revid'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'${permalink}'}}, {u'field': {u'type': u'text', u'value': u'revid'}, u'match': {u'type': u'text', u'value': u'.*/review/([^/]*)/.*'}, u'replace': {u'type': u'text', u'value': u'$1'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'(.*)<a([^>]*)>([^<]*)</a>(.*)'}, u'replace': {u'type': u'text', u'value': u'$1$3$4'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'(.*)<a([^>]*)>([^<]*)</a>(.*)'}, u'replace': {u'type': u'text', u'value': u'$1$3$4'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'(.*)<a([^>]*)>([^<]*)</a>(.*)'}, u'replace': {u'type': u'text', u'value': u'$1$3$4'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'(.*)<a([^>]*)>([^<]*)</a>(.*)'}, u'replace': {u'type': u'text', u'value': u'$1$3$4'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'match': {u'type': u'text', u'value': u'(.*)<a([^>]*)>([^<]*)</a>(.*)'}, u'replace': {u'type': u'text', u'value': u'$1$3$4'}}, {u'field': {u'type': u'text', u'value': u'seemore'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'<p>See more reviews <a href="${site}go/${asin}/${track}">here</a>.</p>'}}, {u'field': {u'type': u'text', u'value': u'revtitle'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'${title}'}}, {u'field': {u'type': u'text', u'value': u'title'}, u'match': {u'type': u'text', u'value': u'(.*)'}, u'replace': {u'type': u'text', u'value': u'$1 , by ${dc:creator} , ${pubDate}'}}, {u'field': {u'type': u'text', u'value': u'link'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'type': u'text', u'value': u'${permalink}'}}, {u'field': {u'type': u'text', u'value': u'link'}, u'match': {u'type': u'text', u'value': u'(.*)tag=(.*)'}, u'replace': {u'type': u'text', u'value': u'$1tag=1846${track}-20$2'}}]})
    sw_520 = piperename.pipe_rename(context, sw_521, conf={u'RULE': {u'newval': {u'type': u'text', u'value': u'author'}, u'field': {u'type': u'text', u'value': u'dc:creator'}, u'op': {u'type': u'text', u'value': u'copy'}}})
    sw_760 = pipeloop.pipe_loop(context, sw_520, conf={u'assign_part': {u'type': u'text', u'value': u'all'}, u'with': {u'type': u'text', u'value': u'title'}, u'emit_part': {u'type': u'text', u'value': u'all'}, u'mode': {u'type': u'text', u'value': u'assign'}, u'embed': {u'type': u'module', u'value': {u'type': u'substr', u'id': u'sw-768', u'conf': {u'length': {u'type': u'number', u'value': u'10'}, u'from': {u'type': u'number', u'value': u'150'}}}}, u'assign_to': {u'type': u'text', u'value': u'loop:substrtitle'}}, embed = pipe_sw_768)
    def pipe_sw_726(context, _INPUT, conf=None, **kwargs):
        "Submodule"
        sw_726 = pipesubstr.pipe_substr(context, _INPUT, conf={u'length': {u'type': u'number', u'value': u'10'}, u'from': {u'type': u'number', u'value': u'250'}})
        return sw_726
    sw_718 = pipeloop.pipe_loop(context, sw_760, conf={u'assign_part': {u'type': u'text', u'value': u'all'}, u'with': {u'type': u'text', u'value': u'description'}, u'emit_part': {u'type': u'text', u'value': u'all'}, u'mode': {u'type': u'text', u'value': u'assign'}, u'embed': {u'type': u'module', u'value': {u'type': u'substr', u'id': u'sw-726', u'conf': {u'length': {u'type': u'number', u'value': u'10'}, u'from': {u'type': u'number', u'value': u'250'}}}}, u'assign_to': {u'type': u'text', u'value': u'loop:descr'}}, embed = pipe_sw_726)
    sw_754 = piperegex.pipe_regex(context, sw_718, conf={u'RULE': [{u'field': {u'type': u'text', u'value': u'loop:descr'}, u'match': {u'type': u'text', u'value': u'(.*)'}, u'replace': {u'type': u'text', u'value': u'[$1]'}}, {u'field': {u'type': u'text', u'value': u'loop:substrtitle'}, u'match': {u'type': u'text', u'value': u'(.*)'}, u'replace': {u'type': u'text', u'value': u'[$1]'}}]})
    sw_743 = pipefilter.pipe_filter(context, sw_754, conf={u'COMBINE': {u'type': u'text', u'value': u'and'}, u'MODE': {u'type': u'text', u'value': u'block'}, u'RULE': {u'field': {u'type': u'text', u'value': u'loop:descr'}, u'value': {u'type': u'text'}, u'op': {u'type': u'text', u'value': u'contains'}}})
    sw_793 = pipefilter.pipe_filter(context, sw_743, conf={u'COMBINE': {u'type': u'text', u'value': u'and'}, u'MODE': {u'type': u'text', u'value': u'permit'}, u'RULE': {u'field': {u'type': u'text', u'value': u'loop:substrtitle'}, u'value': {u'type': u'text'}, u'op': {u'type': u'text', u'value': u'contains'}}})
    _OUTPUT = pipeoutput.pipe_output(context, sw_793, conf=None)
    return _OUTPUT

if __name__ == "__main__":
    context = Context()
    p = pipe_9cb5ae1b66addd9aeb1e79d26846f920(context, None)
    for i in p:
        print i

