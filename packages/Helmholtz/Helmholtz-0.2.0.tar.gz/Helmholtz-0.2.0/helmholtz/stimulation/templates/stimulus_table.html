{% load access_request %}
{% autoescape off %}

<table class="list_of_data">
 {% block stim_specific_header %}
 <tr>
  <th rowspan="2"></th>
  <th rowspan="2">Label</th>
  <th rowspan="2">Methods</th>
  <th rowspan="2">Program</th>
  <th rowspan="2">Episodes</th>
  <th rowspan="2">Signals</th>
  {% block stim_specific_categories %}
  {% endblock %}
  <th rowspan="2">File</th>
  <th rowspan="2">Status</th>
 </tr>
 {% endblock %}
 
 {% block stim_specific_metadata %}
 {% endblock %}
 
 {% for protocol in protocols %}
 
 {% with protocol.stimulus.cast as stimulus %}
 
 <tr class="{% cycle odd,even %}">
  <td class="action">
   <a href="{% url protocol-detail lab=lab,expt=protocol.block.experiment.label,block=protocol.block.label,protocol=protocol.label %}">
    <img src="{{MEDIA_URL}}images/selector-search.gif"></img>
   </a>
  </td>
  <td>{{protocol.label}}</td>
  <td{% if not protocol.method_names %} class="nd"{% endif %}>{{protocol.method_names|default:'N.D'}}</td>
  <td{% if not protocol.stimulation_program %} class="nd"{% endif %}>{{protocol.stimulation_program|default:'N.D'}}</td>
  <td{% if not protocol.number_of_sequences %} class="nd"{% endif %}>{{protocol.number_of_sequences|default:'N.D'}}</td>
  <td{% if not protocol.file.signal_set.count %} class="nd"{% endif %}>{{protocol.file.signal_set.count|default:'N.D'}}</td>
  {% block stim_specific_data %}
  {% endblock %}
  <td{% if not protocol.file %} class="nd"{% endif %}>{{protocol.file|default:'N.D'}}</td>
  <td>{% download_status protocol.file user %}</td>
 </tr>
 
 {% endwith %}
 
 {% endfor %}
 
 <tr>
  <th colspan="{% block stim_specific_columns %}8{% endblock %}">
   <br/>
  </th>
 </tr>
 
</table>
{% endautoescape %}