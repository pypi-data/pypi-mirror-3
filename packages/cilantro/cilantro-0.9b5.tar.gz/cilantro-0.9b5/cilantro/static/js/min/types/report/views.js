var __bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};define(["common/utils","common/views/collection"],function(a,b){var c,d,e,f,g;return c=function(){function a(){this.editHandler=__bind(this.editHandler,this),a.__super__.constructor.apply(this,arguments)}return __extends(a,Backbone.View),a.prototype.el='<div id="report-editor">                <input type="text" name="name" placeholder="Name...">                <textarea name="description" placeholder="Description..."></textarea>                <div class="controls">                    <button class="cancel">Cancel</button>                    <button class="save">Save</button>                </div>            </div>',a.prototype.elements={"[name=name]":"name","[name=description]":"description",".save":"saveButton",".cancel":"cancelButton"},a.prototype.events={"click .save":"save","click .cancel":"cancel"},a.prototype.initialize=function(){return App.hub.subscribe("report/edit",this.editHandler),this.el.appendTo("body").dialog({dialogClass:"ui-dialog-simple",autoOpen:!1,modal:!0,resizable:!1,draggable:!0,position:["center",150],width:500})},a.prototype.editHandler=function(a){return this.name.val(a.get("name")),this.description.val(a.get("description")),this.activeModel=a,this.el.dialog("open")},a.prototype.save=function(){return this.activeModel.set({name:this.name.val(),description:this.description.val()}),this.activeModel.save(),this.activeModel.isNew()&&this.activeModel.collection.add(this.activeModel),delete this.activeModel,this.el.dialog("close")},a.prototype.cancel=function(){return delete this.activeModel,this.el.dialog("close")},a}(),d={edit:function(a,b){return b==null&&(b=this.model),App.hub.publish("report/edit",b),!1}},e=function(){function a(){a.__super__.constructor.apply(this,arguments)}return __extends(a,Backbone.View),a.prototype.el='<section class="report">                    <strong><a role="name"></a></strong>                    <span class="info">- <span role="unique-count"></span> unique patients</span>                    <span class="info time" style="float: right">modified <span role="modified"></span><span role="timesince"></span></span>                    <div role="description"></div>                    <div class="controls">                        <button class="delete">Delete</button>                        <button class="edit">Edit</button>                        <button class="copy">Copy</button>                    </div>                </section>',a.prototype.events={"click .time":"toggleTime","click .edit":"edit","click .copy":"copy","click .delete":"delete",mouseenter:"showControls",mouseleave:"hideControls"},a.prototype.elements={"[role=name]":"name","[role=unique-count]":"uniqueCount","[role=modified]":"modified","[role=timesince]":"timesince","[role=description]":"description",".controls":"controls"},a.prototype.render=function(){var a;return this.name.text(this.model.get("name")),this.name.attr("href",this.model.get("permalink")),this.modified.text(this.model.get("modified")),this.timesince.text(this.model.get("timesince")),(a=this.model.get("description"))||(a="No description provided"),this.description.text(a),this.uniqueCount.text(this.model.get("unique_count")),this},a.prototype.toggleTime=function(a){return this.modified.toggle(),this.timesince.toggle(),a.stopPropagation()},a.prototype.showControls=function(a){return this._controlsTimer=setTimeout(__bind(function(){return this.controls.slideDown(200)},this),300),!1},a.prototype.hideControls=function(a){return clearTimeout(this._controlsTimer),this.controls.slideUp(300),!1},a.prototype.copy=function(a){var b;return b=this.model.clone(),b.set("id",null),b.set("name",b.get("name")+" (copy)"),b.set("_id",this.model.id),b.collection=this.model.collection,this.edit(a,b),!1},a.prototype["delete"]=function(){return this.model.destroy()},a}(),f=function(){function a(){a.__super__.constructor.apply(this,arguments)}return __extends(a,b.View),a.prototype.el="#report-list",a.prototype.viewClass=e,a.prototype.defaultContent='<section class="info">You have no saved reports.</section>',a}(),g=function(){function a(){this.render=__bind(this.render,this),a.__super__.constructor.apply(this,arguments)}return __extends(a,Backbone.View),a.prototype.el="#report-name",a.prototype.events={click:"edit",mouseover:"hover",mouseout:"hover"},a.prototype.initialize=function(a){return this.model.bind("change:name",this.render),this.hoverText=$('<span class="info">click to edit</span>')},a.prototype.render=function(){var a;return this.el.text(""),(a=this.model.get("name"))?(this.el.removeClass("placeholder"),this.el.append(this.hoverText.hide())):(this.el.addClass("placeholder"),a=this.model.defaults.name,this.hoverText.detach()),this.el.prepend(a+" ")},a.prototype.hover=function(){return this.hoverText.toggle()},a}(),a.include(e,d),a.include(f,b.ExpandableListMixin),a.include(g,d),{Name:g,Item:e,List:f,Editor:c}})