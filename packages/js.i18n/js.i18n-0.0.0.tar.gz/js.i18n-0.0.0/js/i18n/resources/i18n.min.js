if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c){if(this===void 0||this===null){throw new TypeError()}var d=Object(this);var a=d.length>>>0;if(a===0){return -1}var e=0;if(arguments.length>0){e=Number(arguments[1]);if(e!==e){e=0}else{if(e!==0&&e!==(Infinity)&&e!==-(Infinity)){e=(e>0||-1)*Math.floor(Math.abs(e))}}}if(e>=a){return -1}var b=e>=0?e:Math.max(a-Math.abs(e),0);for(;b<a;b++){if(b in d&&d[b]===c){return b}}return -1}}var I18n=I18n||{};I18n.defaultLocale="en";I18n.fallbacks=false;I18n.defaultSeparator=".";I18n.locale=null;I18n.PLACEHOLDER=/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm;I18n.fallbackRules={};I18n.pluralizationRules={en:function(a){return a==0?["zero","none","other"]:a==1?"one":"other"}};I18n.getFallbacks=function(a){if(a===I18n.defaultLocale){return[]}else{if(!I18n.fallbackRules[a]){var d=[],c=a.split("-");for(var b=1;b<c.length;b++){d.push(c.slice(0,b).join("-"))}d.push(I18n.defaultLocale);I18n.fallbackRules[a]=d}}return I18n.fallbackRules[a]};I18n.isValidNode=function(b,a,c){return b[a]!==null&&b[a]!==c};I18n.lookup=function(g,h){var h=h||{},d=g,b=this.prepareOptions(I18n.translations),f=h.locale||I18n.currentLocale(),a=b[f]||{},h=this.prepareOptions(h),j;if(typeof(g)=="object"){g=g.join(this.defaultSeparator)}if(h.scope){g=h.scope.toString()+this.defaultSeparator+g}g=g.split(this.defaultSeparator);while(a&&g.length>0){j=g.shift();a=a[j]}if(!a){if(I18n.fallbacks){var e=this.getFallbacks(f);for(var c=0;c<e.length;e++){a=I18n.lookup(d,this.prepareOptions({locale:e[c]},h));if(a){break}}}if(!a&&this.isValidNode(h,"defaultValue")){a=h.defaultValue}}return a};I18n.prepareOptions=function(){var a={},e,d=arguments.length;for(var c=0;c<d;c++){e=arguments[c];if(!e){continue}for(var b in e){if(!this.isValidNode(a,b)){a[b]=e[b]}}}return a};I18n.interpolate=function(d,b){b=this.prepareOptions(b);var f=d.match(this.PLACEHOLDER),g,e,a;if(!f){return d}for(var c=0;g=f[c];c++){a=g.replace(this.PLACEHOLDER,"$1");e=b[a];if(!this.isValidNode(b,a)){e="[missing "+g+" value]"}regex=new RegExp(g.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}"));d=d.replace(regex,e)}return d};I18n.translate=function(b,a){a=this.prepareOptions(a);var d=this.lookup(b,a);try{if(typeof(d)=="object"){if(typeof(a.count)=="number"){return this.pluralize(a.count,b,a)}else{return d}}else{return this.interpolate(d,a)}}catch(c){return this.missingTranslation(b)}};I18n.localize=function(a,b){switch(a){case"currency":return this.toCurrency(b);case"number":a=this.lookup("number.format");return this.toNumber(b,a);case"percentage":return this.toPercentage(b);default:if(a.match(/^(date|time)/)){return this.toTime(a,b)}else{return b.toString()}}};I18n.parseDate=function(a){var d,c;if(typeof(a)=="object"){return a}d=a.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2}))?(Z|\+0000)?/);if(d){for(var b=1;b<=6;b++){d[b]=parseInt(d[b],10)||0}d[2]-=1;if(d[7]){c=new Date(Date.UTC(d[1],d[2],d[3],d[4],d[5],d[6]))}else{c=new Date(d[1],d[2],d[3],d[4],d[5],d[6])}}else{if(typeof(a)=="number"){c=new Date();c.setTime(a)}else{if(a.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)){c=new Date();c.setTime(Date.parse(a))}else{c=new Date();c.setTime(Date.parse(a))}}}return c};I18n.toTime=function(b,e){var a=this.parseDate(e),c=this.lookup(b);if(a.toString().match(/invalid/i)){return a.toString()}if(!c){return a.toString()}return this.strftime(a,c)};I18n.strftime=function(r,o){var b=this.lookup("date");if(!b){return r.toString()}b.meridian=b.meridian||["AM","PM"];var l=r.getDay(),n=r.getDate(),k=r.getFullYear(),s=r.getMonth()+1,g=r.getHours(),h=g,q=g>11?1:0,d=r.getSeconds(),j=r.getMinutes(),e=r.getTimezoneOffset(),c=Math.floor(Math.abs(e/60)),a=Math.abs(e)-(c*60),t=(e>0?"-":"+")+(c.toString().length<2?"0"+c:c)+(a.toString().length<2?"0"+a:a);if(h>12){h=h-12}else{if(h===0){h=12}}var m=function(u){var f="0"+u.toString();return f.substr(f.length-2)};var p=o;p=p.replace("%a",b.abbr_day_names[l]);p=p.replace("%A",b.day_names[l]);p=p.replace("%b",b.abbr_month_names[s]);p=p.replace("%B",b.month_names[s]);p=p.replace("%d",m(n));p=p.replace("%e",n);p=p.replace("%-d",n);p=p.replace("%H",m(g));p=p.replace("%-H",g);p=p.replace("%I",m(h));p=p.replace("%-I",h);p=p.replace("%m",m(s));p=p.replace("%-m",s);p=p.replace("%M",m(j));p=p.replace("%-M",j);p=p.replace("%p",b.meridian[q]);p=p.replace("%S",m(d));p=p.replace("%-S",d);p=p.replace("%w",l);p=p.replace("%y",m(k));p=p.replace("%-y",m(k).replace(/^0+/,""));p=p.replace("%Y",k);p=p.replace("%z",t);return p};I18n.toNumber=function(a,j){j=this.prepareOptions(j,this.lookup("number.format"),{precision:3,separator:".",delimiter:",",strip_insignificant_zeros:false});var b=a<0,g=Math.abs(a).toFixed(j.precision).toString(),c=g.split("."),e,d=[],f;a=c[0];e=c[1];while(a.length>0){d.unshift(a.substr(Math.max(0,a.length-3),3));a=a.substr(0,a.length-3)}f=d.join(j.delimiter);if(j.precision>0){f+=j.separator+c[1]}if(b){f="-"+f}if(j.strip_insignificant_zeros){var h={separator:new RegExp(j.separator.replace(/\./,"\\.")+"$"),zeros:/0+$/};f=f.replace(h.zeros,"").replace(h.separator,"")}return f};I18n.toCurrency=function(b,a){a=this.prepareOptions(a,this.lookup("number.currency.format"),this.lookup("number.format"),{unit:"$",precision:2,format:"%u%n",delimiter:",",separator:"."});b=this.toNumber(b,a);b=a.format.replace("%u",a.unit).replace("%n",b);return b};I18n.toHumanSize=function(g,b){var d=1024,c=g,f=0,e,a;while(c>=d&&f<4){c=c/d;f+=1}if(f===0){e=this.t("number.human.storage_units.units.byte",{count:c});a=0}else{e=this.t("number.human.storage_units.units."+[null,"kb","mb","gb","tb"][f]);a=(c-Math.floor(c)===0)?0:1}b=this.prepareOptions(b,{precision:a,format:"%n%u",delimiter:""});g=this.toNumber(c,b);g=b.format.replace("%u",e).replace("%n",g);return g};I18n.toPercentage=function(b,a){a=this.prepareOptions(a,this.lookup("number.percentage.format"),this.lookup("number.format"),{precision:3,separator:".",delimiter:""});b=this.toNumber(b,a);return b+"%"};I18n.pluralizer=function(a){pluralizer=this.pluralizationRules[a];if(pluralizer!==undefined){return pluralizer}return this.pluralizationRules.en};I18n.findAndTranslateValidNode=function(a,b){for(i=0;i<a.length;i++){key=a[i];if(this.isValidNode(b,key)){return b[key]}}return null};I18n.pluralize=function(e,c,b){var f;try{f=this.lookup(c,b)}catch(a){}if(!f){return this.missingTranslation(c)}var d;b=this.prepareOptions(b);b.count=e.toString();pluralizer=this.pluralizer(this.currentLocale());key=pluralizer(Math.abs(e));keys=((typeof key=="object")&&(key instanceof Array))?key:[key];d=this.findAndTranslateValidNode(keys,f);if(d==null){d=this.missingTranslation(c,keys[0])}return this.interpolate(d,b)};I18n.missingTranslation=function(){var c='[missing "'+this.currentLocale(),b=arguments.length;for(var a=0;a<b;a++){c+="."+arguments[a]}c+='" translation]';return c};I18n.currentLocale=function(){return(I18n.locale||I18n.defaultLocale)};I18n.t=I18n.translate;I18n.l=I18n.localize;I18n.p=I18n.pluralize;