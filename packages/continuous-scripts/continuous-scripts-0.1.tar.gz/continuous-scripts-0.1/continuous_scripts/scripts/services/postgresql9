#!/bin/bash -ex

USER="continuous"
PASS="continuous"
DB="continuous"

export DEBIAN_FRONTEND=noninteractive

# Pg9 isn't packaged for Natty yet, so installed it from a PPA.
add-apt-repository ppa:pitti/postgresql
apt-get update
apt-get -y install postgresql-9.0 postgresql-client-9.0 libpq-dev

# Pg is now listening on localhost; create a user and DB for CI.

sudo -u postgres psql -c "CREATE ROLE $USER WITH PASSWORD '$PASS' SUPERUSER;"
sudo -u postgres psql -c "CREATE DATABASE $DB WITH OWNER $USER;"