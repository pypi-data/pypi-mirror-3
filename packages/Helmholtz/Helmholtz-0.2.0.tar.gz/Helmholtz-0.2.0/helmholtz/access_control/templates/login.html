{% extends "index.html" %}

{% block styles %}
 <link rel="stylesheet" type="text/css" href="{{MEDIA_URL}}css/login_form.css" media="screen" />
{% endblock %}

{% block title %}Login{% endblock %}

{% block navbar %}
    <span class="floatleft">
    <a href="{% url home %}">Home</a>{% comment %} |
    Login{% endcomment %}
    </span>
{% endblock %}

{% block form %}
<div id="opacity_layer"></div>
<div id="login_form_container">
 <div id="form_header">Connection to VisionDB</div>
 <div id="form_content">
  <form class="form" enctype="multipart/form-data" method="post" action=".">{% csrf_token %}
  <table>
   <tr>
    <td>
     <label for="id_username">Username</label>
    </td>
    <td>
     {{ form.username }}
    </td>
   </tr>
   <tr>
    <td>
     <label for="id_password">Password</label>
    </td>
    <td>
     {{ form.password }}
    </td>
   </tr>
  </table>
  <div class="log_row">
   <div class="note">
   Forgot your password ? Just fill your username and click on the "Reset" button. 
   You'll receive an email describing the procedure.
   </div>
  </div>
  
  {% if form.errors %}
  <div class="log_row">
   <div class="warning">
    {% comment %}<div class="warning">Your username and password didn't match. Please try again.</div>{% endcomment %}
    <ul>
    {% for field, errors in form.errors.items %}
      {% if field == "__all__" %}
       {% for error in errors %}
      <li>{{error}}</li>
       {% endfor %}
      {% else %}
      <li>{{field|capfirst}} :
       <ul>
       {% for error in errors %}
        <li>{{error}}</li>
       {% endfor %}
       </ul>
      </li>
      {% endif %}
    {% endfor %}
    </ul>
   </div> 
  </div> 
  {% endif %}
  
   <div id="submit_row">    
    <input type="submit" name="Ok" value="Ok" />
    <input type="submit" name="Reset" value="Reset" />
    <span id="cancel_button"><a href="{% url home %}">Cancel</a></span>
   </div>
   <input type="hidden" name="next" value="{{ next }}" />
  </form>
 </div>
</div>
<script src="{{MEDIA_URL}}scripts/center_dialog.js"></script>
{% endblock %}