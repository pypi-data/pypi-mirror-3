
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>What is StarCluster? &mdash; StarCluster v0.93 documentation</title>
    <link rel="stylesheet" href="_static/pylons.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.93',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="StarCluster v0.93 documentation" href="index.html" />
    <link rel="up" title="Master Table of Contents" href="contents.html" />
    <link rel="next" title="Installing StarCluster" href="installation.html" />
    <link rel="prev" title="Master Table of Contents" href="contents.html" />
<link rel="stylesheet" href="_static/nobile.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="_static/neuton.css" type="text/css" media="screen" charset="utf-8" />
<!--[if lte IE 6]>
<link rel="stylesheet" href="_static/ie6.css" type="text/css" media="screen" charset="utf-8" />
<![endif]-->
<link rel="shortcut icon" href="_static/starcluster.ico"/>

  </head>
  <body>
<div class="header-small">
	
	<div class="logo-small">
		<a href="index.html">
      		<img class="logo" src="_static/logo-small.png" alt="Logo"/>
		</a>
  	</div>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="installation.html" title="Installing StarCluster"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="contents.html" title="Master Table of Contents"
             accesskey="P">previous</a> |</li>
    	<li><a href="index.html">Home</a> &raquo;</li>
          <li><a href="contents.html" accesskey="U">Master Table of Contents</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="what-is-starcluster">
<h1>What is StarCluster?<a class="headerlink" href="#what-is-starcluster" title="Permalink to this headline">¶</a></h1>
<p>StarCluster is an open source cluster-computing toolkit for Amazon&#8217;s Elastic
Compute Cloud (EC2). StarCluster has been designed to simplify the process of
building, configuring, and managing clusters of virtual machines on Amazon&#8217;s
EC2 cloud.</p>
<img alt="_images/scoverview.png" src="_images/scoverview.png" />
<p>The following sections provide a brief overview of StarCluster&#8217;s feature set.
For more details, please refer to the <a class="reference internal" href="manual/index.html#starcluster-user-manual"><em>StarCluster User Manual</em></a>.</p>
<div class="section" id="cluster-configuration">
<h2>Cluster Configuration<a class="headerlink" href="#cluster-configuration" title="Permalink to this headline">¶</a></h2>
<p>StarCluster takes care of the heavy lifting when it comes to creating and
configuring a cluster on EC2. StarCluster configures the following items
out-of-the-box:</p>
<div class="section" id="security-groups">
<h3>Security Groups<a class="headerlink" href="#security-groups" title="Permalink to this headline">¶</a></h3>
<p>StarCluster configures a new security group for each cluster created (e.g.
<em>&#64;sc-mycluster</em>). This allows you to control all network access to the cluster
simply by applying various firewall rules to the cluster&#8217;s security group.
These rules can be applied using the <a class="reference external" href="http://aws.amazon.com/console">Amazon Web Console</a> or by StarCluster
via the <a class="reference internal" href="manual/configuration.html#config-permissions"><em>permissions configuration options</em></a></p>
</div>
<div class="section" id="user-friendly-hostnames">
<h3>User-friendly Hostnames<a class="headerlink" href="#user-friendly-hostnames" title="Permalink to this headline">¶</a></h3>
<p>StarCluster uses a simple naming convention for all of the nodes in the
cluster. The head node&#8217;s hostname is set to <em>master</em>. Each worker node is then
labeled <em>node001</em>, <em>node002</em>, etc. StarCluster uses these user-friendly
hostnames instead of the random <em>ec2-123-123-123.compute-aws.com</em> EC2 dns names
making it easier for you to manage the nodes:</p>
<div class="highlight-python"><pre>$ starcluster listclusters
StarCluster - (http://web.mit.edu/starcluster)
Software Tools for Academics and Researchers (STAR)
Please submit bug reports to starcluster@mit.edu

---------------------------------------------
mycluster (security group: @sc-mycluster)
---------------------------------------------
Launch time: 2011-10-12 17:37:33
Uptime: 4 days, 08:01:15
Zone: us-east-1c
Keypair: myec2key
EBS volumes:
    vol-7777777 on master:/dev/sdz (status: attached)
Cluster nodes:
     master running i-99999999 ec2-123-123-123-123.compute-1.amazonaws.com
    node001 running i-88888888 ec2-123-123-123-132.compute-1.amazonaws.com
    node002 running i-77777777 ec2-123-123-123-148.compute-1.amazonaws.com
Total nodes: 3</pre>
</div>
</div>
<div class="section" id="user-accounts">
<h3>User Accounts<a class="headerlink" href="#user-accounts" title="Permalink to this headline">¶</a></h3>
<p>By default StarCluster configures a non-root user account for you to use for
non administrative tasks that don&#8217;t require root privileges:</p>
<div class="highlight-python"><pre>$ starcluster sshmaster -u sgeadmin mycluster</pre>
</div>
</div>
<div class="section" id="password-less-ssh">
<h3>Password-less SSH<a class="headerlink" href="#password-less-ssh" title="Permalink to this headline">¶</a></h3>
<p>StarCluster configures the cluster so that ssh may be used from any node in the
cluster to connect to any other node in the cluster <em>without using a password</em>.
This means you can simply login to the master node of a cluster:</p>
<div class="highlight-python"><pre>$ starcluster sshmaster mycluster</pre>
</div>
<p>and connect to any of the nodes (e.g. node001, node002, etc.) simply by
running:</p>
<div class="highlight-python"><pre>$ ssh node001</pre>
</div>
<p>This is useful for both interactive use of the cluster as well as performing
various administrative tasks across the cluster. Password-less SSH is also a
strict requirement for MPI applications.</p>
</div>
<div class="section" id="nfs-shares">
<h3>NFS Shares<a class="headerlink" href="#nfs-shares" title="Permalink to this headline">¶</a></h3>
<p>By default, StarCluster configures <em>/home</em> on the master node to be NFS-shared
across the cluster. Any EBS volumes specified in a cluster&#8217;s configuration will
also be NFS-shared across the cluster.</p>
</div>
<div class="section" id="ebs-volumes">
<h3>EBS Volumes<a class="headerlink" href="#ebs-volumes" title="Permalink to this headline">¶</a></h3>
<p>StarCluster allows you to easily attach and NFS-share EBS volumes across the
cluster for persistent storage. This can be done in a few lines in the config:</p>
<div class="highlight-python"><pre>[volume mydata]
volume_id = vol-9999999
mount_path = /mydata

[cluster mycluster]
...
volumes = mydata</pre>
</div>
</div>
<div class="section" id="scratch-space">
<h3>Scratch Space<a class="headerlink" href="#scratch-space" title="Permalink to this headline">¶</a></h3>
<p>Each node in the cluster is configured with a /scratch directory linked to its
ephemeral storage (usually mounted on <em>/mnt</em>). This scratch space provides a
convenient location for temporary working files. As the name <em>ephemeral</em>
implies, the contents of /scratch on each node will be lost when a cluster is
terminated.</p>
</div>
<div class="section" id="queueing-system">
<h3>Queueing System<a class="headerlink" href="#queueing-system" title="Permalink to this headline">¶</a></h3>
<p>StarCluster configures the Oracle Grid Engine queueing system for distributing
tasks, or <em>jobs</em>, across the cluster. Oracle Grid Engine takes care to schedule
the tasks so that the entire cluster is fully utilized but not overloaded.</p>
</div>
</div>
<div class="section" id="customize-cluster-using-plugins">
<h2>Customize Cluster Using Plugins<a class="headerlink" href="#customize-cluster-using-plugins" title="Permalink to this headline">¶</a></h2>
<p>StarCluster also has support for plugins which allow users to further configure
the cluster to their liking after StarCluster&#8217;s defaults. Plugins are written
in Python and use StarCluster&#8217;s API to interact with the nodes. The API
supports executing commands, copying files, and other OS-level operations on
the nodes. Below is a simple example of a plugin that installs a Debian/Ubuntu
package on all of the nodes:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">starcluster.clustersetup</span> <span class="kn">import</span> <span class="n">ClusterSetup</span>

<span class="k">class</span> <span class="nc">PackageInstaller</span><span class="p">(</span><span class="n">ClusterSetup</span><span class="p">):</span>
     <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">     Installs a Debian/Ubuntu package on all nodes in the cluster</span>
<span class="sd">     &quot;&quot;&quot;</span>
     <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pkg_to_install</span><span class="p">):</span>
          <span class="bp">self</span><span class="o">.</span><span class="n">pkg_to_install</span> <span class="o">=</span> <span class="n">pkg_to_install</span>

     <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nodes</span><span class="p">,</span> <span class="n">master</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">user_shell</span><span class="p">,</span> <span class="n">volumes</span><span class="p">):</span>
          <span class="k">for</span> <span class="n">node</span> <span class="ow">in</span> <span class="n">nodes</span><span class="p">:</span>
               <span class="n">node</span><span class="o">.</span><span class="n">ssh</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s">&#39;apt-get -y install </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">pkg_to_install</span><span class="p">)</span>
</pre></div>
</div>
<p>For more details see <a class="reference internal" href="manual/plugins.html#plugin-system"><em>the plugin guide</em></a>.</p>
</div>
<div class="section" id="starcluster-machine-images-amis">
<h2>StarCluster Machine Images (AMIs)<a class="headerlink" href="#starcluster-machine-images-amis" title="Permalink to this headline">¶</a></h2>
<p>In addition to automatic cluster configuration, StarCluster also ships with
it’s own Amazon machine images (AMIs) that contain applications and libraries
for scientific computing and software development. The AMIs currently consist
of the following scientific libraries:</p>
<ol class="arabic simple">
<li><a class="reference external" href="http://www.open-mpi.org">OpenMPI</a> - Library for writing parallel applications</li>
<li><a class="reference external" href="http://math-atlas.sourceforge.net">ATLAS</a> optimized for the larger Amazon EC2 instance types</li>
<li><a class="reference external" href="http://www.scipy.org">NumPy/SciPy</a> compiled against the optimized ATLAS install</li>
<li><a class="reference external" href="http://www.ipython.org">IPython</a> - interactive parallel computing in Python</li>
</ol>
<p>StarCluster AMIs also exist for the Cluster Compute and Cluster GPU instance
types that come with the <a class="reference external" href="http://developer.nvidia.com/cuda-downloads">CUDA SDK</a> as well as <a class="reference external" href="http://mathema.tician.de/software/pycuda">PyCUDA</a>. To get a list of all
of StarCluster&#8217;s available AMIs use the <em>listpublic</em> command:</p>
<div class="highlight-python"><pre>$ starcluster listpublic</pre>
</div>
</div>
<div class="section" id="create-and-manage-clusters">
<h2>Create and Manage Clusters<a class="headerlink" href="#create-and-manage-clusters" title="Permalink to this headline">¶</a></h2>
<p>StarCluster allows easily creating one or more clusters of virtual machines in
the cloud:</p>
<div class="highlight-python"><pre>$ starcluster start -s 10 mycluster</pre>
</div>
<p>Use the <em>listclusters</em> command to keep track of your clusters:</p>
<div class="highlight-python"><pre>$ starcluster listclusters</pre>
</div>
<p>Login to the master node of your cluster:</p>
<div class="highlight-python"><pre>$ starcluster sshmaster mycluster</pre>
</div>
<p>Add additional nodes to your cluster for more compute power:</p>
<div class="highlight-python"><pre>$ starcluster addnode mycluster</pre>
</div>
<p>Remove idle nodes from your cluster to minimize costs:</p>
<div class="highlight-python"><pre>$ starcluster removenode mycluster node003</pre>
</div>
<p>When you&#8217;re done using the cluster and wish to stop paying for it:</p>
<div class="highlight-python"><pre>$ starcluster terminate mycluster</pre>
</div>
</div>
<div class="section" id="dynamically-resize-clusters">
<h2>Dynamically Resize Clusters<a class="headerlink" href="#dynamically-resize-clusters" title="Permalink to this headline">¶</a></h2>
<p>StarCluster also supports dynamically adding and removing nodes to and from the
cluster using the Oracle Grid Engine load balancer:</p>
<div class="highlight-python"><pre>$ starcluster loadbalance mycluster</pre>
</div>
<p>The load balancer will continuously monitor the tasks in the Oracle Grid Engine
queue. If the task queue becomes overloaded the load balancer will add more
nodes to relieve the load. If the task queue becomes empty the load balancer
will begin removing nodes from the cluster in favor of cutting costs.</p>
</div>
<div class="section" id="easily-create-and-format-ebs-volumes">
<h2>Easily Create and Format EBS Volumes<a class="headerlink" href="#easily-create-and-format-ebs-volumes" title="Permalink to this headline">¶</a></h2>
<p>Usually when creating a new EBS volume by hand you would need to create a new
volume, launch an instance in the volume&#8217;s zone, attach the volume to the
instance, login to the instance, and format the volume. StarCluster does all
that for you automatically in one convenient command:</p>
<div class="highlight-python"><pre>$ starcluster createvolume 50 us-east-1c</pre>
</div>
</div>
<div class="section" id="easily-build-s3-and-ebs-amis">
<h2>Easily Build S3 and EBS AMIs<a class="headerlink" href="#easily-build-s3-and-ebs-amis" title="Permalink to this headline">¶</a></h2>
<p>There are a lot of tedious steps involved when creating a new S3, or
instance-store, AMI by hand. Similarly, converting an S3-based AMI to an
EBS-based AMI can also be tedious and time consuming. Fortunately, StarCluster
provides two commands, <em>s3image</em> and <em>ebsimage</em>, that greatly simplify the
process of creating new S3 and EBS AMIs.</p>
<p>To create a new AMI simply launch an instance, customize it to your liking, and
use either the <em>s3image</em> command:</p>
<div class="highlight-python"><pre>$ starcluster s3image i-99999999 my-new-image my-s3-bucket</pre>
</div>
<p>or <em>ebsimage</em> comand:</p>
<div class="highlight-python"><pre>$ starcluster ebsimage i-99999999 my-new-image</pre>
</div>
<p>to create a new AMI.</p>
</div>
<div class="section" id="copy-data-to-and-from-a-cluster">
<h2>Copy Data To and From a Cluster<a class="headerlink" href="#copy-data-to-and-from-a-cluster" title="Permalink to this headline">¶</a></h2>
<p>StarCluster allows you to easily copy data to and from a running cluster
without having to look up hostnames or figure out OpenSSH&#8217;s <em>scp</em> command, SSH
keys, etc. To copy files from your local computer to a remote cluster:</p>
<div class="highlight-python"><pre>$ starcluster put mycluster /local/file/or/dir /remote/path</pre>
</div>
<p>To copy files from a remote cluster to your local computer:</p>
<div class="highlight-python"><pre>$ starcluster get mycluster /remote/path /local/file/or/dir</pre>
</div>
<p>The above commands will automatically handle recursion for you in the case that
you&#8217;re copying a directory.</p>
</div>
<div class="section" id="reduce-costs-using-spot-instances">
<h2>Reduce Costs using Spot Instances<a class="headerlink" href="#reduce-costs-using-spot-instances" title="Permalink to this headline">¶</a></h2>
<p>StarCluster also has support for launching and using spot instances. Using spot
instances with StarCluster is as simple as specifying a spot bid to the <em>start</em>
command:</p>
<div class="highlight-python"><pre>$ starcluster start -b 0.50 mycluster</pre>
</div>
<p>The above command will request spot instances with a bid of $0.50 each for each
worker node in the cluster. The master node is <em>always</em> launched as a flat-rate
instance for stability reasons.</p>
<p>You can determine a decent spot bid to use by investigating the current,
maximum, and average spot price using the <em>spothistory</em> command:</p>
<div class="highlight-python"><pre>% starcluster spothistory -p m1.large
StarCluster - (http://web.mit.edu/starcluster) (v. 0.92)
Software Tools for Academics and Researchers (STAR)
Please submit bug reports to starcluster@mit.edu

&gt;&gt;&gt; Current price: $0.12
&gt;&gt;&gt; Max price: $0.35
&gt;&gt;&gt; Average price: $0.13</pre>
</div>
<p>The above command shows the current spot price as well as the average and
maximum spot price over the last 30 days. The -p option launches a web browser
displaying an interactive graph of the spot price over the last 30 days:</p>
<img alt="_images/spothistory.png" src="_images/spothistory.png" />
</div>
<div class="section" id="and-more">
<h2>And more...<a class="headerlink" href="#and-more" title="Permalink to this headline">¶</a></h2>
<p>StarCluster has a lot of features. For all the details, please see the full
<a class="reference internal" href="manual/index.html#starcluster-user-manual"><em>StarCluster User Manual</em></a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">What is StarCluster?</a><ul>
<li><a class="reference internal" href="#cluster-configuration">Cluster Configuration</a><ul>
<li><a class="reference internal" href="#security-groups">Security Groups</a></li>
<li><a class="reference internal" href="#user-friendly-hostnames">User-friendly Hostnames</a></li>
<li><a class="reference internal" href="#user-accounts">User Accounts</a></li>
<li><a class="reference internal" href="#password-less-ssh">Password-less SSH</a></li>
<li><a class="reference internal" href="#nfs-shares">NFS Shares</a></li>
<li><a class="reference internal" href="#ebs-volumes">EBS Volumes</a></li>
<li><a class="reference internal" href="#scratch-space">Scratch Space</a></li>
<li><a class="reference internal" href="#queueing-system">Queueing System</a></li>
</ul>
</li>
<li><a class="reference internal" href="#customize-cluster-using-plugins">Customize Cluster Using Plugins</a></li>
<li><a class="reference internal" href="#starcluster-machine-images-amis">StarCluster Machine Images (AMIs)</a></li>
<li><a class="reference internal" href="#create-and-manage-clusters">Create and Manage Clusters</a></li>
<li><a class="reference internal" href="#dynamically-resize-clusters">Dynamically Resize Clusters</a></li>
<li><a class="reference internal" href="#easily-create-and-format-ebs-volumes">Easily Create and Format EBS Volumes</a></li>
<li><a class="reference internal" href="#easily-build-s3-and-ebs-amis">Easily Build S3 and EBS AMIs</a></li>
<li><a class="reference internal" href="#copy-data-to-and-from-a-cluster">Copy Data To and From a Cluster</a></li>
<li><a class="reference internal" href="#reduce-costs-using-spot-instances">Reduce Costs using Spot Instances</a></li>
<li><a class="reference internal" href="#and-more">And more...</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="contents.html"
                        title="previous chapter">Master Table of Contents</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="installation.html"
                        title="next chapter">Installing StarCluster</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="installation.html" title="Installing StarCluster"
             >next</a> |</li>
        <li class="right" >
          <a href="contents.html" title="Master Table of Contents"
             >previous</a> |</li>
    	<li><a href="index.html">Home</a> &raquo;</li>
          <li><a href="contents.html" >Master Table of Contents</a> &raquo;</li> 
      </ul>
    </div>


    <div class="footer">
        &copy; Copyright 2011, Software Tools for Academics and Researchers.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>


<script type="text/javascript">
//<![CDATA[
    var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
    document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    //]]>
    </script><script type="text/javascript">
//<![CDATA[
    try{
        var pageTracker = _gat._getTracker("UA-1048253-12");
        pageTracker._trackPageview();
    } catch(err) {}
    //]]>
    </script>

  </body>
</html>