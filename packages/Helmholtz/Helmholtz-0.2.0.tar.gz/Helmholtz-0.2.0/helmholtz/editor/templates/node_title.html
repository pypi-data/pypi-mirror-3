<!--{ % load auto_markup from markups % }--!> 
{% load markup %}

<div class="{{node.type}}_header" id="header_{{node.view.name}}_{{node.index}}"> 
 {% if node.expander != "disabled" %}
 <span id="expander_{{node.view.name}}_{{node.index}}"> 
  <a class="button" href="{% url execute-command node.view.name %}?action={% if node.state == "opened" %}close{% else %}open{% endif %}&node_id={{node.index}}#expander_{{node.view.name}}_{{node.index}}">
   <img class="{{node.type}}_expander_{{node.state}}" src="{{MEDIA_URL}}images/transparent-background.png"></img>
  </a> 
 </span>
 {% else %}
  {% if node.displayed_in_navigator %}
 <span id="expander_{{node.view.name}}_{{node.index}}">
  <img class="{{node.type}}_expander_{{node.expander}}" src="{{MEDIA_URL}}images/transparent-background.png"></img>
 </span>
  {% else %}
   {% if node.index == view.selected_class_node.index %}
 <span id="expander_{{node.view.name}}_{{node.index}}">
  <img class="square_selected" src="{{MEDIA_URL}}images/transparent-background.png"></img>
 </span>  
   {% else %}
 <span id="expander_{{node.view.name}}_{{node.index}}">
  <img class="square" src="{{MEDIA_URL}}images/transparent-background.png"></img>
 </span>  
   {% endif %}
  {% endif %}
 {% endif %} 
 <span class="{{node.type}}_title" id="title_{{node.view.name}}_{{node.index}}"> 
  {% if node.has_value %} 
   {% if node.is_image %}
  <span class="title_before_image">{{node.title}} : 
   
  </span>
  <span class="image_node"><img src="{{MEDIA_URL}}{{node.value}}" alt="file '{{MEDIA_URL}}{{node.value}}' not found on server"></img></span>
   {% else %}
  <span>{{node.title}} :
   {% if node.is_none %}
   <span class="nd">N.D</span>
   {% else %}
    {% if node.is_blank %}
   <span class="nd">Blank</span> 
    {% else %}
     {% if not node.is_text %}
   <span class="node_field_value">{{node.value|safe}}</span>
     {% else %}
   <div class="text_node">{{node.value|safe}}</span> 
     {% endif %}
    {% endif %}
   {% endif %}
  </span>
   {% endif %}
  {% else %}
   {% if node.node_type == "classnode" and not node.displayed_in_navigator %}
   <a href="{% url execute-command node.view.name %}?action=select_class&node_id={{node.index}}">
    <span class="{% if node.index == view.selected_class_node.index %}selected_classnode{% endif %}">{{node.title}}</span>
   </a>
   {% else %}
  {{node.title}}
   {% endif %}
  {% endif %}
 </span>
 {% if node.displayed_actions %}
 <div class="button_container">
  {% for action in node.ordered_displayed_actions %}
   {% include "action_button.html" %}
  {% endfor %}
  {% comment %}{% include "create_buttons.html" %}{% endcomment %}
 </div>
 {% endif %}
</div>
