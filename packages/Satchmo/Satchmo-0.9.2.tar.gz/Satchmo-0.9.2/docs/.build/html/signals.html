

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Signals in Satchmo &mdash; Satchmo v0.9.2-development documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.2-development',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Satchmo v0.9.2-development documentation" href="index.html" />
    <link rel="next" title="Google Base" href="google-base.html" />
    <link rel="prev" title="Satchmo Views" href="views.html" /> 
  </head>
  <body>

<div style="background-image: url(_static/satchmo-sliver.jpg); background-repeat: repeat-x; background-color: white; text-align: left;">
<img src="_static/satchmo-front.jpg">
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="google-base.html" title="Google Base"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="views.html" title="Satchmo Views"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.satchmoproject.com">Satchmo home </a> |&nbsp;</li>
        
        <li><a href="index.html">Satchmo v0.9.2-development documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Signals in Satchmo</a><ul>
<li><a class="reference internal" href="#signal-descriptions">Signal Descriptions</a></li>
<li><a class="reference internal" href="#external-signals-used-in-satchmo">External Signals Used in Satchmo</a></li>
<li><a class="reference internal" href="#examples">Examples</a><ul>
<li><a class="reference internal" href="#putting-it-all-together">Putting it All Together</a></li>
<li><a class="reference internal" href="#ensuring-acceptance-of-terms-during-checkout">Ensuring Acceptance of Terms during Checkout</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="views.html"
                        title="previous chapter">Satchmo Views</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="google-base.html"
                        title="next chapter">Google Base</a></p>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<p>Documentation Version:</p>
<ul>
    <li><a href="/docs/dev">Current development version</a></li>
    <li><a href="/docs/rel/latest">Latest Release version</a></li>
    <li><a href="http://bitbucket.org/chris1610/satchmo/downloads/Satchmo-0-9-1.pdf">PDF Documentation</a></li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="signals-in-satchmo">
<span id="signals"></span><h1>Signals in Satchmo<a class="headerlink" href="#signals-in-satchmo" title="Permalink to this headline">¶</a></h1>
<p>Signals are a very powerful tool available in Django that allows you to decouple aspects of your application. The <a class="reference external" href="http://docs.djangoproject.com/en/dev/topics/signals/">Django Signals Documentation</a>, has this summary:</p>
<blockquote>
&#8220;In a nutshell, signals allow certain senders to notify a set of receivers that some action has taken place.&#8221;</blockquote>
<p>In addition to all of the built in <a class="reference external" href="http://docs.djangoproject.com/en/dev/ref/signals/">Django signals</a>, Satchmo includes a number of store related signals. By using these signals, you can add very unique customizations to your store without needing to modify the Satchmo code.</p>
<div class="section" id="signal-descriptions">
<h2>Signal Descriptions<a class="headerlink" href="#signal-descriptions" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="livesettings.signals.configuration_value_changed">
<tt class="descclassname">livesettings.signals.</tt><tt class="descname">configuration_value_changed</tt><big>(</big><em>sender</em>, <em>old_value=None</em>, <em>new_value=None</em>, <em>setting=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#livesettings.signals.configuration_value_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Base class for all signals</p>
<p>Internal attributes:</p>
<blockquote>
<dl class="docutils">
<dt>receivers</dt>
<dd>{ receriverkey (id) : weakref(receiver) }</dd>
</dl>
</blockquote>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.order_success">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">order_success</tt><big>(</big><em>sender</em>, <em>order=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.order_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when an order is complete and the balance goes to zero during a save.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order that was successful.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order that was successful.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>order</em> argument is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.order_cancel_query">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">order_cancel_query</tt><big>(</big><em>sender</em>, <em>order=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.order_cancel_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when an order is about to be cancelled and asks listeners if they allow
to do so.</p>
<p>By default, orders in states &#8216;Shipped&#8217;, &#8216;Completed&#8217; and &#8216;Cancelled&#8217; are not
allowed to be cancelled. The default verdict is stored in
<tt class="docutils literal"><span class="pre">order.is_cancellable</span></tt> flag. Listeners can modify this flag, according to
their needs.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order about to be cancelled.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order about to be cancelled.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>order</em> argument is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.order_cancelled">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">order_cancelled</tt><big>(</big><em>sender</em>, <em>order=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.order_cancelled" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when an order has been cancelled; it&#8217;s status already reflects it and
has been saved to the database (e.g. payment gateway cancels payment).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order that was cancelled.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order that was cancelled.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>order</em> argument is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_cart_add_complete">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_cart_add_complete</tt><big>(</big><em>sender</em>, <em>cart=None</em>, <em>cartitem=None</em>, <em>product=None</em>, <em>request=None</em>, <em>form=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_cart_add_complete" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after an item has been successfully added to the cart.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart the cart item was added to.</li>
<li><strong>cart</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart the cart item was added to.</li>
<li><strong>cartitem</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>) &#8211; The cart item that was added to the cart.</li>
<li><strong>product</strong> (<tt class="docutils literal"><span class="pre">product.models.Product</span></tt>) &#8211; The product that was added to the cart.</li>
<li><strong>form</strong> &#8211; The POST data for the form used to add the item to the cart.</li>
<li><strong>request</strong> (<tt class="docutils literal"><span class="pre">django.http.HttpRequest</span></tt>) &#8211; The request that used in the view to add the item to the
cart.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>cart</em> is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_cart_add_verify">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_cart_add_verify</tt><big>(</big><em>sender</em>, <em>cart=None</em>, <em>cartitem=None</em>, <em>added_quantity=None</em>, <em>details=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_cart_add_verify" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent before an item is added to the cart.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart the cart item is being added to.</li>
<li><strong>cart</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart the cart item is being added to.</li>
<li><strong>cartitem</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>) &#8211; The cart item that is being added to the cart.</li>
<li><strong>added_quantity</strong> (<tt class="docutils literal"><span class="pre">decimal.Decimal</span></tt>) &#8211; The number of <tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>
instances items being added to the cart.</li>
<li><strong>details</strong> &#8211; <p>A list of dictionaries containing additional details about the
item if the item is a custom product or a gift certificate product. Each
dictionary has the following entries:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">name:</th><td class="field-body">The name of the detail</td>
</tr>
<tr class="field"><th class="field-name">value:</th><td class="field-body">The value of the detail</td>
</tr>
<tr class="field"><th class="field-name">value:</th><td class="field-body">The value of the detail</td>
</tr>
<tr class="field"><th class="field-name">sort_order:</th><td class="field-body">The order the detail should be listed in displays</td>
</tr>
<tr class="field"><th class="field-name">price_change:</th><td class="field-body">The price change of the detail<table class="last docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">default:</th><td class="field-body">zero</td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>cart</em> is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_cart_changed">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_cart_changed</tt><big>(</big><em>sender</em>, <em>cart=None</em>, <em>request=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_cart_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent whenever the status of the cart has changed. For example, when an item
is added, removed, or had it&#8217;s quantity updated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart that was changed.</li>
<li><strong>cart</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart that was changed.</li>
<li><strong>request</strong> (<tt class="docutils literal"><span class="pre">django.http.HttpRequest</span></tt>) &#8211; The request that used in the view to add the item to the
cart.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>cart</em> is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_cartitem_price_query">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_cartitem_price_query</tt><big>(</big><em>sender</em>, <em>cartitem=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_cartitem_price_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent by the pricing system to allow price overrides when displaying line item
prices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>) &#8211; The cart item being queried for price overrides.</li>
<li><strong>cartitem</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>) &#8211; The cart item being queried for price overrides.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>cartitem</em> is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_cart_details_query">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_cart_details_query</tt><big>(</big><em>sender</em>, <em>product=None</em>, <em>quantity=None</em>, <em>details=None</em>, <em>request=None</em>, <em>form=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_cart_details_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent before an item is added to the cart so that listeners can update product
details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart the cart item is being added to.</li>
<li><strong>product</strong> (<tt class="docutils literal"><span class="pre">product.models.Product</span></tt> or
<tt class="docutils literal"><span class="pre">product.models.ConfigurableProduct</span></tt>) &#8211; The product that is being added to the cart.</li>
<li><strong>quantity</strong> (<tt class="docutils literal"><span class="pre">decimal.Decimal</span></tt>) &#8211; The number of <tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>
instances items being added to the cart.</li>
<li><strong>details</strong> &#8211; <p>A list of dictionaries containing additional details about the
item if the item is a custom product or a gift certificate product. Each
dictionary has the following entries:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">name:</th><td class="field-body">The name of the detail</td>
</tr>
<tr class="field"><th class="field-name">value:</th><td class="field-body">The value of the detail</td>
</tr>
<tr class="field"><th class="field-name">value:</th><td class="field-body">The value of the detail</td>
</tr>
<tr class="field"><th class="field-name">sort_order:</th><td class="field-body">The order the detail should be listed in displays</td>
</tr>
<tr class="field"><th class="field-name">price_change:</th><td class="field-body">The price change of the detail</td>
</tr>
</tbody>
</table>
</li>
<li><strong>form</strong> &#8211; The POST data for the form used to add the item to the cart.</li>
<li><strong>request</strong> (<tt class="docutils literal"><span class="pre">django.http.HttpRequest</span></tt>) &#8211; The request that used in the view to add the item to the
cart.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>cart</em> is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_post_copy_item_to_order">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_post_copy_item_to_order</tt><big>(</big><em>sender</em>, <em>cartitem=None</em>, <em>order=None</em>, <em>orderitem=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_post_copy_item_to_order" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after each item from the cart is copied into an order.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart the cart items are being copied into.</li>
<li><strong>cartitem</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.CartItem</span></tt>) &#8211; The cart item being copied into an order.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order having items copied into it.</li>
<li><strong>orderitem</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.OrderItem</span></tt>) &#8211; The order item being added to the order.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.satchmo_context">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">satchmo_context</tt><big>(</big><em>sender</em>, <em>context=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.satchmo_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when <tt class="docutils literal"><span class="pre">satchmo_store.shop.context_processors.settings()</span></tt> is invoked,
before the context is returned. This signal can be used to modify the context
returned by the context processor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Config</span></tt>) &#8211; The current store configuration</li>
<li><strong>context</strong> &#8211; <p>A dictionary containing the context to be returned by the
context processor. The dictionary contains:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">shop_base:</th><td class="field-body">The base URL for the store</td>
</tr>
<tr class="field"><th class="field-name">shop:</th><td class="field-body">An instance of <tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Config</span></tt> representing the
current store configuration</td>
</tr>
<tr class="field"><th class="field-name">shop_name:</th><td class="field-body">The shop name</td>
</tr>
<tr class="field"><th class="field-name">media_url:</th><td class="field-body">The current media url, taking into account SSL</td>
</tr>
<tr class="field"><th class="field-name">cart_count:</th><td class="field-body">The number of items in the cart</td>
</tr>
<tr class="field"><th class="field-name">cart:</th><td class="field-body">An instance of <tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt> representing the
current cart</td>
</tr>
<tr class="field"><th class="field-name">categories:</th><td class="field-body">A <tt class="docutils literal"><span class="pre">QuerySet</span></tt> of all the <tt class="docutils literal"><span class="pre">product.models.Category</span></tt> objects
for the current site.</td>
</tr>
<tr class="field"><th class="field-name">is_secure:</th><td class="field-body">A boolean representing weather or not SSL is enabled</td>
</tr>
<tr class="field"><th class="field-name">request:</th><td class="field-body">The <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> object passed into the context processor</td>
</tr>
<tr class="field"><th class="field-name">login_url:</th><td class="field-body">The login url defined in <tt class="docutils literal"><span class="pre">settings.LOGIN_URL</span></tt></td>
</tr>
<tr class="field"><th class="field-name">logout_url:</th><td class="field-body">The logout url defined in <tt class="docutils literal"><span class="pre">settings.LOGOUT_URL</span></tt></td>
</tr>
<tr class="field"><th class="field-name">sale:</th><td class="field-body">An instance of <tt class="docutils literal"><span class="pre">product.models.Discount</span></tt> if there is a current
sale, or <tt class="xref docutils literal"><span class="pre">None</span></tt></td>
</tr>
</tbody>
</table>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.cart_add_view">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">cart_add_view</tt><big>(</big><em>sender</em>, <em>request=None</em>, <em>method=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.cart_add_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent by &#8216;views.smart_add` to allow listeners to optionally change the
responding function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart model</li>
<li><strong>request</strong> (<tt class="docutils literal"><span class="pre">django.http.HttpRequest</span></tt>) &#8211; The request used by the view</li>
<li><strong>method</strong> &#8211; <p>A dictionary containing a single key <tt class="docutils literal"><span class="pre">view</span></tt> to be updated
with the function to be called by smart_add. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">method</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;view&#39;</span><span class="p">:</span> <span class="n">cart</span><span class="o">.</span><span class="n">add</span> <span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>sender</em> is not a class instance.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.sendfile_url_for_file">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">sendfile_url_for_file</tt><big>(</big><em>sender</em>, <em>file=None</em>, <em>product=None</em>, <em>url_dict={}</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.sendfile_url_for_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent to determine where to redirect a user for a <tt class="docutils literal"><span class="pre">DownloadableProduct</span></tt>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="xref docutils literal"><span class="pre">None</span></tt>) &#8211; <tt class="xref docutils literal"><span class="pre">None</span></tt></li>
<li><strong>file</strong> (<tt class="docutils literal"><span class="pre">django.db.models.fields.files.FileField</span></tt>) &#8211; The <tt class="docutils literal"><span class="pre">'file'</span></tt> field of the <tt class="docutils literal"><span class="pre">DownloadableProduct</span></tt>.</li>
<li><strong>product</strong> (<tt class="docutils literal"><span class="pre">product.models.DownloadableProduct</span></tt>) &#8211; The product which is being downloaded.</li>
<li><strong>url_dict</strong> &#8211; A dictionary containing a single entry, <tt class="docutils literal"><span class="pre">'url'</span></tt>, the URL
which the user will be redirected to. Listeners should modify this value
to change the redirect URL.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">For a sane <tt class="docutils literal"><span class="pre">filename</span></tt> parameter in the <tt class="docutils literal"><span class="pre">Content-Disposition</span></tt> header,
users are cautioned against appending a trailing slash(<tt class="docutils literal"><span class="pre">'/'</span></tt>) to the
URL.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.rendering_store_mail">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">rendering_store_mail</tt><big>(</big><em>sender</em>, <em>send_mail_args={}</em>, <em>context={}</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.rendering_store_mail" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent by <tt class="docutils literal"><span class="pre">satchmo_store.mail.send_store_mail()</span></tt> before the message body is
rendered.</p>
<p>Takes the same arguments as <a class="reference internal" href="#satchmo_store.shop.signals.sending_store_mail" title="satchmo_store.shop.signals.sending_store_mail"><tt class="xref py py-data docutils literal"><span class="pre">sending_store_mail</span></tt></a>.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="#send-mail-args"><em>send_mail_args</em></a> does not contain the <tt class="docutils literal"><span class="pre">'subject'</span></tt>
entry.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <tt class="docutils literal"><span class="pre">'message'</span></tt> entry is set in <a class="reference internal" href="#send-mail-args"><em>send_mail_args</em></a>
by a listener, it will be used instead of the rendered result in
<tt class="docutils literal"><span class="pre">send_store_mail()</span></tt>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.shop.signals.sending_store_mail">
<tt class="descclassname">satchmo_store.shop.signals.</tt><tt class="descname">sending_store_mail</tt><big>(</big><em>sender</em>, <em>send_mail_args={}</em>, <em>context={}</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.shop.signals.sending_store_mail" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent by <tt class="docutils literal"><span class="pre">satchmo_store.mail.send_store_mail()</span></tt> just before <tt class="docutils literal"><span class="pre">send_mail()</span></tt>
is invoked.</p>
<p>Listeners may raise <tt class="docutils literal"><span class="pre">satchmo_store.mail.ShouldNotSendMail</span></tt>.</p>
<p>If they choose to invoke <tt class="docutils literal"><span class="pre">django.mail.EmailMessage.send()</span></tt>, any errors
raised will be handled by <tt class="docutils literal"><span class="pre">send_store_mail()</span></tt>; they should consequently
raise <tt class="docutils literal"><span class="pre">ShouldNotSendMail</span></tt> to avoid re-sending the email.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> &#8211; Defaults to <tt class="xref docutils literal"><span class="pre">None</span></tt>, unless the sender argument to
<tt class="docutils literal"><span class="pre">send_store_mail()</span></tt> is specified; see below.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<table class="docutils field-list" frame="void" id="send-mail-args" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>send_mail_args</strong> &#8211; <p>A dictionary containing the keyword arguments passed
to <tt class="docutils literal"><span class="pre">send_mail()</span></tt>:</p>
<ul>
<li>subject</li>
<li>message</li>
<li>from_email</li>
<li>recipient_list</li>
<li>fail_silently</li>
</ul>
</li>
<li><strong>context</strong> &#8211; The context used to render the message body; by default, it
contains the &#8216;shop_name&#8217; key, but may contain other keys, depending on the
<cite>context</cite> argument to <tt class="docutils literal"><span class="pre">send_store_mail()</span></tt>.</li>
<li><strong>**kwargs</strong> &#8211; Additional keyword arguments received by
<tt class="docutils literal"><span class="pre">send_store_mail()</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If the <em>context</em> argument to <tt class="docutils literal"><span class="pre">send_store_mail()</span></tt> contains the entry
<cite>send_mail_args</cite>, it will not be available in the listener&#8217;s <em>context</em>
dictionary.</p>
</div>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">satchmo_store.shop.signals</span> <span class="kn">import</span> <span class="n">order_notice_sender</span>

<span class="k">def</span> <span class="nf">modify_subject</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">send_mail_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">context</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
  <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="s">&#39;shop_name&#39;</span> <span class="ow">in</span> <span class="n">context</span> <span class="ow">and</span> <span class="s">&#39;order&#39;</span> <span class="ow">in</span> <span class="n">context</span><span class="p">):</span>
    <span class="k">return</span>

  <span class="n">send_mail_args</span><span class="p">[</span><span class="s">&#39;subject&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;[</span><span class="si">%s</span><span class="s">] Woohoo! You got a *new* order! (ID: #</span><span class="si">%d</span><span class="s">)&#39;</span> <span class="o">%</span> \
      <span class="p">(</span><span class="n">context</span><span class="p">[</span><span class="s">&#39;shop_name&#39;</span><span class="p">],</span> <span class="n">context</span><span class="p">[</span><span class="s">&#39;order&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">)</span>

<span class="n">sending_store_mail</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">modify_subject</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">order_notice_sender</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.contact.signals.satchmo_contact_view">
<tt class="descclassname">satchmo_store.contact.signals.</tt><tt class="descname">satchmo_contact_view</tt><big>(</big><em>sender</em>, <em>contact=None</em>, <em>contact_dict=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.contact.signals.satchmo_contact_view" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when contact information is viewed or updated before a template is
rendered. Allows you to override the contact information and context passed
to the templates used.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.models.Contact</span></tt>) &#8211; The contact representing the contact information being viewed,
or None if the information cannot be found.</li>
<li><strong>contact</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.models.Contact</span></tt>) &#8211; The contact representing the contact information being
viewed, or None if the information cannot be found.</li>
<li><strong>contact_dict</strong> &#8211; A dictionary containing the intitial data for the
instance of <tt class="docutils literal"><span class="pre">satchmo_store.contact.forms.ExtendedContactInfoForm</span></tt>
instance that will be rendered to the user.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>contact</em> is the same as <em>sender</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.contact.signals.satchmo_contact_location_changed">
<tt class="descclassname">satchmo_store.contact.signals.</tt><tt class="descname">satchmo_contact_location_changed</tt><big>(</big><em>sender</em>, <em>contact=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.contact.signals.satchmo_contact_location_changed" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after a user changes their location in their profile.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.forms.ContactInfoForm</span></tt>) &#8211; The form which was responsible for the location change.</li>
<li><strong>contact</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.models.Contact</span></tt>) &#8211; The contact which was updated with a new location.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.contact.signals.validate_postcode">
<tt class="descclassname">satchmo_store.contact.signals.</tt><tt class="descname">validate_postcode</tt><big>(</big><em>sender</em>, <em>postcode=None</em>, <em>country=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.contact.signals.validate_postcode" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when a form that contains postal codes (shipping and billing forms)
needs to validate. This signal can be used to custom validate postal postal
codes. Any listener should return the validated postal code or raise an
exception for an invalid postal code.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.forms.ContactInfoForm</span></tt>) &#8211; The form which is validating its postal codes.</li>
<li><strong>postcode</strong> &#8211; The postal code as a string being validated.</li>
<li><strong>country</strong> (<tt class="docutils literal"><span class="pre">l10n.models.Country</span></tt>) &#8211; The country that was selected in the form (or specified in
the configuration if local sales are only allowed).</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.accounts.signals.satchmo_registration">
<tt class="descclassname">satchmo_store.accounts.signals.</tt><tt class="descname">satchmo_registration</tt><big>(</big><em>sender</em>, <em>contact=None</em>, <em>subscribed=None</em>, <em>data=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.accounts.signals.satchmo_registration" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after a user has registered an account with the store.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.accounts.forms.RegistrationForm</span></tt>) &#8211; The form which was submitted.</li>
<li><strong>contact</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.models.Contact</span></tt>) &#8211; The contact that was saved to the database.</li>
<li><strong>subscribed</strong> &#8211; <p>A boolean reflecting whether or not the user subscribed
to a newsletter</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">default:</th><td class="field-body">False</td>
</tr>
</tbody>
</table>
</li>
<li><strong>data</strong> &#8211; The <tt class="docutils literal"><span class="pre">cleaned_data</span></tt> dictionary of the submitted form.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satchmo_store.accounts.signals.satchmo_registration_verified">
<tt class="descclassname">satchmo_store.accounts.signals.</tt><tt class="descname">satchmo_registration_verified</tt><big>(</big><em>sender</em>, <em>contact=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_store.accounts.signals.satchmo_registration_verified" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after a user account has been verified. This signal is also sent right
after an account is created if account verification is disabled.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> &#8211; An instance of <tt class="docutils literal"><span class="pre">satchmo_store.models.Contact</span></tt> if the account
was verified via email (Note: this is the same argument as <tt class="docutils literal"><span class="pre">contact</span></tt>), or
an instance of <tt class="docutils literal"><span class="pre">satchmo_store.accounts.forms.RegistrationForm</span></tt> if account
verification is disabled.</li>
<li><strong>contact</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.models.Contact</span></tt>) &#8211; The contact that was registered.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="satchmo_ext.newsletter.signals.newsletter_subscription_updated">
<tt class="descclassname">satchmo_ext.newsletter.signals.</tt><tt class="descname">newsletter_subscription_updated</tt><big>(</big><em>sender</em>, <em>old_state=None</em>, <em>new_state=None</em>, <em>contact=None</em>, <em>attributes=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#satchmo_ext.newsletter.signals.newsletter_subscription_updated" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after a newsletter subscription has been updated.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.models.Contact</span></tt>) &#8211; The contact for which the subscription status is being updated.</li>
<li><strong>old_state</strong> &#8211; A Boolean representing the old state of subscription.</li>
<li><strong>new_state</strong> &#8211; A Boolean representing the new state of the subscription.</li>
<li><strong>contact</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.models.Contact</span></tt>) &#8211; The contact for which the subscription status is being updated.</li>
<li><strong>attributes</strong> &#8211; An empty dictionary. This argument is not currently used.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="payment.signals.confirm_sanity_check">
<tt class="descclassname">payment.signals.</tt><tt class="descname">confirm_sanity_check</tt><big>(</big><em>sender</em>, <em>controller=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#payment.signals.confirm_sanity_check" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after ensuring that the cart and order are valid.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">payment.views.confirm.ConfirmController</span></tt>) &#8211; The controller which performed the sanity check.</li>
<li><strong>controller</strong> (<tt class="docutils literal"><span class="pre">payment.views.confirm.ConfirmController</span></tt>) &#8211; The controller which performed the sanity check.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>sender</em> is the same as <em>controller</em>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="payment.signals.payment_methods_query">
<tt class="descclassname">payment.signals.</tt><tt class="descname">payment_methods_query</tt><big>(</big><em>sender</em>, <em>methods=None</em>, <em>cart=None</em>, <em>order=None</em>, <em>contact=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#payment.signals.payment_methods_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when a <tt class="docutils literal"><span class="pre">payment.forms.PaymentMethodForm</span></tt> is initialized. Receivers
have cart/order passed in variables to check the contents and modify methods
list if neccessary.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">payment.forms.PaymentMethodForm</span></tt>) &#8211; The form that is being initialized.</li>
<li><strong>methods</strong> &#8211; A list of 2-element tuples containing the name and label for
each active payment module.</li>
<li><strong>cart</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Cart</span></tt>) &#8211; The cart.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The current order.</li>
<li><strong>contact</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.contact.models.Contact</span></tt>) &#8211; The contact representing the current customer if
authenticated; it is None otherwise.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The following example shows how to conditionally modify the payment choices
presented to a customer:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">adjust_payment_choices</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">contact</span><span class="p">,</span> <span class="n">methods</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">should_reduce</span><span class="p">:</span> <span class="c"># whatever your condition is</span>
        <span class="k">for</span> <span class="n">method</span> <span class="ow">in</span> <span class="n">methods</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">method</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">==</span> <span class="s">&#39;PAYMENT_PMTKEY&#39;</span><span class="p">:</span>
                <span class="n">methods</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">method</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="payment.signals.payment_choices">
<tt class="descclassname">payment.signals.</tt><tt class="descname">payment_choices</tt><big>(</big><em>sender</em>, <em>choices=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#payment.signals.payment_choices" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent after a list of payment choices is compiled, allows the editing of
payment choices.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> &#8211; Always <tt class="xref docutils literal"><span class="pre">None</span></tt></li>
<li><strong>methods</strong> &#8211; A list of 2-element tuples containing the name and label for
each active payment module.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="product.signals.index_prerender">
<tt class="descclassname">product.signals.</tt><tt class="descname">index_prerender</tt><big>(</big><em>sender</em>, <em>request=None</em>, <em>context=None</em>, <em>category=None</em>, <em>brand=None</em>, <em>object_list=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#product.signals.index_prerender" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent before an index is rendered for categories or brands.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> &#8211; <p>An instance of one of the following models:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">product.models.product</span></tt></li>
<li><tt class="docutils literal"><span class="pre">satchmo_ext.brand.models.Brand</span></tt></li>
<li><tt class="docutils literal"><span class="pre">satchmo_ext.brand.models.BrandProduct</span></tt></li>
</ul>
</li>
<li><strong>request</strong> (<tt class="docutils literal"><span class="pre">django.http.HttpRequest</span></tt>) &#8211; The request used by the view.</li>
<li><strong>context</strong> &#8211; A dictionary containing the context that will be used to
render the template. The contents of this dictionary changes depending on
the sender.</li>
<li><strong>category</strong> (<tt class="docutils literal"><span class="pre">product.models.Category</span></tt>) &#8211; The category being viewed.</li>
<li><strong>brand</strong> (<tt class="docutils literal"><span class="pre">satchmo_ext.brand.modes.Brand</span></tt>) &#8211; The brand being viewed.</li>
<li><strong>object_list</strong> &#8211; A <tt class="docutils literal"><span class="pre">QuerySet</span></tt> of <tt class="docutils literal"><span class="pre">product.models.Product</span></tt> objects.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>category</em> and <em>brand</em> will not be passed for category listings.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="product.signals.satchmo_price_query">
<tt class="descclassname">product.signals.</tt><tt class="descname">satchmo_price_query</tt><big>(</big><em>sender</em>, <em>price=None</em>, <em>slug=None</em>, <em>discountable=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#product.signals.satchmo_price_query" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent before returning the price of a product.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> &#8211; <p>An instance of one of the following models:</p>
<ul>
<li><tt class="docutils literal"><span class="pre">product.models.ProductPriceLookup</span></tt></li>
<li><tt class="docutils literal"><span class="pre">product.models.Price</span></tt></li>
<li><tt class="docutils literal"><span class="pre">satchmo_ext.tieredpricing.models.TieredPrice</span></tt></li>
</ul>
</li>
<li><strong>price</strong> &#8211; The instance of the model sending the price query.</li>
<li><strong>slug</strong> &#8211; The slug of the product being queried</li>
<li><strong>discountable</strong> &#8211; A Boolean representing whether or not the product price
is discountable</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>slug</em> and <em>discountable</em> are only sent by
<tt class="docutils literal"><span class="pre">product.models.ProductPriceLookup</span></tt>.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><em>price</em> is the same as <em>sender</em></p>
</div>
</dd></dl>

<dl class="function">
<dt id="product.signals.subtype_order_success">
<tt class="descclassname">product.signals.</tt><tt class="descname">subtype_order_success</tt><big>(</big><em>sender</em>, <em>product=None</em>, <em>order=None</em>, <em>subtype=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#product.signals.subtype_order_success" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent when a downloadable product is successful.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">product.models.DownloadableProduct</span></tt>) &#8211; The product that was successfully ordered.</li>
<li><strong>product</strong> (<tt class="docutils literal"><span class="pre">product.models.DownoadableProduct</span></tt>) &#8211; The product that was successfully ordered.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The successful order for the product.</li>
<li><strong>subtype</strong> &#8211; Always the string <tt class="docutils literal"><span class="pre">&quot;download&quot;</span></tt>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="product.signals.discount_filter_items">
<tt class="descclassname">product.signals.</tt><tt class="descname">discount_filter_items</tt><big>(</big><em>sender</em>, <em>discounted=None</em>, <em>order=None</em>, <em>**kwargs</em><big>)</big><a class="headerlink" href="#product.signals.discount_filter_items" title="Permalink to this definition">¶</a></dt>
<dd><p>Sent to verify the set of order items that are subject to discount.</p>
<p>Listeners should modify the &#8220;discounted&#8221; dictionary to change the set of
discounted cart items.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sender</strong> (<tt class="docutils literal"><span class="pre">product.models.Discount</span></tt>) &#8211; The discount being applied.</li>
<li><strong>discounted</strong> &#8211; A dictionary, where the keys are IDs of items which are
subject to discount by standard criteria.</li>
<li><strong>order</strong> (<tt class="docutils literal"><span class="pre">satchmo_store.shop.models.Order</span></tt>) &#8211; The order being processed.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="external-signals-used-in-satchmo">
<h2>External Signals Used in Satchmo<a class="headerlink" href="#external-signals-used-in-satchmo" title="Permalink to this headline">¶</a></h2>
<p>Satchmo depends on signals in <tt class="docutils literal"><span class="pre">signals_ahoy.signals</span></tt> and triggers them at
various points of execution; below are some of them.</p>
<dl class="function">
<dt id="signals_ahoy.signals.application_search">
<tt class="descclassname">signals_ahoy.signals.</tt><tt class="descname">application_search</tt><big>(</big><big>)</big><a class="headerlink" href="#signals_ahoy.signals.application_search" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sent by <a class="reference internal" href="views.html#satchmo_store.shop.views.search.search_view" title="satchmo_store.shop.views.search.search_view"><tt class="xref py py-func docutils literal"><span class="pre">satchmo_store.shop.views.search.search_view()</span></tt></a> to ask all listeners
to add search results.</p>
<p>Arguments sent with this signal:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">sender</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">product.models.Product</span></tt> model (Note: not an instance of Product)</dd>
<dt><tt class="docutils literal"><span class="pre">request</span></tt></dt>
<dd>The <tt class="docutils literal"><span class="pre">HttpRequest</span></tt> object used in the search view</dd>
<dt><tt class="docutils literal"><span class="pre">category</span></tt></dt>
<dd>The category slug to limit a search to a specific category</dd>
<dt><tt class="docutils literal"><span class="pre">keywords</span></tt></dt>
<dd>A list of keywords search for</dd>
<dt><tt class="docutils literal"><span class="pre">results</span></tt></dt>
<dd><p class="first">A dictionary of results to update with search results. The contents of the dictionary should contain the following information:</p>
<dl class="last docutils">
<dt><tt class="docutils literal"><span class="pre">categories</span></tt></dt>
<dd>A <tt class="docutils literal"><span class="pre">QuerySet</span></tt> of <tt class="docutils literal"><span class="pre">product.models.Cateogry</span></tt> objects which matched the search criteria</dd>
<dt><tt class="docutils literal"><span class="pre">products</span></tt></dt>
<dd>A <tt class="docutils literal"><span class="pre">Queryset</span></tt> of <tt class="docutils literal"><span class="pre">product.models.Product</span></tt> objects which matched the search critera</dd>
</dl>
</dd>
</dl>
</blockquote>
<dl class="function">
<dt id="signals_ahoy.signals.collect_urls">
<tt class="descclassname">signals_ahoy.signals.</tt><tt class="descname">collect_urls</tt><big>(</big><big>)</big><a class="headerlink" href="#signals_ahoy.signals.collect_urls" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sent by urls modules to allow listeners to add or replace urls to that module</p>
<p>Arguments sent with this signal:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">sender</span></tt></dt>
<dd>The module having url patterns added to it</dd>
<dt><tt class="docutils literal"><span class="pre">patterns</span></tt></dt>
<dd>The url patterns to be added. This is an instance of <tt class="docutils literal"><span class="pre">django.conf.urls.defaults.patterns</span></tt></dd>
<dt><tt class="docutils literal"><span class="pre">section</span></tt></dt>
<dd>The name of the section adding the urls (Note: this argument is not always provided). For example &#8216;__init__&#8217; or &#8216;product&#8217;</dd>
</dl>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">satchmo_store.shop.signals</span> <span class="kn">import</span> <span class="n">satchmo_cart_add_complete</span>
<span class="kn">import</span> <span class="nn">myviews</span>

<span class="n">satchmo_cart_add_complete</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">myviews</span><span class="o">.</span><span class="n">cart_add_listener</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
</blockquote>
<dl class="function">
<dt id="signals_ahoy.signals.form_init">
<tt class="descclassname">signals_ahoy.signals.</tt><tt class="descname">form_init</tt><big>(</big><big>)</big><a class="headerlink" href="#signals_ahoy.signals.form_init" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sent when a contact info form is initialized. Contact info forms include:</p>
<blockquote>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">contact.forms.ContactInfoForm</span></tt></li>
<li><tt class="docutils literal"><span class="pre">contact.forms.ExtendedContactInfoForm</span></tt></li>
<li><tt class="docutils literal"><span class="pre">payment.forms.PaymentContactInfoForm</span></tt></li>
</ul>
</blockquote>
<p>Arguments sent with this signal:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">sender</span></tt></dt>
<dd>The model of the form being initialized. The value of sender will be one of the models defined above.</dd>
<dt><tt class="docutils literal"><span class="pre">form</span></tt></dt>
<dd>An instance of the form (whose type is defined by <tt class="docutils literal"><span class="pre">sender</span></tt>) being intitialized.</dd>
</dl>
</blockquote>
<p>See <a class="reference internal" href="#ensuring-acceptance-of-terms-during-checkout">Ensuring Acceptance of Terms during Checkout</a> for an example of how this signal can be used.</p>
<dl class="function">
<dt id="signals_ahoy.signals.form_postsave">
<tt class="descclassname">signals_ahoy.signals.</tt><tt class="descname">form_postsave</tt><big>(</big><big>)</big><a class="headerlink" href="#signals_ahoy.signals.form_postsave" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<p>Sent after a form has been saved to the database</p>
<p>Arguments sent with this signal:</p>
<blockquote>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">sender</span></tt></dt>
<dd><p class="first">The form model of the form being set (Note: Not an instance). Possible values include:</p>
<ul class="last simple">
<li><tt class="docutils literal"><span class="pre">satchmo_store.contact.forms.ContactInfoForm</span></tt></li>
<li><tt class="docutils literal"><span class="pre">payment.modules.purchaseorder.forms.PurchaseorderPayShipForm</span></tt></li>
<li><tt class="docutils literal"><span class="pre">payment.forms.CreditPayShipForm</span></tt></li>
<li><tt class="docutils literal"><span class="pre">payment.forms.SimplePayShipForm</span></tt></li>
<li><tt class="docutils literal"><span class="pre">payment.forms.PaymentContactInfoForm</span></tt></li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">form</span></tt></dt>
<dd><ul class="first last simple">
<li>The instance of the form defined by one of the above models that was saved.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">object</span></tt></dt>
<dd><ul class="first last simple">
<li>A <tt class="docutils literal"><span class="pre">satchmo_store.contact.models.Contact</span></tt> instance if the form being saved is an instance of <tt class="docutils literal"><span class="pre">satchmo_store.contact.forms.ContactInfoForm</span></tt> otherwise this value does not exist.</li>
</ul>
</dd>
<dt><tt class="docutils literal"><span class="pre">formdata</span></tt></dt>
<dd><ul class="first last simple">
<li>The data associated with the form if the form being saved is an instance of <tt class="docutils literal"><span class="pre">satchmo_store.contact.forms.ContactInfoForm</span></tt> otherwise this value does not exist.</li>
</ul>
</dd>
</dl>
</blockquote>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="putting-it-all-together">
<h3>Putting it All Together<a class="headerlink" href="#putting-it-all-together" title="Permalink to this headline">¶</a></h3>
<p>This section contains a brief example of how to use signals in your application.
For this example, we want to have certain products that are only available to members.
Everyone can see the products, but only members can add to the cart. If
a non-member tries to purchase a product, they will get a clear error
message letting them know they need to be a member.</p>
<p>The first thing to do is create a <cite>listeners.py</cite> file in your app. In this case,
the file would look something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">A custom listener that will evaluate whether or not the product being added</span>
<span class="sd">to the cart is available to the current user based on their membership.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">satchmo_store.shop.exceptions</span> <span class="kn">import</span> <span class="n">CartAddProhibited</span>
<span class="kn">from</span> <span class="nn">django.utils.translation</span> <span class="kn">import</span> <span class="n">gettext_lazy</span> <span class="k">as</span> <span class="n">_</span>

<span class="k">class</span> <span class="nc">ContactCannotOrder</span><span class="p">(</span><span class="n">CartAddProhibited</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">contact</span><span class="p">,</span> <span class="n">product</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">ContactCannotOrder</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">contact</span> <span class="o">=</span> <span class="n">contact</span>

<span class="k">def</span> <span class="nf">veto_for_non_members</span><span class="p">(</span><span class="n">sender</span><span class="p">,</span> <span class="n">cartitem</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">added_quantity</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="kn">from</span> <span class="nn">utils</span> <span class="kn">import</span> <span class="n">can_user_buy</span>
    <span class="n">customer</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s">&#39;cart&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">customer</span>
    <span class="k">if</span> <span class="n">can_user_buy</span><span class="p">(</span><span class="n">cartitem</span><span class="o">.</span><span class="n">product</span><span class="p">,</span> <span class="n">customer</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&quot;Only members are allowed to purchase this product.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="n">ContactCannotOrder</span><span class="p">(</span><span class="n">customer</span><span class="p">,</span> <span class="n">cartitem</span><span class="o">.</span><span class="n">product</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, you need to create the <cite>can_user_buy</cite> function. Your <cite>utils.py</cite> file could
look something like this (details left up to the reader):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">can_user_buy</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">contact</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Given a product and a user, return True if that person can buy it and</span>
<span class="sd">    False if they can not.</span>
<span class="sd">    This doesn&#39;t work as it stands now. You&#39;ll need to customize the</span>
<span class="sd">    is_member function</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">is_member</span><span class="p">(</span><span class="n">contact</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">True</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span>
</pre></div>
</div>
<p>The final step is to make sure your new listener is hooked up. In your <cite>models.py</cite>
add the following code:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">listeners</span> <span class="kn">import</span> <span class="n">veto_for_non_members</span>
<span class="kn">from</span> <span class="nn">satchmo_store.shop</span> <span class="kn">import</span> <span class="n">signals</span>

<span class="n">signals</span><span class="o">.</span><span class="n">satchmo_cart_add_verify</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">veto_for_non_members</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, you should be able to restrict certain products to only your members.
The nice thing is that you&#8217;ve done this without modifying your satchmo
base code.</p>
</div>
<div class="section" id="ensuring-acceptance-of-terms-during-checkout">
<h3>Ensuring Acceptance of Terms during Checkout<a class="headerlink" href="#ensuring-acceptance-of-terms-during-checkout" title="Permalink to this headline">¶</a></h3>
<p>The signal <a class="reference internal" href="#signals_ahoy.signals.form_init" title="signals_ahoy.signals.form_init"><tt class="xref py py-func docutils literal"><span class="pre">signals_ahoy.signals.form_init()</span></tt></a> can be combined with the <tt class="docutils literal"><span class="pre">payment.listeners.form_terms_listener</span></tt> to add a custom terms and
conditions acceptance box into your checkout flow.</p>
<p>First, add the terms view in your <tt class="file docutils literal"><span class="pre">/localsite/urls.py</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">urlpatterns</span> <span class="o">+=</span> <span class="n">patterns</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">,</span>
<span class="n">url</span><span class="p">(</span><span class="s">r&#39;^shop_terms/$&#39;</span><span class="p">,</span> <span class="s">&#39;project-name.localsite.views.shop_terms&#39;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s">&quot;shop_terms&quot;</span><span class="p">),</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Next, create the view in your <tt class="file docutils literal"><span class="pre">/localsite/views.py</span></tt> to display the terms:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.shortcuts</span> <span class="kn">import</span> <span class="n">render_to_response</span>
<span class="kn">from</span> <span class="nn">django.template</span> <span class="kn">import</span> <span class="n">RequestContext</span>

<span class="k">def</span> <span class="nf">shop_terms</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">RequestContext</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="p">{})</span>
    <span class="k">return</span> <span class="n">render_to_response</span><span class="p">(</span><span class="s">&#39;localsite/shop-terms.html&#39;</span><span class="p">,</span>
        <span class="n">context_instance</span><span class="o">=</span><span class="n">ctx</span><span class="p">)</span>
</pre></div>
</div>
<p>Now, you will need modify the checkout html to display the new form. Copy
<tt class="file docutils literal"><span class="pre">/satchmo/apps/payment/templates/shop/checkout/pay_ship.html</span></tt> to
<tt class="file docutils literal"><span class="pre">/project-name/templates/shop/checkout/pay_ship.html</span></tt>.</p>
<p>Add the following code to the copied <tt class="file docutils literal"><span class="pre">pay_ship.html</span></tt> to display the form:</p>
<div class="highlight-python"><pre>{{ form.terms }} {{ form.terms.label|safe }}
{% if form.terms.errors %}&lt;br/&gt;**{{ form.terms.errors|join:", " }}{% endif %}</pre>
</div>
<p>Make sure you register the forms_terms_listener by adding the following code to your
<tt class="file docutils literal"><span class="pre">/localsite/models.py</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">payment.forms</span> <span class="kn">import</span> <span class="n">SimplePayShipForm</span>
<span class="kn">from</span> <span class="nn">payment.listeners</span> <span class="kn">import</span> <span class="n">form_terms_listener</span>
<span class="kn">from</span> <span class="nn">signals_ahoy.signals</span> <span class="kn">import</span> <span class="n">form_init</span>

<span class="n">form_init</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">form_terms_listener</span><span class="p">,</span> <span class="n">sender</span><span class="o">=</span><span class="n">SimplePayShipForm</span><span class="p">)</span>
</pre></div>
</div>
<p>The final step is to create your actual <tt class="file docutils literal"><span class="pre">store-name/templates/localsite/shop-terms.html</span></tt>,
like this:</p>
<div class="highlight-python"><pre>{% extends "base.html" %}
{% block content %}
&lt;p&gt;Put all of your sample terms here.&lt;/p&gt;
{% endblock %}</pre>
</div>
<p>Now, when users checkout, they must agree to your store&#8217;s terms.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="google-base.html" title="Google Base"
             >next</a> |</li>
        <li class="right" >
          <a href="views.html" title="Satchmo Views"
             >previous</a> |</li>
        <li><a href="http://www.satchmoproject.com">Satchmo home </a> |&nbsp;</li>
        
        <li><a href="index.html">Satchmo v0.9.2-development documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010, Chris Moffitt.
      Last updated on Mar 10, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
<script src='http://www.google-analytics.com/ga.js' type='text/javascript'></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1711397-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>