<ul class="formTabs">
  <!-- Global settings header -->
  <li class="formTab" tal:define="
    name string:daviz.properties;
    editform python:view.get_edit(name);
    label python:editform.label;
    id python:name.replace('.', '-');"
    tal:condition="editform"
    tal:attributes="id string:$id-header">
    <a tal:attributes="href string:#$id-tab">
      <span tal:content="label">Edit View</span>
    </a>
  </li>
  <!-- Views -->
  <tal:editheader repeat="enabled python:view.enabled_views">
    <li class="formTab" tal:define="
      viewform python:view.get_view(enabled);
      label python:viewform.label;
      id python:enabled.replace('.', '-');
      editform python:view.get_edit(enabled)"
      tal:condition="editform"
      tal:attributes="id string:$id-header">
      <a tal:attributes="href string:#$id-tab">
        <span tal:content="label">Edit View</span>
      </a>
    </li>
  </tal:editheader>
</ul>

<div class="panes">

<!-- Global settings body -->
<div tal:define="
  name string:daviz.properties;
  editform python:view.get_edit(name);
  label python:editform.label;
  id python:name.replace('.', '-');"
  tal:attributes="id string:$id-tab"
  tal:condition="editform"
  class="daviz-view-edit">

  <!-- Facets -->
  <div class="daviz-facets-edit">
    <tal:views replace="structure here/@@daviz-edit.facets.html" />
  </div>

  <form method="post" class="daviz-view-form daviz-global-settings"
    tal:define="name python:editform.__name__"
    tal:attributes="action string:${here/absolute_url}/@@$name">
    <tal:editform replace="structure editform" />
  </form>

</div>

<!-- Views body -->
<tal:edittab repeat="enabled python:view.enabled_views">
  <div tal:define="
    viewform python:view.get_view(enabled);
    label python:viewform.label;
    id python:enabled.replace('.', '-');
    editform python:view.get_edit(enabled)"
    tal:attributes="id string:$id-tab"
    tal:condition="editform"
    class="daviz-view-edit">
    <form method="post" class="daviz-view-form"
      tal:define="name python:editform.__name__"
      tal:attributes="action string:${here/absolute_url}/@@$name">
      <tal:editform replace="structure editform" />
    </form>
  </div>
</tal:edittab>

</div>
