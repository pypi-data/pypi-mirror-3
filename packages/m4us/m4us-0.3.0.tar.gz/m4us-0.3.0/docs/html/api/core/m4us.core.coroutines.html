

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>m4us.core.coroutines &mdash; Message For You Sir! 0.3.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.3.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Message For You Sir! 0.3.0 documentation" href="../../index.html" />
    <link rel="up" title="API Documentation" href="../index.html" />
    <link rel="next" title="m4us.core.exceptions" href="m4us.core.exceptions.html" />
    <link rel="prev" title="m4us.core.containers" href="m4us.core.containers.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="m4us.core.exceptions.html" title="m4us.core.exceptions"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="m4us.core.containers.html" title="m4us.core.containers"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Message For You Sir! 0.3.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" accesskey="U">API Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-m4us.core.coroutines">
<span id="m4us-core-coroutines"></span><h1><a class="reference internal" href="#module-m4us.core.coroutines" title="m4us.core.coroutines: Provides support for using regular Python coroutines."><tt class="xref py py-mod docutils literal"><span class="pre">m4us.core.coroutines</span></tt></a><a class="headerlink" href="#module-m4us.core.coroutines" title="Permalink to this headline">¶</a></h1>
<p>Provides support for using regular <a class="reference external" href="http://python.org">Python</a> <a class="reference internal" href="../../glossary.html#term-coroutines"><em class="xref std std-term">coroutines</em></a>.</p>
<div class="section" id="members">
<h2>Members<a class="headerlink" href="#members" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="m4us.core.coroutines.coroutine">
<tt class="descname">coroutine</tt><big>(</big><em>lazy=True</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#coroutine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.coroutine" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator factory to automatically activate <a class="reference external" href="http://python.org">Python</a> <a class="reference internal" href="../../glossary.html#term-coroutines"><em class="xref std std-term">coroutines</em></a>.</p>
<p>Before a <a class="reference external" href="http://python.org">Python</a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> can be used, it needs to be activated by
sending <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> as it's first <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>.  This decorator does this
automatically.</p>
<p><a class="reference internal" href="../../glossary.html#term-coroutines"><em class="xref std std-term">Coroutines</em></a> are presumptively <a class="reference internal" href="../../glossary.html#term-lazy"><em class="xref std std-term">lazy</em></a>.  This decorator can flag the
given <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> as not <a class="reference internal" href="../../glossary.html#term-lazy"><em class="xref std std-term">lazy</em></a> by making it adaptable to the
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.INotLazy" title="m4us.core.interfaces.INotLazy"><tt class="xref py py-class docutils literal"><span class="pre">INotLazy</span></tt></a> marker <a class="reference internal" href="../../glossary.html#term-interface"><em class="xref std std-term">interface</em></a>.</p>
<p>This decorator also registers the function as providing
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">ICoroutineFactory</span></tt></a> and registers all
<a class="reference internal" href="../../glossary.html#term-interfaces"><em class="xref std std-term">interfaces</em></a> implemented by the function as being provided by the
<a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> that the function returns.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>lazy</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) -- Specifies whether or not the <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> is <a class="reference internal" href="../../glossary.html#term-lazy"><em class="xref std std-term">lazy</em></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A wrapper function that will activate and return the <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>
when called.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/types.html#types.FunctionType" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">types.FunctionType</span></tt></a></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When using this decorator with the <a class="reference external" href="http://docs.zope.org/zope.interface/README.html#declaring-implemented-interfaces">zope.interface.implementer</a> and/or
<a class="reference external" href="http://docs.zope.org/zope.interface/README.html#declaring-provided-interfaces">zope.interface.provider</a> decorators, make sure this decorator is the
outer-most one.  Otherwise interface declarations will get lost.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.filter_">
<tt class="descname">filter_</tt><big>(</big><em>function</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#filter_"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.filter_" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to turn an ordinary function into a proper <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.</p>
<p>This decorator returns a factory function that when called, just calls
<a class="reference internal" href="#m4us.core.coroutines.filter_from_callable" title="m4us.core.coroutines.filter_from_callable"><tt class="xref py py-func docutils literal"><span class="pre">filter_from_callable()</span></tt></a> and returns the result.</p>
<p>Any additional arguments passed the to factory function are passed on to
<a class="reference internal" href="#m4us.core.coroutines.filter_from_callable" title="m4us.core.coroutines.filter_from_callable"><tt class="xref py py-func docutils literal"><span class="pre">filter_from_callable()</span></tt></a>.</p>
<p>The factory function is also registered as providing
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">ICoroutineFactory</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>function</strong> (<a class="reference external" href="http://docs.python.org/library/types.html#types.FunctionType" title="(in Python v2.7)"><em>types.FunctionType</em></a>) -- The function to turn into a
<a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.  It must accept at least one argument.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A filter coroutine factory function.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first simple">
<li><a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.TypeError" title="(in Python v2.7)"><strong>exceptions.TypeError</strong></a> -- If the given function is not a function.</li>
<li><a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.ValueError" title="(in Python v2.7)"><strong>exceptions.ValueError</strong></a> -- If the given function does not accept at
least one positional argument.</li>
</ul>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Seealso :</th><td class="field-body"><p class="first last"><a class="reference internal" href="#m4us.core.coroutines.filter_from_callable" title="m4us.core.coroutines.filter_from_callable"><tt class="xref py py-func docutils literal"><span class="pre">filter_from_callable()</span></tt></a> for the specifics.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.filter_from_callable">
<tt class="descname">filter_from_callable</tt><big>(</big><em>callable_</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#filter_from_callable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.filter_from_callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an ordinary callable (function, etc.) into a proper <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.</p>
<p>This is a convenience <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> that turns ordinary callables (functions,
etc.) into proper <a class="reference internal" href="../../glossary.html#term-coroutines"><em class="xref std std-term">coroutines</em></a>.  The callable is passed <tt class="docutils literal"><span class="pre">inbox</span></tt>
<a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> and it's return value is emited on <tt class="docutils literal"><span class="pre">outbox</span></tt>.</p>
<p>The given callable must accept at least a single positional argument, the
incomming <tt class="docutils literal"><span class="pre">inbox</span></tt> <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>, and return whatever should be the <tt class="docutils literal"><span class="pre">outbox</span></tt>
<a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a> to emit.  Any additional arguments passed to this function will
be passed to the callable each time it is called.</p>
<p>Any <tt class="docutils literal"><span class="pre">control</span></tt> or non-<tt class="docutils literal"><span class="pre">inbox</span></tt> <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> sent in will be ignored and not
passed to the callable.  Additionally, by default, if the callable returns
<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, the <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> will be emitted on <tt class="docutils literal"><span class="pre">outbox</span></tt> as the
<a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>.  This behaviour can be changed by passing <tt class="docutils literal"><span class="pre">suppress_none=True</span></tt>
as a keyword argument.  When <em>suppress_none</em> is True, if the callable
returns <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a>, only a plain <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> will be yielded.  This means
that no <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a> will  be passed on to any other <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.
Non-<a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> will still be emitted on the <tt class="docutils literal"><span class="pre">outbox</span></tt>
<a class="reference internal" href="../../glossary.html#term-outbox"><em class="xref std std-term">outbox</em></a>, however.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>callable_</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Callable" title="(in Python v2.7)"><em>collections.Callable</em></a>) -- The callable to which to pass
messages.</li>
<li><strong>suppress_none</strong> (<a class="reference external" href="http://docs.python.org/library/functions.html#bool" title="(in Python v2.7)"><em>bool</em></a>) -- Indicate whether or not <a class="reference external" href="http://docs.python.org/library/constants.html#None" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt></a> should be
emitted on the <tt class="docutils literal"><span class="pre">outbox</span></tt> <a class="reference internal" href="../../glossary.html#term-outbox"><em class="xref std std-term">outbox</em></a>.  (Default: <a class="reference external" href="http://docs.python.org/library/constants.html#True" title="(in Python v2.7)"><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></a>)</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Sequence" title="(in Python v2.7)"><em>collections.Sequence</em></a>) -- Any additional positional arguments to
pass to the callable.</li>
<li><strong>kwargs</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Mapping" title="(in Python v2.7)"><em>collections.Mapping</em></a>) -- Any additional keyword arguments to pass
to the callable.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A filter <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/types.html#types.GeneratorType" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">types.GeneratorType</span></tt></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.TypeError" title="(in Python v2.7)">exceptions.TypeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">If the given callable is not actually a
callable.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Implements :</th><td class="field-body"><p class="first"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutine" title="m4us.core.interfaces.ICoroutine"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutine</span></tt></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Provides :</th><td class="field-body"><p class="first last"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.init">
<tt class="descname">init</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#init"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> <a class="reference internal" href="../../glossary.html#term-interface"><em class="xref std std-term">interface</em></a> support.</p>
<p>This function must be called before any other part of m4us is used.  It
sets up global interface and adapter registrations neccessary for the
proper functioning of m4us.  It has been made an explicit function in order
to avoid import-time side-effects, which is considered bad practice.</p>
<p>It is recommended that this function be called either at import time or as
the first call in a program's main function.</p>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.null_sink">
<tt class="descname">null_sink</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#null_sink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.null_sink" title="Permalink to this definition">¶</a></dt>
<dd><p>Swallow all messages except <a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IShutdown" title="m4us.core.interfaces.IShutdown"><tt class="xref py py-class docutils literal"><span class="pre">IShutdown</span></tt></a>.</p>
<p>This <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> can serve as an end point in a series of connected
<a class="reference internal" href="../../glossary.html#term-coroutines"><em class="xref std std-term">coroutines</em></a>.  All <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> sent to it, except
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IShutdown" title="m4us.core.interfaces.IShutdown"><tt class="xref py py-class docutils literal"><span class="pre">IShutdown</span></tt></a> <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> are ignored and not
re-emitted.</p>
<p>The <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> will shutdown on any
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IShutdown" title="m4us.core.interfaces.IShutdown"><tt class="xref py py-class docutils literal"><span class="pre">IShutdown</span></tt></a> <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>, forwarding it on before
quitting.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A null sink <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/types.html#types.GeneratorType" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">types.GeneratorType</span></tt></a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Implements :</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutine" title="m4us.core.interfaces.ICoroutine"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutine</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Provides :</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.producer">
<tt class="descname">producer</tt><big>(</big><em>generator_factory</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#producer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.producer" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator that turns a generator function into a <a class="reference internal" href="../../glossary.html#term-producer"><em class="xref std std-term">producer</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.</p>
<p>This decorator returns a factory function that when called, just calls the
generator function and passes the result to <a class="reference internal" href="#m4us.core.coroutines.producer_from_iterable" title="m4us.core.coroutines.producer_from_iterable"><tt class="xref py py-func docutils literal"><span class="pre">producer_from_iterable()</span></tt></a>,
returning the result.</p>
<p>Any additional arguments passed the to factory function are passed on to
to the generator factory.</p>
<p>The factory function is also registered as providing
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">ICoroutineFactory</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>generator_factory</strong> (<a class="reference external" href="http://docs.python.org/library/types.html#types.FunctionType" title="(in Python v2.7)"><em>types.FunctionType</em></a>) -- The generator function to turn
into a <a class="reference internal" href="../../glossary.html#term-producer"><em class="xref std std-term">producer</em></a>.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A <a class="reference internal" href="../../glossary.html#term-producer"><em class="xref std std-term">producer</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> factory function.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.TypeError" title="(in Python v2.7)">exceptions.TypeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">If the given generator factory is not a
callable.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Technically this decorator will work with any function that returns an
iterable.  A generator function is not strictly required, though that is
the expected typical use case.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Seealso :</th><td class="field-body"><a class="reference internal" href="#m4us.core.coroutines.producer_from_iterable" title="m4us.core.coroutines.producer_from_iterable"><tt class="xref py py-func docutils literal"><span class="pre">producer_from_iterable()</span></tt></a> for the specifics.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.producer_from_iterable">
<tt class="descname">producer_from_iterable</tt><big>(</big><em>iterable</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#producer_from_iterable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.producer_from_iterable" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a <a class="reference internal" href="../../glossary.html#term-producer"><em class="xref std std-term">producer</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> that iterates over an iterable.</p>
<p>This is a convenience <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> that emits <tt class="docutils literal"><span class="pre">outbox</span></tt> messages that are
the results of iterating over an iterable.  When all the iterable results
have been emitted, an <a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IProducerFinished" title="m4us.core.interfaces.IProducerFinished"><tt class="xref py py-class docutils literal"><span class="pre">IProducerFinished</span></tt></a>
messages is emitted.  Then the <a class="reference internal" href="../../glossary.html#term-producer"><em class="xref std std-term">producer</em></a> terminates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>iterable</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Iterable" title="(in Python v2.7)"><em>collections.Iterable</em></a>) -- The iterable object over which to
iterate.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">A non-lazy producer <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/types.html#types.GeneratorType" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">types.GeneratorType</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.TypeError" title="(in Python v2.7)">exceptions.TypeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body">If the given object is not an iterable or it
does not produce a valid iterator.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Implements :</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutine" title="m4us.core.interfaces.ICoroutine"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutine</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Provides :</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.sample_coroutine">
<tt class="descname">sample_coroutine</tt><big>(</big><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#sample_coroutine"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.sample_coroutine" title="Permalink to this definition">¶</a></dt>
<dd><p>Pass all <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> through.</p>
<p>This <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> is meant to provide a canonical example of what a
<a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> used with this project looks like.</p>
<p>Any <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> sent to it on any <a class="reference internal" href="../../glossary.html#term-inbox"><em class="xref std std-term">inbox</em></a> will be sent back out on it's
<tt class="docutils literal"><span class="pre">outbox</span></tt> <a class="reference internal" href="../../glossary.html#term-outbox"><em class="xref std std-term">outbox</em></a>.  It is also well behaved in that it will shutdown on
any <a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IShutdown" title="m4us.core.interfaces.IShutdown"><tt class="xref py py-class docutils literal"><span class="pre">IShutdown</span></tt></a> <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>, forwarding it on
before quitting.</p>
<p>The full code for this <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> is:</p>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span class="nd">@coroutine</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">sample_coroutine</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Pass all messages through.&quot;&quot;&quot;</span>
    <span class="n">inbox</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span><span class="p">)</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">is_shutdown</span><span class="p">(</span><span class="n">inbox</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
            <span class="k">yield</span> <span class="s">&#39;signal&#39;</span><span class="p">,</span> <span class="n">message</span>
            <span class="k">break</span>
        <span class="c">## Your code goes here.</span>
        <span class="n">inbox</span><span class="p">,</span> <span class="n">message</span> <span class="o">=</span> <span class="p">(</span><span class="k">yield</span> <span class="s">&#39;outbox&#39;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A pass-through <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference external" href="http://docs.python.org/library/types.html#types.GeneratorType" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">types.GeneratorType</span></tt></a></td>
</tr>
<tr class="field-odd field"><th class="field-name">Implements :</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutine" title="m4us.core.interfaces.ICoroutine"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutine</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Provides :</th><td class="field-body"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><a class="reference internal" href="../../glossary.html#term-producers"><em class="xref std std-term">Producers</em></a> and <a class="reference internal" href="../../glossary.html#term-filters"><em class="xref std std-term">filters</em></a> need a minimum of 2 <a class="reference external" href="http://docs.python.org/reference/simple_stmts.html#yield" title="(in Python v2.7)"><tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt></a> statements
as the output of the first one is always thrown away.  The output of the
second one is the first <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a> delivered.  On the other hand, the
first <a class="reference external" href="http://docs.python.org/reference/simple_stmts.html#yield" title="(in Python v2.7)"><tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt></a> will be the one that gets the first incoming
<a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.sink">
<tt class="descname">sink</tt><big>(</big><em>function</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#sink"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.sink" title="Permalink to this definition">¶</a></dt>
<dd><p>Decorator to turn an ordinary function into a <a class="reference internal" href="../../glossary.html#term-sink"><em class="xref std std-term">sink</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.</p>
<p>This decorator returns a factory function that when called, just calls
<a class="reference internal" href="#m4us.core.coroutines.sink_from_callable" title="m4us.core.coroutines.sink_from_callable"><tt class="xref py py-func docutils literal"><span class="pre">sink_from_callable()</span></tt></a> and returns the result.</p>
<p>Any additional arguments passed the to factory function are passed on to
<a class="reference internal" href="#m4us.core.coroutines.sink_from_callable" title="m4us.core.coroutines.sink_from_callable"><tt class="xref py py-func docutils literal"><span class="pre">sink_from_callable()</span></tt></a>.</p>
<p>The factory function is also registered as providing
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">ICoroutineFactory</span></tt></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>function</strong> (<a class="reference external" href="http://docs.python.org/library/types.html#types.FunctionType" title="(in Python v2.7)"><em>types.FunctionType</em></a>) -- The function to turn into a <a class="reference internal" href="../../glossary.html#term-sink"><em class="xref std std-term">sink</em></a>
<a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.  It must accept at least one argument.</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A <a class="reference internal" href="../../glossary.html#term-sink"><em class="xref std std-term">sink</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a> factory function.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.TypeError" title="(in Python v2.7)"><strong>exceptions.TypeError</strong></a> -- If the given function is not a function.</li>
<li><a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.ValueError" title="(in Python v2.7)"><strong>exceptions.ValueError</strong></a> -- If the given function does not accept at
least one positional argument.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#m4us.core.coroutines.sink_from_callable" title="m4us.core.coroutines.sink_from_callable"><tt class="xref py py-func docutils literal"><span class="pre">sink_from_callable()</span></tt></a> for the specifics.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="m4us.core.coroutines.sink_from_callable">
<tt class="descname">sink_from_callable</tt><big>(</big><em>callable_</em>, <em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../../_modules/m4us/core/coroutines.html#sink_from_callable"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#m4us.core.coroutines.sink_from_callable" title="Permalink to this definition">¶</a></dt>
<dd><p>Turn an ordinary callable (function, etc.) into a <a class="reference internal" href="../../glossary.html#term-sink"><em class="xref std std-term">sink</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a>.</p>
<p>This is a convenience function that turns ordinary callables (functions,
etc.) into <a class="reference internal" href="../../glossary.html#term-sink"><em class="xref std std-term">sink</em></a> <a class="reference internal" href="../../glossary.html#term-coroutines"><em class="xref std std-term">coroutines</em></a>.  The callable is passed <tt class="docutils literal"><span class="pre">inbox</span></tt>
<a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> and it's return value suppressed, unless it is an
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IShutdown" title="m4us.core.interfaces.IShutdown"><tt class="xref py py-class docutils literal"><span class="pre">IShutdown</span></tt></a> message.</p>
<p>The given callable must accept at least a single positional argument, the
incomming <tt class="docutils literal"><span class="pre">inbox</span></tt> <a class="reference internal" href="../../glossary.html#term-message"><em class="xref std std-term">message</em></a>, and return nothing.  It may return an
<a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.IShutdown" title="m4us.core.interfaces.IShutdown"><tt class="xref py py-class docutils literal"><span class="pre">IShutdown</span></tt></a> message, however, if appropriate,
but it should not normally be necessary.  Any additional arguments passed
to this function will be passed to the callable each time it is called.</p>
<p>Any <tt class="docutils literal"><span class="pre">control</span></tt> or non-<tt class="docutils literal"><span class="pre">inbox</span></tt> <a class="reference internal" href="../../glossary.html#term-messages"><em class="xref std std-term">messages</em></a> sent in will be ignored and not
passed to the callable.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>callable_</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Callable" title="(in Python v2.7)"><em>collections.Callable</em></a>) -- The callable to which to pass
messages.</li>
<li><strong>args</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Sequence" title="(in Python v2.7)"><em>collections.Sequence</em></a>) -- Any additional positional arguments to
pass to the callable.</li>
<li><strong>kwargs</strong> (<a class="reference external" href="http://docs.python.org/library/collections.html#collections.Mapping" title="(in Python v2.7)"><em>collections.Mapping</em></a>) -- Any additional keyword arguments to pass
to the callable.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">A <a class="reference internal" href="../../glossary.html#term-sink"><em class="xref std std-term">sink</em></a> <a class="reference internal" href="../../glossary.html#term-coroutine"><em class="xref std std-term">coroutine</em></a></p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference external" href="http://docs.python.org/library/types.html#types.GeneratorType" title="(in Python v2.7)"><tt class="xref py py-data docutils literal"><span class="pre">types.GeneratorType</span></tt></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Raises <a class="reference external" href="http://docs.python.org/library/exceptions.html#exceptions.TypeError" title="(in Python v2.7)">exceptions.TypeError</a>:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><p class="first">If the given callable is not actually a
callable.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Implements :</th><td class="field-body"><p class="first"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutine" title="m4us.core.interfaces.ICoroutine"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutine</span></tt></a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Provides :</th><td class="field-body"><p class="first last"><a class="reference internal" href="m4us.core.interfaces.html#m4us.core.interfaces.ICoroutineFactory" title="m4us.core.interfaces.ICoroutineFactory"><tt class="xref py py-class docutils literal"><span class="pre">m4us.core.interfaces.ICoroutineFactory</span></tt></a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><tt class="docutils literal"><span class="pre">m4us.core.coroutines</span></tt></a><ul>
<li><a class="reference internal" href="#members">Members</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="m4us.core.containers.html"
                        title="previous chapter"><tt class="docutils literal docutils literal docutils literal"><span class="pre">m4us.core.containers</span></tt></a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="m4us.core.exceptions.html"
                        title="next chapter"><tt class="docutils literal"><span class="pre">m4us.core.exceptions</span></tt></a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/api/core/m4us.core.coroutines.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="m4us.core.exceptions.html" title="m4us.core.exceptions"
             >next</a> |</li>
        <li class="right" >
          <a href="m4us.core.containers.html" title="m4us.core.containers"
             >previous</a> |</li>
        <li><a href="../../index.html">Message For You Sir! 0.3.0 documentation</a> &raquo;</li>
          <li><a href="../index.html" >API Documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2009-2012, Krys Lawrence.
      Last updated on 2012-02-22.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.2.
    </div>
  </body>
</html>