<div metal:define-macro="mbr_edit" tal:omit-tag=""
       xmlns:tal="http://xml.zope.org/namespaces/tal"
       xmlns:metal="http://xml.zope.org/namespaces/metal">
  <div class="listActions">
    <div class="first">
      <img src="/Static/Images/user22.png" alt="${_('Users')}"/>
    </div>
    <div class="last">
      ${form.submit_image('aur?', _('Add user'), '/Static/Images/action_add.png')}
     </div>
  </div>
  <table class="list smallList">
    <caption>${_('Members')}</caption>
    <tr>
      <th>${_('Login')}</th>
      <th>${_('Name')}</th>
      <th>${_('Permission')}</th>
      <th class="last">${_('Action')}</th>
    </tr>
    <tr tal:repeat="member members">
      <td><a href="${route('user_view', user_id=member.user_id)}">${member.login}</a></td>
      <td><a href="${route('user_view', user_id=member.user_id)}">${member.name}</a></td>
      <td>
        ${form.select('usr_%d' % member.user_id, member.perm, perms.items())}
      </td>
      <td class="last" tal:switch="action == 'rur?%d' % member.user_id">
        <span tal:case="True" tal:omit-tag="">
          ${form.submit('rur!%d.x' % member.user_id, _('Confirm removal'), class_='button')}
          ${form.submit_cancel(_('Cancel'))}
        </span>
        <span tal:case="False" tal:omit-tag="">
          ${form.submit_image('rur?%d' % member.user_id, _('Remove user'),
            '/Static/Images/action_remove_one.png')}
        </span>
      </td>
    </tr>
  </table>
</div>