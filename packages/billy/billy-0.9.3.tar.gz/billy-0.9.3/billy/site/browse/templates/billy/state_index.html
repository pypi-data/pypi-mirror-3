{% extends "billy/base.html" %}
{% load humanize %}
{% load billy_utiltags %}

{% block content %}

<div class="container">
<div class="row">
    <h2>{{ metadata.name }}</h2>
</div>

<div class="row">

<div class="span-one-third" id="metadata">
    <h4 width="100%">Metadata</h4>
    <dl>
    {% for k, v in metadata|sorted_items %}
    {% if k != "terms" and k != "session_details" %}
    <dt>{{k}}</dt><dd>{{v}}</dd>
    {% endif %}
    {% endfor %}
    </dl>

    <h4 width="100%">Terms</h4>
    <table>
        <tr><th>Term</th><th>Start Year</th><th>End Year</th><th>Sessions</th></tr>
        {% for term in metadata.terms %}
        <tr><td>{{term.name}}</td><td>{{term.start_year}}</td><td>{{term.end_year}}</td>
            <td><ul>{{term.sessions|unordered_list}}</ul></td>
        </tr>
        {% endfor %}
    </table>
</div>

<div class="span-one-third" id="bills">
    <h4 width="100%">Bills<a href="random_bill/">(random bill)</a></h4>
  <dl>
      <dt>Upper:</dt><dd>{{report.bills.upper_bill_count}}</dd>
      <dt>Lower:</dt><dd>{{report.bills.lower_bill_count}}</dd>
      <dt>Versions:</dt><dd>{{versions}}</dd>
      <dt>without actions:</dt><dd>{{report.bills.actionless|length}}</dd>
      <dt>without sponsors:</dt><dd>{{report.bills.sponsorless|length}}</dd>
      <dt>without versions:</dt><dd>{{report.bills.versionless|length}}</dd>
      <dt>without sources:</dt><dd>{{report.bills.sourceless|length}}</dd>
      <dt>Updated Today:</dt><dd>{{report.bills.updated_today}}%</dd>
      <dt>Updated This Month:</dt><dd>{{report.bills.updated_this_month}}%</dd>
      <dt>Updated This Year:</dt><dd>{{report.bills.updated_this_year}}%</dd>
  </dl>
  <h4 width="100%">Bill Types</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.bill_types|sorted_items %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>
  <h4 width="100%">Action Types</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.actions_per_type|sorted_items %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>
  <h4 width="100%">Actors</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.actions_per_actor|sorted_items %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>
  <h4 width="100%">Actions by Month</h4>
  <table>
      <tr><th>Type</th><th>#</th></tr>
      {% for name, num in report.bills.actions_per_month|sorted_items %}
      <tr><td>{{name}}</td><td>{{num}}</td></tr>
      {% endfor %}
  </table>

</div>

<div class="span-one-third" id="legislators">
    <h4 width="100%"><a href="legislators/">Legislators</a></h4>
    <dl>
      <dt>Upper:</dt><dd>{{report.legislators.upper_active_count}}</dd>
      <dt>Lower:</dt><dd>{{report.legislators.lower_active_count}}</dd>
      <dt>Inactive:</dt><dd>{{report.legislators.inactive_count}}</dd>
      <dt>with PVS id:</dt><dd>{{report.legislators.votesmart_id}}</dd>
      <dt>with TransparencyData id:</dt><dd>{{report.legislators.transparencydata_id}}</dd>
      <dt>without sources:</dt><dd>{{report.legislators.sourceless|length}}</dd>
      <dt>Updated Today:</dt><dd>{{report.legislators.updated_today}}%</dd>
      <dt>Updated This Month:</dt><dd>{{report.legislators.updated_this_month}}%</dd>
      <dt>Updated This Year:</dt><dd>{{report.legislators.updated_this_year}}%</dd>
    </dl>

    <h4 width="100%"><a href="committees/">Committees</a></h4>
    <dl>
      <dt>Upper:</dt><dd>{{report.committees.upper_count}}</dd>
      <dt>Lower:</dt><dd>{{report.committees.lower_count}}</dd>
      <dt>Joint:</dt><dd>{{report.committees.joint_count}}</dd>
      <dt>Empty:</dt><dd>{{report.committees.empty_count}}</dd>
      <dt>without sources:</dt><dd>{{report.committees.sourceless|length}}</dd>
      <dt>Updated Today:</dt><dd>{{report.committees.updated_today}}%</dd>
      <dt>Updated This Month:</dt><dd>{{report.committees.updated_this_month}}%</dd>
      <dt>Updated This Year:</dt><dd>{{report.committees.updated_this_year}}%</dd>
    </dl>
</div>

</div>
</div>

{% endblock %}
