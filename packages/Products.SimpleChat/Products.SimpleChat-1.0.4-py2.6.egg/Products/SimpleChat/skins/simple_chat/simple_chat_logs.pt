<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" i18n:domain="SimpleChat">
<head>
<title i18n:translate="">Simple chat logs</title>
</head>
<body tal:define="valid_username_message python:context.get_username(request);
		  valid python:valid_username_message[0];
		  username python:valid_username_message[1];
		  message python:valid_username_message[2];
		  xyz context/touch_address_and_username">
<metal:block define-macro="content">
<h2 i18n:translate="">Chat logs</h2>
<p tal:condition="request/message|nothing" style="color: #f00"
   tal:content="request/message"></p>
<form action="./report"	tal:define="archive_ python:request.get('a', None);
			index_ python:request.get('i', None);
			manager python:'Manager' in user.getRoles()">
<metal:block tal:repeat="item_ python:context.CAG_get_numbered(count=100000, context_archive=archive_,
			 context_index=index_)">
<div tal:define="archive python:item_[0]; index python:item_[1]; item python:item_[2];
		 selected python:(archive_ == archive and index_ == index)"
     tal:attributes="style python:(selected and 'color: #f00' or '')"
     ><a name="#" tal:attributes="name python:str(archive) + '-' + str(index)"></a><a
	href="#" tal:attributes="href string:./report?a:int=${archive}&amp;i:int=${index}"
		tal:condition="not:manager" i18n:translate="">Report</a>
	<a href="#" tal:attributes="href string:./ban?a:int=${archive}&amp;i:int=${index}"
		tal:condition="manager" i18n:translate="">Ban</a>
  <span tal:content="python:item[3].strftime('%Y-%m-%d %H:%M:%S')+' '" tal:on-error="nothing"></span>
	<span tal:content="python:item[0]" />: <span tal:content="python:item[2]" /></div>
</metal:block>
</form>
<br />
</metal:block>
</body>
</html>
