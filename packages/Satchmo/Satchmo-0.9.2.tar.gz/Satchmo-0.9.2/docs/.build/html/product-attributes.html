

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Custom Product Attributes &mdash; Satchmo v0.9.2-development documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.2-development',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Satchmo v0.9.2-development documentation" href="index.html" />
    <link rel="next" title="Custom Product Modules" href="custom-product.html" />
    <link rel="prev" title="Custom Payment Modules" href="custom-payment.html" /> 
  </head>
  <body>

<div style="background-image: url(_static/satchmo-sliver.jpg); background-repeat: repeat-x; background-color: white; text-align: left;">
<img src="_static/satchmo-front.jpg">
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="custom-product.html" title="Custom Product Modules"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="custom-payment.html" title="Custom Payment Modules"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.satchmoproject.com">Satchmo home </a> |&nbsp;</li>
        
        <li><a href="index.html">Satchmo v0.9.2-development documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Custom Product Attributes</a><ul>
<li><a class="reference internal" href="#creating-attribute-options">Creating Attribute Options</a></li>
<li><a class="reference internal" href="#using-attributes-on-products">Using Attributes on Products</a></li>
<li><a class="reference internal" href="#customizing-attribute-options">Customizing Attribute Options</a></li>
<li><a class="reference internal" href="#additional-capabilities">Additional Capabilities</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="custom-payment.html"
                        title="previous chapter">Custom Payment Modules</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="custom-product.html"
                        title="next chapter">Custom Product Modules</a></p>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<p>Documentation Version:</p>
<ul>
    <li><a href="/docs/dev">Current development version</a></li>
    <li><a href="/docs/rel/latest">Latest Release version</a></li>
    <li><a href="http://bitbucket.org/chris1610/satchmo/downloads/Satchmo-0-9-1.pdf">PDF Documentation</a></li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="custom-product-attributes">
<h1>Custom Product Attributes<a class="headerlink" href="#custom-product-attributes" title="Permalink to this headline">¶</a></h1>
<p>Satchmo&#8217;s product models allow you to capture and present much of the core information
you need to sell a product. However, there are instances where you might want to
present additional information tailored to your site. If you think of the
example of selling books online, you might want all of your products to display
something like:</p>
<blockquote>
<ul class="simple">
<li>Pages</li>
<li>Publisher</li>
<li>ISBN</li>
<li>Author</li>
</ul>
</blockquote>
<p>You can certainly put this information into the description field but in many cases
you will want these to be separate fields and enforce some validation on the data
that can be entered. Attribute Options can do this for you.</p>
<div class="section" id="creating-attribute-options">
<h2>Creating Attribute Options<a class="headerlink" href="#creating-attribute-options" title="Permalink to this headline">¶</a></h2>
<p class="versionadded">
<span class="versionmodified">New in version 0.9.1.</span></p>
<p>New versions of Satchmo (&gt; 0.9) include the ability to define options,
validations for these options and custom error messages. To use these, you
will first need to define some Attribute Options in the Admin.</p>
<p>See this screenshot for some examples:</p>
<img alt="_images/attribute-option-list.png" src="_images/attribute-option-list.png" />
<p>As you can see, there are multiple attributes defined that we can add to
our products. Looking at the &#8220;Book Pages&#8221; shows you some of the rich options
you have to configure this behavior:</p>
<img alt="_images/book-page-attribute.png" src="_images/book-page-attribute.png" />
<dl class="docutils">
<dt>Description</dt>
<dd>Information displayed to the user on the product page to describe the attribute</dd>
<dt>Attribute Name</dt>
<dd>Slug used for data storage</dd>
<dt>Field Validations</dt>
<dd>List of validations available to perform on the data. Satchmo has some included but
you may create your own too.</dd>
<dt>Sort Order</dt>
<dd>Control the order the options are displayed</dd>
<dt>Error Message</dt>
<dd>If the validation fails, this message will be displayed to the user.</dd>
</dl>
</div>
<div class="section" id="using-attributes-on-products">
<h2>Using Attributes on Products<a class="headerlink" href="#using-attributes-on-products" title="Permalink to this headline">¶</a></h2>
<p>Now that we have an attribute for pages in a book, we can add this to
our Robot Attacks book.</p>
<p>Select the &#8220;Robot Attack!&#8221; book from the product list and scroll down to
the Product Attributes section:</p>
<img alt="_images/add-attribute-product.png" src="_images/add-attribute-product.png" />
<p>If you enter an invalid number, you will get your custom error message. If
you enter a valid number, you can view it on your page now:</p>
<img alt="_images/robot-attack-pages.png" src="_images/robot-attack-pages.png" />
</div>
<div class="section" id="customizing-attribute-options">
<h2>Customizing Attribute Options<a class="headerlink" href="#customizing-attribute-options" title="Permalink to this headline">¶</a></h2>
<p>This feature is very useful but you can go even farther in your customization
by creating your own Field Validations.</p>
<p>If you would like to create a custom validation to make sure the site admin
enters a 3 digit integer, create a simple validation function like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">validation_3digits</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">product</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">   Validates that value is a 3 digit integer number.</span>
<span class="sd">   No change is made to the value</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">check</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">True</span><span class="p">,</span> <span class="n">value</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">False</span><span class="p">,</span> <span class="n">value</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span> <span class="bp">False</span><span class="p">,</span> <span class="n">value</span>
</pre></div>
</div>
<p>Assuming you have placed this function in the utils.py file inside your localsite app.
You can add it to your settings.py (or local_settings.py) file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">SATCHMO_SETTINGS</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">&#39;SHOP_BASE&#39;</span> <span class="p">:</span> <span class="s">&#39;&#39;</span><span class="p">,</span>
    <span class="s">&#39;MULTISHOP&#39;</span> <span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
    <span class="s">&#39;ATTRIBUTE_VALIDATIONS&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s">&#39;localsite.utils.validation_3digits&#39;</span><span class="p">,</span><span class="s">&#39;3 Digits&#39;</span><span class="p">),]</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Now, when you choose to add an Attribute Option, you can use your 3 digit validator
to make sure that the site admin enters the data you need.</p>
</div>
<div class="section" id="additional-capabilities">
<h2>Additional Capabilities<a class="headerlink" href="#additional-capabilities" title="Permalink to this headline">¶</a></h2>
<p>The example above is fairly simple. As you will notice, the current product
is passed to the validation function. You can use this to do more complex
lookups. Additional, the validation function can modify the value that is passed
to it. For instance, you may wish to make sure the value is capitalized or
structured in a consistent date format.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="custom-product.html" title="Custom Product Modules"
             >next</a> |</li>
        <li class="right" >
          <a href="custom-payment.html" title="Custom Payment Modules"
             >previous</a> |</li>
        <li><a href="http://www.satchmoproject.com">Satchmo home </a> |&nbsp;</li>
        
        <li><a href="index.html">Satchmo v0.9.2-development documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010, Chris Moffitt.
      Last updated on Mar 10, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
<script src='http://www.google-analytics.com/ga.js' type='text/javascript'></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1711397-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>