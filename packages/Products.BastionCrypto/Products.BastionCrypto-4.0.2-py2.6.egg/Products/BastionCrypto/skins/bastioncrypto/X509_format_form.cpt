<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="bastion">

  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>

  <body>

    <div metal:fill-slot="main"
         tal:define="errors options/state/getErrors;
                     utool context/@@plone_portal_state/portal_url;">

      <h1 i18n:translate="heading_stats_item">
        <img src="" tal:define="icon python: context.getIcon(1)" tal:attributes="src string:${utool}/${icon}">&nbsp;
        <span i18n:name="itemtype">
          <span i18n:translate=""
                tal:content="context/title_or_id"
                tal:omit-tag=""/>
        </span>
      </h1>

      <p class="formHelp">This utility takes your X509 Certificate and returns it to you, formatted for use 
           in other utilities - most specifically as a user certificate for your Netscape browser.</p>


      <form action="."
            method="post"
            tal:attributes="action template/getId" >

        <fieldset>
 
          <legend i18n:translate="legend_domain_details">X509 Certificate</legend>
                                                                           
          <div class="field"
               tal:define="error errors/file|nothing;
                           City request/file | nothing;"
               tal:attributes="class python:test(error, 'field error', 'field')">

            <label for="file" i18n:translate="label_city">File</label>
                                                                                 
            <span class="fieldRequired" title="Required"
                  i18n:attributes="file"
                  i18n:translate="label_required">(Required)</span>
                                                                                 
            <div tal:content="error">Validation error output</div>
                                                                                 
            <input type="file" name="file" size="25" >

                                                                                 
          </div>
                                                                                 

          <div class="field"
               tal:define="error errors/inform|nothing;
                           Inform request/inform | nothing;"
               tal:attributes="class python:test(error, 'field error', 'field')">

            <label for="inform" i18n:translate="label_inform">Input Format</label>
                                                                                 
            <span class="fieldRequired" title="Required"
                  i18n:attributes="size"
                  i18n:translate="label_required">(Required)</span>
                                                                                 
            <div tal:content="error">Validation error output</div>
            
	    <select name="inform">
               <option tal:repeat="inform python:('PEM','DER')"
                       tal:content="inform"
                       tal:attributes="selected python: test(request.get('inform', '') == inform, 1, 0);"/>
            </select>                                                         
          </div>
                                                                                 
          <div class="field"
               tal:define="error errors/outform|nothing;
                           Outform request/outform | nothing;"
               tal:attributes="class python:test(error, 'field error', 'field')">

            <label for="inform" i18n:translate="label_inform">Output Format</label>
                                                                                 
            <span class="fieldRequired" title="Required"
                  i18n:attributes="size"
                  i18n:translate="label_required">(Required)</span>
                                                                                 
            <div tal:content="error">Validation error output</div>
            
	    <select name="outform">
               <option  tal:attributes="selected python: test(request.get('outform', '') == 'DER', 1, 0);">DER</option>
               <option  tal:attributes="selected python: test(request.get('outform', '') == 'PEM', 1, 0);">PEM</option>
               <option  tal:attributes="selected python: test(request.get('outform', '') == 'NET', 1, 0);" value="NET">Netscape PKS7</option>
            </select>                                                         
          </div>
                                                                                 
        </fieldset>

        <div class="formControls">
            <input class="context"
                   type="submit"
                   name="form.button.Format"
                   value="Format"
                   i18n:attributes="value" />
        </div>

        <input type="hidden" name="form.submitted" value="1" />

      </form>
    </div>

  </body>
</html>

