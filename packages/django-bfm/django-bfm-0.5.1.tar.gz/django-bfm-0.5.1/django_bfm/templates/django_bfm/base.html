{% extends 'admin/change_list.html' %}
{% load i18n %}
{% block title %}{% trans "Basic file manager" %}{% endblock %}

{# Should I remove it? #}
{% block breadcrumbs %}
    <div class="breadcrumbs">
        <a href="#">{% trans "Basic file manager" %}</a>
        {% block crumbs %}{% endblock %}
    </div>
{% endblock %}

{# Scripts'n'Templates #}
{% block extrahead %}
    {{ block.super }}
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.1.7/underscore-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/backbone.js/0.5.3/backbone-min.js"></script>
    <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/json2/20110223/json2.js"></script>
    <script type="text/javascript">
        window.BFMOptions = {{ settings|safe }}
    </script>
    <script type="text/javascript" src="{{ STATIC_URL }}django_bfm/application.js"></script>
        <script type="text/javascript" src="{{ STATIC_URL }}django_bfm/upload.jquery.js"></script>
    <script id="browse_head_tpl" type="text/template">
        <th>{% trans "Actions" %}</th>
        <th class="<%= filename %>" data-name="filename"><a>{% trans "Filename" %}</a></th>
        <th class="<%= size %>" data-name="size"><a>{% trans "Size" %}</a></th>
        <th class="<%= date %>" data-name="date"><a>{% trans "Date" %}</a></th>
        <th class="<%= mime %>" data-name="mime"><a>{% trans "Type" %}</a></th>
    </script>
    <script id="browse_file_tpl" type="text/template">
        <td class="tight icons">
            <a class="delete" title="{% trans "Delete" %}"></a>
            <a class="touch" title="{% trans "Touch" %}"></a>
            <a class="rename" title="{% trans "Rename" %}"></a>
            <a class="resize" title="{% trans "Resize" %}"></a>
        </td>
        <td><a href="<%= url %>" target="_blank"><%= filename %></a></td>
        <td class="tight"><%= psize %></td>
        <td class="tight"><%= pdate %></td>
        <td class="tight"><%= mimetype %></td>
    </script>
    <script id="file_rename_tpl" type="text/template">
        <h2>{% trans "Rename file" %}</h2>
        <input type="text" name="new" value="<%= filename %>">
        <input type="hidden" name="file" value="<%= filename %>">
        <input type="hidden" name="directory" value="<%= rel_dir %>">
        <input type="submit" class="submit" value="{% trans "Rename" %}">
        <input type="submit" class="cancel" value="{% trans "Cancel" %}">
    </script>
    <script id="image_resize_tpl" type="text/template">
        <h2>{% trans "Resize image" %}</h2>
        <input type="hidden" name="file" value="<%= filename %>">
        <input type="hidden" name="directory" value="<%= rel_dir %>">
        {% trans "New width" %}
        <input type="text" style="width:50px" name="new_w" value="">
        <br />
        {% trans "New height" %}
        <input type="text" style="width:50px" name="new_h" value="">
        <br />
        {% trans "Keep ratio" %}
        <input type="checkbox" name="keepratio" value="yes" checked>
        <br />
        {% trans "Resize filter" %}
        <select name="filter">
            <option value="ANTIALIAS">{% trans "Antialiasing" %}</option>
            <option value="BICUBIC">{% trans "Bicubic" %}</option>
            <option value="BILINEAR">{% trans "Bilinear" %}</option>
            <option value="NEAREST">{% trans "Nearest" %}</option>
        </select>
        <br />
        <input type="submit" class="submit" value="{% trans "Resize" %}">
        <input type="submit" class="cancel" value="{% trans "Cancel" %}">
    </script>
    <script id="uploader_start_tpl" type="text/template">
        <form>
            <div class="button submit">{% trans "Upload files" %}</div>
            <input type="file" class="selector" multiple />
        </form>
    </script>
    <script id="uploader_uploading_tpl" type="text/template">
        <div class="uploadinghead">
            <div class="status">{% trans "Uploading" %}&nbsp;(<span class="speed">0 B/s</span>)</div>
            <div class="controls"><a class="icon minimize"></a></div>
        </div>
        <div class="uploading">
            <table></table>
        </div>
    </script>
    <script id="file_upload_tpl" type="text/template">
        <tr>
            <td class="fname"><%= filename %></td>
            <td class="tight"><a class="icon stop"></a></td>
        </tr>
        <tr class="uploadstatus"><td colspan="2"><span class="progress"></span></td></tr>
    </script>
    <script id="pgn_current_page_tpl" type="text/template">
        <span class="this-page"><%= page %></span>&nbsp;
    </script>
    <script id="pgn_page_tpl" type="text/template">
        <a href="#"><%= page %></a>&nbsp;
    </script>
    <script id="pgn_first_page_tpl" type="text/template">
        <a href="#" class="firstpage">{% trans "First page" %}</a>&nbsp;
    </script>
    <script id="pgn_last_page_tpl" type="text/template">
        <a href="#" class="lastpage">{% trans "Last page" %}</a>&nbsp;
    </script>
    <script id="upload_success_tpl" type="text/template">
        {% trans "Upload was completed successfully." %}
    </script>
    <script id="upload_fail_tpl" type="text/template">
        {% trans "One or more errors occured!" %}
    </script>
    <script id="upload_cancel_tpl" type="text/template">
        {% trans "Uploading in progress!" %}
    </script>
{% endblock %}

{% block extrastyle %}
    {{ block.super }}
    <link rel="stylesheet" type="text/css" href="{{ STATIC_URL }}django_bfm/application.css">
{% endblock %}

{% block pretitle %}{% endblock %}

{# It's main part #}
{% block content %}
    {% csrf_token %}
    <div id="content-main">
        <div class="module filtered" id="changelist">
            <div id="changelist-filter">
                <h2><a href="#">{% trans 'Root directory' %}</a></h2>
                <ul class="directory-list">
                </ul>
            </div>
            <form id="changelist-form">
                <div class="results">
                    <table id="result_list">
                    </table>
                </div>
                <p class="paginator"></p>
            </form>
        </div>
    </div>
    <div class="block"></div>
    <div class="uploader"></div>
{% endblock %}