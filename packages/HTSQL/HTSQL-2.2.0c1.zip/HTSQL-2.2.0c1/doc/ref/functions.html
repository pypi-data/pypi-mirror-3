

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Functions and Operators &mdash; HTSQL v2.2.0c1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/htsqldoc.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.0c1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/htsqldoc.js"></script>
    <link rel="top" title="HTSQL v2.2.0c1 documentation" href="../index.html" />
    <link rel="up" title="HTSQL Reference" href="index.html" />
    <link rel="next" title="HTSQL Administration" href="../admin/index.html" />
    <link rel="prev" title="Data Types" href="types.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../admin/index.html" title="HTSQL Administration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="types.html" title="Data Types"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">HTSQL v2.2.0c1 documentation</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">HTSQL Reference</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="functions-and-operators">
<h1>Functions and Operators<a class="headerlink" href="#functions-and-operators" title="Permalink to this headline">¶</a></h1>
<p>This document describes built-in functions and operators.</p>
<div class="section" id="logical-functions-and-operators">
<h2>Logical Functions and Operators<a class="headerlink" href="#logical-functions-and-operators" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="28%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr><td rowspan="4"><tt class="xref py py-obj docutils literal"><span class="pre">boolean(x)</span></tt></td>
<td rowspan="4">cast <em>x</em> to Boolean</td>
<td><tt class="docutils literal"><span class="pre">boolean('true')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">boolean('false')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">boolean(string('HTSQL'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">boolean(string(''))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">true()</span></tt></td>
<td>logical <em>TRUE</em> value</td>
<td><tt class="docutils literal"><span class="pre">true()</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">false()</span></tt></td>
<td>logical <em>FALSE</em> value</td>
<td><tt class="docutils literal"><span class="pre">false()</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">p</span> <span class="pre">&amp;</span> <span class="pre">q</span></tt></td>
<td rowspan="3">logical <em>AND</em> operator</td>
<td><tt class="docutils literal"><span class="pre">true()&amp;true()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">true()&amp;false()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">false()&amp;false()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">p</span> <span class="pre">|</span> <span class="pre">q</span></tt></td>
<td rowspan="3">logical <em>OR</em> operator</td>
<td><tt class="docutils literal"><span class="pre">true()|true()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">true()|false()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">false()|false()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">!p</span></tt></td>
<td rowspan="2">logical <em>NOT</em> operator</td>
<td><tt class="docutils literal"><span class="pre">!true()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">!false()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">null(x)</span></tt></td>
<td><em>NULL</em> value</td>
<td><tt class="docutils literal"><span class="pre">null()</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">is_null(x)</span></tt></td>
<td><em>x</em> is null</td>
<td><tt class="docutils literal"><span class="pre">is_null(null())</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">if_null(x,y)</span></tt></td>
<td rowspan="2"><em>x</em> if <em>x</em> is not null;
<em>y</em> otherwise</td>
<td><tt class="docutils literal"><span class="pre">if_null(1,0)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">if_null(null(),0)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">null_if(x,y)</span></tt></td>
<td rowspan="2"><em>x</em> if <em>x</em> is not equal
to <em>y</em>; null otherwise</td>
<td><tt class="docutils literal"><span class="pre">null_if(1,0)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">null_if(0,0)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">null</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></tt></td>
<td><em>x</em> is equal to <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'='QUEL'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">y</span></tt></td>
<td><em>x</em> is not equal to <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'!='QUEL'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span></tt></td>
<td rowspan="2"><em>x</em> is equal to <em>y</em>;
treats nulls as regular
values</td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'=='QUEL'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">2==null()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!==</span> <span class="pre">y</span></tt></td>
<td rowspan="2"><em>x</em> is not equal to <em>y</em>;
treats nulls as regular
values</td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'!=='QUEL'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">2!==null()</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">{a,b,c,...}</span></tt></td>
<td><em>x</em> is among <em>a</em>, <em>b</em>,
<em>c</em>, ...</td>
<td><tt class="docutils literal"><span class="pre">5={2,3,5,7}'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">{a,b,c,...}</span></tt></td>
<td><em>x</em> is not among <em>a</em>,
<em>b</em>, <em>c</em>, ...</td>
<td><tt class="docutils literal"><span class="pre">5!={2,3,5,7}'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></tt></td>
<td rowspan="2"><em>x</em> is less than <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">1&lt;10</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">'omega'&lt;'alpha'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&lt;=</span> <span class="pre">y</span></tt></td>
<td rowspan="2"><em>x</em> is less than or equal
to <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">1&lt;=10</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">'omega'&lt;='alpha'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">y</span></tt></td>
<td rowspan="2"><em>x</em> is greater than <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">1&gt;10</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">'omega'&gt;'alpha'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&gt;=</span> <span class="pre">y</span></tt></td>
<td rowspan="2"><em>x</em> is greater than or
equal to <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">1&gt;=10</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">'omega'&gt;='alpha'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">if(p1,c1,...,pn,cn)</span></tt></td>
<td rowspan="2">first <em>ck</em> such that <em>pk</em>
is <em>TRUE</em>; <em>o</em> or null
otherwise</td>
<td><tt class="docutils literal"><span class="pre">if(true(),'up','down')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'up'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">if(p1,c1,...,pn,cn,o)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">if(false(),'up','down')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'down'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">switch(x,y1,c1,...,yn,cn)</span></tt></td>
<td rowspan="2">first <em>ck</em> such that <em>x</em>
is equal to <em>yk</em>; <em>o</em> or
null otherwise</td>
<td><tt class="docutils literal"><span class="pre">switch(1,1,'up',0,'down')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'up'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">switch(x,y1,c1,...,yn,cn,o)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">switch(0,1,'up',0,'down')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'down'</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="boolean-cast">
<h3>Boolean Cast<a class="headerlink" href="#boolean-cast" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">boolean(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to Boolean.</dd>
</dl>
<p>The result of the conversion depends on the type of the argument:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">untyped</span></tt></dt>
<dd>The literal <tt class="docutils literal"><span class="pre">'false'</span></tt> is converted to <em>FALSE</em>, the literal
<tt class="docutils literal"><span class="pre">'true'</span></tt> is converted to <em>TRUE</em>, any other literals generate an
error.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">boolean</span></tt></dt>
<dd>The value is unchanged.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">string</span></tt></dt>
<dd><em>NULL</em> and an empty string are converted to <em>FALSE</em>, other values
are converted to <em>TRUE</em>.</dd>
<dt>other data types</dt>
<dd><tt class="xref py py-obj docutils literal"><span class="pre">null</span></tt> values are converted to <em>FALSE</em>, other values are converted
to <em>TRUE</em>.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{boolean('false'),%20boolean('true')}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">boolean</span><span class="p">(</span><span class="s">&#39;false&#39;</span><span class="p">),</span> <span class="nf">boolean</span><span class="p">(</span><span class="s">&#39;true&#39;</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="54%" />
<col width="46%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;false&#8217;</th>
<th class="head">&#8216;true&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>false</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{boolean(null()),%20boolean(false()),%20boolean(true())}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">boolean</span><span class="p">(</span><span class="nf">null</span><span class="p">()),</span> <span class="nf">boolean</span><span class="p">(</span><span class="nf">false</span><span class="p">()),</span> <span class="nf">boolean</span><span class="p">(</span><span class="nf">true</span><span class="p">())}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="37%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">null()</th>
<th class="head">false()</th>
<th class="head">true()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>—</td>
<td><em>false</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{boolean(string(null())),%20boolean(string('')),%20boolean(string('HTSQL'))}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">boolean</span><span class="p">(</span><span class="nf">string</span><span class="p">(</span><span class="nf">null</span><span class="p">())),</span> <span class="nf">boolean</span><span class="p">(</span><span class="nf">string</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)),</span> <span class="nf">boolean</span><span class="p">(</span><span class="nf">string</span><span class="p">(</span><span class="s">&#39;HTSQL&#39;</span><span class="p">))}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="28%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">null()</th>
<th class="head">&#8216;&#8217;</th>
<th class="head">&#8216;HTSQL&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>false</em></td>
<td><em>false</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{boolean(integer(null())),%20boolean(0.0),%20boolean(date('2010-04-15'))}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">boolean</span><span class="p">(</span><span class="nf">integer</span><span class="p">(</span><span class="nf">null</span><span class="p">())),</span> <span class="nf">boolean</span><span class="p">(</span><span class="m">0.0</span><span class="p">),</span> <span class="nf">boolean</span><span class="p">(</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;2010-04-15&#39;</span><span class="p">))}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="27%" />
<col width="18%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">null()</th>
<th class="head">0.0</th>
<th class="head">&#8216;2010-04-15&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>false</em></td>
<td><em>true</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="logical-values">
<h3>Logical Values<a class="headerlink" href="#logical-values" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">true()</span></tt></dt>
<dd>Logical <em>TRUE</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">false()</span></tt></dt>
<dd>Logical <em>FALSE</em> value.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{true(),%20false()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">true</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="46%" />
<col width="54%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">true()</th>
<th class="head">false()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>false</em></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="logical-operators">
<h3>Logical Operators<a class="headerlink" href="#logical-operators" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">p</span> <span class="pre">|</span> <span class="pre">q</span></tt></dt>
<dd>Logical <em>OR</em> operator.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">p</span> <span class="pre">&amp;</span> <span class="pre">q</span></tt></dt>
<dd>Logical <em>AND</em> operator.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">!</span> <span class="pre">p</span></tt></dt>
<dd>Logical <em>NOT</em> operator.</dd>
</dl>
<p>Arguments of a logical operators that are not of a Boolean type
automatically converted to Boolean (see <tt class="xref py py-obj docutils literal"><span class="pre">boolean()</span></tt> function).</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{true()|true(),%20true()|false(),%20false()|true(),%20false()|false()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">true</span><span class="p">()</span><span class="o">|</span><span class="nf">true</span><span class="p">(),</span> <span class="nf">true</span><span class="p">()</span><span class="o">|</span><span class="nf">false</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()</span><span class="o">|</span><span class="nf">true</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()</span><span class="o">|</span><span class="nf">false</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="25%" />
<col width="25%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">true()|true()</th>
<th class="head">true()|false()</th>
<th class="head">false()|true()</th>
<th class="head">false()|false()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>true</em></td>
<td><em>true</em></td>
<td><em>false</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{true()&amp;true(),%20true()&amp;false(),%20false()&amp;true(),%20false()&amp;false()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">true</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">true</span><span class="p">(),</span> <span class="nf">true</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">false</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">true</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">false</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="25%" />
<col width="25%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">true()&amp;true()</th>
<th class="head">true()&amp;false()</th>
<th class="head">false()&amp;true()</th>
<th class="head">false()&amp;false()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>false</em></td>
<td><em>false</em></td>
<td><em>false</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{!true(),%20!false()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="o">!</span><span class="nf">true</span><span class="p">(),</span> <span class="o">!</span><span class="nf">false</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="47%" />
<col width="53%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">!true()</th>
<th class="head">!false()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>false</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{true()&amp;null(),%20false()&amp;null(),%20null()&amp;null(),%0A%20%20true()|null(),%20false()|null(),%20null()|null(),%0A%20%20!null()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">true</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">null</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">null</span><span class="p">(),</span> <span class="nf">null</span><span class="p">()</span><span class="o">&amp;</span><span class="nf">null</span><span class="p">(),</span>
  <span class="nf">true</span><span class="p">()</span><span class="o">|</span><span class="nf">null</span><span class="p">(),</span> <span class="nf">false</span><span class="p">()</span><span class="o">|</span><span class="nf">null</span><span class="p">(),</span> <span class="nf">null</span><span class="p">()</span><span class="o">|</span><span class="nf">null</span><span class="p">(),</span>
  <span class="o">!</span><span class="nf">null</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="16%" />
<col width="15%" />
<col width="15%" />
<col width="16%" />
<col width="15%" />
<col width="8%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">true()&amp;null()</th>
<th class="head">false()&amp;null()</th>
<th class="head">null()&amp;null()</th>
<th class="head">true()|null()</th>
<th class="head">false()|null()</th>
<th class="head">null()|null()</th>
<th class="head">!null()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>—</td>
<td><em>false</em></td>
<td>—</td>
<td><em>true</em></td>
<td>—</td>
<td>—</td>
<td>—</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school?exists(program)&amp;exists(department)|!campus" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">?</span><span class="nf">exists</span><span class="p">(</span><span class="nb">program</span><span class="p">)</span><span class="o">&amp;</span><span class="nf">exists</span><span class="p">(</span><span class="nb">department</span><span class="p">)</span><span class="o">|!</span><span class="nb">campus</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="71%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>School of Art and Design</td>
<td>old</td>
</tr>
<tr><td>bus</td>
<td>School of Business</td>
<td>south</td>
</tr>
<tr><td>edu</td>
<td>College of Education</td>
<td>old</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="null-checking">
<h3>NULL Checking<a class="headerlink" href="#null-checking" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">null()</span></tt></dt>
<dd>Untyped <em>NULL</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_null(x)</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is <em>NULL</em>, <em>FALSE</em> otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">if_null(x,y)</span></tt></dt>
<dd><tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is not <em>NULL</em>, <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt> otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">null_if(x,y)</span></tt></dt>
<dd><tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is not equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>NULL</em> otherwise.</dd>
</dl>
<p>The arguments of <tt class="xref py py-obj docutils literal"><span class="pre">if_null()</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">null_if()</span></tt> should be of the same type;
if not, the arguments are coerced to the most general type.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{null()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">null</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">null()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>—</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{is_null(null()),%20is_null(0)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">is_null</span><span class="p">(</span><span class="nf">null</span><span class="p">()),</span> <span class="nf">is_null</span><span class="p">(</span><span class="m">0</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="60%" />
<col width="40%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">is_null(null())</th>
<th class="head">is_null(0)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>false</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{if_null('SQL','HTSQL'),%20if_null(null(),'HTSQL')}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">if_null</span><span class="p">(</span><span class="s">&#39;SQL&#39;</span><span class="p">,</span><span class="s">&#39;HTSQL&#39;</span><span class="p">),</span> <span class="nf">if_null</span><span class="p">(</span><span class="nf">null</span><span class="p">(),</span><span class="s">&#39;HTSQL&#39;</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="49%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">if_null(&#8216;SQL&#8217;,&#8217;HTSQL&#8217;)</th>
<th class="head">if_null(null(),&#8217;HTSQL&#8217;)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>SQL</td>
<td>HTSQL</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{null_if('HTSQL','SQL'),%20null_if('SQL','SQL')}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">null_if</span><span class="p">(</span><span class="s">&#39;HTSQL&#39;</span><span class="p">,</span><span class="s">&#39;SQL&#39;</span><span class="p">),</span> <span class="nf">null_if</span><span class="p">(</span><span class="s">&#39;SQL&#39;</span><span class="p">,</span><span class="s">&#39;SQL&#39;</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="52%" />
<col width="48%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">null_if(&#8216;HTSQL&#8217;,&#8217;SQL&#8217;)</th>
<th class="head">null_if(&#8216;SQL&#8217;,&#8217;SQL&#8217;)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>HTSQL</td>
<td>—</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course{title,%20credits}?is_null(credits)" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="p">{</span><span class="nb">title</span><span class="p">,</span> <span class="nb">credits</span><span class="p">}</span><span class="o">?</span><span class="nf">is_null</span><span class="p">(</span><span class="nb">credits</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="81%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">title</th>
<th class="head">credits</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Classroom Visit</td>
<td>—</td>
</tr>
<tr><td>Spring Basket Weaving Workshop</td>
<td>—</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course{title,%20credits}?(credits%20:if_null%200)=0" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="p">{</span><span class="nb">title</span><span class="p">,</span> <span class="nb">credits</span><span class="p">}</span><span class="o">?</span><span class="p">(</span><span class="nb">credits</span> <span class="p">:</span><span class="nf">if_null</span> <span class="m">0</span><span class="p">)</span><span class="o">=</span><span class="m">0</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="81%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">title</th>
<th class="head">credits</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Classroom Visit</td>
<td>—</td>
</tr>
<tr><td>Spring Basket Weaving Workshop</td>
<td>—</td>
</tr>
<tr><td>Peer Portfolio Review</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course{title,%20credits}?!(credits%20:null_if%200)" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="p">{</span><span class="nb">title</span><span class="p">,</span> <span class="nb">credits</span><span class="p">}</span><span class="o">?!</span><span class="p">(</span><span class="nb">credits</span> <span class="p">:</span><span class="nf">null_if</span> <span class="m">0</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="81%" />
<col width="19%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">title</th>
<th class="head">credits</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Classroom Visit</td>
<td>—</td>
</tr>
<tr><td>Spring Basket Weaving Workshop</td>
<td>—</td>
</tr>
<tr><td>Peer Portfolio Review</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="equality-operators">
<h3>Equality Operators<a class="headerlink" href="#equality-operators" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.  Returns <em>NULL</em> if
any of the operands is <em>NULL</em>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is not equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.  Returns
<em>NULL</em> if any of the operands is <em>NULL</em>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">==</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.  Treats <em>NULL</em> as
a regular value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!==</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is not equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.  Treats <em>NULL</em>
as a regular value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">{a,b,c,...}</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is equal to <em>some</em> value among <tt class="xref py py-obj docutils literal"><span class="pre">a,b,c,...</span></tt>, <em>FALSE</em>
otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">{a,b,c,...}</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is not equal to <em>all</em> values among <tt class="xref py py-obj docutils literal"><span class="pre">a,b,c,...</span></tt>,
<em>FALSE</em> otherwise.</dd>
</dl>
<p>The form <tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">{a,b,c,...}</span></tt> is a short-cut syntax for <tt class="xref py py-obj docutils literal"><span class="pre">x=a|x=b|x=c|...</span></tt>.
Similarly, the form <tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">!=</span> <span class="pre">{a,b,c,...}</span></tt> is a short-cut syntax for
<tt class="xref py py-obj docutils literal"><span class="pre">x!=a|x!=b|x!=c|...</span></tt>.</p>
<p>The operands of equality operators are expected to be of the same time.
If the types of the operands are different, the operands are coerced to
the most general type; it is an error if the operand types are not
compatible to each other.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{1=1.0,%20'HTSQL'!='SQUARE'}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="m">1</span><span class="o">=</span><span class="m">1.0</span><span class="p">,</span> <span class="s">&#39;HTSQL&#39;</span><span class="o">!=</span><span class="s">&#39;SQUARE&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="23%" />
<col width="77%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">1=1.0</th>
<th class="head">&#8216;HTSQL&#8217;!=&#8217;SQUARE&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{0!=null(),%20null()=null(),%200!==null(),%20null()==null()}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="m">0</span><span class="o">!=</span><span class="nf">null</span><span class="p">(),</span> <span class="nf">null</span><span class="p">()</span><span class="o">=</span><span class="nf">null</span><span class="p">(),</span> <span class="m">0</span><span class="o">!==</span><span class="nf">null</span><span class="p">(),</span> <span class="nf">null</span><span class="p">()</span><span class="o">==</span><span class="nf">null</span><span class="p">()}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="28%" />
<col width="22%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">0!=null()</th>
<th class="head">null()=null()</th>
<th class="head">0!==null()</th>
<th class="head">null()==null()</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>—</td>
<td>—</td>
<td><em>true</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/'HTSQL'!={'ISBL','SQUARE','QUEL'}" target="_new" class="htsql-link"><span class="o">/</span><span class="s">&#39;HTSQL&#39;</span><span class="o">!=</span><span class="p">{</span><span class="s">&#39;ISBL&#39;</span><span class="p">,</span><span class="s">&#39;SQUARE&#39;</span><span class="p">,</span><span class="s">&#39;QUEL&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;!={&#8216;ISBL&#8217;,&#8217;SQUARE&#8217;,&#8217;QUEL&#8217;}</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school?campus='old'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">?</span><span class="nb">campus</span><span class="o">=</span><span class="s">&#39;old&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="74%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>School of Art and Design</td>
<td>old</td>
</tr>
<tr><td>edu</td>
<td>College of Education</td>
<td>old</td>
</tr>
<tr><td>la</td>
<td>School of Arts and Humanities</td>
<td>old</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school?campus!={'north','south'}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">?</span><span class="nb">campus</span><span class="o">!=</span><span class="p">{</span><span class="s">&#39;north&#39;</span><span class="p">,</span><span class="s">&#39;south&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="74%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>School of Art and Design</td>
<td>old</td>
</tr>
<tr><td>edu</td>
<td>College of Education</td>
<td>old</td>
</tr>
<tr><td>la</td>
<td>School of Arts and Humanities</td>
<td>old</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code,%20campus=='old',%20campus=='north',%20campus=='south'}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="nb">campus</span><span class="o">==</span><span class="s">&#39;old&#39;</span><span class="p">,</span> <span class="nb">campus</span><span class="o">==</span><span class="s">&#39;north&#39;</span><span class="p">,</span> <span class="nb">campus</span><span class="o">==</span><span class="s">&#39;south&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="28%" />
<col width="32%" />
<col width="32%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">campus==&#8217;old&#8217;</th>
<th class="head">campus==&#8217;north&#8217;</th>
<th class="head">campus==&#8217;south&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td><em>true</em></td>
<td><em>false</em></td>
<td><em>false</em></td>
</tr>
<tr><td>bus</td>
<td><em>false</em></td>
<td><em>false</em></td>
<td><em>true</em></td>
</tr>
<tr><td>edu</td>
<td><em>true</em></td>
<td><em>false</em></td>
<td><em>false</em></td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="comparison-operators">
<h3>Comparison Operators<a class="headerlink" href="#comparison-operators" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&lt;</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is less than <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&lt;=</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is less than or equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&gt;</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is greater than <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">&gt;=</span> <span class="pre">y</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is greater than or equal to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>, <em>FALSE</em> otherwise.</dd>
</dl>
<p>The result is <em>NULL</em> if any of the operands is <em>NULL</em>.</p>
<p>An operand of a comparison operator must be of a string, numeric,
enumeration, or date/time type.  Both operands are expected to be of
the same type; if not, the operands are coerced to the most general
type.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{23&lt;=17.5,%20'HTSQL'&lt;'SQUARE',%20date('2010-04-15')&gt;=date('1991-08-20')}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="m">23</span><span class="o">&lt;=</span><span class="m">17.5</span><span class="p">,</span> <span class="s">&#39;HTSQL&#39;</span><span class="o">&lt;</span><span class="s">&#39;SQUARE&#39;</span><span class="p">,</span> <span class="nf">date</span><span class="p">(</span><span class="s">&#39;2010-04-15&#39;</span><span class="p">)</span><span class="o">&gt;=</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;1991-08-20&#39;</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="26%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">23&lt;=17.5</th>
<th class="head">&#8216;HTSQL&#8217;&lt;&#8217;SQUARE&#8217;</th>
<th class="head">date(&#8216;2010-04-15&#8217;)&gt;=date(&#8216;1991-08-20&#8217;)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>false</em></td>
<td><em>true</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school?count(department)&gt;=4" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">?</span><span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">)</span><span class="o">&gt;=</span><span class="m">4</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="74%" />
<col width="15%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>eng</td>
<td>School of Engineering</td>
<td>north</td>
</tr>
<tr><td>la</td>
<td>School of Arts and Humanities</td>
<td>old</td>
</tr>
<tr><td>mus</td>
<td>School of Music &amp; Dance</td>
<td>south</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="branching-functions">
<h3>Branching Functions<a class="headerlink" href="#branching-functions" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">if(p1,c1,p2,c2,...,pn,cn[,o])</span></tt></dt>
<dd>This function takes <em>N</em> logical expressions <tt class="xref py py-obj docutils literal"><span class="pre">p1,p2,...,pN</span></tt>
interleaved with <em>N</em> values <tt class="xref py py-obj docutils literal"><span class="pre">c1,c2,...,cN</span></tt>, followed by an optional
value <tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt>.  The function returns the value <tt class="xref py py-obj docutils literal"><span class="pre">ck</span></tt> corresponding to the
first predicate <tt class="xref py py-obj docutils literal"><span class="pre">pk</span></tt> evaluated to <em>TRUE</em>.  If none of the predicates
are evaluated to <em>TRUE</em>, the value of <tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt> is returned, or <em>NULL</em> if
<tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt> is not specified.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">switch(x,y1,c1,y2,c2,...,yn,cn[,o])</span></tt></dt>
<dd>This function takes a control expression <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> followed by <em>N</em> variant
values <tt class="xref py py-obj docutils literal"><span class="pre">y1,y2,...,yN</span></tt> interleaved with <em>N</em> resulting values
<tt class="xref py py-obj docutils literal"><span class="pre">c1,c2,...,cN</span></tt>, and concluded with an optional default value <tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt>.
The function returns the value <tt class="xref py py-obj docutils literal"><span class="pre">ck</span></tt> corresponding to the first
variant <tt class="xref py py-obj docutils literal"><span class="pre">yk</span></tt> equal to <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>.  If none of the variants are equal to the
control value, <tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt> is returned, or <em>NULL</em> if <tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt> is not specified.</dd>
</dl>
<p>These functions expect all the resulting values <tt class="xref py py-obj docutils literal"><span class="pre">c1,c2,...,cN</span></tt> as well
as the default value <tt class="xref py py-obj docutils literal"><span class="pre">o</span></tt> to be of the same type.  If the value types
are different, all values are coerced to the most general type.  Same
is true for the control expression <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> and variant values <tt class="xref py py-obj docutils literal"><span class="pre">y1,y2,...,yN</span></tt>
of the function <tt class="xref py py-obj docutils literal"><span class="pre">switch()</span></tt>.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course{title,%20if(credits&gt;=5,%20'hard',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20credits&gt;=3,%20'medium',%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'easy')%20:as%20level}%0A%20%20%20%20%20%20%20?department.code='astro'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="p">{</span><span class="nb">title</span><span class="p">,</span> <span class="nf">if</span><span class="p">(</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">,</span> <span class="s">&#39;hard&#39;</span><span class="p">,</span>
                  <span class="nb">credits</span><span class="o">&gt;=</span><span class="m">3</span><span class="p">,</span> <span class="s">&#39;medium&#39;</span><span class="p">,</span>
                              <span class="s">&#39;easy&#39;</span><span class="p">)</span> <span class="p">:</span><span class="nf">as</span> <span class="nb">level</span><span class="p">}</span>
       <span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;astro&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="79%" />
<col width="21%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">title</th>
<th class="head">level</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>General Astronomy I</td>
<td>hard</td>
</tr>
<tr><td>General Astronomy I Lab</td>
<td>easy</td>
</tr>
<tr><td>Stars and Planets</td>
<td>medium</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/student{name,%20switch(gender,%20'm',%201,%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20'f',%20-1)%20:as%20sex_code}%0A%20%20%20%20%20%20%20%20?program.code='gedu'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">student</span><span class="p">{</span><span class="nb">name</span><span class="p">,</span> <span class="nf">switch</span><span class="p">(</span><span class="nb">gender</span><span class="p">,</span> <span class="s">&#39;m&#39;</span><span class="p">,</span> <span class="m">1</span><span class="p">,</span>
                              <span class="s">&#39;f&#39;</span><span class="p">,</span> <span class="o">-</span><span class="m">1</span><span class="p">)</span> <span class="p">:</span><span class="nf">as</span> <span class="nb">sex_code</span><span class="p">}</span>
        <span class="o">?</span><span class="nb">program</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;gedu&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="67%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">name</th>
<th class="head">sex_code</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Sheri Sanchez</td>
<td>-1</td>
</tr>
<tr><td>Anna Carroll</td>
<td>-1</td>
</tr>
<tr><td>Alphonse Gilmore</td>
<td>1</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="numeric-functions">
<h2>Numeric Functions<a class="headerlink" href="#numeric-functions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="28%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">integer(x)</span></tt></td>
<td rowspan="3">cast <em>x</em> to integer</td>
<td><tt class="docutils literal"><span class="pre">integer('60')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">60</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">integer(17.25)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">integer(string('60'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">60</span></tt></td>
</tr>
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">decimal(x)</span></tt></td>
<td rowspan="3">cast <em>x</em> to decimal</td>
<td><tt class="docutils literal"><span class="pre">decimal('17.25')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17.25</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">decimal(223607e-5)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">2.23607</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">decimal(string('17.25'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17.25</span></tt></td>
</tr>
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">float(x)</span></tt></td>
<td rowspan="3">cast <em>x</em> to float</td>
<td><tt class="docutils literal"><span class="pre">float('223607e-5')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">223607e-5</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">float(60)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">6e1</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">float(string('223607e-5'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">223607e-5</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">+</span> <span class="pre">x</span></tt></td>
<td><em>x</em></td>
<td><tt class="docutils literal"><span class="pre">+60</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">-</span> <span class="pre">x</span></tt></td>
<td>negate <em>x</em></td>
<td><tt class="docutils literal"><span class="pre">-7</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></tt></td>
<td>add <em>x</em> to <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">13+7</span></tt></td>
<td><tt class="docutils literal"><span class="pre">20</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">y</span></tt></td>
<td>subtract <em>y</em> from <em>x</em></td>
<td><tt class="docutils literal"><span class="pre">13-7</span></tt></td>
<td><tt class="docutils literal"><span class="pre">6</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></tt></td>
<td>multiply <em>x</em> by <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">13*7</span></tt></td>
<td><tt class="docutils literal"><span class="pre">91</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></tt></td>
<td>divide <em>x</em> by <em>y</em></td>
<td><tt class="docutils literal"><span class="pre">13/7</span></tt></td>
<td><tt class="docutils literal"><span class="pre">1.85714285714286</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">round(x)</span></tt></td>
<td>round <em>x</em> to the nearest
integer</td>
<td><tt class="docutils literal"><span class="pre">round(17.25)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">round(x,n)</span></tt></td>
<td>round <em>x</em> to <em>n</em> decimal
places</td>
<td><tt class="docutils literal"><span class="pre">round(17.25,1)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17.3</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">trunc(x)</span></tt></td>
<td>round <em>x</em> to an integer,
towards zero</td>
<td><tt class="docutils literal"><span class="pre">trunc(17.25)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">trunc(x,n)</span></tt></td>
<td>round <em>x</em> to <em>n</em> decimal
places, towards zero</td>
<td><tt class="docutils literal"><span class="pre">trunc(17.25,1)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">17.2</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="numeric-cast">
<h3>Numeric Cast<a class="headerlink" href="#numeric-cast" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">integer(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to integer.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">decimal(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to decimal.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">float(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to float.</dd>
</dl>
<p>The argument of a conversion function can be of one of the following
types:</p>
<dl class="docutils">
<dt><em>untyped</em></dt>
<dd>An untyped literal must be a valid number.  The <tt class="xref py py-obj docutils literal"><span class="pre">integer()</span></tt> function
accepts only integer literals, <tt class="xref py py-obj docutils literal"><span class="pre">decimal()</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">float()</span></tt> accepts
untyped literals written in integer, decimal or scientific notation.</dd>
<dt><em>numeric</em></dt>
<dd>Numeric cast functions convert numbers between different storage
forms.  Behavior on range overflow and rounding rules are
backend-dependent.</dd>
<dt><em>string</em></dt>
<dd>A string value must contain a valid number.  The set of allowed
input values depends on the backend.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{integer(2.125),%20decimal('271828e-5'),%20float(string(60))}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">integer</span><span class="p">(</span><span class="m">2.125</span><span class="p">),</span> <span class="nf">decimal</span><span class="p">(</span><span class="s">&#39;271828e-5&#39;</span><span class="p">),</span> <span class="nf">float</span><span class="p">(</span><span class="nf">string</span><span class="p">(</span><span class="m">60</span><span class="p">))}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="55%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">2.125</th>
<th class="head">&#8216;271828e-5&#8217;</th>
<th class="head">60</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2</td>
<td>2.71828</td>
<td>60.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="arithmetic-expressions">
<h3>Arithmetic Expressions<a class="headerlink" href="#arithmetic-expressions" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">+</span> <span class="pre">x</span></tt></dt>
<dd>Return <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">-</span> <span class="pre">x</span></tt></dt>
<dd>Negate <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">y</span></tt></dt>
<dd>Add <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">-</span> <span class="pre">y</span></tt></dt>
<dd>Subtract <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt> from <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">*</span> <span class="pre">y</span></tt></dt>
<dd>Multiply <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> by <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">/</span> <span class="pre">y</span></tt></dt>
<dd>Divide <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> by <tt class="xref py py-obj docutils literal"><span class="pre">y</span></tt>.</dd>
</dl>
<p>Arithmetic operators expect operands of a numeric type.  If the operands
are of different types, they are coerced to the most general type, in
the order: <em>integer</em>, <em>decimal</em>, <em>float</em>.  For instance, adding an
integer value to a decimal value converts the integer operand to
decimal; multiplying a decimal value to a float value converts the
decimal operand to float.</p>
<p>In general, the type of the result coincides with the type of the
operands.  The only exception is the division operator: when applied to
integer operands, division produces a decimal value.</p>
<p>The behavior of arithmetic expressions on range overflow or division by
zero is backend-dependent: different backends may raise an error, return
a <em>NULL</em> value or generate an incorrect result.</p>
<p>Note that some arithmetic operators are also defined for <em>string</em>
and <em>date</em> values; they are described in respective sections.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{(2%2B4)*7,%20-(98-140),%2021/5}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{(</span><span class="m">2</span><span class="o">+</span><span class="m">4</span><span class="p">)</span><span class="o">*</span><span class="m">7</span><span class="p">,</span> <span class="o">-</span><span class="p">(</span><span class="m">98</span><span class="o">-</span><span class="m">140</span><span class="p">),</span> <span class="m">21</span><span class="o">/</span><span class="m">5</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="35%" />
<col width="45%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">(2+4)*7</th>
<th class="head">-(98-140)</th>
<th class="head">21/5</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>42</td>
<td>42</td>
<td>4.2</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="rounding-functions">
<h3>Rounding Functions<a class="headerlink" href="#rounding-functions" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">round(x)</span></tt></dt>
<dd>Round <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to the nearest integer value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">round(x,n)</span></tt></dt>
<dd>Round <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> decimal places.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">trunc(x)</span></tt></dt>
<dd>Round <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to an integer, towards zero.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">trunc(x,n)</span></tt></dt>
<dd>Round <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> decimal places, towards zero.</dd>
</dl>
<p>If called with one argument, the functions accept values of <em>decimal</em> or
<em>float</em> types and return a value of the same type.</p>
<p>When called with two arguments, the functions expects a <em>decimal</em> argument
and produces a <em>decimal</em> value.  The second argument should be an integer;
negative values are permitted.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{round(3272.78125),%20round(3272.78125,2),%20round(3272.78125,-2)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">round</span><span class="p">(</span><span class="m">3272.78125</span><span class="p">),</span> <span class="nf">round</span><span class="p">(</span><span class="m">3272.78125</span><span class="p">,</span><span class="m">2</span><span class="p">),</span> <span class="nf">round</span><span class="p">(</span><span class="m">3272.78125</span><span class="p">,</span><span class="o">-</span><span class="m">2</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="34%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">round(3272.78125)</th>
<th class="head">round(3272.78125,2)</th>
<th class="head">round(3272.78125,-2)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>3273</td>
<td>3272.78</td>
<td>3300</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{trunc(3272.78125),%20trunc(3272.78125,2),%20trunc(3272.78125,-2)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">trunc</span><span class="p">(</span><span class="m">3272.78125</span><span class="p">),</span> <span class="nf">trunc</span><span class="p">(</span><span class="m">3272.78125</span><span class="p">,</span><span class="m">2</span><span class="p">),</span> <span class="nf">trunc</span><span class="p">(</span><span class="m">3272.78125</span><span class="p">,</span><span class="o">-</span><span class="m">2</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="34%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">trunc(3272.78125)</th>
<th class="head">trunc(3272.78125,2)</th>
<th class="head">trunc(3272.78125,-2)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>3272</td>
<td>3272.78</td>
<td>3200</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code,%20avg(department.count(course))%20:round%202}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="nf">avg</span><span class="p">(</span><span class="nb">department</span><span class="p">.</span><span class="nf">count</span><span class="p">(</span><span class="nb">course</span><span class="p">))</span> <span class="p">:</span><span class="nf">round</span> <span class="m">2</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">avg(department.count(course)):round(2)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>19.5</td>
</tr>
<tr><td>bus</td>
<td>14.67</td>
</tr>
<tr><td>edu</td>
<td>17.5</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/department^avg_credits%20{avg_credits,%20count(department)}%0A%20:where%20department.avg_credits%20:=%20avg(course.credits)%20:trunc(1)" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">department</span><span class="o">^</span><span class="nb">avg_credits</span> <span class="p">{</span><span class="nb">avg_credits</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">department</span><span class="p">.</span><span class="nb">avg_credits</span> <span class="p">:=</span> <span class="nf">avg</span><span class="p">(</span><span class="nb">course</span><span class="p">.</span><span class="nb">credits</span><span class="p">)</span> <span class="p">:</span><span class="nf">trunc</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">avg_credits</th>
<th class="head">count(department)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2.9</td>
<td>1</td>
</tr>
<tr><td>3.0</td>
<td>4</td>
</tr>
<tr><td>3.1</td>
<td>1</td>
</tr>
<tr><td>3.2</td>
<td>3</td>
</tr>
<tr><td>3.3</td>
<td>2</td>
</tr>
<tr><td>3.4</td>
<td>1</td>
</tr>
<tr><td>3.5</td>
<td>5</td>
</tr>
<tr><td>3.6</td>
<td>1</td>
</tr>
<tr><td>3.7</td>
<td>1</td>
</tr>
<tr><td>4.0</td>
<td>1</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="string-functions">
<h2>String Functions<a class="headerlink" href="#string-functions" title="Permalink to this headline">¶</a></h2>
<p>By convention, string functions take a string as its first parameter.
When an untyped literal, such as <tt class="docutils literal"><span class="pre">'value'</span></tt> is used and a string is
expected, it is automatically cast.  Hence, for convenience, we write
string typed values using single quotes in the output column.</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="28%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">string(x)</span></tt></td>
<td rowspan="3">cast <em>x</em> to string</td>
<td><tt class="docutils literal"><span class="pre">string('Hello')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'Hello'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">string(1.0)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'1.0'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">string(date('2010-04-15'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'2010-04-15'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">length(s)</span></tt></td>
<td>number of characters
in <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">length('HTSQL')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">5</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">s</span> <span class="pre">+</span> <span class="pre">t</span></tt></td>
<td>concatenate <em>s</em> and <em>t</em></td>
<td><tt class="docutils literal"><span class="pre">'HT'</span> <span class="pre">+</span> <span class="pre">'SQL'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">s</span> <span class="pre">~</span> <span class="pre">t</span></tt></td>
<td><em>s</em> contains <em>t</em>;
case-insensitive</td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'</span> <span class="pre">~</span> <span class="pre">'sql'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">true</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">s</span> <span class="pre">!~</span> <span class="pre">t</span></tt></td>
<td><em>s</em> does not contain
<em>t</em>; case-insensitive</td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'</span> <span class="pre">!~</span> <span class="pre">'sql'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">false</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">head(s)</span></tt></td>
<td>first character of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">head('HTSQL')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'H'</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">head(s,n)</span></tt></td>
<td rowspan="2">first <em>n</em> characters
of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">head('HTSQL',2)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HT'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">head('HTSQL',-3)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HT'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">tail(s)</span></tt></td>
<td>last character of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">tail('HTSQL')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'L'</span></tt></td>
</tr>
<tr><td rowspan="2"><tt class="xref py py-obj docutils literal"><span class="pre">tail(s,n)</span></tt></td>
<td rowspan="2">last <em>n</em> characters
of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">tail('HTSQL',3)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'SQL'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">tail('HTSQL',-2)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'SQL'</span></tt></td>
</tr>
<tr><td rowspan="4"><tt class="xref py py-obj docutils literal"><span class="pre">slice(s,i,j)</span></tt></td>
<td rowspan="4"><em>i</em>-th to <em>j</em>-th
characters of <em>s</em>; null
or missing index means
the beginning or the end
of the string</td>
<td><tt class="docutils literal"><span class="pre">slice('HTSQL',1,4)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'TSQ'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">slice('HTSQL',-4,-1)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'TSQ'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">slice('HTSQL',null(),2)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HT'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">slice('HTSQL',2,null())</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'SQL'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">at(s,k)</span></tt></td>
<td><em>k</em>-th character of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">at('HTSQL',2)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'S'</span></tt></td>
</tr>
<tr><td rowspan="3"><tt class="xref py py-obj docutils literal"><span class="pre">at(s,k,n)</span></tt></td>
<td rowspan="3"><em>n</em> characters of <em>s</em>
starting with <em>k</em>-th
character</td>
<td><tt class="docutils literal"><span class="pre">at('HTSQL',1,3)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'TSQ'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">at('HTSQL,-4,3)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'TSQ'</span></tt></td>
</tr>
<tr><td><tt class="docutils literal"><span class="pre">at('HTSQL,4,-3)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'TSQ'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">upper(s)</span></tt></td>
<td>upper case of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">upper('htsql')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">lower(s)</span></tt></td>
<td>lower case of <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">lower('HTSQL')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'htsql'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">trim(s)</span></tt></td>
<td>strip leading and
trailing spaces from <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">trim('</span>&nbsp; <span class="pre">HTSQL</span>&nbsp; <span class="pre">')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HTSQL'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">ltrim(s)</span></tt></td>
<td>strip leading spaces
from <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">ltrim('</span>&nbsp; <span class="pre">HTSQL</span>&nbsp; <span class="pre">')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HTSQL</span>&nbsp; <span class="pre">'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">rtrim(s)</span></tt></td>
<td>strips trailing spaces
from <em>s</em></td>
<td><tt class="docutils literal"><span class="pre">rtrim('</span>&nbsp; <span class="pre">HTSQL</span>&nbsp; <span class="pre">')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'</span>&nbsp; <span class="pre">HTSQL'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">replace(s,t,r)</span></tt></td>
<td>replace all occurences
of <em>t</em> in <em>s</em> with <em>r</em></td>
<td><tt class="docutils literal"><span class="pre">replace('HTSQL','SQL','RAF')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'HTRAF'</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="string-cast">
<h3>String Cast<a class="headerlink" href="#string-cast" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">string(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to a string.</dd>
</dl>
<p>HTSQL permits any value to be converted to a string; the conversion
respects the format for literals of the original type.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{string('HTSQL'),%20string(true()),%20string(2.125),%20string(datetime('2010-04-15%2020:13'))}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">string</span><span class="p">(</span><span class="s">&#39;HTSQL&#39;</span><span class="p">),</span> <span class="nf">string</span><span class="p">(</span><span class="nf">true</span><span class="p">()),</span> <span class="nf">string</span><span class="p">(</span><span class="m">2.125</span><span class="p">),</span> <span class="nf">string</span><span class="p">(</span><span class="nf">datetime</span><span class="p">(</span><span class="s">&#39;2010-04-15 20:13&#39;</span><span class="p">))}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="16%" />
<col width="14%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;</th>
<th class="head">true()</th>
<th class="head">2.125</th>
<th class="head">&#8216;2010-04-15 20:13&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>HTSQL</td>
<td>true</td>
<td>2.125</td>
<td>2010-04-15 20:13:00</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/department{'Department%20of%20'%2Bname%2B'%20offers%20'%0A%20%20%20%20%20%20%20%20%20%20%20%20%2Bstring(count(course))%2B'%20courses'%20:as%20text}%0A%20%20%20%20%20%20%20%20%20%20%20?exists(course)" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">department</span><span class="p">{</span><span class="s">&#39;Department of &#39;</span><span class="o">+</span><span class="nb">name</span><span class="o">+</span><span class="s">&#39; offers &#39;</span>
            <span class="o">+</span><span class="nf">string</span><span class="p">(</span><span class="nf">count</span><span class="p">(</span><span class="nb">course</span><span class="p">))</span><span class="o">+</span><span class="s">&#39; courses&#39;</span> <span class="p">:</span><span class="nf">as</span> <span class="nb">text</span><span class="p">}</span>
           <span class="o">?</span><span class="nf">exists</span><span class="p">(</span><span class="nb">course</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">text</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Department of Accounting offers 12 courses</td>
</tr>
<tr><td>Department of Art History offers 20 courses</td>
</tr>
<tr><td>Department of Astronomy offers 22 courses</td>
</tr>
<tr class="htsql-cut"><td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="string-length">
<h3>String Length<a class="headerlink" href="#string-length" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">length(s)</span></tt></dt>
<dd>Number of characters in <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
</dl>
<p>The exact meaning of a string length depends on the backend and the
underlying SQL type.  The function returns <tt class="docutils literal"><span class="pre">0</span></tt> if the argument is
<em>NULL</em>.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{length('HTSQL'),%20length(''),%20length(null())}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">length</span><span class="p">(</span><span class="s">&#39;HTSQL&#39;</span><span class="p">),</span> <span class="nf">length</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">),</span> <span class="nf">length</span><span class="p">(</span><span class="nf">null</span><span class="p">())}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="26%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">length(&#8216;HTSQL&#8217;)</th>
<th class="head">length(&#8216;&#8217;)</th>
<th class="head">length(null())</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>5</td>
<td>0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="concatenation">
<h3>Concatenation<a class="headerlink" href="#concatenation" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">s</span> <span class="pre">+</span> <span class="pre">t</span></tt></dt>
<dd>Concatenate <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">t</span></tt>.</dd>
</dl>
<p>The concatenation operator treats a <em>NULL</em> operand as an empty string.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HT'%2B'SQL',%20null()%2B'SQL'}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HT&#39;</span><span class="o">+</span><span class="s">&#39;SQL&#39;</span><span class="p">,</span> <span class="nf">null</span><span class="p">()</span><span class="o">+</span><span class="s">&#39;SQL&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HT&#8217;+&#8217;SQL&#8217;</th>
<th class="head">null()+&#8217;SQL&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>HTSQL</td>
<td>SQL</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course{department_code%2B'.'%2Bstring(no)%20:as%20code,%20title}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="p">{</span><span class="nb">department_code</span><span class="o">+</span><span class="s">&#39;.&#39;</span><span class="o">+</span><span class="nf">string</span><span class="p">(</span><span class="nb">no</span><span class="p">)</span> <span class="p">:</span><span class="nf">as</span> <span class="nb">code</span><span class="p">,</span> <span class="nb">title</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">title</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>acc.100</td>
<td>Practical Bookkeeping</td>
</tr>
<tr><td>acc.200</td>
<td>Introduction to Accounting</td>
</tr>
<tr><td>acc.234</td>
<td>Accounting Information Systems</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="substring-search">
<h3>Substring Search<a class="headerlink" href="#substring-search" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">s</span> <span class="pre">~</span> <span class="pre">t</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">t</span></tt> is a substring of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>, <em>FALSE</em> otherwise.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">s</span> <span class="pre">!~</span> <span class="pre">t</span></tt></dt>
<dd><em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">t</span></tt> is a substring of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>, <em>FALSE</em> otherwise.</dd>
</dl>
<p>The search functions are case-insensitive; exact rules for
case-insensitivity depend on the backend.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HTSQL'~'sql',%20'sql'!~'HTSQL'}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HTSQL&#39;</span><span class="o">~</span><span class="s">&#39;sql&#39;</span><span class="p">,</span> <span class="s">&#39;sql&#39;</span><span class="o">!~</span><span class="s">&#39;HTSQL&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="48%" />
<col width="52%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;~&#8217;sql&#8217;</th>
<th class="head">&#8216;sql&#8217;!~&#8217;HTSQL&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>true</em></td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school?code~'art'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">?</span><span class="nb">code</span><span class="o">~</span><span class="s">&#39;art&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="71%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>School of Art and Design</td>
<td>old</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="substring-extraction">
<h3>Substring Extraction<a class="headerlink" href="#substring-extraction" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">head(s)</span></tt></dt>
<dd>The first character of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">head(s,n)</span></tt></dt>
<dd>The first <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> characters of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">tail(s)</span></tt></dt>
<dd>The last character of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">tail(s,n)</span></tt></dt>
<dd>The last <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> characters of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">slice(s,i,j)</span></tt></dt>
<dd>The <tt class="xref py py-obj docutils literal"><span class="pre">i</span></tt>-th to <tt class="xref py py-obj docutils literal"><span class="pre">j</span></tt>-th (exclusive) characters of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">at(s,k)</span></tt></dt>
<dd>The <tt class="xref py py-obj docutils literal"><span class="pre">k</span></tt>-th character of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">at(s,k,n)</span></tt></dt>
<dd><tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> characters of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt> starting from the <tt class="xref py py-obj docutils literal"><span class="pre">k</span></tt>-th.</dd>
</dl>
<p>In HTSQL, characters of a string are indexed from <tt class="xref py py-obj docutils literal"><span class="pre">0</span></tt>.</p>
<p>Extraction functions permit negative or <em>NULL</em> indexes.  <tt class="xref py py-obj docutils literal"><span class="pre">head()</span></tt>
(<tt class="xref py py-obj docutils literal"><span class="pre">tail()</span></tt>), when given a negative <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt>, produces all but the last (first)
<tt class="xref py py-obj docutils literal"><span class="pre">-n</span></tt> characters of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>; if <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> is <em>NULL</em>, it is assumed to be <tt class="docutils literal"><span class="pre">1</span></tt>.</p>
<p>For <tt class="xref py py-obj docutils literal"><span class="pre">slice()</span></tt>, a negative index <tt class="xref py py-obj docutils literal"><span class="pre">i</span></tt> or <tt class="xref py py-obj docutils literal"><span class="pre">j</span></tt> indicates to count
<tt class="xref py py-obj docutils literal"><span class="pre">(-i-1)</span></tt>-th (<tt class="xref py py-obj docutils literal"><span class="pre">(-j-1)</span></tt>-th) character from the end of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.  <em>NULL</em> value
for <tt class="xref py py-obj docutils literal"><span class="pre">i</span></tt> or <tt class="xref py py-obj docutils literal"><span class="pre">j</span></tt> indicates the beginning (the end) of the string.</p>
<p>For <tt class="xref py py-obj docutils literal"><span class="pre">at()</span></tt>, a negative <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> produces <tt class="xref py py-obj docutils literal"><span class="pre">-n</span></tt> characters of <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>
ending at the <tt class="xref py py-obj docutils literal"><span class="pre">k</span></tt>-th character; if <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> is <em>NULL</em>, it is assumed to
be <tt class="docutils literal"><span class="pre">1</span></tt>.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HTSQL'%20:head,%20'HTSQL'%20:head(2),%20'HTSQL'%20:head(-3)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">head</span><span class="p">,</span> <span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">head</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">head</span><span class="p">(</span><span class="o">-</span><span class="m">3</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="35%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;:head</th>
<th class="head">&#8216;HTSQL&#8217;:head(2)</th>
<th class="head">&#8216;HTSQL&#8217;:head(-3)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>H</td>
<td>HT</td>
<td>HT</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HTSQL'%20:tail,%20'HTSQL':%20tail(3),%20'HTSQL':%20tail(-2)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">tail</span><span class="p">,</span> <span class="s">&#39;HTSQL&#39;</span><span class="p">:</span> <span class="nf">tail</span><span class="p">(</span><span class="m">3</span><span class="p">),</span> <span class="s">&#39;HTSQL&#39;</span><span class="p">:</span> <span class="nf">tail</span><span class="p">(</span><span class="o">-</span><span class="m">2</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="28%" />
<col width="35%" />
<col width="37%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;:tail</th>
<th class="head">&#8216;HTSQL&#8217;:tail(3)</th>
<th class="head">&#8216;HTSQL&#8217;:tail(-2)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>L</td>
<td>SQL</td>
<td>SQL</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HTSQL'%20:slice(1,-1),%20'HTSQL'%20:slice(1,null()),%20'HTSQL'%20:slice(null(),-1)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">slice</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="o">-</span><span class="m">1</span><span class="p">),</span> <span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">slice</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="nf">null</span><span class="p">()),</span> <span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">slice</span><span class="p">(</span><span class="nf">null</span><span class="p">(),</span><span class="o">-</span><span class="m">1</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="35%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;:slice(1,-1)</th>
<th class="head">&#8216;HTSQL&#8217;:slice(1,null())</th>
<th class="head">&#8216;HTSQL&#8217;:slice(null(),-1)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>TSQ</td>
<td>TSQL</td>
<td>HTSQ</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HTSQL'%20:at(2),%20'HTSQL'%20:at(1,3),%20'HTSQL':%20at(-1,-3)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">at</span><span class="p">(</span><span class="m">2</span><span class="p">),</span> <span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">at</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">),</span> <span class="s">&#39;HTSQL&#39;</span><span class="p">:</span> <span class="nf">at</span><span class="p">(</span><span class="o">-</span><span class="m">1</span><span class="p">,</span><span class="o">-</span><span class="m">3</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="33%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTSQL&#8217;:at(2)</th>
<th class="head">&#8216;HTSQL&#8217;:at(1,3)</th>
<th class="head">&#8216;HTSQL&#8217;:at(-1,-3)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>S</td>
<td>TSQ</td>
<td>TSQ</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="case-conversion">
<h3>Case Conversion<a class="headerlink" href="#case-conversion" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">upper(s)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt> to upper case.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">lower(s)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt> to lower case.</dd>
</dl>
<p>The conversion semantics is backend-dependent.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'htsql'%20:upper,%20'HTSQL'%20:lower}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;htsql&#39;</span> <span class="p">:</span><span class="nf">upper</span><span class="p">,</span> <span class="s">&#39;HTSQL&#39;</span> <span class="p">:</span><span class="nf">lower</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;htsql&#8217;:upper</th>
<th class="head">&#8216;HTSQL&#8217;:lower</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>HTSQL</td>
<td>htsql</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="string-trimming">
<h3>String Trimming<a class="headerlink" href="#string-trimming" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">trim(s)</span></tt></dt>
<dd>Strip leading and trailing spaces from <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">ltrim(s)</span></tt></dt>
<dd>Strip leading spaces from <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">rtrim(s)</span></tt></dt>
<dd>Strip trailing spaces from <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt>.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'%20%20HTSQL%20%20'%20:trim%20:replace('%20','!'),%0A%20%20'%20%20HTSQL%20%20'%20:ltrim%20:replace('%20','!'),%0A%20%20'%20%20HTSQL%20%20'%20:rtrim%20:replace('%20','!')}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;  HTSQL  &#39;</span> <span class="p">:</span><span class="nf">trim</span> <span class="p">:</span><span class="nf">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;!&#39;</span><span class="p">),</span>
  <span class="s">&#39;  HTSQL  &#39;</span> <span class="p">:</span><span class="nf">ltrim</span> <span class="p">:</span><span class="nf">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;!&#39;</span><span class="p">),</span>
  <span class="s">&#39;  HTSQL  &#39;</span> <span class="p">:</span><span class="nf">rtrim</span> <span class="p">:</span><span class="nf">replace</span><span class="p">(</span><span class="s">&#39; &#39;</span><span class="p">,</span><span class="s">&#39;!&#39;</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="34%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;  HTSQL  &#8216;:trim:replace(&#8216; &#8216;,&#8217;!&#8217;)</th>
<th class="head">&#8216;  HTSQL  &#8216;:ltrim:replace(&#8216; &#8216;,&#8217;!&#8217;)</th>
<th class="head">&#8216;  HTSQL  &#8216;:rtrim:replace(&#8216; &#8216;,&#8217;!&#8217;)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>HTSQL</td>
<td>HTSQL!!</td>
<td>!!HTSQL</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="search-and-replace">
<h3>Search and Replace<a class="headerlink" href="#search-and-replace" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">replace(s,t,r)</span></tt></dt>
<dd>Replace all occurences of substring <tt class="xref py py-obj docutils literal"><span class="pre">t</span></tt> in <tt class="xref py py-obj docutils literal"><span class="pre">s</span></tt> with <tt class="xref py py-obj docutils literal"><span class="pre">r</span></tt>.</dd>
</dl>
<p>Case-sensitivity of the search depends on the backend; <em>NULL</em> values for
<tt class="xref py py-obj docutils literal"><span class="pre">t</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">r</span></tt> are interpreted as an empty string.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{'HTTP'%20:replace('TP','SQL'),%0A%20%20'HTTP'%20:replace(null(),%20'SQL'),%0A%20%20'HTTP'%20:replace('TP',%20null())}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="s">&#39;HTTP&#39;</span> <span class="p">:</span><span class="nf">replace</span><span class="p">(</span><span class="s">&#39;TP&#39;</span><span class="p">,</span><span class="s">&#39;SQL&#39;</span><span class="p">),</span>
  <span class="s">&#39;HTTP&#39;</span> <span class="p">:</span><span class="nf">replace</span><span class="p">(</span><span class="nf">null</span><span class="p">(),</span> <span class="s">&#39;SQL&#39;</span><span class="p">),</span>
  <span class="s">&#39;HTTP&#39;</span> <span class="p">:</span><span class="nf">replace</span><span class="p">(</span><span class="s">&#39;TP&#39;</span><span class="p">,</span> <span class="nf">null</span><span class="p">())}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="35%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;HTTP&#8217;:replace(&#8216;TP&#8217;,&#8217;SQL&#8217;)</th>
<th class="head">&#8216;HTTP&#8217;:replace(null(),&#8217;SQL&#8217;)</th>
<th class="head">&#8216;HTTP&#8217;:replace(&#8216;TP&#8217;,null())</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>HTSQL</td>
<td>HTTP</td>
<td>HT</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="date-time-functions">
<h2>Date/Time Functions<a class="headerlink" href="#date-time-functions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="28%" />
<col width="28%" />
<col width="22%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
<th class="head">Output</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">date(x)</span></tt></td>
<td>cast <em>x</em> to date</td>
<td><tt class="docutils literal"><span class="pre">date('2010-04-15')</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">time(x)</span></tt></td>
<td>cast <em>x</em> to time</td>
<td><tt class="docutils literal"><span class="pre">time('20:13')</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">datetime(x)</span></tt></td>
<td>cast <em>x</em> to datetime</td>
<td><tt class="docutils literal"><span class="pre">datetime('2010-04-15T20:13')</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">date(yyyy,mm,dd)</span></tt></td>
<td>date <em>yyyy-mm-dd</em></td>
<td><tt class="docutils literal"><span class="pre">date(2010,4,15)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">date('2010-04-15')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">datetime(yyyy,mm,dd</span> <span class="pre">[,HH,MM,SS])</span></tt></td>
<td>datetime <em>yyyy-mm-dd</em>
<em>HH:MM:SS</em></td>
<td><tt class="docutils literal"><span class="pre">datetime(2010,4,15,20,13)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">datetime('2010-04-15T20:13')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">datetime(d,t)</span></tt></td>
<td>datetime from date and
time</td>
<td><tt class="docutils literal"><span class="pre">datetime(</span> <span class="pre">date('2010-04-15'),</span> <span class="pre">time('20:13')</span> <span class="pre">)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">datetime('2010-04-15T20:13')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">today()</span></tt></td>
<td>current date</td>
<td><tt class="docutils literal"><span class="pre">today()</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">now()</span></tt></td>
<td>current date and time</td>
<td><tt class="docutils literal"><span class="pre">now()</span></tt></td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">date(dt)</span></tt></td>
<td>date of <em>dt</em></td>
<td><tt class="docutils literal"><span class="pre">date(</span> <span class="pre">datetime('2010-04-15T20:13')</span> <span class="pre">)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">date('2010-04-15')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">time(dt)</span></tt></td>
<td>time of <em>dt</em></td>
<td><tt class="docutils literal"><span class="pre">time(</span> <span class="pre">datetime('2010-04-15T20:13')</span> <span class="pre">)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">time('20:13')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">year(d)</span></tt></td>
<td>year of <em>d</em></td>
<td><tt class="docutils literal"><span class="pre">year(date('2010-04-15'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">2010</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">month(d)</span></tt></td>
<td>month of <em>d</em></td>
<td><tt class="docutils literal"><span class="pre">month(date('2010-04-15'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">4</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">day(d)</span></tt></td>
<td>day of <em>d</em></td>
<td><tt class="docutils literal"><span class="pre">day(date('2010-04-15'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">15</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">hour(t)</span></tt></td>
<td>hours of <em>t</em></td>
<td><tt class="docutils literal"><span class="pre">hour(time('20:13'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">20</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">minute(t)</span></tt></td>
<td>minutes of <em>t</em></td>
<td><tt class="docutils literal"><span class="pre">minute(time('20:13'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">13</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">second(t)</span></tt></td>
<td>seconds of <em>t</em></td>
<td><tt class="docutils literal"><span class="pre">second(time('20:13'))</span></tt></td>
<td><tt class="docutils literal"><span class="pre">0.0</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">d</span> <span class="pre">+</span> <span class="pre">n</span></tt></td>
<td>increment <em>d</em> by <em>n</em> days</td>
<td><tt class="docutils literal"><span class="pre">date('1991-08-20')+6813</span></tt></td>
<td><tt class="docutils literal"><span class="pre">date('2010-04-15')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">n</span></tt></td>
<td>decrement <em>d</em> by <em>n</em> days</td>
<td><tt class="docutils literal"><span class="pre">date('2028-12-09')-6813</span></tt></td>
<td><tt class="docutils literal"><span class="pre">date('2010-04-15')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">d1</span> <span class="pre">-</span> <span class="pre">d2</span></tt></td>
<td>number of days between
<em>d1</em> and <em>d2</em></td>
<td><tt class="docutils literal"><span class="pre">date('2028-12-09')</span> <span class="pre">-</span> <span class="pre">date('1991-08-20')</span></tt></td>
<td><tt class="docutils literal"><span class="pre">13626</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="date-time-cast">
<h3>Date/Time Cast<a class="headerlink" href="#date-time-cast" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">date(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to a <em>date</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">time(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to a <em>time</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">datetime(x)</span></tt></dt>
<dd>Convert <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> to a <em>datetime</em> value.</dd>
</dl>
<p>Conversion functions accept untyped literals and string expressions.
An untyped literal must obey the literal format of the respective target
type.  Conversion from a string value is backend-specific.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{date('2010-04-15'),%20time('20:13'),%20datetime('2010-04-15%2020:13')}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;2010-04-15&#39;</span><span class="p">),</span> <span class="nf">time</span><span class="p">(</span><span class="s">&#39;20:13&#39;</span><span class="p">),</span> <span class="nf">datetime</span><span class="p">(</span><span class="s">&#39;2010-04-15 20:13&#39;</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="21%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">&#8216;2010-04-15&#8217;</th>
<th class="head">&#8216;20:13&#8217;</th>
<th class="head">&#8216;2010-04-15 20:13&#8217;</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2010-04-15</td>
<td>20:13:00</td>
<td>2010-04-15 20:13:00</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/student?dob&lt;date('1982-06-01')" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">student</span><span class="o">?</span><span class="nb">dob</span><span class="o">&lt;</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;1982-06-01&#39;</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="22%" />
<col width="8%" />
<col width="13%" />
<col width="14%" />
<col width="15%" />
<col width="13%" />
<col width="11%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">id</th>
<th class="head">name</th>
<th class="head">gender</th>
<th class="head">dob</th>
<th class="head">school_code</th>
<th class="head">program_code</th>
<th class="head">start_date</th>
<th class="head">is_active</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1036</td>
<td>Jonathan Bouchard</td>
<td>m</td>
<td>1982-02-12</td>
<td>art</td>
<td>ustudio</td>
<td>2007-08-15</td>
<td><em>false</em></td>
</tr>
<tr><td>1041</td>
<td>Lowell Cooper</td>
<td>m</td>
<td>1982-01-05</td>
<td>art</td>
<td>uhist</td>
<td>2007-08-15</td>
<td><em>false</em></td>
</tr>
<tr><td>1113</td>
<td>John Miller</td>
<td>m</td>
<td>1982-05-14</td>
<td>art</td>
<td>uhist</td>
<td>2007-08-15</td>
<td><em>false</em></td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="date-time-construction">
<h3>Date/Time Construction<a class="headerlink" href="#date-time-construction" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">date(yyyy,mm,dd)</span></tt></dt>
<dd>Construct a date from the given year, month and day values.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">datetime(yyyy,mm,dd[,HH,MM,SS])</span></tt></dt>
<dd>Construct a datetime from the given year, month, day, hour, minute
and second values.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">datetime(d,t)</span></tt></dt>
<dd>Construct a datetime from the given date and time.</dd>
</dl>
<p>Construction functions accept and normalize component values outside the
regular range.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{date(2010,4,15),%20datetime(2010,4,15,20,13),%0A%20%20datetime(date('2010-04-15'),time('20:13'))}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">date</span><span class="p">(</span><span class="m">2010</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">15</span><span class="p">),</span> <span class="nf">datetime</span><span class="p">(</span><span class="m">2010</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">15</span><span class="p">,</span><span class="m">20</span><span class="p">,</span><span class="m">13</span><span class="p">),</span>
  <span class="nf">datetime</span><span class="p">(</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;2010-04-15&#39;</span><span class="p">),</span><span class="nf">time</span><span class="p">(</span><span class="s">&#39;20:13&#39;</span><span class="p">))}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="30%" />
<col width="51%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">date(2010,4,15)</th>
<th class="head">datetime(2010,4,15,20,13)</th>
<th class="head">datetime(date(&#8216;2010-04-15&#8217;),time(&#8216;20:13&#8217;))</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2010-04-15</td>
<td>2010-04-15 20:13:00</td>
<td>2010-04-15 20:13:00</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{date(2010,4,15),%20date(2010,3,46),%20date(2011,-8,15)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">date</span><span class="p">(</span><span class="m">2010</span><span class="p">,</span><span class="m">4</span><span class="p">,</span><span class="m">15</span><span class="p">),</span> <span class="nf">date</span><span class="p">(</span><span class="m">2010</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">46</span><span class="p">),</span> <span class="nf">date</span><span class="p">(</span><span class="m">2011</span><span class="p">,</span><span class="o">-</span><span class="m">8</span><span class="p">,</span><span class="m">15</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="35%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">date(2010,4,15)</th>
<th class="head">date(2010,3,46)</th>
<th class="head">date(2011,-8,15)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2010-04-15</td>
<td>2010-04-15</td>
<td>2010-04-15</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="component-extraction">
<h3>Component Extraction<a class="headerlink" href="#component-extraction" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">date(dt)</span></tt></dt>
<dd>Date of a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">time(dt)</span></tt></dt>
<dd>Time of a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">year(d)</span></tt></dt>
<dd>Year of a <em>date</em> or a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">month(d)</span></tt></dt>
<dd>Month of a <em>date</em> or a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">day(d)</span></tt></dt>
<dd>Day of a <em>date</em> or a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">hour(t)</span></tt></dt>
<dd>Hours of a <em>time</em> or a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">minute(t)</span></tt></dt>
<dd>Minutes of a <em>time</em> or a <em>datetime</em> value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">second(t)</span></tt></dt>
<dd>Seconds of a <em>time</em> or a <em>datetime</em> value.</dd>
</dl>
<p>The extracted values are integers except for <tt class="xref py py-obj docutils literal"><span class="pre">second()</span></tt>, where the
extracted value is a float number.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{date($dt),%20time($dt),%0A%20%20year($d),%20month($d),%20day($d),%0A%20%20hour($t),%20minute($t),%20second($t)}%0A%20:where%20($d%20:=%20date('2010-04-15'),%0A%20%20%20%20%20%20%20%20%20$t%20:=%20time('20:13'),%0A%20%20%20%20%20%20%20%20%20$dt%20:=%20datetime($d,$t))" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">date</span><span class="p">($</span><span class="nb">dt</span><span class="p">),</span> <span class="nf">time</span><span class="p">($</span><span class="nb">dt</span><span class="p">),</span>
  <span class="nf">year</span><span class="p">($</span><span class="nb">d</span><span class="p">),</span> <span class="nf">month</span><span class="p">($</span><span class="nb">d</span><span class="p">),</span> <span class="nf">day</span><span class="p">($</span><span class="nb">d</span><span class="p">),</span>
  <span class="nf">hour</span><span class="p">($</span><span class="nb">t</span><span class="p">),</span> <span class="nf">minute</span><span class="p">($</span><span class="nb">t</span><span class="p">),</span> <span class="nf">second</span><span class="p">($</span><span class="nb">t</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="p">($</span><span class="nb">d</span> <span class="p">:=</span> <span class="nf">date</span><span class="p">(</span><span class="s">&#39;2010-04-15&#39;</span><span class="p">),</span>
         <span class="p">$</span><span class="nb">t</span> <span class="p">:=</span> <span class="nf">time</span><span class="p">(</span><span class="s">&#39;20:13&#39;</span><span class="p">),</span>
         <span class="p">$</span><span class="nb">dt</span> <span class="p">:=</span> <span class="nf">datetime</span><span class="p">($</span><span class="nb">d</span><span class="p">,$</span><span class="nb">t</span><span class="p">))</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="11%" />
<col width="11%" />
<col width="13%" />
<col width="10%" />
<col width="11%" />
<col width="14%" />
<col width="14%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">$dt</th>
<th class="head">$dt</th>
<th class="head">year($d)</th>
<th class="head">month($d)</th>
<th class="head">day($d)</th>
<th class="head">hour($t)</th>
<th class="head">minute($t)</th>
<th class="head">second($t)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2010-04-15</td>
<td>20:13:00</td>
<td>2010</td>
<td>4</td>
<td>15</td>
<td>20</td>
<td>13</td>
<td>0.0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="date-time-arithmetics">
<h3>Date/Time Arithmetics<a class="headerlink" href="#date-time-arithmetics" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">d</span> <span class="pre">+</span> <span class="pre">n</span></tt></dt>
<dd>Increment a <em>date</em> or a <em>datetime</em> value by <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> days.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">d</span> <span class="pre">-</span> <span class="pre">n</span></tt></dt>
<dd>Decrement a <em>date</em> or a <em>datetime</em> value by <tt class="xref py py-obj docutils literal"><span class="pre">n</span></tt> days.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">d1</span> <span class="pre">-</span> <span class="pre">d2</span></tt></dt>
<dd>Number of days between two <em>date</em> values.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{date('1991-08-20')%2B6813,%20datetime('1991-08-20%2002:01')%2B6813.75833333333}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;1991-08-20&#39;</span><span class="p">)</span><span class="o">+</span><span class="m">6813</span><span class="p">,</span> <span class="nf">datetime</span><span class="p">(</span><span class="s">&#39;1991-08-20 02:01&#39;</span><span class="p">)</span><span class="o">+</span><span class="m">6813.75833333333</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">date(&#8216;1991-08-20&#8217;)+6813</th>
<th class="head">datetime(&#8216;1991-08-20 02:01&#8217;)+6813.75833333333</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2010-04-15</td>
<td>2010-04-15 20:13:00</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{date('2028-12-09')-6813,%20datetime('2028-12-10%2014:25')-6813.75833333333}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;2028-12-09&#39;</span><span class="p">)</span><span class="o">-</span><span class="m">6813</span><span class="p">,</span> <span class="nf">datetime</span><span class="p">(</span><span class="s">&#39;2028-12-10 14:25&#39;</span><span class="p">)</span><span class="o">-</span><span class="m">6813.75833333333</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">date(&#8216;2028-12-09&#8217;)-6813</th>
<th class="head">datetime(&#8216;2028-12-10 14:25&#8217;)-6813.75833333333</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>2010-04-15</td>
<td>2010-04-15 20:13:00</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/date('2028-12-09')-date('1991-08-20')" target="_new" class="htsql-link"><span class="o">/</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;2028-12-09&#39;</span><span class="p">)</span><span class="o">-</span><span class="nf">date</span><span class="p">(</span><span class="s">&#39;1991-08-20&#39;</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="100%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">date(&#8216;2028-12-09&#8217;)-date(&#8216;1991-08-20&#8217;)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>13626</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/student{name,%20(start_date-dob)/365%20:round(1)%20:as%20age}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">student</span><span class="p">{</span><span class="nb">name</span><span class="p">,</span> <span class="p">(</span><span class="nb">start_date</span><span class="o">-</span><span class="nb">dob</span><span class="p">)</span><span class="o">/</span><span class="m">365</span> <span class="p">:</span><span class="nf">round</span><span class="p">(</span><span class="m">1</span><span class="p">)</span> <span class="p">:</span><span class="nf">as</span> <span class="nb">age</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="76%" />
<col width="24%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">name</th>
<th class="head">age</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>Linda Wright</td>
<td>18.9</td>
</tr>
<tr><td>Beth Thompson</td>
<td>19.6</td>
</tr>
<tr><td>Sheri Sanchez</td>
<td>22.3</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="aggregate-functions">
<h2>Aggregate Functions<a class="headerlink" href="#aggregate-functions" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">exists(ps)</span></tt></td>
<td><em>TRUE</em> if <em>ps</em> contains
at least one <em>TRUE</em>
value; <em>FALSE</em> otherwise</td>
<td><tt class="docutils literal"><span class="pre">exists(course.credits&gt;5)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">every(ps)</span></tt></td>
<td><em>TRUE</em> if <em>ps</em> contains
only <em>TRUE</em> values;
<em>FALSE</em> otherwise</td>
<td><tt class="docutils literal"><span class="pre">every(course.credits&gt;5)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">count(ps)</span></tt></td>
<td>number of <em>TRUE</em> values
in <em>ps</em></td>
<td><tt class="docutils literal"><span class="pre">count(course.credits&gt;5)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">min(xs)</span></tt></td>
<td>smallest element in <em>xs</em></td>
<td><tt class="docutils literal"><span class="pre">min(course.credits)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">max(xs)</span></tt></td>
<td>largest element in <em>xs</em></td>
<td><tt class="docutils literal"><span class="pre">max(course.credits)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">sum(xs)</span></tt></td>
<td>sum of elements in <em>xs</em></td>
<td><tt class="docutils literal"><span class="pre">sum(course.credits)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">avg(xs)</span></tt></td>
<td>average value of elements
in <em>xs</em></td>
<td><tt class="docutils literal"><span class="pre">avg(course.credits)</span></tt></td>
</tr>
</tbody>
</table>
<p>Aggregate functions accept a plural argument, which, when evaluated,
produces a flow of values, and generates a single <em>aggregating</em> value
from it.</p>
<div class="section" id="boolean-aggregates">
<h3>Boolean Aggregates<a class="headerlink" href="#boolean-aggregates" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">exists(xs)</span></tt></dt>
<dd>Produce <em>TRUE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt> contains at least one <em>TRUE</em> value, <em>FALSE</em>
otherwise.  The aggregate returns <em>FALSE</em> on an empty flow.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">every(xs)</span></tt></dt>
<dd>Produce <em>FALSE</em> if <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt> contains only <em>TRUE</em> values, <em>FALSE</em>
otherwise.  The aggregate returns <em>TRUE</em> on an empty flow.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">count(xs)</span></tt></dt>
<dd>The number of <em>TRUE</em> values in <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt>; <tt class="docutils literal"><span class="pre">0</span></tt> if <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt> is empty.</dd>
</dl>
<p>Boolean aggregates expect a Boolean argument; a non-Boolean argument
is converted to Boolean first (see function <tt class="xref py py-obj docutils literal"><span class="pre">boolean()</span></tt>).</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course?department.code='astro'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;astro&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="2%" />
<col width="15%" />
<col width="5%" />
<col width="69%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">department_code</th>
<th class="head">no</th>
<th class="head">title</th>
<th class="head">credits</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>astro</td>
<td>105</td>
<td>General Astronomy I</td>
<td>5</td>
<td>Overview of the current astronomy, its goals and problems, basic instruments, space objects classification.</td>
</tr>
<tr><td>astro</td>
<td>106</td>
<td>General Astronomy I Lab</td>
<td>2</td>
<td>Laboratory studies that complement the lecture course.</td>
</tr>
<tr><td>astro</td>
<td>108</td>
<td>Stars and Planets</td>
<td>3</td>
<td>Basics of planet and star formation, their lifecycle from birth to death.</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{exists(astro_course.credits&gt;=5),%0A%20%20every(astro_course.credits&gt;=5),%0A%20%20count(astro_course.credits&gt;=5)}%0A%20:where%20astro_course%20:=%20course?department.code='astro'" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">exists</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">),</span>
  <span class="nf">every</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">),</span>
  <span class="nf">count</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">astro_course</span> <span class="p">:=</span> <span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;astro&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">exists(astro_course.credits&gt;=5)</th>
<th class="head">every(astro_course.credits&gt;=5)</th>
<th class="head">count(astro_course.credits&gt;=5)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>true</em></td>
<td><em>false</em></td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/course?department.code='pia'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;pia&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="5%" />
<col width="13%" />
<col width="18%" />
<col width="28%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">department_code</th>
<th class="head">no</th>
<th class="head">title</th>
<th class="head">credits</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{exists(pia_course.credits&gt;=5),%0A%20%20every(pia_course.credits&gt;=5),%0A%20%20count(pia_course.credits&gt;=5)}%0A%20:where%20pia_course%20:=%20course?department.code='pia'" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">exists</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">),</span>
  <span class="nf">every</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">),</span>
  <span class="nf">count</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="o">&gt;=</span><span class="m">5</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">pia_course</span> <span class="p">:=</span> <span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;pia&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="34%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">exists(pia_course.credits&gt;=5)</th>
<th class="head">every(pia_course.credits&gt;=5)</th>
<th class="head">count(pia_course.credits&gt;=5)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><em>false</em></td>
<td><em>true</em></td>
<td>0</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="extrema">
<h3>Extrema<a class="headerlink" href="#extrema" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">min(xs)</span></tt></dt>
<dd>The smallest value in <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">max(xs)</span></tt></dt>
<dd>The largest value in <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt>.</dd>
</dl>
<p>The functions accept numeric, string, enumeration and date/time
arguments.  <em>NULL</em> values in the flow are ignored; if the flow is
empty,  <em>NULL</em> is returned.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{min(astro_course.credits),%20max(astro_course.credits)}%0A%20:where%20astro_course%20:=%20course?department.code='astro'" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">min</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">),</span> <span class="nf">max</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">astro_course</span> <span class="p">:=</span> <span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;astro&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">min(astro_course.credits)</th>
<th class="head">max(astro_course.credits)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>1</td>
<td>5</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{min(pia_course.credits),%20max(pia_course.credits)}%0A%20:where%20pia_course%20:=%20course?department.code='pia'" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">min</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">),</span> <span class="nf">max</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">pia_course</span> <span class="p">:=</span> <span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;pia&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">min(pia_course.credits)</th>
<th class="head">max(pia_course.credits)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>—</td>
<td>—</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="sum-and-average">
<h3>Sum and Average<a class="headerlink" href="#sum-and-average" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">sum(xs)</span></tt></dt>
<dd>The sum of values in <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt>; returns <tt class="docutils literal"><span class="pre">0</span></tt> if <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt> is empty.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">avg(xs)</span></tt></dt>
<dd>The average of values in <tt class="xref py py-obj docutils literal"><span class="pre">xs</span></tt>.</dd>
</dl>
<p>The functions accept a numeric argument.  <tt class="xref py py-obj docutils literal"><span class="pre">sum()</span></tt> returns a
result of the same type as the argument, <tt class="xref py py-obj docutils literal"><span class="pre">avg()</span></tt> returns
a <em>decimal</em> result for an <em>integer</em> or a <em>decimal</em> argument,
and <em>float</em> result for a <em>float</em> argument.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{sum(astro_course.credits),%20avg(astro_course.credits)}%0A%20:where%20astro_course%20:=%20course?department.code='astro'" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">sum</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">),</span> <span class="nf">avg</span><span class="p">(</span><span class="nb">astro_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">astro_course</span> <span class="p">:=</span> <span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;astro&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">sum(astro_course.credits)</th>
<th class="head">avg(astro_course.credits)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>66</td>
<td>3.0</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{sum(pia_course.credits),%20avg(pia_course.credits)}%0A%20:where%20pia_course%20:=%20course?department.code='pia'" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">sum</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">),</span> <span class="nf">avg</span><span class="p">(</span><span class="nb">pia_course</span><span class="p">.</span><span class="nb">credits</span><span class="p">)}</span>
 <span class="p">:</span><span class="nf">where</span> <span class="nb">pia_course</span> <span class="p">:=</span> <span class="nb">course</span><span class="o">?</span><span class="nb">department</span><span class="p">.</span><span class="nb">code</span><span class="o">=</span><span class="s">&#39;pia&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">sum(pia_course.credits)</th>
<th class="head">avg(pia_course.credits)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>—</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="flow-operations">
<h2>Flow Operations<a class="headerlink" href="#flow-operations" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">?</span> <span class="pre">p</span></tt></td>
<td rowspan="2">records from <em>flow</em>
satisfying condition <em>p</em></td>
<td><tt class="docutils literal"><span class="pre">school?code='edu'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">filter(p)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">school.filter(code='edu')</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">^</span> <span class="pre">x</span></tt></td>
<td rowspan="2">unique values of <em>x</em> as
it runs over <em>flow</em></td>
<td><tt class="docutils literal"><span class="pre">school^campus</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">distinct(flow{x})</span></tt></td>
<td><tt class="docutils literal"><span class="pre">distinct(school{campus})</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">{x,...}</span></tt></td>
<td rowspan="2">select output columns
<em>x</em>, ... for <em>flow</em></td>
<td><tt class="docutils literal"><span class="pre">school{code,name}</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">select(x,...)</span></tt></td>
<td><tt class="docutils literal"><span class="pre">school.select(code,name)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">sort(x,...)</span></tt></td>
<td>reorder records in <em>flow</em>
by <em>x</em>, ...</td>
<td><tt class="docutils literal"><span class="pre">course.sort(credits-)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">limit(n)</span></tt></td>
<td>first <em>n</em> records from
<em>flow</em></td>
<td><tt class="docutils literal"><span class="pre">course.limit(10)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">limit(n,k)</span></tt></td>
<td><em>n</em> records from <em>flow</em>
starting from <em>k</em>-th</td>
<td><tt class="docutils literal"><span class="pre">course.limit(10,20)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">-&gt;</span> <span class="pre">xs</span></tt></td>
<td>traverse an ad-hoc link</td>
<td><tt class="docutils literal"><span class="pre">school.(campus</span> <span class="pre">-&gt;</span> <span class="pre">school)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">fork([x])</span></tt></td>
<td>traverse a
self-referential link</td>
<td><tt class="docutils literal"><span class="pre">course.fork(credits)</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="sieving">
<h3>Sieving<a class="headerlink" href="#sieving" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">?</span> <span class="pre">p</span></tt></dt>
<dd>Emit records from <tt class="xref py py-obj docutils literal"><span class="pre">flow</span></tt> that satisfy condition <tt class="xref py py-obj docutils literal"><span class="pre">p</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">filter(p)</span></tt></dt>
<dd>Emit records from the input flow that satisfy condition <tt class="xref py py-obj docutils literal"><span class="pre">p</span></tt>.</dd>
</dl>
<p>The condition is expected to be of Boolean type.  If the argument <tt class="xref py py-obj docutils literal"><span class="pre">p</span></tt>
is not Boolean, it is implicitly converted to Boolean (see <tt class="xref py py-obj docutils literal"><span class="pre">boolean()</span></tt>).</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school?campus='south'" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">?</span><span class="nb">campus</span><span class="o">=</span><span class="s">&#39;south&#39;</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="70%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>bus</td>
<td>School of Business</td>
<td>south</td>
</tr>
<tr><td>mus</td>
<td>School of Music &amp; Dance</td>
<td>south</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school.filter(campus='south')" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="nb">campus</span><span class="o">=</span><span class="s">&#39;south&#39;</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="70%" />
<col width="18%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>bus</td>
<td>School of Business</td>
<td>south</td>
</tr>
<tr><td>mus</td>
<td>School of Music &amp; Dance</td>
<td>south</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="projection">
<h3>Projection<a class="headerlink" href="#projection" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">^</span> <span class="pre">x</span></tt></dt>
<dd>Emit all unique values of <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> as it ranges over <tt class="xref py py-obj docutils literal"><span class="pre">flow</span></tt>.  <em>NULL</em>
values are ignored.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">^</span> <span class="pre">{x,...}</span></tt></dt>
<dd>Emit all unique values of the expressions <tt class="xref py py-obj docutils literal"><span class="pre">x,...</span></tt>.  <em>NULL</em> values
are ignored.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">distinct(flow{x,...})</span></tt></dt>
<dd>Emit all unique values of the output columns of <tt class="xref py py-obj docutils literal"><span class="pre">flow{x,...}</span></tt>.
<em>NULL</em> values are ignored.</dd>
</dl>
<p>The projection operation <tt class="xref py py-obj docutils literal"><span class="pre">flow</span> <span class="pre">^</span> <span class="pre">x</span></tt> creates a new naming scope, which
may contain the following names:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">flow</span></tt></dt>
<dd>If <tt class="xref py py-obj docutils literal"><span class="pre">flow</span></tt> is an identifier, then it is used to denote the plural
link associating each value of <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> with respective records from the
original flow.  It is called the complement link of the projection.
The symbol <tt class="xref py py-obj docutils literal"><span class="pre">^</span></tt> is an alias for a complement link and could be used
when <tt class="xref py py-obj docutils literal"><span class="pre">flow</span></tt> is not an identifier and so cannot be used as a name.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt></dt>
<dd>If <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is an identifier, then it refers to the value of <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>.
It is called the kernel of the projection.  When <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt> is not an
identifier, but an arbitrary expression, one may assign it a name
using in-place selector assignment syntax.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code,%20name,%20campus,%20count(department)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="nb">name</span><span class="p">,</span> <span class="nb">campus</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="47%" />
<col width="12%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
<th class="head">count(department)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>School of Art and Design</td>
<td>old</td>
<td>2</td>
</tr>
<tr><td>bus</td>
<td>School of Business</td>
<td>south</td>
<td>3</td>
</tr>
<tr><td>edu</td>
<td>College of Education</td>
<td>old</td>
<td>2</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school^campus%20{campus,%20count(school)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">^</span><span class="nb">campus</span> <span class="p">{</span><span class="nb">campus</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">school</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">campus</th>
<th class="head">count(school)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>north</td>
<td>1</td>
</tr>
<tr><td>old</td>
<td>4</td>
</tr>
<tr><td>south</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school^campus%20{*,%20count(^)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">^</span><span class="nb">campus</span> <span class="p">{</span><span class="o">*</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="o">^</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="43%" />
<col width="57%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">campus</th>
<th class="head">count(^)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>north</td>
<td>1</td>
</tr>
<tr><td>old</td>
<td>4</td>
</tr>
<tr><td>south</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/distinct(school{campus})%20{campus,%20count(school)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nf">distinct</span><span class="p">(</span><span class="nb">school</span><span class="p">{</span><span class="nb">campus</span><span class="p">})</span> <span class="p">{</span><span class="nb">campus</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">school</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="32%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">campus</th>
<th class="head">count(school)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>north</td>
<td>1</td>
</tr>
<tr><td>old</td>
<td>4</td>
</tr>
<tr><td>south</td>
<td>2</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school^{num_dept%20:=%20count(department)}%0A%20{num_dept,%20count(school)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">^</span><span class="p">{</span><span class="nb">num_dept</span> <span class="p">:=</span> <span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">)}</span>
 <span class="p">{</span><span class="nb">num_dept</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">school</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="62%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">num_dept</th>
<th class="head">count(school)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>0</td>
<td>2</td>
</tr>
<tr><td>2</td>
<td>2</td>
</tr>
<tr><td>3</td>
<td>1</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school^{campus%20:if_null%20'',%20count(department)}%0A%20{*,%20count(school)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">^</span><span class="p">{</span><span class="nb">campus</span> <span class="p">:</span><span class="nf">if_null</span> <span class="s">&#39;&#39;</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">)}</span>
 <span class="p">{</span><span class="o">*</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">school</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="38%" />
<col width="35%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">campus:if_null(&#8216;&#8217;)</th>
<th class="head">count(department)</th>
<th class="head">count(school)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td></td>
<td>0</td>
<td>2</td>
</tr>
<tr><td>north</td>
<td>4</td>
<td>1</td>
</tr>
<tr><td>old</td>
<td>2</td>
<td>2</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="selection">
<h3>Selection<a class="headerlink" href="#selection" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">{x,...}</span></tt></dt>
<dd>Define output columns in the input flow.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">flow{x,...}</span></tt></dt>
<dd>Define output columns in the given flow.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">select(x,...)</span></tt></dt>
<dd>Define output columns in the input flow.</dd>
</dl>
<p>The selector expression admits two forms of short-cut syntax:</p>
<dl class="docutils">
<dt><em>in-place assignment</em></dt>
<dd>If an element of a selector is an assignment expression,
the name defined by the assignment is added to the current scope.
Only unqualified attribute and reference assignments are allowed.</dd>
<dt><em>sorting decorators</em></dt>
<dd>If an element of a selector contains a sort order indicators,
the expression is used to reorder elements in the input flow.</dd>
</dl>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/{count(school),%20count(program),%20count(department)}" target="_new" class="htsql-link"><span class="o">/</span><span class="p">{</span><span class="nf">count</span><span class="p">(</span><span class="nb">school</span><span class="p">),</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">),</span> <span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="32%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">count(school)</th>
<th class="head">count(program)</th>
<th class="head">count(department)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>9</td>
<td>40</td>
<td>27</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/select(count(school),%20count(program),%20count(department))" target="_new" class="htsql-link"><span class="o">/</span><span class="nf">select</span><span class="p">(</span><span class="nf">count</span><span class="p">(</span><span class="nb">school</span><span class="p">),</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">),</span> <span class="nf">count</span><span class="p">(</span><span class="nb">department</span><span class="p">))</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="32%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">count(school)</th>
<th class="head">count(program)</th>
<th class="head">count(department)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>9</td>
<td>40</td>
<td>27</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code,%20count(program)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">count(program)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>3</td>
</tr>
<tr><td>bus</td>
<td>6</td>
</tr>
<tr><td>edu</td>
<td>7</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school.select(code,%20count(program))" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">.</span><span class="nf">select</span><span class="p">(</span><span class="nb">code</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">))</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">count(program)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>3</td>
</tr>
<tr><td>bus</td>
<td>6</td>
</tr>
<tr><td>edu</td>
<td>7</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code,%20count(program)-}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">)</span><span class="o">-</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">count(program)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>la</td>
<td>9</td>
</tr>
<tr><td>eng</td>
<td>8</td>
</tr>
<tr><td>edu</td>
<td>7</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code,%20num_prog%20:=%20count(program)}?num_prog&lt;4" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="nb">num_prog</span> <span class="p">:=</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">)}</span><span class="o">?</span><span class="nb">num_prog</span><span class="o">&lt;</span><span class="m">4</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">num_prog</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>3</td>
</tr>
<tr><td>mus</td>
<td>0</td>
</tr>
<tr><td>ph</td>
<td>1</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/department{code,%20$avg_credits%20:=%20avg(course.credits),%0A%20%20%20%20%20%20%20%20%20%20%20%20count(course?credits&gt;$avg_credits)}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">department</span><span class="p">{</span><span class="nb">code</span><span class="p">,</span> <span class="p">$</span><span class="nb">avg_credits</span> <span class="p">:=</span> <span class="nf">avg</span><span class="p">(</span><span class="nb">course</span><span class="p">.</span><span class="nb">credits</span><span class="p">),</span>
            <span class="nf">count</span><span class="p">(</span><span class="nb">course</span><span class="o">?</span><span class="nb">credits</span><span class="o">&gt;</span><span class="p">$</span><span class="nb">avg_credits</span><span class="p">)}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="23%" />
<col width="65%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">$avg_credits</th>
<th class="head">count(course?credits&gt;$avg_credits)</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>acc</td>
<td>3.5</td>
<td>3</td>
</tr>
<tr><td>arthis</td>
<td>3.5</td>
<td>6</td>
</tr>
<tr><td>astro</td>
<td>3.0</td>
<td>5</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="scope-operations">
<h2>Scope Operations<a class="headerlink" href="#scope-operations" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">define(x:=...)</span></tt></td>
<td>add names to the current
scope</td>
<td><tt class="docutils literal"><span class="pre">define(num_prog:=count(program))</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">where(expr,x:=...)</span></tt></td>
<td>evaluate an expression
with extra names in the
current scope</td>
<td><tt class="docutils literal"><span class="pre">count(course?credits&gt;$c)</span> <span class="pre">:where</span> <span class="pre">$c:=avg(course.credits)</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">&#64;</span> <span class="pre">x</span></tt></td>
<td>evaluate an expression in
the initial scope</td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">root()</span></tt></td>
<td>root scope</td>
<td>&nbsp;</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">this()</span></tt></td>
<td>current scope</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<div class="section" id="calculated-attributes">
<h3>Calculated Attributes<a class="headerlink" href="#calculated-attributes" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">define(x:=...)</span></tt></dt>
<dd>Add a calculated attribute to the current scope.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">where(expr,x:=...)</span></tt></dt>
<dd>Evaluate an expression in a current scope with a calculated
attribute.</dd>
</dl>
<p>These functions add calculated attributes and references to the current
scope.</p>
</div>
<div class="section" id="scopes">
<h3>Scopes<a class="headerlink" href="#scopes" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">&#64;</span> <span class="pre">x</span></tt></dt>
<dd>Reset to the initial scope.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">root()</span></tt></dt>
<dd>The root scope.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">this()</span></tt></dt>
<dd>The current scope.</dd>
</dl>
</div>
</div>
<div class="section" id="decorators">
<h2>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="36%" />
<col width="36%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
<th class="head">Example Input</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">as(x,title)</span></tt></td>
<td>set the column title</td>
<td><tt class="docutils literal"><span class="pre">count(program)</span> <span class="pre">:as</span> <span class="pre">'#</span> <span class="pre">of</span> <span class="pre">programs'</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">+</span></tt></td>
<td>indicate ascending order</td>
<td><tt class="docutils literal"><span class="pre">credits+</span></tt></td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">-</span></tt></td>
<td>indicate descending order</td>
<td><tt class="docutils literal"><span class="pre">credits-</span></tt></td>
</tr>
</tbody>
</table>
<div class="section" id="title">
<h3>Title<a class="headerlink" href="#title" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">as(x,title)</span></tt></dt>
<dd>Specifies the title of the output column.</dd>
</dl>
<p>The title could be either an identifier or a quoted literal.  This
function should be used only when specifying output columns using a
selection operator.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school{code%20:as%20ID,%20count(program)%20:as%20'%23%20of%20Programs'}" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">{</span><span class="nb">code</span> <span class="p">:</span><span class="nf">as</span> <span class="nb">ID</span><span class="p">,</span> <span class="nf">count</span><span class="p">(</span><span class="nb">program</span><span class="p">)</span> <span class="p">:</span><span class="nf">as</span> <span class="s">&#39;# of Programs&#39;</span><span class="p">}</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">ID</th>
<th class="head"># of Programs</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>art</td>
<td>3</td>
</tr>
<tr><td>bus</td>
<td>6</td>
</tr>
<tr><td>edu</td>
<td>7</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="direction-decorators">
<h3>Direction Decorators<a class="headerlink" href="#direction-decorators" title="Permalink to this headline">¶</a></h3>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">+</span></tt></dt>
<dd>Specifies ascending direction, <em>NULL</em> first.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">x</span> <span class="pre">-</span></tt></dt>
<dd>Specifies descending direction, <em>NULL</em> last.</dd>
</dl>
<p>This decorators should be used only on arguments of <tt class="xref py py-obj docutils literal"><span class="pre">sort()</span></tt> or in a
selection operator.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school.sort(campus%2B)" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="p">.</span><span class="nf">sort</span><span class="p">(</span><span class="nb">campus</span><span class="o">+</span><span class="p">)</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="74%" />
<col width="16%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">code</th>
<th class="head">name</th>
<th class="head">campus</th>
</tr>
</thead>
<tbody valign="top">
<tr><td>ph</td>
<td>Public Honorariums</td>
<td>—</td>
</tr>
<tr><td>sc</td>
<td>School of Continuing Studies</td>
<td>—</td>
</tr>
<tr><td>eng</td>
<td>School of Engineering</td>
<td>north</td>
</tr>
<tr class="htsql-cut"><td>…</td>
<td>…</td>
<td>…</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="section" id="formatters">
<h2>Formatters<a class="headerlink" href="#formatters" title="Permalink to this headline">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="45%" />
<col width="55%" />
</colgroup>
<thead valign="bottom">
<tr><th class="head">Function</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">/:html</span></tt></td>
<td>HTML tabular output</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">/:txt</span></tt></td>
<td>plain text tabular output</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">/:csv</span></tt></td>
<td>CSV (comma-separated
values) output</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">/:tsv</span></tt></td>
<td>TSV (tab-separated
values) output</td>
</tr>
<tr><td><tt class="xref py py-obj docutils literal"><span class="pre">/:json</span></tt></td>
<td>JSON-serialized output</td>
</tr>
</tbody>
</table>
<p>These functions specify the format of the output data.</p>
<div class="htsql-input container">
<div class="highlight-htsql"><div class="highlight"><pre><span class="htsql-toggle">[-]</span><a href="http://demo.htsql.org/school/:csv" target="_new" class="htsql-link"><span class="o">/</span><span class="nb">school</span><span class="o">/</span><span class="p">:</span><span class="nf">csv</span>
</a></pre></div></div>
</div>
<div class="htsql-output container">
<div class="highlight-text"><div class="highlight"><pre>code,name,campus
art,School of Art and Design,old
bus,School of Business,south
…
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Functions and Operators</a><ul>
<li><a class="reference internal" href="#logical-functions-and-operators">Logical Functions and Operators</a></li>
<li><a class="reference internal" href="#numeric-functions">Numeric Functions</a></li>
<li><a class="reference internal" href="#string-functions">String Functions</a></li>
<li><a class="reference internal" href="#date-time-functions">Date/Time Functions</a></li>
<li><a class="reference internal" href="#aggregate-functions">Aggregate Functions</a></li>
<li><a class="reference internal" href="#flow-operations">Flow Operations</a></li>
<li><a class="reference internal" href="#scope-operations">Scope Operations</a></li>
<li><a class="reference internal" href="#decorators">Decorators</a></li>
<li><a class="reference internal" href="#formatters">Formatters</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="types.html"
                        title="previous chapter">Data Types</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../admin/index.html"
                        title="next chapter">HTSQL Administration</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="../admin/index.html" title="HTSQL Administration"
             >next</a> |</li>
        <li class="right" >
          <a href="types.html" title="Data Types"
             >previous</a> |</li>
        <li><a href="../index.html">HTSQL v2.2.0c1 documentation</a> &raquo;</li>
          <li><a href="index.html" >HTSQL Reference</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2011 Prometheus Reserch, LLC; written by Clark C. Evans and Kirill Simonov.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>