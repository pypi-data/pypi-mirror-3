from pylab import *
from scipy import integrate
from pyrtm import rtm, settings

cfg = settings.default_config
cfg.update({'time':14})

def wl():
    sm = rtm.SMARTS(cfg).get()
    sb = rtm.SBdart(cfg).get()
    plot(*sm, label='smarts')
    plot(*sb, label='sbdart')
    print "config:\n\n%s\n" % "\n".join(["%s: %s" % (str(k).rjust(25), v) for k, v in cfg.items()])
    print "smarts says %f W/m^2" % integrate.trapz(sm[1], sm[0])
    print "sbdart says %f W/m^2" % integrate.trapz(sb[1], sb[0])
    legend()
    show()

def mag():
    sm = rtm.SMARTS(cfg)
    sb = rtm.SBdart(cfg)
    mags = {'smarts':[[],[]], 'sbdart':[[],[]]}
    for time in arange(10.5, 23.7+0.2, 0.2):
        smo = sm.get({'time': time})
        sbo = sb.get({'time': time})
        mags['smarts'][0].append(time)
        mags['smarts'][1].append(integrate.trapz(smo[1], smo[0]))
        mags['sbdart'][0].append(time)
        mags['sbdart'][1].append(integrate.trapz(sbo[1], sbo[0]))
        print "time %s - smarts: %s, sbdart: %s\n" % (time, mags['smarts'][1][-1], mags['sbdart'][1][-1])
    plot(*(mags['smarts']), label='smarts')
    plot(*(mags['sbdart']), label='sbdart')
    legend()
    show()


if __name__ == '__main__':
    import sys
    try:
        getattr(sys.modules[__name__], sys.argv[1])()
    except (IndexError, AttributeError, TypeError):
        print "usage: python report.py (%s)" % "|".join(["wl, mag"])
