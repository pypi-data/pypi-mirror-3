<div class="form" tal:define="title view/title | context/i18n:title | nothing" i18n:domain="ztfy.skin">
	<h1 tal:condition="title"><span class="light">::</span>&nbsp;&nbsp;<span tal:content="title" i18n:translate="" />&nbsp;&nbsp;<span class="light">::</span></h1>
	<fieldset tal:omit-tag="not:title">
		<legend tal:condition="view/legend | nothing" tal:content="view/legend" i18n:translate="" />
		<tal:var define="help view/help | nothing" condition="help">
			<div class="help" tal:define="help help/html:text" tal:content="structure help" />
		</tal:var>
		<script type="text/javascript">
			// <![CDATA[
			var submitted = false;

			function submitForm(form) {
				if (submitted) {
					return false;
				}
				if (typeof($) != 'undefined') {

					if ($.progressBar) {
						$.progressBar.submit(form);
					}

					var $button = $('DIV.buttons INPUT:first', $(form));
					if ($button.attr('type') == 'button') {
						$button.click();
						return false;
					}
				}
				submitted = true;
			}
			// ]]>
		</script>
		<form action="." method="post" enctype="multipart/form-data"
			  class="edit-form"
			  onsubmit="return submitForm(this);"
			  tal:attributes="method view/method;
							  enctype view/enctype;
							  acceptCharset view/acceptCharset;
							  accept view/accept;
							  action view/action;
							  name view/name;
							  id view/id">
			<div class="viewspace"
				 tal:attributes="class string:viewspace ${view/mode};">
				<h1 tal:condition="view/label|nothing"
					tal:content="view/label">Form Label</h1>
				<div class="required-info" tal:condition="view/widgets">
					<tal:if condition="python:view.mode != 'display'"><span class="required">*</span> &ndash; <span i18n:translate="">required</span></tal:if>
				</div>
				<div class="status"
					 tal:condition="view/status">
					<div class="summary" tal:content="view/status" i18n:translate="">Form status summary</div>
					<ul class="errors"
						tal:define="errors python:view.errors"
						tal:condition="errors">
						<li tal:repeat="error errors">
							<tal:if condition="error/widget">
								<span tal:replace="python:error.widget.label" />: 
							</tal:if>
							<span tal:replace="structure error/render">Error Type</span>
						</li>
					</ul>
				</div>
				<div class="widgets-prefix" tal:content="structure view/widgets_prefix | nothing" />
				<div class="widgets">
					<tal:loop repeat="widget view/widgets/values">
						<div id="" class="row"
							 tal:condition="python:widget.mode != 'hidden'"
							 tal:attributes="id string:${widget/id}-row">
							<div class="label">
								<a tal:define="description widget/field/description"
								   tal:condition="description"
								   class="hint" tal:attributes="id string:tip_${widget/name};
																title description;">?</a>
								<label tal:attributes="for widget/id">
									<span i18n:translate="" tal:content="widget/label">label</span>
									<span class="required" tal:condition="python:widget.required and (view.mode != 'display')">*</span>
								</label>
							</div>
							<div class="error" tal:define="error widget/error" tal:omit-tag="not:error">
								<span tal:condition="error" tal:replace="structure error/render">error</span>
								<div class="widget" tal:content="structure widget/render">
									<input type="text" size="24" value="" />
								</div>
							</div>
						</div>
						<input type="hidden" value=""
							   tal:condition="python:widget.mode == 'hidden'"
							   tal:replace="structure widget/render" />
					</tal:loop>
					<fieldset tal:condition="view/groups|nothing"
							  tal:repeat="view view/groups">
						<legend tal:condition="view/label" tal:content="view/label">Label</legend>
						<div class="status" tal:condition="view/widgets/errors">
							<div metal:use-macro="template/macros/errors" />
						</div>
						<div metal:use-macro="template/macros/widget-rows" />
					</fieldset>
				</div>
				<div class="widgets-suffix" tal:content="structure view/widgets_suffix | nothing" />
			</div>
			<tal:loop repeat="form view/subforms | nothing">
				<tal:var replace="structure form/render" />
			</tal:loop>
			<div id="tabforms" tal:condition="view/tabforms">
				<ul class="tabs">
					<li tal:repeat="form view/tabforms"
						tal:attributes="class python:form.widgets.errors and 'error' or ''">
						<a href="#" tal:content="form/tabLabel" i18n:translate="" />
					</li>
				</ul>
				<div class="panes">
					<div class="pane" tal:repeat="form view/tabforms"
						 tal:attributes="id string:tabform_${repeat/form/number}"
						 tal:content="structure form/render" />
				</div>
				<script type="text/javascript" tal:content="structure string:
					// <![CDATA[
					$$(document).ready(function() {
						$$('FORM[id=${view/id}] #tabforms UL.tabs').tabs('FORM[id=${view/id}] DIV.panes > DIV');
					});
					// ]]>
				"></script>
			</div>
			<div>
				<iframe name="progress" class="progress" frameborder="0" src="/@@progress.html"></iframe>
				<div class="buttons">
					<input tal:repeat="action view/actions/values"
						   tal:replace="structure action/render" />
				</div>
			</div>
		</form>
	</fieldset>
</div>