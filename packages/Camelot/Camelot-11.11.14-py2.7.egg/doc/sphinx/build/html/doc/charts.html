

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Charts &mdash; Camelot  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot  documentation" href="../index.html" />
    <link rel="up" title="Camelot Documentation" href="index.html" />
    <link rel="next" title="Document Management" href="documents.html" />
    <link rel="prev" title="Delegates" href="delegates.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2652891-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="documents.html" title="Document Management"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="delegates.html" title="Delegates"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="charts">
<span id="doc-charts"></span><h1>Charts<a class="headerlink" href="#charts" title="Permalink to this headline">¶</a></h1>
<p>To enable charts, <strong>Camelot</strong> is closely integrate with <a class="reference external" href="http://www.matplotlib.org">Matplotlib</a>,
one of the very high quality Python charting packages.</p>
<p>Often creating a chart involves gathering a lot of data, this needs to happen inside the model, to
free the GUI from such tasks.  Once the data is gathered, it is put into a container, this container
is then shipped to the gui thread, where the chart is put on the screen.</p>
<img alt="doc/../_static/editors/ChartEditor_editable.png" src="doc/../_static/editors/ChartEditor_editable.png" />
<div class="section" id="a-simple-plot">
<h2>A simple plot<a class="headerlink" href="#a-simple-plot" title="Permalink to this headline">¶</a></h2>
<p>As shown in the example below, creating a simple plot involves two things :</p>
<blockquote>
<div><ol class="arabic simple">
<li>Create a property that returns one of the chart containers, in this case
the <strong>PlotContainer</strong> is used.</li>
<li>Specify the delegate to be used to visualize the property, this should be
the <strong>ChartDelegate</strong></li>
</ol>
</div></blockquote>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">camelot.admin.object_admin</span> <span class="kn">import</span> <span class="n">ObjectAdmin</span>
<span class="kn">from</span> <span class="nn">camelot.view.controls</span> <span class="kn">import</span> <span class="n">delegates</span>
<span class="kn">from</span> <span class="nn">camelot.container.chartcontainer</span> <span class="kn">import</span> <span class="n">PlotContainer</span>

<span class="k">class</span> <span class="nc">Wave</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="mi">0</span>
      
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">chart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">math</span>
        <span class="n">x_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">/</span><span class="mf">100.0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">y_data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_data</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">PlotContainer</span><span class="p">(</span> <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span> <span class="p">)</span>
    
    <span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">ObjectAdmin</span><span class="p">):</span>
        <span class="n">form_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;amplitude&#39;</span><span class="p">,</span> <span class="s">&#39;phase&#39;</span><span class="p">,</span> <span class="s">&#39;chart&#39;</span><span class="p">]</span>
        <span class="n">field_attributes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">amplitude</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">delegate</span><span class="o">=</span><span class="n">delegates</span><span class="o">.</span><span class="n">FloatDelegate</span><span class="p">,</span>
                                                 <span class="n">editable</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                                <span class="n">phase</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">delegate</span><span class="o">=</span><span class="n">delegates</span><span class="o">.</span><span class="n">FloatDelegate</span><span class="p">,</span>
                                             <span class="n">editable</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                                <span class="n">chart</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">delegate</span><span class="o">=</span><span class="n">delegates</span><span class="o">.</span><span class="n">ChartDelegate</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<p>The <strong>PlotContainer</strong> object takes as its arguments, the same arguments that can be passed to the
matplotlib plot command.  The container stores all those arguments, and later passes them to the
plot command executed within the gui thread.</p>
<img alt="../_images/simple_plot.png" src="../_images/simple_plot.png" />
<p>The simpel chart containers map to their respective matplotlib command.  They include :</p>
<dl class="class">
<dt id="camelot.container.chartcontainer.PlotContainer">
<em class="property">class </em><tt class="descclassname">camelot.container.chartcontainer.</tt><tt class="descname">PlotContainer</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#PlotContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.PlotContainer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="class">
<dt id="camelot.container.chartcontainer.BarContainer">
<em class="property">class </em><tt class="descclassname">camelot.container.chartcontainer.</tt><tt class="descname">BarContainer</tt><big>(</big><em>*args</em>, <em>**kwargs</em><big>)</big><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#BarContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.BarContainer" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="advanced-plots">
<h2>Advanced Plots<a class="headerlink" href="#advanced-plots" title="Permalink to this headline">¶</a></h2>
<p>For more advanced plots, the <strong>AxesContainer</strong> class can be used.  The AxesContainer class can be
used as if it were a matplotlib Axes object.  But when a method on the AxesContainer is called it
will record the method call instead of creating a plot.  These method calls will then be replayed
by the gui to create the actual plot.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">camelot.admin.object_admin</span> <span class="kn">import</span> <span class="n">ObjectAdmin</span>
<span class="kn">from</span> <span class="nn">camelot.view.controls</span> <span class="kn">import</span> <span class="n">delegates</span>
<span class="kn">from</span> <span class="nn">camelot.container.chartcontainer</span> <span class="kn">import</span> <span class="n">AxesContainer</span>

<span class="k">class</span> <span class="nc">Wave</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
  
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">=</span> <span class="mi">1</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">phase</span> <span class="o">=</span> <span class="mf">2.89</span>
      
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">chart</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">math</span>
        <span class="n">axes</span> <span class="o">=</span> <span class="n">AxesContainer</span><span class="p">()</span>
        <span class="n">x_data</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span><span class="o">/</span><span class="mf">100.0</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">700</span><span class="p">,</span> <span class="mi">1</span><span class="p">)]</span>
        <span class="n">y_data</span> <span class="o">=</span> <span class="p">[</span><span class="bp">self</span><span class="o">.</span><span class="n">amplitude</span> <span class="o">*</span> <span class="n">math</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">x_data</span><span class="p">]</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span> <span class="n">x_data</span><span class="p">,</span> <span class="n">y_data</span> <span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span> <span class="bp">True</span> <span class="p">)</span>
        <span class="n">axes</span><span class="o">.</span><span class="n">axvspan</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="o">-</span><span class="mf">0.05</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">phase</span><span class="o">+</span><span class="mf">0.05</span><span class="p">,</span> <span class="n">facecolor</span><span class="o">=</span><span class="s">&#39;b&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">axes</span>
    
    <span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">ObjectAdmin</span><span class="p">):</span>
        <span class="n">form_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;amplitude&#39;</span><span class="p">,</span> <span class="s">&#39;phase&#39;</span><span class="p">,</span> <span class="s">&#39;chart&#39;</span><span class="p">]</span>
        <span class="n">field_attributes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">amplitude</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">delegate</span><span class="o">=</span><span class="n">delegates</span><span class="o">.</span><span class="n">FloatDelegate</span><span class="p">,</span>
                                                 <span class="n">editable</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                                <span class="n">phase</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">delegate</span><span class="o">=</span><span class="n">delegates</span><span class="o">.</span><span class="n">FloatDelegate</span><span class="p">,</span>
                                             <span class="n">editable</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span>
                                <span class="n">chart</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">delegate</span><span class="o">=</span><span class="n">delegates</span><span class="o">.</span><span class="n">ChartDelegate</span><span class="p">)</span> <span class="p">)</span>
</pre></div>
</div>
<img alt="../_images/advanced_plot.png" src="../_images/advanced_plot.png" />
</div>
<div class="section" id="more">
<h2>More<a class="headerlink" href="#more" title="Permalink to this headline">¶</a></h2>
<p>For more information on the various types of plots that can be created, have a look at the
<a class="reference external" href="http://matplotlib.sourceforge.net/gallery.html">Matplotlib Gallery</a>.</p>
<p>When the AxesContainer does not provide enough flexibility, for example when the plot needs to
manipulated through its object structure, more customization is possible by subclassing either
the AxesContainer or the FigureContainer :</p>
<dl class="class">
<dt id="camelot.container.chartcontainer.AxesContainer">
<em class="property">class </em><tt class="descclassname">camelot.container.chartcontainer.</tt><tt class="descname">AxesContainer</tt><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#AxesContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.AxesContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>A container that is able to generate a plot on a matplotlib axes.  Methods
can be called on this class as if it were a matplotlib Axes class.  All method
calls will be recorded.  Of course the methods won&#8217;t return matplotlib objects.
The set_auto_legend method can be used to turn legens on without the need for
matplotlib objects.</p>
<dl class="method">
<dt id="camelot.container.chartcontainer.AxesContainer.plot_on_axes">
<tt class="descname">plot_on_axes</tt><big>(</big><em>ax</em><big>)</big><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#AxesContainer.plot_on_axes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.AxesContainer.plot_on_axes" title="Permalink to this definition">¶</a></dt>
<dd><p>Replay the list of stored commands to the real Axes object</p>
</dd></dl>

<dl class="method">
<dt id="camelot.container.chartcontainer.AxesContainer.set_auto_legend">
<tt class="descname">set_auto_legend</tt><big>(</big><em>auto_legend</em><big>)</big><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#AxesContainer.set_auto_legend"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.AxesContainer.set_auto_legend" title="Permalink to this definition">¶</a></dt>
<dd><p>Specify if the container should try to put a legend on the 
plot.
:param auto_legend: True or False</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="camelot.container.chartcontainer.FigureContainer">
<em class="property">class </em><tt class="descclassname">camelot.container.chartcontainer.</tt><tt class="descname">FigureContainer</tt><big>(</big><em>axes</em><big>)</big><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#FigureContainer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.FigureContainer" title="Permalink to this definition">¶</a></dt>
<dd><p>A container that is able to plot itself on a matplotlib figure canvas.</p>
<p>Its &#8216;plot_on_figure&#8217; method will be called in the gui thread to fill the figure
canvas.</p>
<p>One figure canvas can contain multiple axes (=sub plots)</p>
<dl class="method">
<dt id="camelot.container.chartcontainer.FigureContainer.plot_on_figure">
<tt class="descname">plot_on_figure</tt><big>(</big><em>fig</em><big>)</big><a class="reference internal" href="../_modules/camelot/container/chartcontainer.html#FigureContainer.plot_on_figure"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.container.chartcontainer.FigureContainer.plot_on_figure" title="Permalink to this definition">¶</a></dt>
<dd><p>Draw all axes (sub plots) on a figure canvas</p>
</dd></dl>

</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Charts</a><ul>
<li><a class="reference internal" href="#a-simple-plot">A simple plot</a></li>
<li><a class="reference internal" href="#advanced-plots">Advanced Plots</a></li>
<li><a class="reference internal" href="#more">More</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="delegates.html"
                        title="previous chapter">Delegates</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="documents.html"
                        title="next chapter">Document Management</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/doc/charts.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="documents.html" title="Document Management"
             >next</a> |</li>
        <li class="right" >
          <a href="delegates.html" title="Delegates"
             >previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Camelot Documentation</a> &raquo;</li> 
      </ul>
    </div>

<br/>
<a href="http://example.com/my_article.html#disqus_thread">Comments</a>
<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */

  /** var disqus_developer = 1 **/

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://camelot.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=camelot">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2009 - 2011, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
<div class="footer">
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

<script type="text/javascript">
var disqus_shortname = 'camelot';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/camelot/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



  </body>
</html>