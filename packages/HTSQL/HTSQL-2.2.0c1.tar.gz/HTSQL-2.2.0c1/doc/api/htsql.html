

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>The htsql package &mdash; HTSQL v2.2.0c1 documentation</title>
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/htsqldoc.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.2.0c1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/htsqldoc.js"></script>
    <link rel="top" title="HTSQL v2.2.0c1 documentation" href="../index.html" />
    <link rel="up" title="HTSQL API" href="../api.html" />
    <link rel="next" title="The htsql.cmd package" href="htsql.cmd.html" />
    <link rel="prev" title="HTSQL API" href="../api.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="htsql.cmd.html" title="The htsql.cmd package"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../api.html" title="HTSQL API"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">HTSQL v2.2.0c1 documentation</a> &raquo;</li>
          <li><a href="../api.html" accesskey="U">HTSQL API</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="module-htsql">
<span id="the-htsql-package"></span><h1>The <a class="reference internal" href="#module-htsql" title="htsql"><tt class="xref py py-mod docutils literal"><span class="pre">htsql</span></tt></a> package<a class="headerlink" href="#module-htsql" title="Permalink to this headline">¶</a></h1>
<div class="section" id="htsql">
<h2><a class="reference internal" href="#module-htsql" title="htsql"><tt class="xref py py-mod docutils literal"><span class="pre">htsql</span></tt></a><a class="headerlink" href="#htsql" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">copyright:</th><td class="field-body">2006-2011, Prometheus Research, LLC</td>
</tr>
<tr class="field"><th class="field-name">authors:</th><td class="field-body">Clark C. Evans &lt;<a class="reference external" href="mailto:cce&#37;&#52;&#48;clarkevans&#46;com">cce<span>&#64;</span>clarkevans<span>&#46;</span>com</a>&gt;,
Kirill Simonov &lt;<a class="reference external" href="mailto:xi&#37;&#52;&#48;resolvent&#46;net">xi<span>&#64;</span>resolvent<span>&#46;</span>net</a>&gt;;
see <tt class="docutils literal"><span class="pre">AUTHORS</span></tt> file in the source distribution
for the full list of contributors</td>
</tr>
<tr class="field"><th class="field-name">license:</th><td class="field-body">See <tt class="docutils literal"><span class="pre">LICENSE</span></tt> file in the source distribution</td>
</tr>
</tbody>
</table>
<p>This package provides HTSQL, a query language for the accidental programmer.</p>
<p>HTSQL is implemented as a WSGI application.  To create an application, run:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">htsql</span> <span class="kn">import</span> <span class="n">HTSQL</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">app</span> <span class="o">=</span> <span class="n">HTSQL</span><span class="p">(</span><span class="n">db</span><span class="p">)</span>
</pre></div>
</div>
<p>where <tt class="xref py py-obj docutils literal"><span class="pre">db</span></tt> is a connection URI, a string of the form:</p>
<div class="highlight-python"><pre>engine://username:password@host:port/database</pre>
</div>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">engine</span></tt></dt>
<dd>The type of the database server; <tt class="docutils literal"><span class="pre">pgsql</span></tt> or <tt class="docutils literal"><span class="pre">sqlite</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">username:password</span></tt></dt>
<dd>Used for authentication; optional.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">host:port</span></tt></dt>
<dd>The server address; optional.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">database</span></tt></dt>
<dd>The name of the database; for SQLite, the path to the database file.</dd>
</dl>
<p>To execute a WSGI request, run</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">app</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">)</span>
</pre></div>
</div>
<dl class="class">
<dt id="htsql.HTSQLAddon">
<em class="property">class </em><tt class="descclassname">htsql.</tt><tt class="descname">HTSQLAddon</tt><big>(</big><em>app</em>, <em>attributes</em><big>)</big><a class="headerlink" href="#htsql.HTSQLAddon" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares the <a class="reference internal" href="#module-htsql" title="htsql"><tt class="xref py py-obj docutils literal"><span class="pre">htsql</span></tt></a> addon.</p>
</dd></dl>

</div>
<span class="target" id="module-htsql.adapter"></span><div class="section" id="htsql-adapter">
<h2><a class="reference internal" href="#module-htsql.adapter" title="htsql.adapter"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.adapter</span></tt></a><a class="headerlink" href="#htsql-adapter" title="Permalink to this headline">¶</a></h2>
<p>This module provides a mechanism for pluggable extensions.</p>
<dl class="class">
<dt id="htsql.adapter.Component">
<em class="property">class </em><tt class="descclassname">htsql.adapter.</tt><tt class="descname">Component</tt><a class="headerlink" href="#htsql.adapter.Component" title="Permalink to this definition">¶</a></dt>
<dd><p>A unit of extension in the HTSQL component architecture.</p>
<p><em>HTSQL component architecture</em> allows you to:</p>
<ul class="simple">
<li>declare <em>interfaces</em> that provide various services;</li>
<li>define <em>components</em> implementing the interfaces;</li>
<li>given an interface and a <em>dispatch key</em>, produce a component which
implements the interface for the given key.</li>
</ul>
<p>Three types of interfaces are supported: <em>utilities</em>, <em>adapters</em> and
<em>protocols</em>; see <a class="reference internal" href="#htsql.adapter.Utility" title="htsql.adapter.Utility"><tt class="xref py py-class docutils literal"><span class="pre">Utility</span></tt></a>, <a class="reference internal" href="#htsql.adapter.Adapter" title="htsql.adapter.Adapter"><tt class="xref py py-class docutils literal"><span class="pre">Adapter</span></tt></a>, <a class="reference internal" href="#htsql.adapter.Protocol" title="htsql.adapter.Protocol"><tt class="xref py py-class docutils literal"><span class="pre">Protocol</span></tt></a>
respectively.</p>
<dl class="staticmethod">
<dt id="htsql.adapter.Component.components">
<em class="property">static </em><tt class="descname">components</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.adapter.Component.components" title="Permalink to this definition">¶</a></dt>
<dd><p>Produce a list of all components of the active application.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.adapter.Component.implementations">
<em class="property">classmethod </em><tt class="descname">implementations</tt><big>(</big><em>interface</em><big>)</big><a class="headerlink" href="#htsql.adapter.Component.implementations" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a list of all components implementing the interface.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.adapter.Component.realize">
<em class="property">classmethod </em><tt class="descname">realize</tt><big>(</big><em>interface</em>, <em>dispatch_key</em><big>)</big><a class="headerlink" href="#htsql.adapter.Component.realize" title="Permalink to this definition">¶</a></dt>
<dd><p>Produces a realization of the interface for the given dispatch key.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.adapter.Component.implements">
<em class="property">classmethod </em><tt class="descname">implements</tt><big>(</big><em>component</em>, <em>interface</em><big>)</big><a class="headerlink" href="#htsql.adapter.Component.implements" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the component implements the interface.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.adapter.Component.dominates">
<em class="property">classmethod </em><tt class="descname">dominates</tt><big>(</big><em>component</em>, <em>other</em><big>)</big><a class="headerlink" href="#htsql.adapter.Component.dominates" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the component dominates another component.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.adapter.Component.matches">
<em class="property">classmethod </em><tt class="descname">matches</tt><big>(</big><em>component</em>, <em>dispatch_key</em><big>)</big><a class="headerlink" href="#htsql.adapter.Component.matches" title="Permalink to this definition">¶</a></dt>
<dd><p>Tests if the component matches a dispatch key.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.adapter.Component.dispatch">
<em class="property">classmethod </em><tt class="descname">dispatch</tt><big>(</big><em>interface</em>, <em>*args</em>, <em>**kwds</em><big>)</big><a class="headerlink" href="#htsql.adapter.Component.dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract the dispatch key from the constructor arguments.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="htsql.adapter.Realization">
<em class="property">class </em><tt class="descclassname">htsql.adapter.</tt><tt class="descname">Realization</tt><a class="headerlink" href="#htsql.adapter.Realization" title="Permalink to this definition">¶</a></dt>
<dd><p>A realization of an interface for some dispatch key.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.adapter.Utility">
<em class="property">class </em><tt class="descclassname">htsql.adapter.</tt><tt class="descname">Utility</tt><a class="headerlink" href="#htsql.adapter.Utility" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements utility interfaces.</p>
<p>An utility is an interface with a single realization.</p>
<p>This is an abstract class; to declare an utility interface, create
a subclass of <a class="reference internal" href="#htsql.adapter.Utility" title="htsql.adapter.Utility"><tt class="xref py py-class docutils literal"><span class="pre">Utility</span></tt></a>.  To add an implementation of the
interface, create a subclass of the interface class.</p>
<p>The following example declared an interface <tt class="docutils literal"><span class="pre">SayHello</span></tt> and provide
an implementation <tt class="docutils literal"><span class="pre">PrintHello</span></tt> that prints <tt class="docutils literal"><span class="pre">'Hello,</span> <span class="pre">World!</span></tt> to
the standard output:</p>
<div class="highlight-python"><pre>class SayHello(Utility):
    def __call__(self):
        raise NotImplementedError("interface is not implemented")

class PrintHello(SayHello):
    def __call__(self):
        print "Hello, World!"

def hello():
    hello = SayHello()
    hello()

&gt;&gt;&gt; hello()
Hello, World!</pre>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.adapter.Adapter">
<em class="property">class </em><tt class="descclassname">htsql.adapter.</tt><tt class="descname">Adapter</tt><a class="headerlink" href="#htsql.adapter.Adapter" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements adapter interfaces.</p>
<p>An adapter interface provides mechanism for polymorphic dispatch
based on the types of the arguments.</p>
<p>This is an abstract class; to declare an adapter interface, create
a subclass of <a class="reference internal" href="#htsql.adapter.Adapter" title="htsql.adapter.Adapter"><tt class="xref py py-class docutils literal"><span class="pre">Adapter</span></tt></a> and indicate the most generic type
signature of the polymorphic arguments using function <a class="reference internal" href="#htsql.adapter.adapts" title="htsql.adapter.adapts"><tt class="xref py py-func docutils literal"><span class="pre">adapts()</span></tt></a>.</p>
<p>To add an implementation of an adapter interface, create a subclass
of the interface class and indicate the matching type signatures
using functions <a class="reference internal" href="#htsql.adapter.adapts" title="htsql.adapter.adapts"><tt class="xref py py-func docutils literal"><span class="pre">adapts()</span></tt></a>, <a class="reference internal" href="#htsql.adapter.adapts_many" title="htsql.adapter.adapts_many"><tt class="xref py py-func docutils literal"><span class="pre">adapts_many()</span></tt></a>, or
<a class="reference internal" href="#htsql.adapter.adapts_none" title="htsql.adapter.adapts_none"><tt class="xref py py-func docutils literal"><span class="pre">adapts_none()</span></tt></a>.</p>
<p>Class attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">types</span></tt> (a list of type signatures)</dt>
<dd>List of signatures that the component matches.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">arity</span></tt> (an integer)</dt>
<dd>Number of polymorphic arguments.</dd>
</dl>
<p>The following example declares an adapter interface <tt class="docutils literal"><span class="pre">Format</span></tt>
and implements it for several data types:</p>
<div class="highlight-python"><pre>class Format(Adapter):
    adapts(object)
    def __init__(self, value):
        self.value = value
    def __call__(self):
        # The default implementation.
        return str(self.value)

class FormatString(Format):
    adapts(str)
    def __call__(self):
        # Display alphanumeric values unquoted, the others quoted.
        if self.value.isalnum():
            return self.value
        else:
            return repr(self.value)

class FormatList(Format):
    adapts(list)
    def __call__(self):
        # Apply `format` to the list elements.
        return "[%s]" % ",".join(format(item) for item in self.value)

def format(value):
    format = Format(value)
    return format()

&gt;&gt;&gt; print format(123)
123
&gt;&gt;&gt; print format("ABC")
ABC
&gt;&gt;&gt; print format("Hello, World!")
'Hello, World!'
&gt;&gt;&gt; print format([123, "ABC", "Hello, World!"])
[123, ABC, 'Hello, World!']</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="htsql.adapter.adapts">
<tt class="descclassname">htsql.adapter.</tt><tt class="descname">adapts</tt><big>(</big><em>*type_vector</em><big>)</big><a class="headerlink" href="#htsql.adapter.adapts" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the adapter signature.</p>
<p>The component matches the specified or any more specific
signature.</p>
<p>Use it in the namespace of the component, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">DoSmth</span><span class="p">(</span><span class="n">Adapter</span><span class="p">):</span>

    <span class="n">adapts</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="htsql.adapter.adapts_none">
<tt class="descclassname">htsql.adapter.</tt><tt class="descname">adapts_none</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.adapter.adapts_none" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates that the adapter does not match any signatures.</p>
<p>Use it in the namespace of the adapter, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">DoSmth</span><span class="p">(</span><span class="n">Adapter</span><span class="p">):</span>

    <span class="n">adapts_none</span><span class="p">()</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="htsql.adapter.adapts_many">
<tt class="descclassname">htsql.adapter.</tt><tt class="descname">adapts_many</tt><big>(</big><em>*type_vectors</em><big>)</big><a class="headerlink" href="#htsql.adapter.adapts_many" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies signatures of the adapter.</p>
<p>The component matches any of the specified signatures as well
all more specific signatures.</p>
<p>Use it in the namespace of the adapter, for example:</p>
<div class="highlight-python"><pre>class DoSmth(Adapter):

    adapts_many((T11, T12, ...),
                (T21, T22, ...),
                ...)</pre>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.adapter.Protocol">
<em class="property">class </em><tt class="descclassname">htsql.adapter.</tt><tt class="descname">Protocol</tt><a class="headerlink" href="#htsql.adapter.Protocol" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements protocol interfaces.</p>
<p>A protocol interface provides mechanism for name-based dispatch.</p>
<p>This is an abstract class; to declare a protocol interface, create
a subclass of <a class="reference internal" href="#htsql.adapter.Protocol" title="htsql.adapter.Protocol"><tt class="xref py py-class docutils literal"><span class="pre">Protocol</span></tt></a>.</p>
<p>To add an implementation of a protocol interface, create a subclass
of the interface class and specify its name using function <a class="reference internal" href="#htsql.adapter.named" title="htsql.adapter.named"><tt class="xref py py-func docutils literal"><span class="pre">named()</span></tt></a>.</p>
<p>Class attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">names</span></tt> (a list of strings)</dt>
<dd>List of names that the component matches.</dd>
</dl>
<p>The following example declares a protocol interface <tt class="docutils literal"><span class="pre">Weigh</span></tt>
and adds several implementations:</p>
<div class="highlight-python"><pre>class Weigh(Protocol):
    def __init__(self, name):
        self.name = name
    def __call__(self):
        # The default implementation.
        return -1

class WeighAlice(Weigh):
    named("Alice")
    def __call__(self):
        return 150

class WeighBob(Weigh):
    named("Bob")
    def __call__(self):
        return 160

def weigh(name):
    weigh = Weigh(name)
    return weigh()

&gt;&gt;&gt; weigh("Alice")
150
&gt;&gt;&gt; weigh("Bob")
160
&gt;&gt;&gt; weigh("Clark")
-1</pre>
</div>
</dd></dl>

<dl class="function">
<dt id="htsql.adapter.named">
<tt class="descclassname">htsql.adapter.</tt><tt class="descname">named</tt><big>(</big><em>*names</em><big>)</big><a class="headerlink" href="#htsql.adapter.named" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the names of the protocol.</p>
<p>Use it in the namespace of the protocol, for example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">DoSmth</span><span class="p">(</span><span class="n">Protocol</span><span class="p">):</span>

    <span class="n">named</span><span class="p">(</span><span class="s">&quot;...&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.adapter.ComponentRegistry">
<em class="property">class </em><tt class="descclassname">htsql.adapter.</tt><tt class="descname">ComponentRegistry</tt><a class="headerlink" href="#htsql.adapter.ComponentRegistry" title="Permalink to this definition">¶</a></dt>
<dd><p>Contains cached components and realizations.</p>
</dd></dl>

</div>
<span class="target" id="module-htsql.addon"></span><div class="section" id="htsql-addon">
<h2><a class="reference internal" href="#module-htsql.addon" title="htsql.addon"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.addon</span></tt></a><a class="headerlink" href="#htsql-addon" title="Permalink to this headline">¶</a></h2>
<p>This module declares HTSQL addons.</p>
<dl class="class">
<dt id="htsql.addon.Addon">
<em class="property">class </em><tt class="descclassname">htsql.addon.</tt><tt class="descname">Addon</tt><big>(</big><em>app</em>, <em>attributes</em><big>)</big><a class="headerlink" href="#htsql.addon.Addon" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements an addon for HTSQL applications.</p>
<p>This is an abstract class; to add a new addon, create a subclass
of <a class="reference internal" href="#htsql.addon.Addon" title="htsql.addon.Addon"><tt class="xref py py-class docutils literal"><span class="pre">Addon</span></tt></a>.</p>
<dl class="classmethod">
<dt id="htsql.addon.Addon.get_hint">
<em class="property">classmethod </em><tt class="descname">get_hint</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.addon.Addon.get_hint" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a short one-line description of the addon.</p>
</dd></dl>

<dl class="classmethod">
<dt id="htsql.addon.Addon.get_help">
<em class="property">classmethod </em><tt class="descname">get_help</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.addon.Addon.get_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a long description of the addon.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-htsql.application"></span><div class="section" id="htsql-application">
<h2><a class="reference internal" href="#module-htsql.application" title="htsql.application"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.application</span></tt></a><a class="headerlink" href="#htsql-application" title="Permalink to this headline">¶</a></h2>
<p>This module implements an HTSQL application.</p>
<dl class="class">
<dt id="htsql.application.Application">
<em class="property">class </em><tt class="descclassname">htsql.application.</tt><tt class="descname">Application</tt><big>(</big><em>db</em>, <em>*extensions</em><big>)</big><a class="headerlink" href="#htsql.application.Application" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements an HTSQL application.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">db</span></tt></dt>
<dd>The connection URI.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">extensions</span></tt></dt>
<dd>List of addons activated with the application.</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-htsql.connect"></span><div class="section" id="htsql-connect">
<h2><a class="reference internal" href="#module-htsql.connect" title="htsql.connect"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.connect</span></tt></a><a class="headerlink" href="#htsql-connect" title="Permalink to this headline">¶</a></h2>
<p>This module declares the database connection adapter.</p>
<dl class="exception">
<dt id="htsql.connect.DBError">
<em class="property">exception </em><tt class="descclassname">htsql.connect.</tt><tt class="descname">DBError</tt><big>(</big><em>message</em><big>)</big><a class="headerlink" href="#htsql.connect.DBError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised when a database error occurred.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">message</span></tt> (a string)</dt>
<dd>The error message.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.connect.ErrorGuard">
<em class="property">class </em><tt class="descclassname">htsql.connect.</tt><tt class="descname">ErrorGuard</tt><a class="headerlink" href="#htsql.connect.ErrorGuard" title="Permalink to this definition">¶</a></dt>
<dd><p>Guards against DBAPI exception.</p>
<p>This class converts DBAPI exceptions to <a class="reference internal" href="#htsql.connect.DBError" title="htsql.connect.DBError"><tt class="xref py py-exc docutils literal"><span class="pre">DBError</span></tt></a>.  It is designed
to be used in a <tt class="docutils literal"><span class="pre">with</span></tt> clause.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">connect</span> <span class="o">=</span> <span class="n">Connect</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="k">with</span> <span class="n">ErrorGuard</span><span class="p">():</span>
        <span class="n">connection</span> <span class="o">=</span> <span class="n">connect</span><span class="o">.</span><span class="n">open_connection</span><span class="p">()</span>
        <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
        <span class="o">...</span>
<span class="k">except</span> <span class="n">DBError</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.connect.ConnectionProxy">
<em class="property">class </em><tt class="descclassname">htsql.connect.</tt><tt class="descname">ConnectionProxy</tt><big>(</big><em>connection</em>, <em>guard</em><big>)</big><a class="headerlink" href="#htsql.connect.ConnectionProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a DBAPI connection object.</p>
<p>The proxy supports common DBAPI methods by passing them to
the connection object.  Any exceptions raised when the executing
DBAPI methods are converted to <a class="reference internal" href="#htsql.connect.DBError" title="htsql.connect.DBError"><tt class="xref py py-exc docutils literal"><span class="pre">DBError</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">connection</span></tt></dt>
<dd>A raw DBAPI connection object.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">guard</span></tt> (<a class="reference internal" href="#htsql.connect.ErrorGuard" title="htsql.connect.ErrorGuard"><tt class="xref py py-class docutils literal"><span class="pre">ErrorGuard</span></tt></a>)</dt>
<dd>A DBAPI exception guard.</dd>
</dl>
<dl class="method">
<dt id="htsql.connect.ConnectionProxy.cursor">
<tt class="descname">cursor</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.ConnectionProxy.cursor" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a database cursor.</p>
<p>This method actually produces a <a class="reference internal" href="#htsql.connect.CursorProxy" title="htsql.connect.CursorProxy"><tt class="xref py py-class docutils literal"><span class="pre">CursorProxy</span></tt></a> instance.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.ConnectionProxy.commit">
<tt class="descname">commit</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.ConnectionProxy.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Commit the current transaction.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.ConnectionProxy.rollback">
<tt class="descname">rollback</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.ConnectionProxy.rollback" title="Permalink to this definition">¶</a></dt>
<dd><p>Rollback the current transaction.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.ConnectionProxy.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.ConnectionProxy.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the connection.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="htsql.connect.CursorProxy">
<em class="property">class </em><tt class="descclassname">htsql.connect.</tt><tt class="descname">CursorProxy</tt><big>(</big><em>cursor</em>, <em>guard</em><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Wraps a DBAPI cursor object.</p>
<p>The proxy supports common DBAPI methods by passing them to
the cursor object.  Any exceptions raised when the executing
DBAPI methods are converted to <a class="reference internal" href="#htsql.connect.DBError" title="htsql.connect.DBError"><tt class="xref py py-exc docutils literal"><span class="pre">DBError</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">cursor</span></tt></dt>
<dd>A raw DBAPI cursor object.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">guard</span></tt> (<a class="reference internal" href="#htsql.connect.ErrorGuard" title="htsql.connect.ErrorGuard"><tt class="xref py py-class docutils literal"><span class="pre">ErrorGuard</span></tt></a>)</dt>
<dd>A DBAPI exception guard.</dd>
</dl>
<dl class="attribute">
<dt id="htsql.connect.CursorProxy.description">
<tt class="descname">description</tt><a class="headerlink" href="#htsql.connect.CursorProxy.description" title="Permalink to this definition">¶</a></dt>
<dd><p>The format of the result rows.</p>
</dd></dl>

<dl class="attribute">
<dt id="htsql.connect.CursorProxy.rowcount">
<tt class="descname">rowcount</tt><a class="headerlink" href="#htsql.connect.CursorProxy.rowcount" title="Permalink to this definition">¶</a></dt>
<dd><p>The number of rows produced or affected by the last statement.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.CursorProxy.execute">
<tt class="descname">execute</tt><big>(</big><em>statement</em>, <em>*parameters</em><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy.execute" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute one SQL statement.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.CursorProxy.executemany">
<tt class="descname">executemany</tt><big>(</big><em>statement</em>, <em>*parameters</em><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy.executemany" title="Permalink to this definition">¶</a></dt>
<dd><p>Execute an SQL statement against all parameters.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.CursorProxy.fetchone">
<tt class="descname">fetchone</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy.fetchone" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the next row of the result.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.CursorProxy.fetchmany">
<tt class="descname">fetchmany</tt><big>(</big><em>*size</em><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy.fetchmany" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch the next set of rows of the result.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.CursorProxy.fetchall">
<tt class="descname">fetchall</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy.fetchall" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetch all remaining rows of the result.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.connect.CursorProxy.close">
<tt class="descname">close</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.CursorProxy.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Close the cursor.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="htsql.connect.Connect">
<em class="property">class </em><tt class="descclassname">htsql.connect.</tt><tt class="descname">Connect</tt><big>(</big><em>with_autocommit=False</em><big>)</big><a class="headerlink" href="#htsql.connect.Connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares the connection interface.</p>
<p>The connection interface is a utility to open database connections.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">connect</span> <span class="o">=</span> <span class="n">Connect</span><span class="p">()</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">connection</span> <span class="o">=</span> <span class="n">connect</span><span class="p">()</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">cursor</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>
    <span class="o">...</span>
<span class="k">except</span> <span class="n">DBError</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<dl class="method">
<dt id="htsql.connect.Connect.open">
<tt class="descname">open</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.connect.Connect.open" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a raw DBAPI connection object.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">with_autocommit</span></tt> (Boolean)</dt>
<dd>If set, the connection is opened in the autocommit mode.</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-htsql.context"></span><div class="section" id="htsql-context">
<h2><a class="reference internal" href="#module-htsql.context" title="htsql.context"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.context</span></tt></a><a class="headerlink" href="#htsql-context" title="Permalink to this headline">¶</a></h2>
<p>This module keeps the active HTSQL application in a thread-local variable.</p>
<p>This module exports one global variable:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">context</span></tt> (<a class="reference internal" href="#htsql.context.ThreadContext" title="htsql.context.ThreadContext"><tt class="xref py py-class docutils literal"><span class="pre">ThreadContext</span></tt></a>)</dt>
<dd>A thread-local variable that holds the active application.</dd>
</dl>
<dl class="class">
<dt id="htsql.context.ThreadContext">
<em class="property">class </em><tt class="descclassname">htsql.context.</tt><tt class="descname">ThreadContext</tt><a class="headerlink" href="#htsql.context.ThreadContext" title="Permalink to this definition">¶</a></dt>
<dd><p>Keeps the active HTSQL application.</p>
<dl class="attribute">
<dt id="htsql.context.ThreadContext.app">
<tt class="descname">app</tt><a class="headerlink" href="#htsql.context.ThreadContext.app" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the active HTSQL application.</p>
<p>This property never returns <tt class="xref docutils literal"><span class="pre">None</span></tt>; when there is no active
application, it raises an exception.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-htsql.domain"></span><div class="section" id="htsql-domain">
<h2><a class="reference internal" href="#module-htsql.domain" title="htsql.domain"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.domain</span></tt></a><a class="headerlink" href="#htsql-domain" title="Permalink to this headline">¶</a></h2>
<p>This module defines HTSQL domains.</p>
<dl class="class">
<dt id="htsql.domain.Domain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">Domain</tt><a class="headerlink" href="#htsql.domain.Domain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an HTSQL domain (data type).</p>
<p>A domain indicates the type of an object.  Most HTSQL domains correspond
to SQL data types; some domains are special and used when the actual
SQL data type is unknown or nonsensical.</p>
<p>A value of a specific domain could be represented in two forms:</p>
<ul class="simple">
<li>as an HTSQL literal;</li>
<li>as a native Python object.</li>
</ul>
<p>Methods <a class="reference internal" href="#htsql.domain.Domain.parse" title="htsql.domain.Domain.parse"><tt class="xref py py-meth docutils literal"><span class="pre">parse()</span></tt></a> and <a class="reference internal" href="#htsql.domain.Domain.dump" title="htsql.domain.Domain.dump"><tt class="xref py py-meth docutils literal"><span class="pre">dump()</span></tt></a> translate values from one form
to the other.</p>
<dl class="method">
<dt id="htsql.domain.Domain.parse">
<tt class="descname">parse</tt><big>(</big><em>data</em><big>)</big><a class="headerlink" href="#htsql.domain.Domain.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts an HTSQL literal to a native Python object.</p>
<p>Raises <tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> if the literal is not in a valid format.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">data</span></tt> (a Unicode string or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>An HTSQL literal representing a value of the given domain.</dd>
</dl>
<p>Returns a native Python object representing the same value.</p>
</dd></dl>

<dl class="method">
<dt id="htsql.domain.Domain.dump">
<tt class="descname">dump</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#htsql.domain.Domain.dump" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts a native Python object to an HTSQL literal.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">value</span></tt> (acceptable types depend on the domain)</dt>
<dd>A native Python object representing a value of the given domain.</dd>
</dl>
<p>Returns an HTSQL literal representing the same value.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="htsql.domain.VoidDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">VoidDomain</tt><a class="headerlink" href="#htsql.domain.VoidDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a domain without any valid values.</p>
<p>This domain is assigned to objects when the domain is structurally
required, but does not have any semantics.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.UntypedDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">UntypedDomain</tt><a class="headerlink" href="#htsql.domain.UntypedDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an unknown type.</p>
<p>This domain is assigned to HTSQL literals temporarily until the actual
domain could be derived from the context.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.TupleDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">TupleDomain</tt><a class="headerlink" href="#htsql.domain.TupleDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a table domain.</p>
<p>This domain is assigned to table expressions.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.BooleanDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">BooleanDomain</tt><a class="headerlink" href="#htsql.domain.BooleanDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents Boolean data type.</p>
<p>Valid literal values: <tt class="docutils literal"><span class="pre">true</span></tt>, <tt class="docutils literal"><span class="pre">false</span></tt>.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">bool</span></tt> objects.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.NumberDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">NumberDomain</tt><a class="headerlink" href="#htsql.domain.NumberDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a numeric data type.</p>
<p>This is an abstract data type, see <a class="reference internal" href="#htsql.domain.IntegerDomain" title="htsql.domain.IntegerDomain"><tt class="xref py py-class docutils literal"><span class="pre">IntegerDomain</span></tt></a>,
<a class="reference internal" href="#htsql.domain.FloatDomain" title="htsql.domain.FloatDomain"><tt class="xref py py-class docutils literal"><span class="pre">FloatDomain</span></tt></a>, <a class="reference internal" href="#htsql.domain.DecimalDomain" title="htsql.domain.DecimalDomain"><tt class="xref py py-class docutils literal"><span class="pre">DecimalDomain</span></tt></a> for concrete subtypes.</p>
<p>Class attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_exact</span></tt> (Boolean)</dt>
<dd>Indicates whether the domain represents exact values.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">radix</span></tt> (<tt class="docutils literal"><span class="pre">2</span></tt> or <tt class="docutils literal"><span class="pre">10</span></tt>)</dt>
<dd>Indicates whether the values are stored in binary or decimal form.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.IntegerDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">IntegerDomain</tt><big>(</big><em>size=None</em><big>)</big><a class="headerlink" href="#htsql.domain.IntegerDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a binary integer data type.</p>
<p>Valid literal values: integers (in base 2) with an optional sign.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">int</span></tt> or <tt class="xref py py-obj docutils literal"><span class="pre">long</span></tt> objects.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">size</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>Number of bits used to store a value; <tt class="xref docutils literal"><span class="pre">None</span></tt> if not known.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.FloatDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">FloatDomain</tt><big>(</big><em>size=None</em><big>)</big><a class="headerlink" href="#htsql.domain.FloatDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an IEEE 754 float data type.</p>
<p>Valid literal values: floating-point numbers in decimal or scientific
format.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">float</span></tt> objects.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">size</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>Number of bits used to store a value; <tt class="xref docutils literal"><span class="pre">None</span></tt> if not known.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.DecimalDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">DecimalDomain</tt><big>(</big><em>precision=None</em>, <em>scale=None</em><big>)</big><a class="headerlink" href="#htsql.domain.DecimalDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an exact decimal data type.</p>
<p>Valid literal values: floating-point numbers in decimal or scientific
format.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">decimal.Decimal</span></tt> objects.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">precision</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>Number of significant digits; <tt class="xref docutils literal"><span class="pre">None</span></tt> if infinite or not known.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">scale</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>Number of significant digits in the fractional part; zero for
integers, <tt class="xref docutils literal"><span class="pre">None</span></tt> if infinite or not known.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.StringDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">StringDomain</tt><big>(</big><em>length=None</em>, <em>is_varying=True</em><big>)</big><a class="headerlink" href="#htsql.domain.StringDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a string data type.</p>
<p>Valid literal values: all literal values.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">unicode</span></tt> objects; the <tt class="xref py py-obj docutils literal"><span class="pre">NUL</span></tt> character is not allowed.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">length</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>The maximum length of the value; <tt class="xref docutils literal"><span class="pre">None</span></tt> if infinite or not known.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_varying</span></tt> (Boolean)</dt>
<dd>Indicates whether values are fixed-length or variable-length.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.EnumDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">EnumDomain</tt><big>(</big><em>labels</em><big>)</big><a class="headerlink" href="#htsql.domain.EnumDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an enumeration data type.</p>
<p>An enumeration domain has a predefined set of valid string values.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">labels</span></tt> (a list of Unicode strings)</dt>
<dd>List of valid values.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.DateDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">DateDomain</tt><a class="headerlink" href="#htsql.domain.DateDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a date data type.</p>
<p>Valid literal values: valid date values in the form <tt class="xref py py-obj docutils literal"><span class="pre">YYYY-MM-DD</span></tt>.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">datetime.date</span></tt> objects.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.TimeDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">TimeDomain</tt><a class="headerlink" href="#htsql.domain.TimeDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a time data type.</p>
<p>Valid literal values: valid time values in the form <tt class="xref py py-obj docutils literal"><span class="pre">HH:MM[:SS[.SSSSSS]]</span></tt>.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">datetime.time</span></tt> objects.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.DateTimeDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">DateTimeDomain</tt><a class="headerlink" href="#htsql.domain.DateTimeDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a date and time data type.</p>
<p>Valid literal values: valid date and time values in the form
<tt class="xref py py-obj docutils literal"><span class="pre">YYYY-MM-DD</span> <span class="pre">HH:MM[:SS[.SSSSSS]]</span></tt>.</p>
<p>Valid native values: <tt class="xref py py-obj docutils literal"><span class="pre">datetime.datetime</span></tt> objects.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.domain.OpaqueDomain">
<em class="property">class </em><tt class="descclassname">htsql.domain.</tt><tt class="descname">OpaqueDomain</tt><a class="headerlink" href="#htsql.domain.OpaqueDomain" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an unsupported SQL data type.</p>
<p>Note: this is the only SQL domain with values that cannot be serialized
using <tt class="xref py py-meth docutils literal"><span class="pre">dump()</span></tt>.</p>
</dd></dl>

</div>
<span class="target" id="module-htsql.entity"></span><div class="section" id="htsql-entity">
<h2><a class="reference internal" href="#module-htsql.entity" title="htsql.entity"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.entity</span></tt></a><a class="headerlink" href="#htsql-entity" title="Permalink to this headline">¶</a></h2>
<p>This module implements the HTSQL catalog and catalog entities.</p>
<dl class="class">
<dt id="htsql.entity.Join">
<em class="property">class </em><tt class="descclassname">htsql.entity.</tt><tt class="descname">Join</tt><big>(</big><em>origin</em>, <em>target</em>, <em>origin_columns</em>, <em>target_columns</em>, <em>is_expanding</em>, <em>is_contracting</em>, <em>equality_vector</em><big>)</big><a class="headerlink" href="#htsql.entity.Join" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a join condition between two tables.</p>
<p>This is an abstract case class with two subclasses: <a class="reference internal" href="#htsql.entity.DirectJoin" title="htsql.entity.DirectJoin"><tt class="xref py py-class docutils literal"><span class="pre">DirectJoin</span></tt></a>
and <a class="reference internal" href="#htsql.entity.ReverseJoin" title="htsql.entity.ReverseJoin"><tt class="xref py py-class docutils literal"><span class="pre">ReverseJoin</span></tt></a>.</p>
<p>Class attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_direct</span></tt> (Boolean)</dt>
<dd>Indicates that the join follows a foreign key
(set for an instance of <a class="reference internal" href="#htsql.entity.DirectJoin" title="htsql.entity.DirectJoin"><tt class="xref py py-class docutils literal"><span class="pre">DirectJoin</span></tt></a>).</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_reverse</span></tt> (Boolean)</dt>
<dd>Indicates that the join follows the opposite direction
to a foreign key (set for an instance of <a class="reference internal" href="#htsql.entity.ReverseJoin" title="htsql.entity.ReverseJoin"><tt class="xref py py-class docutils literal"><span class="pre">ReverseJoin</span></tt></a>).</dd>
</dl>
<p>Attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">origin</span></tt> (<tt class="xref py py-class docutils literal"><span class="pre">TableEntity</span></tt>)</dt>
<dd>The origin table of the join.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">target</span></tt> (<tt class="xref py py-class docutils literal"><span class="pre">TableEntity</span></tt>)</dt>
<dd>The target table of the join.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_expanding</span></tt> (Boolean)</dt>
<dd>Indicates that for each row of the origin table there is
at least one row of the target table that satisfies
the join condition.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_contracting</span></tt> (Boolean)</dt>
<dd>Indicates that for each row of the origin table there is
no more than one row of the target table that satisfies
the join condition.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.entity.DirectJoin">
<em class="property">class </em><tt class="descclassname">htsql.entity.</tt><tt class="descname">DirectJoin</tt><big>(</big><em>foreign_key</em><big>)</big><a class="headerlink" href="#htsql.entity.DirectJoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a join condition corresponding to a foreign key.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">foreign_key</span></tt> (<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyEntity</span></tt>)</dt>
<dd>The foreign key that generates the join condition.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.entity.ReverseJoin">
<em class="property">class </em><tt class="descclassname">htsql.entity.</tt><tt class="descname">ReverseJoin</tt><big>(</big><em>foreign_key</em><big>)</big><a class="headerlink" href="#htsql.entity.ReverseJoin" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents a join condition that joins tables in the opposite direction
to some foreign key.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">foreign_key</span></tt> (<tt class="xref py py-class docutils literal"><span class="pre">ForeignKeyEntity</span></tt>)</dt>
<dd>The foreign key that generates the join condition.</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-htsql.error"></span><div class="section" id="htsql-error">
<h2><a class="reference internal" href="#module-htsql.error" title="htsql.error"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.error</span></tt></a><a class="headerlink" href="#htsql-error" title="Permalink to this headline">¶</a></h2>
<p>This module implements generic HTSQL exceptions.</p>
<dl class="exception">
<dt id="htsql.error.HTTPError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">HTTPError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.HTTPError" title="Permalink to this definition">¶</a></dt>
<dd><p>An error associated with an HTSQL query.</p>
<p>An instance of <a class="reference internal" href="#htsql.error.HTTPError" title="htsql.error.HTTPError"><tt class="xref py py-class docutils literal"><span class="pre">HTTPError</span></tt></a> contains a pointer to an HTSQL
expression that caused the error.  The traceback produced by the exception
includes the original HTSQL query and a pointer to the erroneous
expression.</p>
<p>An instance of <a class="reference internal" href="#htsql.error.HTTPError" title="htsql.error.HTTPError"><tt class="xref py py-class docutils literal"><span class="pre">HTTPError</span></tt></a> could also serve as a simple WSGI
application generating an appropriate HTTP error code and displaying
the error message.</p>
<p>This is an abstract exception class.  To implement a concrete exception,
add a subclass of <a class="reference internal" href="#htsql.error.HTTPError" title="htsql.error.HTTPError"><tt class="xref py py-class docutils literal"><span class="pre">HTTPError</span></tt></a> and override the following class
attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">code</span></tt></dt>
<dd>The HTTP status line.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">kind</span></tt></dt>
<dd>The description of the error class.</dd>
</dl>
<p>The constructor of <a class="reference internal" href="#htsql.error.HTTPError" title="htsql.error.HTTPError"><tt class="xref py py-class docutils literal"><span class="pre">HTTPError</span></tt></a> accepts the following parameters:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">detail</span></tt> (a string)</dt>
<dd>The description of the error.</dd>
</dl>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.BadRequestError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">BadRequestError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.BadRequestError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents <tt class="docutils literal"><span class="pre">400</span> <span class="pre">Bad</span> <span class="pre">Request</span></tt>.</p>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.ForbiddenError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">ForbiddenError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.ForbiddenError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents <tt class="docutils literal"><span class="pre">403</span> <span class="pre">Forbidden</span></tt>.</p>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.NotFoundError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">NotFoundError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.NotFoundError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents <tt class="docutils literal"><span class="pre">404</span> <span class="pre">Not</span> <span class="pre">Found</span></tt>.</p>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.ConflictError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">ConflictError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.ConflictError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents <tt class="docutils literal"><span class="pre">409</span> <span class="pre">Conflict</span></tt>.</p>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.InternalServerError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">InternalServerError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.InternalServerError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents <tt class="docutils literal"><span class="pre">500</span> <span class="pre">Internal</span> <span class="pre">Server</span> <span class="pre">Error</span></tt>.</p>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.NotImplementedError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">NotImplementedError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.NotImplementedError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents <tt class="docutils literal"><span class="pre">501</span> <span class="pre">Not</span> <span class="pre">Implemented</span></tt>.</p>
</dd></dl>

<dl class="exception">
<dt id="htsql.error.InvalidSyntaxError">
<em class="property">exception </em><tt class="descclassname">htsql.error.</tt><tt class="descname">InvalidSyntaxError</tt><big>(</big><em>detail</em><big>)</big><a class="headerlink" href="#htsql.error.InvalidSyntaxError" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents an invalid syntax error.</p>
<p>This exception is raised by the scanner when it cannot tokenize the query,
or by the parser when it finds an unexpected token.</p>
</dd></dl>

</div>
<span class="target" id="module-htsql.introspect"></span><div class="section" id="htsql-introspect">
<h2><a class="reference internal" href="#module-htsql.introspect" title="htsql.introspect"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.introspect</span></tt></a><a class="headerlink" href="#htsql-introspect" title="Permalink to this headline">¶</a></h2>
<p>This module declares the database introspector adapter.</p>
<dl class="class">
<dt id="htsql.introspect.Introspect">
<em class="property">class </em><tt class="descclassname">htsql.introspect.</tt><tt class="descname">Introspect</tt><a class="headerlink" href="#htsql.introspect.Introspect" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares the introspection interface.</p>
<p>An introspector analyzes the database meta-data and generates
an HTSQL catalog.</p>
</dd></dl>

</div>
<span class="target" id="module-htsql.mark"></span><div class="section" id="htsql-mark">
<h2><a class="reference internal" href="#module-htsql.mark" title="htsql.mark"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.mark</span></tt></a><a class="headerlink" href="#htsql-mark" title="Permalink to this headline">¶</a></h2>
<p>This module implements a <a class="reference internal" href="#htsql.mark.Mark" title="htsql.mark.Mark"><tt class="xref py py-class docutils literal"><span class="pre">Mark</span></tt></a> object.</p>
<dl class="class">
<dt id="htsql.mark.Mark">
<em class="property">class </em><tt class="descclassname">htsql.mark.</tt><tt class="descname">Mark</tt><big>(</big><em>input</em>, <em>start</em>, <em>end</em><big>)</big><a class="headerlink" href="#htsql.mark.Mark" title="Permalink to this definition">¶</a></dt>
<dd><p>A slice of an HTSQL query.</p>
<p>In the process of translation of an HTSQL query to SQL, intermediary nodes
of different kinds are generated.  Most of the nodes have a <tt class="xref py py-obj docutils literal"><span class="pre">mark</span></tt>
attribute that points to the original HTSQL expression from which the
node was derived.</p>
<p>Note that a <a class="reference internal" href="#htsql.mark.Mark" title="htsql.mark.Mark"><tt class="xref py py-class docutils literal"><span class="pre">Mark</span></tt></a> object should only be used for presentational
purposes such as error reporting.  There is no guarantee that the slice
<tt class="docutils literal"><span class="pre">mark.value[mark.start:mark.end]</span></tt> would represent a valid HTSQL
expression.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">input</span></tt> (a Unicode string)</dt>
<dd>The HTSQL query.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">start</span></tt> (an integer)</dt>
<dd>The beginning of the slice.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">end</span></tt> (an integer)</dt>
<dd>The end of the slice.</dd>
</dl>
<dl class="classmethod">
<dt id="htsql.mark.Mark.union">
<em class="property">classmethod </em><tt class="descname">union</tt><big>(</big><em>*nodes</em><big>)</big><a class="headerlink" href="#htsql.mark.Mark.union" title="Permalink to this definition">¶</a></dt>
<dd><p>Generates a new <a class="reference internal" href="#htsql.mark.Mark" title="htsql.mark.Mark"><tt class="xref py py-class docutils literal"><span class="pre">Mark</span></tt></a> object from a collection of separate
marks.  The returned mark will cover all the given marks.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">nodes</span></tt> (a list)</dt>
<dd>A list of objects having a <tt class="xref py py-obj docutils literal"><span class="pre">mark</span></tt> attribute.  The list may
also include <tt class="xref docutils literal"><span class="pre">None</span></tt>.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="htsql.mark.Mark.excerpt">
<tt class="descname">excerpt</tt><big>(</big><big>)</big><a class="headerlink" href="#htsql.mark.Mark.excerpt" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of lines that consists an except of the original
query with <tt class="docutils literal"><span class="pre">^</span></tt> characters underlining the mark.</p>
</dd></dl>

</dd></dl>

</div>
<span class="target" id="module-htsql.request"></span><div class="section" id="htsql-request">
<h2><a class="reference internal" href="#module-htsql.request" title="htsql.request"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.request</span></tt></a><a class="headerlink" href="#htsql-request" title="Permalink to this headline">¶</a></h2>
<p>This module implements the request utility.</p>
</div>
<span class="target" id="module-htsql.split_sql"></span><div class="section" id="htsql-split-sql">
<h2><a class="reference internal" href="#module-htsql.split_sql" title="htsql.split_sql"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.split_sql</span></tt></a><a class="headerlink" href="#htsql-split-sql" title="Permalink to this headline">¶</a></h2>
<p>This module declares the SQL splitter adapter.</p>
<dl class="class">
<dt id="htsql.split_sql.SQLToken">
<em class="property">class </em><tt class="descclassname">htsql.split_sql.</tt><tt class="descname">SQLToken</tt><big>(</big><em>pattern</em>, <em>min_level=None</em>, <em>max_level=None</em>, <em>only_level=None</em>, <em>delta=0</em>, <em>is_junk=False</em>, <em>is_end=False</em><big>)</big><a class="headerlink" href="#htsql.split_sql.SQLToken" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares a regular expression pattern to be used by the SQL splitter.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">pattern</span></tt> (a string)</dt>
<dd>A regular expression in the verbose format.  The expression will
be compiled using <tt class="docutils literal"><span class="pre">re.X|re.S</span></tt> flags.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">min_level</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>The minimal level at which the pattern activates.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">max_level</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>The maximum level at which the pattern activates.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">only_level</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>The level at which the pattern activates.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">delta</span></tt> (an integer)</dt>
<dd>When a token is detected, change the current level by <tt class="xref py py-obj docutils literal"><span class="pre">delta</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_junk</span></tt> (Boolean)</dt>
<dd>Ignore the token value.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_end</span></tt> (Boolean)</dt>
<dd>If set, indicates that the splitter should stop when a token
is detected.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.split_sql.SplitSQL">
<em class="property">class </em><tt class="descclassname">htsql.split_sql.</tt><tt class="descname">SplitSQL</tt><a class="headerlink" href="#htsql.split_sql.SplitSQL" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares the SQL splitter interface.</p>
<p>A SQL splitter takes a string containing one or more SQL statements
separated by <tt class="docutils literal"><span class="pre">;</span></tt> and produces a sequence of SQL statements.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="n">split_sql</span> <span class="o">=</span> <span class="n">SplitSQL</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">sql</span> <span class="ow">in</span> <span class="n">split_sql</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
        <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">sql</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<p>This is an abstract utility.  To add a new splitter, create a subclass
of <a class="reference internal" href="#htsql.split_sql.SplitSQL" title="htsql.split_sql.SplitSQL"><tt class="xref py py-class docutils literal"><span class="pre">SplitSQL</span></tt></a> and override the class variable <tt class="xref py py-obj docutils literal"><span class="pre">tokens</span></tt>:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">tokens</span></tt> (a list of <a class="reference internal" href="#htsql.split_sql.SQLToken" title="htsql.split_sql.SQLToken"><tt class="xref py py-class docutils literal"><span class="pre">SQLToken</span></tt></a> instances)</dt>
<dd>The tokens recognized by the splitter.</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-htsql.util"></span><div class="section" id="htsql-util">
<h2><a class="reference internal" href="#module-htsql.util" title="htsql.util"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.util</span></tt></a><a class="headerlink" href="#htsql-util" title="Permalink to this headline">¶</a></h2>
<p>This module provides various hard-to-categorize utilities.</p>
<dl class="class">
<dt id="htsql.util.DB">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">DB</tt><big>(</big><em>engine</em>, <em>username</em>, <em>password</em>, <em>host</em>, <em>port</em>, <em>database</em>, <em>options=None</em><big>)</big><a class="headerlink" href="#htsql.util.DB" title="Permalink to this definition">¶</a></dt>
<dd><p>Represents parameters of a database connection.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">engine</span></tt></dt>
<dd>The type of the database server; currently supported are <tt class="docutils literal"><span class="pre">'pgsql'</span></tt>
and <tt class="docutils literal"><span class="pre">'sqlite'</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">username</span></tt></dt>
<dd>The user name used to authenticate; <tt class="xref docutils literal"><span class="pre">None</span></tt> to use the default.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">password</span></tt></dt>
<dd>The password used to authenticate; <tt class="xref docutils literal"><span class="pre">None</span></tt> to authenticate
without providing a password.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">host</span></tt></dt>
<dd>The host address; <tt class="xref docutils literal"><span class="pre">None</span></tt> to use the default.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">port</span></tt></dt>
<dd>The port number; <tt class="xref docutils literal"><span class="pre">None</span></tt> to use the default.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">database</span></tt></dt>
<dd><p class="first">The database name.</p>
<p class="last">For SQLite, the path to the database file.</p>
</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">options</span></tt></dt>
<dd><p class="first">A dictionary containing extra connection parameters.</p>
<p class="last">Currently ignored by all engines.</p>
</dd>
</dl>
<p>The parameters <tt class="xref py py-obj docutils literal"><span class="pre">username</span></tt>, <tt class="xref py py-obj docutils literal"><span class="pre">password</span></tt>, <tt class="xref py py-obj docutils literal"><span class="pre">host</span></tt>, <tt class="xref py py-obj docutils literal"><span class="pre">port</span></tt> are
ignored by the SQLite engine.</p>
<dl class="classmethod">
<dt id="htsql.util.DB.parse">
<em class="property">classmethod </em><tt class="descname">parse</tt><big>(</big><em>value</em><big>)</big><a class="headerlink" href="#htsql.util.DB.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a connection URI and returns a corresponding
<a class="reference internal" href="#htsql.util.DB" title="htsql.util.DB"><tt class="xref py py-class docutils literal"><span class="pre">DB</span></tt></a> instance.</p>
<p>A connection URI is a string of the form:</p>
<div class="highlight-python"><pre>engine://username:password@host:port/database?options</pre>
</div>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">engine</span></tt></dt>
<dd>The type of the database server; supported values are <tt class="docutils literal"><span class="pre">pgsql</span></tt>
and <tt class="docutils literal"><span class="pre">sqlite</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">username:password</span></tt></dt>
<dd>Used for authentication.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">host:port</span></tt></dt>
<dd>The server address.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">database</span></tt></dt>
<dd><p class="first">The name of the database.</p>
<p class="last">For SQLite, the path to the database file.</p>
</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">options</span></tt></dt>
<dd>A string of the form <tt class="docutils literal"><span class="pre">key=value&amp;...</span></tt> providing extra
connection parameters.</dd>
</dl>
<p>The parameters <tt class="xref py py-obj docutils literal"><span class="pre">engine</span></tt> and <tt class="xref py py-obj docutils literal"><span class="pre">database</span></tt> are required, all the other
parameters are optional.</p>
<p>If a parameter contains a character which cannot be represented
literally (such as <tt class="docutils literal"><span class="pre">:</span></tt>, <tt class="docutils literal"><span class="pre">/</span></tt>, <tt class="docutils literal"><span class="pre">&#64;</span></tt> or <tt class="docutils literal"><span class="pre">?</span></tt>), it should be
escaped using <tt class="docutils literal"><span class="pre">%</span></tt>-encoding.</p>
<p>If the connection URI is not in a valid format, <tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt>
is raised.</p>
<p>Besides a connection URI, the function also accepts instances
of <a class="reference internal" href="#htsql.util.DB" title="htsql.util.DB"><tt class="xref py py-class docutils literal"><span class="pre">DB</span></tt></a> and dictionaries.  An instance of <a class="reference internal" href="#htsql.util.DB" title="htsql.util.DB"><tt class="xref py py-class docutils literal"><span class="pre">DB</span></tt></a> is
returned as is.  A dictionary is assumed to contain connection
parameters.  The corresponding instance of <a class="reference internal" href="#htsql.util.DB" title="htsql.util.DB"><tt class="xref py py-class docutils literal"><span class="pre">DB</span></tt></a> is returned.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="htsql.util.maybe">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">maybe</tt><big>(</big><em>value_type</em><big>)</big><a class="headerlink" href="#htsql.util.maybe" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is either <tt class="xref docutils literal"><span class="pre">None</span></tt> or an instance of the specified type.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">maybe</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.oneof">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">oneof</tt><big>(</big><em>*value_types</em><big>)</big><a class="headerlink" href="#htsql.util.oneof" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is an instance of one of the specified types.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">oneof</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.listof">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">listof</tt><big>(</big><em>item_type</em><big>)</big><a class="headerlink" href="#htsql.util.listof" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is a list containing elements of the specified type.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">listof</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.setof">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">setof</tt><big>(</big><em>item_type</em><big>)</big><a class="headerlink" href="#htsql.util.setof" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is a set containing elements of the specified type.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">setof</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.tupleof">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">tupleof</tt><big>(</big><em>*item_types</em><big>)</big><a class="headerlink" href="#htsql.util.tupleof" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is a tuple with the fixed number of elements
of the specified types.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">tupleof</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">,</span> <span class="o">...</span><span class="p">,</span> <span class="n">TN</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.dictof">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">dictof</tt><big>(</big><em>key_type</em>, <em>item_type</em><big>)</big><a class="headerlink" href="#htsql.util.dictof" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is a dictionary with keys and elements of
the specified types.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">dictof</span><span class="p">(</span><span class="n">T1</span><span class="p">,</span> <span class="n">T2</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.subclassof">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">subclassof</tt><big>(</big><em>class_type</em><big>)</big><a class="headerlink" href="#htsql.util.subclassof" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if a value is a subclass of the specified class.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">subclassof</span><span class="p">(</span><span class="n">T</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.util.filelike">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">filelike</tt><a class="headerlink" href="#htsql.util.filelike" title="Permalink to this definition">¶</a></dt>
<dd><p>Checks if a value is a file or a file-like object.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">filelike</span><span class="p">())</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="htsql.util.aresubclasses">
<tt class="descclassname">htsql.util.</tt><tt class="descname">aresubclasses</tt><big>(</big><em>subclasses</em>, <em>superclasses</em><big>)</big><a class="headerlink" href="#htsql.util.aresubclasses" title="Permalink to this definition">¶</a></dt>
<dd><p>Takes two lists; checks if each element of the first list is
a subclass of the corresponding element in the second list.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">subclasses</span></tt> (a sequence of types)</dt>
<dd>A list of potential subclasses.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">superclasses</span></tt> (a sequence of types)</dt>
<dd>A list of potential superclasses.</dd>
</dl>
<p>Returns <tt class="xref docutils literal"><span class="pre">True</span></tt> if the check succeeds; <tt class="xref docutils literal"><span class="pre">False</span></tt> otherwise.</p>
</dd></dl>

<dl class="function">
<dt id="htsql.util.trim_doc">
<tt class="descclassname">htsql.util.</tt><tt class="descname">trim_doc</tt><big>(</big><em>doc</em><big>)</big><a class="headerlink" href="#htsql.util.trim_doc" title="Permalink to this definition">¶</a></dt>
<dd><p>Unindent and remove leading and trailing blank lines.</p>
<p>Useful for stripping indentation from docstrings.</p>
</dd></dl>

<dl class="function">
<dt id="htsql.util.toposort">
<tt class="descclassname">htsql.util.</tt><tt class="descname">toposort</tt><big>(</big><em>elements</em>, <em>order</em>, <em>is_total=False</em><big>)</big><a class="headerlink" href="#htsql.util.toposort" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements topological sort.</p>
<p>Takes a list of elements and a partial order relation.  Returns
the elements reordered to satisfy the given order.</p>
<p>A (finite) order relation is an acyclic directed graph.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">elements</span></tt> (a list)</dt>
<dd>A list of elements.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">order</span></tt> (a callable)</dt>
<dd>A function <tt class="docutils literal"><span class="pre">order(element)</span> <span class="pre">-&gt;</span> <span class="pre">[list</span> <span class="pre">of</span> <span class="pre">elements]</span></tt> representing
the partial order relation.  For an element <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>, <tt class="docutils literal"><span class="pre">order(x)</span></tt> must
produce a list of elements less than <tt class="xref py py-obj docutils literal"><span class="pre">x</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_total</span></tt> (Boolean)</dt>
<dd>Ensures that the given partial order is, in fact, a total order.</dd>
</dl>
<p>This function raises <tt class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></tt> if <tt class="xref py py-obj docutils literal"><span class="pre">order</span></tt> is not a valid
partial order (contains loops) or if <tt class="xref py py-obj docutils literal"><span class="pre">is_total</span></tt> is set and <tt class="xref py py-obj docutils literal"><span class="pre">order</span></tt>
is not a valid total order.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.util.Printable">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">Printable</tt><a class="headerlink" href="#htsql.util.Printable" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements default string representation.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.util.Clonable">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">Clonable</tt><a class="headerlink" href="#htsql.util.Clonable" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements an immutable clonable object.</p>
<dl class="method">
<dt id="htsql.util.Clonable.clone">
<tt class="descname">clone</tt><big>(</big><em>**replacements</em><big>)</big><a class="headerlink" href="#htsql.util.Clonable.clone" title="Permalink to this definition">¶</a></dt>
<dd><p>Clones the node assigning new values to selected attributes.</p>
<p>Returns a new object of the same type keeping original attributes
except those for which new values are specified.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">replacements</span></tt> (a dictionary)</dt>
<dd>A mapping: attribute -&gt; value containing new attribute values.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="htsql.util.Clonable.clone_to">
<tt class="descname">clone_to</tt><big>(</big><em>clone_type</em>, <em>**replacements</em><big>)</big><a class="headerlink" href="#htsql.util.Clonable.clone_to" title="Permalink to this definition">¶</a></dt>
<dd><p>Clones the node changing its type and assigning new values to
selected attributes.</p>
<p>Returns a new object of the specified type which keeps the
attributes of the original objects except those for which new
values are specified.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">clone_type</span></tt> (a type)</dt>
<dd>The type of the cloned node.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">replacements</span></tt> (a dictionary)</dt>
<dd>A mapping: attribute -&gt; value containing new attribute values.</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="htsql.util.Comparable">
<em class="property">class </em><tt class="descclassname">htsql.util.</tt><tt class="descname">Comparable</tt><big>(</big><em>equality_vector=None</em><big>)</big><a class="headerlink" href="#htsql.util.Comparable" title="Permalink to this definition">¶</a></dt>
<dd><p>Implements an object with by-value comparison semantics.</p>
<p>The constructor arguments:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">equality_vector</span></tt> (an immutable tuple or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>Encapsulates all essential attributes of an object.  Two instances
of <a class="reference internal" href="#htsql.util.Comparable" title="htsql.util.Comparable"><tt class="xref py py-class docutils literal"><span class="pre">Comparable</span></tt></a> are considered equal if they are of the
same type and their equality vectors are equal.  If <tt class="xref docutils literal"><span class="pre">None</span></tt>, the
object is to be compared by identity.</dd>
</dl>
<p>Other attributes:</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">hash</span></tt> (an integer)</dt>
<dd>The hash of the equality vector; if two objects are equal, their
hashes are also equal.</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="htsql.util.autoimport">
<tt class="descclassname">htsql.util.</tt><tt class="descname">autoimport</tt><big>(</big><em>name</em><big>)</big><a class="headerlink" href="#htsql.util.autoimport" title="Permalink to this definition">¶</a></dt>
<dd><p>Imports all modules (including subpackages) in a package.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">name</span></tt> (a string)</dt>
<dd>The package name.</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-htsql.validator"></span><div class="section" id="htsql-validator">
<h2><a class="reference internal" href="#module-htsql.validator" title="htsql.validator"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.validator</span></tt></a><a class="headerlink" href="#htsql-validator" title="Permalink to this headline">¶</a></h2>
<p>This module provides utilities for data validation and conversion.</p>
<dl class="class">
<dt id="htsql.validator.Validator">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">Validator</tt><a class="headerlink" href="#htsql.validator.Validator" title="Permalink to this definition">¶</a></dt>
<dd><p>Validators check if a given value conforms the specified format.</p>
<p>A validator acts as function that takes a value, checks if it conforms
the format, normalizes and returns the value.  Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">validator</span> <span class="o">=</span> <span class="n">IntVal</span><span class="p">()</span>
<span class="n">value</span> <span class="o">=</span> <span class="n">validator</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
</pre></div>
</div>
<p>If the value does not conform the format, <tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> is raised.</p>
<p>Attribute <tt class="xref py py-obj docutils literal"><span class="pre">hint</span></tt> gives a short textual description of the format.</p>
<p><a class="reference internal" href="#htsql.validator.Validator" title="htsql.validator.Validator"><tt class="xref py py-class docutils literal"><span class="pre">Validator</span></tt></a> is the base abstract class for validators.  Its
subclasses provide validators for specific formats.</p>
<p>To create a validator for a new format, create a subclass of
<a class="reference internal" href="#htsql.validator.Validator" title="htsql.validator.Validator"><tt class="xref py py-class docutils literal"><span class="pre">Validator</span></tt></a> and override the <tt class="xref py py-meth docutils literal"><span class="pre">__call__()</span></tt> method.  The
method should accept values of any type.  If the value does not conform
to the format, <tt class="xref py py-exc docutils literal"><span class="pre">ValueError</span></tt> should be raised; otherwise the value
should be normalized and returned.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">IntVal</span><span class="p">(</span><span class="n">Validator</span><span class="p">):</span>

    <span class="n">hint</span> <span class="o">=</span> <span class="s">&quot;an integer&quot;</span>

    <span class="k">def</span> <span class="nf">__call__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;an integer is expected&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>
</pre></div>
</div>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.AnyVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">AnyVal</tt><a class="headerlink" href="#htsql.validator.AnyVal" title="Permalink to this definition">¶</a></dt>
<dd><p>A no-op validator.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.StrVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">StrVal</tt><big>(</big><em>pattern=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.StrVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a UTF-8 encoded string.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">pattern</span></tt> (a regular expression or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>Checks if the string matches the given regular expression.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.WordVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">WordVal</tt><big>(</big><em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.WordVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a word.</p>
<p>A word is a string containing alphanumeric characters, dashes,
underscores, or spaces.  In the normalized form, underscores and
spaces are replaced with dashes.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.ChoiceVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">ChoiceVal</tt><big>(</big><em>choices</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.ChoiceVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value belongs to a specified set of string constants.</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">choices</span></tt> (a list of strings)</dt>
<dd>List of valid choices.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.BoolVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">BoolVal</tt><big>(</big><em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.BoolVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is Boolean.</p>
<p>Besides <tt class="xref docutils literal"><span class="pre">True</span></tt> and <tt class="xref docutils literal"><span class="pre">False</span></tt> constants, the following values
are accepted:</p>
<ul class="simple">
<li><tt class="docutils literal"><span class="pre">1</span></tt>, <tt class="docutils literal"><span class="pre">'1'</span></tt>, <tt class="docutils literal"><span class="pre">'true'</span></tt> (as <tt class="xref docutils literal"><span class="pre">True</span></tt>);</li>
<li><tt class="docutils literal"><span class="pre">0</span></tt>, <tt class="docutils literal"><span class="pre">''</span></tt>, <tt class="docutils literal"><span class="pre">'0'</span></tt>, <tt class="docutils literal"><span class="pre">'false'</span></tt> (as <tt class="xref docutils literal"><span class="pre">False</span></tt>).</li>
</ul>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.IntVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">IntVal</tt><big>(</big><em>min_bound=None</em>, <em>max_bound=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.IntVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is an integer.</p>
<p>Strings containing numeric characters are also accepted.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">min_bound</span></tt> (integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>If set, check that the value is greater or equal to <tt class="xref py py-obj docutils literal"><span class="pre">min_bound</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">max_bound</span></tt> (integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>If set, check that the value is less or equal to <tt class="xref py py-obj docutils literal"><span class="pre">max_bound</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.UIntVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">UIntVal</tt><big>(</big><em>max_bound=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.UIntVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a non-negative integer.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.PIntVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">PIntVal</tt><big>(</big><em>max_bound=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.PIntVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a positive integer.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.FloatVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">FloatVal</tt><big>(</big><em>min_bound=None</em>, <em>max_bound=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.FloatVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is an integer.</p>
<p>Strings representing numeric values in a decimal or a scientific format
are also accepted.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">min_bound</span></tt> (float or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>If set, check that the value is greater or equal to <tt class="xref py py-obj docutils literal"><span class="pre">min_bound</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">max_bound</span></tt> (float or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>If set, check that the value is less or equal to <tt class="xref py py-obj docutils literal"><span class="pre">max_bound</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.UFloatVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">UFloatVal</tt><big>(</big><em>max_bound=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.UFloatVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a non-negative float number.</p>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.SeqVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">SeqVal</tt><big>(</big><em>item_validator</em>, <em>length=None</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.SeqVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a list with each list item conforming
the specified format.</p>
<p>Also accepted are strings that agree with the following grammar:</p>
<div class="highlight-python"><pre>value ::= &lt;empty&gt; | item ( [,] value )*
item  ::= &lt;any non-space character or comma&gt;+
        | ['] ( &lt;any non-quote character&gt; | [']['] )* [']</pre>
</div>
<p>That is, the string must represent a comma-separated list of elements.
If an element contains no whitespace characters and no commas, it could
be represented literally; otherwise it should be quited with <tt class="docutils literal"><span class="pre">'</span></tt> and
any single quote character should be duplicated.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">item_validator</span></tt> (<a class="reference internal" href="#htsql.validator.Validator" title="htsql.validator.Validator"><tt class="xref py py-class docutils literal"><span class="pre">Validator</span></tt></a>)</dt>
<dd>Validator for the sequence elements.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">length</span></tt> (an integer or <tt class="xref docutils literal"><span class="pre">None</span></tt>)</dt>
<dd>If set, check that the length of the sequence is equal to <tt class="xref py py-obj docutils literal"><span class="pre">length</span></tt>.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.MapVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">MapVal</tt><big>(</big><em>key_validator</em>, <em>item_validator</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.MapVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a dictionary with keys and items conforming
the specified formats.</p>
<p>Also accepted are strings that agree with the following grammar:</p>
<div class="highlight-python"><pre>value     ::= &lt;empty&gt; | key ( [:] | [=] ) item ( [,] value )*
key, item ::= &lt;any non-space character except for [:], [=] or [,]&gt;+
            | ['] ( &lt;any non-quote character&gt; | [']['] )* [']</pre>
</div>
<p>That is, the string must represent a comma-separated list of <tt class="docutils literal"><span class="pre">key=item</span></tt>
pairs.  The key and the item could be quoted or unquoted.  An unquoted
element contains no whitespace, <tt class="docutils literal"><span class="pre">:</span></tt>, <tt class="docutils literal"><span class="pre">=</span></tt>, <tt class="docutils literal"><span class="pre">,</span></tt> characters.  A quoted
element is enclosed with <tt class="docutils literal"><span class="pre">'</span></tt> and has any single quote character
duplicated.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">key_validator</span></tt> (<a class="reference internal" href="#htsql.validator.Validator" title="htsql.validator.Validator"><tt class="xref py py-class docutils literal"><span class="pre">Validator</span></tt></a>)</dt>
<dd>Validator for the mapping keys.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">item_validator</span></tt> (<a class="reference internal" href="#htsql.validator.Validator" title="htsql.validator.Validator"><tt class="xref py py-class docutils literal"><span class="pre">Validator</span></tt></a>)</dt>
<dd>Validator for the mapping values.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.ClassVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">ClassVal</tt><big>(</big><em>class_type</em>, <em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.ClassVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is an instance of the specified class.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">class_type</span></tt></dt>
<dd>A class or a type object.</dd>
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

<dl class="class">
<dt id="htsql.validator.DBVal">
<em class="property">class </em><tt class="descclassname">htsql.validator.</tt><tt class="descname">DBVal</tt><big>(</big><em>is_nullable=False</em><big>)</big><a class="headerlink" href="#htsql.validator.DBVal" title="Permalink to this definition">¶</a></dt>
<dd><p>Verifies if the value is a connection URI.</p>
<p>For description of the connection URI format, see
<a class="reference internal" href="#htsql.util.DB.parse" title="htsql.util.DB.parse"><tt class="xref py py-meth docutils literal"><span class="pre">htsql.util.DB.parse()</span></tt></a>.</p>
<dl class="docutils">
<dt><tt class="xref py py-obj docutils literal"><span class="pre">is_nullable</span></tt> (Boolean)</dt>
<dd>If set, <tt class="xref docutils literal"><span class="pre">None</span></tt> values are permitted.</dd>
</dl>
</dd></dl>

</div>
<span class="target" id="module-htsql.wsgi"></span><div class="section" id="htsql-wsgi">
<h2><a class="reference internal" href="#module-htsql.wsgi" title="htsql.wsgi"><tt class="xref py py-mod docutils literal"><span class="pre">htsql.wsgi</span></tt></a><a class="headerlink" href="#htsql-wsgi" title="Permalink to this headline">¶</a></h2>
<p>This module provides a handler for WSGI requests.</p>
<dl class="class">
<dt id="htsql.wsgi.WSGI">
<em class="property">class </em><tt class="descclassname">htsql.wsgi.</tt><tt class="descname">WSGI</tt><a class="headerlink" href="#htsql.wsgi.WSGI" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares the WSGI interface.</p>
<p>The WSGI interface is a utility to handle WSGI requests.</p>
<p>Usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">wsgi</span> <span class="o">=</span> <span class="n">WSGI</span><span class="p">()</span>
<span class="n">body</span> <span class="o">=</span> <span class="n">wsgi</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">The <tt class="docutils literal"><span class="pre">htsql</span></tt> package</a><ul>
<li><a class="reference internal" href="#htsql"><tt class="docutils literal"><span class="pre">htsql</span></tt></a></li>
<li><a class="reference internal" href="#htsql-adapter"><tt class="docutils literal"><span class="pre">htsql.adapter</span></tt></a></li>
<li><a class="reference internal" href="#htsql-addon"><tt class="docutils literal"><span class="pre">htsql.addon</span></tt></a></li>
<li><a class="reference internal" href="#htsql-application"><tt class="docutils literal"><span class="pre">htsql.application</span></tt></a></li>
<li><a class="reference internal" href="#htsql-connect"><tt class="docutils literal"><span class="pre">htsql.connect</span></tt></a></li>
<li><a class="reference internal" href="#htsql-context"><tt class="docutils literal"><span class="pre">htsql.context</span></tt></a></li>
<li><a class="reference internal" href="#htsql-domain"><tt class="docutils literal"><span class="pre">htsql.domain</span></tt></a></li>
<li><a class="reference internal" href="#htsql-entity"><tt class="docutils literal"><span class="pre">htsql.entity</span></tt></a></li>
<li><a class="reference internal" href="#htsql-error"><tt class="docutils literal"><span class="pre">htsql.error</span></tt></a></li>
<li><a class="reference internal" href="#htsql-introspect"><tt class="docutils literal"><span class="pre">htsql.introspect</span></tt></a></li>
<li><a class="reference internal" href="#htsql-mark"><tt class="docutils literal"><span class="pre">htsql.mark</span></tt></a></li>
<li><a class="reference internal" href="#htsql-request"><tt class="docutils literal"><span class="pre">htsql.request</span></tt></a></li>
<li><a class="reference internal" href="#htsql-split-sql"><tt class="docutils literal"><span class="pre">htsql.split_sql</span></tt></a></li>
<li><a class="reference internal" href="#htsql-util"><tt class="docutils literal"><span class="pre">htsql.util</span></tt></a></li>
<li><a class="reference internal" href="#htsql-validator"><tt class="docutils literal"><span class="pre">htsql.validator</span></tt></a></li>
<li><a class="reference internal" href="#htsql-wsgi"><tt class="docutils literal"><span class="pre">htsql.wsgi</span></tt></a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../api.html"
                        title="previous chapter">HTSQL API</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="htsql.cmd.html"
                        title="next chapter">The <tt class="docutils literal"><span class="pre">htsql.cmd</span></tt> package</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="htsql.cmd.html" title="The htsql.cmd package"
             >next</a> |</li>
        <li class="right" >
          <a href="../api.html" title="HTSQL API"
             >previous</a> |</li>
        <li><a href="../index.html">HTSQL v2.2.0c1 documentation</a> &raquo;</li>
          <li><a href="../api.html" >HTSQL API</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2006-2011 Prometheus Reserch, LLC; written by Clark C. Evans and Kirill Simonov.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
    </div>
  </body>
</html>