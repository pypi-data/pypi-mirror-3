
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Quickstart &mdash; vcs v0.2.1.dev documentation</title>
    <link rel="stylesheet" href="_static/adctheme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.2.1.dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="vcs v0.2.1.dev documentation" href="index.html" />
    <link rel="next" title="Installation" href="installation.html" />
    <link rel="prev" title="Welcome to vcs’s documentation!" href="index.html" />
    <link media="only screen and (max-device-width: 480px)" href="_static/mobile.css" type="text/css" rel="stylesheet" /> 
  </head>
  <body>
<div id="docstitle">
	<p>vcs v0.2.1.dev documentation</p>
</div>
<div id="header">
	<div id="title"><h1>Quickstart</h1></div>
	<ul id="headerButtons">
		<li id="toc_button"><div class="headerButton"><a href="#">Table of Contents</a></div></li>
		<li id="page_buttons">
			<div class="headerButton"><a href="genindex.html" title="General Index" accesskey="I">index</a></div>
			<div class="headerButton"><a href="py-modindex.html" title="Python Module Index" >modules</a></div>
			<div class="headerButton"><a href="installation.html" title="Installation" accesskey="N">next</a></div>
			<div class="headerButton"><a href="index.html" title="Welcome to vcs’s documentation!" accesskey="P">previous</a></div>
		</li>
	</ul>
</div>

<div id="sphinxsidebar">
  <div class="sphinxsidebarwrapper">
	<ul><li class="toctree-l1"><a href="index.html">Main Page</a></li></ul>
	<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="usage/index.html">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="contribute.html">How to contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="alternatives.html">Alternatives</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a></li>
</ul>

      <h3>This Page</h3>
      <ul class="this-page-menu">
        <li><a href="_sources/quickstart.txt"
               rel="nofollow">Show Source</a></li>
      </ul>
    <div id="searchbox" style="display: none">
      
        <form class="search" action="search.html" method="get">
			<div class="search-wrapper">
			<span class="search-left"></span>
			<input class="prettysearch" type="text" name="q" size="18" />
			<span class="search-right">&nbsp;</span>
			</div>
          <input type="submit" value="Search" class="searchbutton" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </form>
        <p class="searchtip" style="font-size: 90%">
        Enter search terms or a module, class or function name.
        </p>
    </div>
    <script type="text/javascript">$('#searchbox').show(0);</script>
  </div>
</div>



    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="quickstart">
<span id="id1"></span><h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h1>
<p>Say you don&#8217;t want to install <tt class="docutils literal"><span class="pre">vcs</span></tt> or just want to begin with really fast
tutorial?  Not a problem, just follow sections below.</p>
<div class="section" id="prepare">
<h2>Prepare<a class="headerlink" href="#prepare" title="Permalink to this headline">¶</a></h2>
<p>We will try to show you how you can use <tt class="docutils literal"><span class="pre">vcs</span></tt> directly on repository.  But
hey, <tt class="docutils literal"><span class="pre">vcs</span></tt> is maintained within git <a class="reference external" href="https://github.com/codeinn/vcs">repository</a> already, so why not use it? Simply run
following commands in your shell</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nb">cd</span> /tmp
git clone git://github.com/codeinn/vcs.git
<span class="nb">cd </span>vcs
</pre></div>
</div>
<p>Now run your python interpreter of choice:</p>
<div class="highlight-python"><pre>$ python
&gt;&gt;&gt;</pre>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You may of course put your clone of <tt class="docutils literal"><span class="pre">vcs</span></tt> wherever you like but running
python shell <em>inside</em> of it would allow you to use just cloned version of
<tt class="docutils literal"><span class="pre">vcs</span></tt>.</p>
</div>
</div>
<div class="section" id="take-the-shortcut">
<h2>Take the shortcut<a class="headerlink" href="#take-the-shortcut" title="Permalink to this headline">¶</a></h2>
<p>There is no need to import everything from <tt class="docutils literal"><span class="pre">vcs</span></tt> - in fact, all you&#8217;d need is
to import <tt class="docutils literal"><span class="pre">get_repo</span></tt>, at least for now. Then, simply initialize repository
object by providing it&#8217;s type and path.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">vcs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># create repository representation at current dir</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">repo</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">get_repo</span><span class="p">(</span><span class="n">path</span><span class="o">=</span><span class="s">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">In above example we didn&#8217;t specify scm. We can provide as second argument to
the <tt class="docutils literal"><span class="pre">get_repo</span></tt> function, i.e. <tt class="docutils literal"><span class="pre">get_repo('',</span> <span class="pre">'hg')</span></tt>.</p>
</div>
</div>
<div class="section" id="basics">
<h2>Basics<a class="headerlink" href="#basics" title="Permalink to this headline">¶</a></h2>
<p>Let&#8217;s ask repo about the content...</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">root</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">()</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">root</span><span class="o">.</span><span class="n">nodes</span> <span class="c"># prints nodes of the RootNode</span>
<span class="go">[&lt;DirNode &#39;&#39;&gt;, &lt;DirNode &#39;docs&#39;&gt;, &lt;DirNode &#39;tests&#39;&gt;, # ... (chopped)</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># get 10th changeset</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chset</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">chset</span>
<span class="go">&lt;GitChangeset at 10:d955cd312c17&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># any backend would return latest changeset if revision is not given</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tip</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tip</span> <span class="o">==</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="s">&#39;tip&#39;</span><span class="p">)</span> <span class="c"># for git/mercurial backend &#39;tip&#39; is allowed</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tip</span> <span class="o">==</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span> <span class="c"># any backend allow revision to be None (default)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">tip</span><span class="o">.</span><span class="n">raw_id</span> <span class="o">==</span> <span class="n">repo</span><span class="o">.</span><span class="n">revisions</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Iterate repository</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">cs</span> <span class="ow">in</span> <span class="n">repo</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">cs</span>
<span class="gp">...</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">&lt;</span><span class="n">GitChangeset</span> <span class="n">at</span> <span class="mi">0</span><span class="p">:</span><span class="n">c1214f7e79e0</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">&lt;</span><span class="n">GitChangeset</span> <span class="n">at</span> <span class="mi">1</span><span class="p">:</span><span class="mi">38</span><span class="n">b5fe81f109</span><span class="o">&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="o">...</span>
</pre></div>
</div>
</div>
<div class="section" id="walking">
<h2>Walking<a class="headerlink" href="#walking" title="Permalink to this headline">¶</a></h2>
<p>Now let&#8217;s ask for nodes at revision faebbb751cc36c137127c50f57bcdb5f1c540013
(<a class="reference external" href="https://github.com/codeinn/vcs/commit/faebbb751cc36c137127c50f57bcdb5f1c540013">https://github.com/codeinn/vcs/commit/faebbb751cc36c137127c50f57bcdb5f1c540013</a>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">chset</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="s">&#39;faebbb751cc36c137127c50f57bcdb5f1c540013&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root</span> <span class="o">=</span> <span class="n">chset</span><span class="o">.</span><span class="n">root</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">root</span><span class="o">.</span><span class="n">dirs</span>
<span class="go">[&lt;DirNode &#39;docs&#39;&gt;, &lt;DirNode &#39;tests&#39;&gt;, &lt;DirNode &#39;vcs&#39;&gt;]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Fetch vcs directory</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">vcs</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="s">&#39;faebbb751cc36c137127c50f57bcdb5f1c540013&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;vcs&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">vcs</span><span class="o">.</span><span class="n">dirs</span>
<span class="go">[&lt;DirNode &#39;vcs/backends&#39;&gt;,</span>
<span class="go"> &lt;DirNode &#39;vcs/utils&#39;&gt;,</span>
<span class="go"> &lt;DirNode &#39;vcs/web&#39;&gt;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">backends_node</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">dirs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">backends_node</span><span class="o">.</span><span class="n">nodes</span>
<span class="go">[&lt;FileNode &#39;vcs/backends/__init__.py&#39;&gt;,</span>
<span class="go"> &lt;FileNode &#39;vcs/backends/base.py&#39;&gt;,</span>
<span class="go"> &lt;FileNode &#39;vcs/backends/git.py&#39;&gt;,</span>
<span class="go"> &lt;FileNode &#39;vcs/backends/hg.py&#39;&gt;]</span>

<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">backends_node</span><span class="o">.</span><span class="n">files</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()[:</span><span class="mi">4</span><span class="p">])</span>
<span class="go"># -*- coding: utf-8 -*-</span>
<span class="go">&quot;&quot;&quot;</span>
<span class="go">    vcs.backends</span>
<span class="go">    ~~~~~~~~~~~~</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-meta-data">
<h2>Getting meta data<a class="headerlink" href="#getting-meta-data" title="Permalink to this headline">¶</a></h2>
<p>Make <tt class="docutils literal"><span class="pre">vcs</span></tt> show us some meta information</p>
<div class="section" id="tags-and-branches">
<h3>Tags and branches<a class="headerlink" href="#tags-and-branches" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">repo</span><span class="o">.</span><span class="n">branches</span>
<span class="go">OrderedDict([(&#39;master&#39;, &#39;fe568b4081755c12abf6ba673ba777fc02a415f3&#39;)])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">tag</span><span class="p">,</span> <span class="n">raw_id</span> <span class="ow">in</span> <span class="n">repo</span><span class="o">.</span><span class="n">tags</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="n">tag</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">10</span><span class="p">),</span> <span class="s">&#39;|&#39;</span><span class="p">,</span> <span class="n">raw_id</span>
<span class="gp">...</span>
<span class="go"> v0.1.9 | 341d28f0eec5ddf0b6b77871e13c2bbd6bec685c</span>
<span class="go"> v0.1.8 | 74ebce002c088b8a5ecf40073db09375515ecd68</span>
<span class="go"> v0.1.7 | 4d78bf73b5c22c82b68f902f138f7881b4fffa2c</span>
<span class="go"> v0.1.6 | 0205cb3f44223fb3099d12a77a69c81b798772d9</span>
<span class="go"> v0.1.5 | 6c0ce52b229aa978889e91b38777f800e85f330b</span>
<span class="go"> v0.1.4 | 7d735150934cd7645ac3051903add952390324a5</span>
<span class="go"> v0.1.3 | 5a3a8fb005554692b16e21dee62bf02667d8dc3e</span>
<span class="go"> v0.1.2 | 0ba5f8a4660034ff25c0cac2a5baabf5d2791d63</span>
<span class="go">v0.1.11 | c60f01b77c42dce653d6b1d3b04689862c261929</span>
<span class="go">v0.1.10 | 10cddef6b794696066fb346434014f0a56810218</span>
<span class="go"> v0.1.1 | e6ea6d16e2f26250124a1f4b4fe37a912f9d86a0</span>
</pre></div>
</div>
</div>
<div class="section" id="give-me-a-file-finally">
<h3>Give me a file, finally!<a class="headerlink" href="#give-me-a-file-finally" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">vcs</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">repo</span> <span class="o">=</span> <span class="n">vcs</span><span class="o">.</span><span class="n">get_repo</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">chset</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="s">&#39;faebbb751cc36c137127c50f57bcdb5f1c540013&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">root</span> <span class="o">=</span> <span class="n">chset</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">backends</span> <span class="o">=</span> <span class="n">root</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;vcs/backends&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">backends</span><span class="o">.</span><span class="n">files</span>
<span class="go">[&lt;FileNode &#39;vcs/backends/__init__.py&#39;&gt;,</span>
<span class="go"> &lt;FileNode &#39;vcs/backends/base.py&#39;&gt;,</span>
<span class="go"> &lt;FileNode &#39;vcs/backends/git.py&#39;&gt;,</span>
<span class="go"> &lt;FileNode &#39;vcs/backends/hg.py&#39;&gt;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">backends</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;hg.py&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">name</span>
<span class="go">&#39;hg.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">path</span>
<span class="go">&#39;vcs/backends/hg.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">size</span>
<span class="go">28549</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">last_changeset</span>
<span class="go">&lt;GitChangeset at 412:faebbb751cc3&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">last_changeset</span><span class="o">.</span><span class="n">date</span>
<span class="go">datetime.datetime(2011, 2, 28, 23, 23, 5)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">last_changeset</span><span class="o">.</span><span class="n">message</span>
<span class="go">u&#39;fixed bug in get_changeset when 0 or None was passed&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">last_changeset</span><span class="o">.</span><span class="n">author</span>
<span class="go">u&#39;marcinkuzminski &lt;none@none&gt;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">mimetype</span>
<span class="go">&#39;text/x-python&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># Following would raise exception unless you have pygments installed</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">lexer</span>
<span class="go">&lt;pygments.lexers.PythonLexer&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">lexer_alias</span> <span class="c"># shortcut to get first of lexers&#39; available aliases</span>
<span class="go">&#39;python&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># wanna go back? why? oh, whatever...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">parent</span>
<span class="go">&lt;DirNode &#39;vcs/backends&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># is it cached? Hell yeah...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="ow">is</span> <span class="n">f</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;hg.py&#39;</span><span class="p">)</span> <span class="ow">is</span> <span class="n">chset</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;vcs/backends/hg.py&#39;</span><span class="p">)</span>
<span class="go">True</span>
</pre></div>
</div>
</div>
<div class="section" id="how-about-history">
<h3>How about history?<a class="headerlink" href="#how-about-history" title="Permalink to this headline">¶</a></h3>
<p>It is possible to retrieve changesets for which file node has been changed and
this is pretty damn simple. Let&#8217;s say we want to see history of the file located
at <tt class="docutils literal"><span class="pre">vcs/nodes.py</span></tt>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">()</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;vcs/nodes.py&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">cs</span> <span class="ow">in</span> <span class="n">f</span><span class="o">.</span><span class="n">history</span><span class="p">:</span>
<span class="gp">... </span>     <span class="k">print</span> <span class="n">cs</span>
<span class="gp">...</span>
<span class="go">&lt;GitChangeset at 440:40a2d5d71b75&gt;</span>
<span class="go">&lt;GitChangeset at 438:d1f898326327&gt;</span>
<span class="go">&lt;GitChangeset at 420:162a36830c23&gt;</span>
<span class="go">&lt;GitChangeset at 345:c994f0de03b2&gt;</span>
<span class="go">&lt;GitChangeset at 340:5d3d4d2c262e&gt;</span>
<span class="go">&lt;GitChangeset at 334:4d4278a6390e&gt;</span>
<span class="go">&lt;GitChangeset at 298:00dffb625166&gt;</span>
<span class="go">&lt;GitChangeset at 297:47b6be9a812e&gt;</span>
<span class="go">&lt;GitChangeset at 289:1589fed841cd&gt;</span>
<span class="go">&lt;GitChangeset at 285:afafd0ee2821&gt;</span>
<span class="go">&lt;GitChangeset at 284:639b115ed2b0&gt;</span>
<span class="go">&lt;GitChangeset at 283:fcf7562d7305&gt;</span>
<span class="go">&lt;GitChangeset at 256:ec8cbdb5f364&gt;</span>
<span class="go">&lt;GitChangeset at 255:0d74d2e2bdf3&gt;</span>
<span class="go">&lt;GitChangeset at 243:6894ad7d8223&gt;</span>
<span class="go">&lt;GitChangeset at 231:31b3f4b599fa&gt;</span>
<span class="go">&lt;GitChangeset at 220:3d2515dd21fb&gt;</span>
<span class="go">&lt;GitChangeset at 186:f804e27aa496&gt;</span>
<span class="go">&lt;GitChangeset at 182:7f00513785a1&gt;</span>
<span class="go">&lt;GitChangeset at 181:6efcdc61028c&gt;</span>
<span class="go">&lt;GitChangeset at 175:6c0ce52b229a&gt;</span>
<span class="go">&lt;GitChangeset at 165:09788a0b8a54&gt;</span>
<span class="go">&lt;GitChangeset at 163:0164ee729def&gt;</span>
<span class="go">&lt;GitChangeset at 140:33fa32233551&gt;</span>
<span class="go">&lt;GitChangeset at 126:fa014c12c26d&gt;</span>
<span class="go">&lt;GitChangeset at 111:e686b958768e&gt;</span>
<span class="go">&lt;GitChangeset at 109:ab5721ca0a08&gt;</span>
<span class="go">&lt;GitChangeset at 108:c877b68d18e7&gt;</span>
<span class="go">&lt;GitChangeset at 107:4313566d2e41&gt;</span>
<span class="go">&lt;GitChangeset at 104:6c2303a79367&gt;</span>
<span class="go">&lt;GitChangeset at 102:54386793436c&gt;</span>
<span class="go">&lt;GitChangeset at 101:54000345d2e7&gt;</span>
<span class="go">&lt;GitChangeset at 99:1c6b3677b37e&gt;</span>
<span class="go">&lt;GitChangeset at 93:2d03ca750a44&gt;</span>
<span class="go">&lt;GitChangeset at 92:2a08b128c206&gt;</span>
<span class="go">&lt;GitChangeset at 91:30c26513ff1e&gt;</span>
<span class="go">&lt;GitChangeset at 82:ac71e9503c2c&gt;</span>
<span class="go">&lt;GitChangeset at 81:12669288fd13&gt;</span>
<span class="go">&lt;GitChangeset at 76:5a0c84f3e6fe&gt;</span>
<span class="go">&lt;GitChangeset at 73:12f2f5e2b38e&gt;</span>
<span class="go">&lt;GitChangeset at 61:5eab1222a7cd&gt;</span>
<span class="go">&lt;GitChangeset at 60:f50f42baeed5&gt;</span>
<span class="go">&lt;GitChangeset at 59:d7e390a45f6a&gt;</span>
<span class="go">&lt;GitChangeset at 58:f15c21f97864&gt;</span>
<span class="go">&lt;GitChangeset at 57:e906ef056cf5&gt;</span>
<span class="go">&lt;GitChangeset at 56:ea2b108b48aa&gt;</span>
<span class="go">&lt;GitChangeset at 50:84dec09632a4&gt;</span>
<span class="go">&lt;GitChangeset at 48:0115510b70c7&gt;</span>
<span class="go">&lt;GitChangeset at 46:2a13f185e452&gt;</span>
<span class="go">&lt;GitChangeset at 30:3bf1c5868e57&gt;</span>
<span class="go">&lt;GitChangeset at 26:b8d040125747&gt;</span>
<span class="go">&lt;GitChangeset at 24:6970b057cffe&gt;</span>
<span class="go">&lt;GitChangeset at 8:dd80b0f6cf50&gt;</span>
<span class="go">&lt;GitChangeset at 7:ff7ca51e58c5&gt;</span>
</pre></div>
</div>
<p>Note that <tt class="docutils literal"><span class="pre">history</span></tt> attribute is computed lazily and returned list is reversed
- changesets are retrieved from most recent to oldest.</p>
</div>
<div class="section" id="show-me-the-difference">
<h3>Show me the difference!<a class="headerlink" href="#show-me-the-difference" title="Permalink to this headline">¶</a></h3>
<p>Here we present naive implementation of diff table for the given file node
located at <tt class="docutils literal"><span class="pre">vcs/nodes.py</span></tt>. First we have to get the node from repository.
After that we retrieve last changeset for which the file has been modified
and we create a html file using <a class="reference external" href="http://docs.python.org/library/difflib.html">difflib</a>.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">new</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s">&#39;v0.1.11&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">old</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="n">repo</span><span class="o">.</span><span class="n">tags</span><span class="p">[</span><span class="s">&#39;v0.1.10&#39;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_old</span> <span class="o">=</span> <span class="n">old</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;vcs/nodes.py&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_new</span> <span class="o">=</span> <span class="n">new</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="s">&#39;vcs/nodes.py&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f_old</span> <span class="o">=</span> <span class="n">repo</span><span class="o">.</span><span class="n">get_changeset</span><span class="p">(</span><span class="mi">81</span><span class="p">)</span><span class="o">.</span><span class="n">get_node</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">path</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;/tmp/out.html&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">difflib</span> <span class="kn">import</span> <span class="n">HtmlDiff</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hd</span> <span class="o">=</span> <span class="n">HtmlDiff</span><span class="p">(</span><span class="n">tabsize</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">diffs</span> <span class="o">=</span> <span class="n">hd</span><span class="o">.</span><span class="n">make_file</span><span class="p">(</span><span class="n">f_new</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">),</span> <span class="n">f_old</span><span class="o">.</span><span class="n">content</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">diffs</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">out</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>Now open file at <tt class="docutils literal"><span class="pre">/tmp/out.html</span></tt> in your favorite browser.</p>
</div>
</div>
</div>


          </div> 
        </div>
      </div>
    <div class="footer">
    <p>
      &copy; Copyright 2010, Marcin Kuzminski &amp; Lukasz Balcerzak.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.7.
	</p>
    </div>
      <div class="clearer"></div>
    </div>
	<div id="breadcrumbs">
		Quickstart
		</ul>
	</div>
	<script type="text/javascript" charset="utf-8" src="_static/toc.js"></script>
  </body>
</html>