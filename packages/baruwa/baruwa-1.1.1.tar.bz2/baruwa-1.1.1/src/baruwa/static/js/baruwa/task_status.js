function getTaskStatus(){$.getJSON(location.url,function(c,f){if(!c.finished){$("#status").text(c.status);$("#percent").text(c.completed);$("#progressbar").reportprogress(c.completed)}else{var e=[],d=0,b="",a;$.each(c.results,function(g,h){if(h.errors.length){a='<img src="'+media_url+'imgs/failed.png" alt="FAILED" />'}else{a='<img src="'+media_url+'imgs/passed.png" alt="OK" />'}e[d++]='<div class="LightBlue_div">';e[d++]='<div class="quaran_task_status_row">'+a+"</div>";e[d++]='<div class="quaran_task_id_row">';e[d++]='<a href="'+link_url+"/view/"+h.message_id+'/">'+h.message_id+"</a></div>";e[d++]='<div class="quaran_task_msg_row">';if(h.errors.length){for(itr=0;itr<h.errors.length;itr++){e[d++]=h.errors[itr]+"<br />"}}else{e[d++]=gettext("The task was completed successfully.")}e[d++]="</div></div>"});if(!e.length){b='<div class="LightBlue_div"><div class="spanrow">'+gettext("No items processed")+"</div></div>"}else{b=e.join("")}$("div.Grid_heading ~ div").remove();$("div.Grid_heading").after(b);if(auto_refresh){clearInterval(auto_refresh)}}})}var auto_refresh;$(document).ready(function(){$("#progbar").html('<div id="progressbar"></div>');auto_refresh=setInterval(getTaskStatus,5000)});