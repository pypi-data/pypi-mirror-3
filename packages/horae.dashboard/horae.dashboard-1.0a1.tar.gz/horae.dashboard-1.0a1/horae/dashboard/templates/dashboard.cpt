<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="path:view/macro"
      i18n:domain="horae.dashboard">
  <div class="dashboard" metal:fill-slot="columns"
       tal:attributes="data-url view.url()">
    <div tal:replace="structure provider:content.before" />
    <form action="" class="add-object-form" method="post"
          tal:condition="view.add"
          tal:attributes="action view.add">
      <div id="actionsView">
        <select name="name" size="1">
          <option value=""
                  tal:repeat="type view.types"
                  tal:attributes="value type['value']"
                  tal:content="type['title']" />
        </select>
        <input type="submit" class="button button-discreet" name="add" value="Add"
               i18n:domain="horae.layout" i18n:attributes="value" />
      </div>
    </form>
    <div class="row"
         tal:repeat="row view.rows">
      <div class="dashboard-widget width-4"
           tal:repeat="widget row"
           tal:attributes="class string:dashboard-widget width-${widget['width']} ${widget['factory']}-widget ${widget['resizable']};
                           style widget['style'];
                           data-id widget['id'];
                           data-url widget['url'];">
        <div class="header">
          <ul class="button-group">
            <li tal:condition="widget['edit']">
              <a href="" class="button"
                 tal:attributes="href widget['edit']"
                 i18n:domain="horae.ticketing" i18n:translate="">
                Edit
              </a>
            </li>
            <li>
              <a href="" class="button button-destructive"
                 tal:attributes="href widget['delete']"
                 i18n:domain="horae.layout" i18n:translate="">
                Delete
              </a>
            </li>
          </ul>
        </div>
        <div class="body">
          <div class="wrapper" tal:content="structure widget['view'](plain=True)" />
        </div>
      </div>
    </div>
    <div tal:replace="structure provider:content.after" />
  </div>
</html>