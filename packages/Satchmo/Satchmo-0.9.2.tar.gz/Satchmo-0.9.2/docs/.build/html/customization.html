

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Store Customization &mdash; Satchmo v0.9.2-development documentation</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.2-development',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="Satchmo v0.9.2-development documentation" href="index.html" />
    <link rel="next" title="Customizing Admin" href="custom-admin.html" />
    <link rel="prev" title="Email Verification" href="email-verification.html" /> 
  </head>
  <body>

<div style="background-image: url(_static/satchmo-sliver.jpg); background-repeat: repeat-x; background-color: white; text-align: left;">
<img src="_static/satchmo-front.jpg">
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="custom-admin.html" title="Customizing Admin"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="email-verification.html" title="Email Verification"
             accesskey="P">previous</a> |</li>
        <li><a href="http://www.satchmoproject.com">Satchmo home </a> |&nbsp;</li>
        
        <li><a href="index.html">Satchmo v0.9.2-development documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Store Customization</a><ul>
<li><a class="reference internal" href="#css-customization">CSS Customization</a></li>
<li><a class="reference internal" href="#template-customization">Template Customization</a></li>
<li><a class="reference internal" href="#url-customization">URL Customization</a></li>
<li><a class="reference internal" href="#shipping-module-customization">Shipping Module Customization</a></li>
<li><a class="reference internal" href="#payment-module-customization">Payment Module Customization</a></li>
<li><a class="reference internal" href="#using-signals">Using Signals</a></li>
<li><a class="reference internal" href="#changing-views">Changing Views</a></li>
<li><a class="reference internal" href="#custom-template-tags-and-filters">Custom Template Tags and Filters</a><ul>
<li><a class="reference internal" href="#example-tags">Example tags</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="email-verification.html"
                        title="previous chapter">Email Verification</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="custom-admin.html"
                        title="next chapter">Customizing Admin</a></p>

<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<p>Documentation Version:</p>
<ul>
    <li><a href="/docs/dev">Current development version</a></li>
    <li><a href="/docs/rel/latest">Latest Release version</a></li>
    <li><a href="http://bitbucket.org/chris1610/satchmo/downloads/Satchmo-0-9-1.pdf">PDF Documentation</a></li>
</ul>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="store-customization">
<h1>Store Customization<a class="headerlink" href="#store-customization" title="Permalink to this headline">¶</a></h1>
<p>The real power of Satchmo is not in what it does out of the box but what
the framework allows you to do with minimal modification.  As you start
to develop your online presence you will have a whole range of different
ideas on how you would like to make your store look and feel.  Satchmo
provides a simple store layout that you can modify as much or as little
as you wish.  There are several ways to tweak Satchmo to your needs.  The
following list is in order of the relative ease of customization:</p>
<ol class="arabic simple">
<li>CSS customization</li>
<li>Template customization</li>
<li>URL customization</li>
<li>Checkout process customization</li>
<li>Shipping module customization</li>
<li>Payment module customization</li>
<li>Changing views</li>
<li>Creating custom template tags</li>
</ol>
<div class="section" id="css-customization">
<h2>CSS Customization<a class="headerlink" href="#css-customization" title="Permalink to this headline">¶</a></h2>
<p>The simplest way to modify Satchmo is to change the attributes in the css
file used by the default shop.  The current style.css file is located in
/satchmo/static/css.  You can modify this file directly (not recommended) or
create a new CSS file and modify the base.html template file to point to
your new and improved css file.</p>
<p>The benefits of this approach is that it is simple to implement and makes it
easy to update Satchmo as changes are made.  The downside is that there is
only so much you can do with css changes.</p>
</div>
<div class="section" id="template-customization">
<span id="id1"></span><h2>Template Customization<a class="headerlink" href="#template-customization" title="Permalink to this headline">¶</a></h2>
<p>Template customization allows you to completely alter the look and feel of
your site without having to resort to coding.  The majority of the display
elements are accessible via css or template changes. Before making any template
changes, it is useful to understand Django templates in general.
The <a class="reference external" href="http://docs.djangoproject.com/en/1.1/topics/templates/">Django Template Author Guide</a> is the best place to start.</p>
<p>The other very important concept to understand is how to setup your environment so that you can selectively
modify the templates that you need to. You should not modify the templates directly in the Satchmo distribution. Doing
so will make it more difficult to upgrade and maintain your Satchmo installation.</p>
<p>In the default Satchmo settings.py, our template loaders are:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TEMPLATE_LOADERS</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s">&#39;django.template.loaders.filesystem.load_template_source&#39;</span><span class="p">,</span>
    <span class="s">&#39;django.template.loaders.app_directories.load_template_source&#39;</span><span class="p">,</span>
     <span class="p">)</span>
</pre></div>
</div>
<p>These template loaders look for the templates in two different ways.  The first one, the filesystem loader,
looks for the templates in the directories you tell it in your settings_local.py file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">TEMPLATE_DIRS</span> <span class="o">=</span> <span class="p">(</span><span class="s">&#39;/path/to/your/templates&#39;</span><span class="p">,)</span>
</pre></div>
</div>
<p>The second loader, the app_directories loader, looks for the templates in a directory
named &#8220;templates&#8221; in each application directory.</p>
<p>Any time the system tries to find a template, it follows the order given above.  First it asks the filesystem
loader to look in the directories it has been given.  If it finds the template there, it returns that one.
Next it asks the app_directories loader to look in the app directories for that template.
These are the &#8220;fallback&#8221; templates to use.</p>
<p>For example, if you wanted to override the default category page template, you can determine that it lives
at <tt class="docutils literal"><span class="pre">satchmo/apps/product/templates/product/category.html</span></tt>  It will be found by the app_directory loader if the
filesystem loader doesn&#8217;t find it.</p>
<p>Knowing that, you can tell that the proper place to put your overridden template is at:
<tt class="docutils literal"><span class="pre">/path/to/your/templates/product/category.html</span></tt></p>
<p>In other word, you just chop the directory tree off at the word &#8220;templates&#8221; and build your override tree that way.</p>
<p>Another example might be useful. If you wish to override the wishlist index page, which usually
lives at: <tt class="docutils literal"><span class="pre">satchmo/apps/satchmo_ext/wishlist/templates/index.html</span></tt>, you would make a directory
<tt class="docutils literal"><span class="pre">wishlist/templates</span></tt> and put an index.html file in it.</p>
<p>Now, make the changes to the templates that you have to.  Don&#8217;t forget, this is
also the place where you can change the email messages sent to users as well as
the pdf documents created by the admin interface.  The amount of power and flexibility
here is much higher than just about any &#8220;shopping cart&#8221; application out there!</p>
</div>
<div class="section" id="url-customization">
<h2>URL Customization<a class="headerlink" href="#url-customization" title="Permalink to this headline">¶</a></h2>
<p>Another nifty feature of Django is the flexibility in configuring the URLs of an
application.  Because a web store frequently requires good search engine ranking,
you will most likely want to do everything in your power to help your store rise
in the rankings.  Using good, clean descriptive URLs is a huge plus.  Another benefit
of flexible URLs is that allows you to easily integrate Satchmo with an existing
site or differentiate your site with a creative scheme (or language).</p>
<p>For convenience, urls can be modified by changing the SHOP_URLS variable in the
local_settings.py file.  Any url assigned to this variable will override the existing
url naming scheme.</p>
<p>Additionally, the Satchmo settings application allows you to change some of the names of
urls associated with products and categories.</p>
</div>
<div class="section" id="shipping-module-customization">
<h2>Shipping Module Customization<a class="headerlink" href="#shipping-module-customization" title="Permalink to this headline">¶</a></h2>
<p>The comments in the dummy.py shipping module walk through how to configure shipping for your
unique needs.</p>
</div>
<div class="section" id="payment-module-customization">
<h2>Payment Module Customization<a class="headerlink" href="#payment-module-customization" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="custom-payment.html#custom-payment-modules"><em>Custom Payment Modules</em></a></p>
</div>
<div class="section" id="using-signals">
<h2>Using Signals<a class="headerlink" href="#using-signals" title="Permalink to this headline">¶</a></h2>
<p>See <a class="reference internal" href="signals.html#signals"><em>Signals in Satchmo</em></a> for an explanation of the available signals and how to use them to
customize your store.</p>
</div>
<div class="section" id="changing-views">
<h2>Changing Views<a class="headerlink" href="#changing-views" title="Permalink to this headline">¶</a></h2>
<p>In some instances, you may wish to selectively override specific Satchmo views. Satchmo includes
a useful utility- <tt class="docutils literal"><span class="pre">replace_urlpattern</span></tt> in satchmo_utils.urlhelper to exchange stock urls
with your own.</p>
<p>Here is a simple example of using it to replace the quick_order view. In this example, we wish to change
the items that are displayed on the quick order page so that only featured items are shown. The full
urls.py is shown below:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.conf.urls.defaults</span> <span class="kn">import</span> <span class="o">*</span>

<span class="c"># Uncomment the next two lines to enable the admin:</span>
<span class="c"># from django.contrib import admin</span>
<span class="c"># admin.autodiscover()</span>

<span class="kn">from</span> <span class="nn">satchmo_store.urls</span> <span class="kn">import</span> <span class="n">urlpatterns</span>

<span class="kn">from</span> <span class="nn">satchmo_utils.urlhelper</span> <span class="kn">import</span> <span class="n">replace_urlpattern</span>
<span class="kn">from</span> <span class="nn">product.models</span> <span class="kn">import</span> <span class="n">Product</span>

<span class="n">product_list</span> <span class="o">=</span> <span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">featured</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>

<span class="n">replacement</span> <span class="o">=</span> <span class="n">url</span><span class="p">(</span><span class="s">r&#39;^quickorder/$&#39;</span><span class="p">,</span> <span class="s">&#39;satchmo_store.shop.views.cart.add_multiple&#39;</span><span class="p">,</span>
            <span class="p">{</span><span class="s">&#39;products&#39;</span><span class="p">:</span> <span class="n">product_list</span><span class="p">},</span> <span class="s">&#39;satchmo_quick_order&#39;</span><span class="p">)</span>
<span class="n">replace_urlpattern</span><span class="p">(</span><span class="n">urlpatterns</span><span class="p">,</span> <span class="n">replacement</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="custom-template-tags-and-filters">
<h2>Custom Template Tags and Filters<a class="headerlink" href="#custom-template-tags-and-filters" title="Permalink to this headline">¶</a></h2>
<p>If you find yourself in a situation where you need to display additional information on the page
or where you need to change the way data is displayed, you should consider writing a custom template tag
or filter. The general process for using the tag or filter would be:</p>
<blockquote>
<ol class="arabic simple">
<li>Create the new tag in your application&#8217;s templatetags directory</li>
<li>Selectively override the Satchmo templates that use the tag</li>
<li>Import the new tag at the top of each template and use it in the template</li>
</ol>
</blockquote>
<div class="section" id="example-tags">
<h3>Example tags<a class="headerlink" href="#example-tags" title="Permalink to this headline">¶</a></h3>
<p>Here is a quick example showing how you can create an <a class="reference external" href="http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#inclusion-tags">inclusion tag</a>
to display a list of new arrivals or featured items.</p>
<p>First, make sure you have a <tt class="file docutils literal"><span class="pre">templatetags</span></tt> directory in your <tt class="file docutils literal"><span class="pre">localsite</span></tt> directory (this assumes you
are using the default satchmo setup). In this directory, create a file called <tt class="file docutils literal"><span class="pre">local_tags.py</span></tt></p>
<p>Your <tt class="file docutils literal"><span class="pre">local_tags.py</span></tt> should look like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django</span> <span class="kn">import</span> <span class="n">template</span>
<span class="kn">from</span> <span class="nn">product.models</span> <span class="kn">import</span> <span class="n">Product</span>
<span class="n">register</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">Library</span><span class="p">()</span>

<span class="nd">@register.inclusion_tag</span><span class="p">(</span><span class="s">&#39;localsite/new_arrivals.html&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_new_arrivals</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="n">new_arrivals</span> <span class="o">=</span> <span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;date_added&#39;</span><span class="p">)[:</span><span class="n">number</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">&#39;new_arrivals&#39;</span><span class="p">:</span> <span class="n">new_arrivals</span><span class="p">}</span>

<span class="nd">@register.inclusion_tag</span><span class="p">(</span><span class="s">&#39;localsite/featured_items.html&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">show_featured_items</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="n">featured_items</span> <span class="o">=</span> <span class="n">Product</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">featured</span><span class="o">=</span><span class="bp">True</span><span class="p">)[:</span><span class="n">number</span><span class="p">]</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">&#39;featured_items&#39;</span><span class="p">:</span> <span class="n">featured_items</span><span class="p">}</span>
</pre></div>
</div>
<p>Each of these tags also will need a custom html template that will be used to render
the items. Inside your template directory, create the following files <tt class="file docutils literal"><span class="pre">/localsite/new_arrivals.html</span></tt>:</p>
<div class="highlight-python"><pre>{% for product in new_arrivals %}
    &lt;ul&gt;&lt;a href="{{ product.get_absolute_url }}"&gt;{{product.translated_name}}&lt;/a&gt;&lt;/ul&gt;
{% endfor %}</pre>
</div>
<p>As well as this file <tt class="file docutils literal"><span class="pre">/localsite/featured_items.html</span></tt>:</p>
<div class="highlight-python"><pre>{% for product in featured_items %}
    &lt;ul&gt;&lt;a href="{{ product.get_absolute_url }}"&gt;{{product.translated_name}}&lt;/a&gt;&lt;/ul&gt;
{% endfor %}</pre>
</div>
<p>In order to use these tags, add them to your templates:</p>
<div class="highlight-python"><pre>{% extends "shop/base.html" %}
{% load local_tags %}

&lt;h1&gt;New Arrivals&lt;/h1&gt;
    &lt;ul&gt;
    {% show_new_arrivals 5 %}
    &lt;/ul&gt;
&lt;h1&gt;Featured Items&lt;/h1&gt;
    &lt;ul&gt;
    {% show_featured_items 5 %}
    &lt;/ul&gt;</pre>
</div>
<p>This feature is a very powerful and simple way to add custom information into
your custom satchmo site.</p>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="custom-admin.html" title="Customizing Admin"
             >next</a> |</li>
        <li class="right" >
          <a href="email-verification.html" title="Email Verification"
             >previous</a> |</li>
        <li><a href="http://www.satchmoproject.com">Satchmo home </a> |&nbsp;</li>
        
        <li><a href="index.html">Satchmo v0.9.2-development documentation</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer">
        &copy; Copyright 2010, Chris Moffitt.
      Last updated on Mar 10, 2012.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.5.
    </div>
<script src='http://www.google-analytics.com/ga.js' type='text/javascript'></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-1711397-1");
pageTracker._initData();
pageTracker._trackPageview();
</script>
  </body>
</html>