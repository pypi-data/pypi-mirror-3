<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="base">
<head><title></title></head>
<body>
<div id="mainPanel" metal:fill-slot="main">
  ${form.begin()}
  <!-- ............................... Buttons ............................ -->
  <div id="buttons">
    <div class="first">
      ${request.breadcrumbs.back_button()}
    </div>
    <div class="last">
      <div tal:condition="i_modifier" tal:omit-tag="">
        ${form.button(route('group_edit', group_id=group.group_id), _('Edit'), class_='buttonMain')}
      </div>
      ${form.submit('exp!.x', _('Export'))}
    </div>
    <hr class="hidden"/>
  </div>
  <div id="main">
    <h2 id="subtitle" class="group" title="${_('Group settings')}">${group.label}</h2>
    <!-- ................................ Tabs ............................ -->
    <div id="tabSet">
      ${tab_set.toc('tabGroup')}
      <!-- ..... Description ...... -->
      ${tab_set.tab_begin(0, 'd')}
      ${form.grid_item(None, _('Label:'), group.label, class_='')}
      ${form.grid_item(None, _('Description:'), group.description, class_='')}
      ${tab_set.tab_end()}
      <!-- ...... Permissions ..... -->
      ${tab_set.tab_begin(1, 'p')}
      <div tal:condition="group.perms"
           tal:define="perms dict([(k.scope, k.level) for k in group.perms])">
        <strong class="caption">${_('Permissions supplied by this group:')}</strong>
        <div tal:repeat="scope PERM_SCOPES" tal:omit-tag="">
          ${form.grid_item(None, _(PERM_SCOPES[scope]),
            scope in perms and _(USER_PERMS[perms[scope]]) or None, class_='')}
        </div>
      </div>
      <div tal:condition="not group.perms">${_('No permission.')}</div>
      ${tab_set.tab_end()}
      <!-- ........ Members ....... -->
      ${tab_set.tab_begin(2, 'm')}
      <table class="list smallList" tal:condition="users">
        <tr>
          <th>${_('Login')}</th>
          <th>${_('Name')}</th>
        </tr>
        <tr tal:repeat="user users">
          <td><a href="${route('user_view', user_id=user[0])}">${user[1]}</a></td>
          <td><a href="${route('user_view', user_id=user[0])}">${user[2]}</a></td>
        </tr>
      </table>
      <div tal:condition="not users">${_('No member.')}</div>
      ${tab_set.tab_end()}
    </div>
  </div>
  ${form.end()}
</div>
</body>
</html>