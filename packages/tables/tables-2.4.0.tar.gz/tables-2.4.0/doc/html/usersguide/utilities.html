


<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Utilities &mdash; PyTables 2.4.0 documentation</title>
    
    <link rel="stylesheet" href="../_static/cloud.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.4.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/jquery.cookie.js"></script>
    <script type="text/javascript" src="../_static/toggle_sections.js"></script>
    <script type="text/javascript" src="../_static/toggle_sidebar.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="PyTables 2.4.0 documentation" href="../index.html" />
    <link rel="up" title="PyTables User’s Guide" href="index.html" />
    <link rel="next" title="PyTables File Format" href="file_format.html" />
    <link rel="prev" title="Using nested record arrays (deprecated)" href="nested_rec_arrays.html" /> 
  </head>
  <body>
    <div class="relbar-top">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="file_format.html" title="PyTables File Format"
             accesskey="N">next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="nested_rec_arrays.html" title="Using nested record arrays (deprecated)"
             accesskey="P">previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">PyTables 2.4.0 documentation</a> &raquo;</li>

          <li><a href="index.html" accesskey="U">PyTables User&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
    </div>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h1>
<p>PyTables comes with a couple of utilities that make the life
easier to the user. One is called ptdump and lets you
see the contents of a PyTables file (or generic HDF5 file, if
supported). The other one is named ptrepack that
allows to (recursively) copy sub-hierarchies of objects present in a
file into another one, changing, if desired, some of the filters applied
to the leaves during the copy process.</p>
<p>Normally, these utilities will be installed somewhere in your PATH
during the process of installation of the PyTables package, so that you
can invoke them from any place in your file system after the
installation has successfully finished.</p>
<div class="section" id="ptdump">
<h2>ptdump<a class="headerlink" href="#ptdump" title="Permalink to this headline">¶</a></h2>
<p>As has been said before, ptdump utility
allows you look into the contents of your PyTables files. It lets you
see not only the data but also the metadata (that is, the
<em>structure</em> and additional information in the form
of <em>attributes</em>).</p>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h3>
<p>For instructions on how to use it, just pass the
-h flag to the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump -h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash"><div class="highlight"><pre>usage: ptdump <span class="o">[</span>-d<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-a<span class="o">]</span> <span class="o">[</span>-c<span class="o">]</span> <span class="o">[</span>-i<span class="o">]</span> <span class="o">[</span>-R start,stop,step<span class="o">]</span> <span class="o">[</span>-h<span class="o">]</span> file<span class="o">[</span>:nodepath<span class="o">]</span>
    -d -- Dump data information on leaves
    -v -- Dump more metainformation on nodes
    -a -- Show attributes in nodes <span class="o">(</span>only useful when -v or -d are active<span class="o">)</span>
    -c -- Show info of columns in tables <span class="o">(</span>only useful when -v or -d are active<span class="o">)</span>
    -i -- Show info of indexed columns <span class="o">(</span>only useful when -v or -d are active<span class="o">)</span>
    -R RANGE -- Select a RANGE of rows in the form <span class="s2">&quot;start,stop,step&quot;</span>
    -h -- Print <span class="nb">help </span>on usage
</pre></div>
</div>
<p>Read on for a brief introduction to this utility.</p>
</div>
<div class="section" id="a-small-tutorial-on-ptdump">
<h3>A small tutorial on ptdump<a class="headerlink" href="#a-small-tutorial-on-ptdump" title="Permalink to this headline">¶</a></h3>
<p>Let&#8217;s suppose that we want to know only the
<em>structure</em> of a file. In order to do that, just
don&#8217;t pass any flag, just the file as parameter.</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
</pre></div>
</div>
<p>we can see that the file contains just a leaf object called
vlarray1, that is an instance of
VLArray, has 4 rows, and two filters has been
used in order to create it: shuffle and
zlib (with a compression level of 1).</p>
<p>Let&#8217;s say we want more meta-information. Just add the
-v (verbose) flag:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump -v vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
<span class="nv">atom</span> <span class="o">=</span> Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span>0<span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;little&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> 3
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> StringAtom<span class="o">(</span><span class="nv">itemsize</span><span class="o">=</span>2, <span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;irrelevant&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> 3
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;python&#39;</span>
</pre></div>
</div>
<p>so we can see more info about the atoms that are
the components of the vlarray1 dataset, i.e. they
are scalars of type Int32 and with
NumPy <em>flavor</em>.</p>
<p>If we want information about the attributes on the nodes, we
must add the -a flag:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump -va vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
  /._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, 5 attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;GROUP&#39;</span>,
    PYTABLES_FORMAT_VERSION :<span class="o">=</span> <span class="s1">&#39;2.0&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.0&#39;</span><span class="o">]</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span>0<span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;little&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> 3
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>
/vlarray1._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, 4 attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;VLARRAY&#39;</span>,
    FLAVOR :<span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;ragged array of ints&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.2&#39;</span><span class="o">]</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> StringAtom<span class="o">(</span><span class="nv">itemsize</span><span class="o">=</span>2, <span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;irrelevant&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> 3
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;python&#39;</span>
  /vlarray2._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, 4 attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;VLARRAY&#39;</span>,
    FLAVOR :<span class="o">=</span> <span class="s1">&#39;python&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;ragged array of strings&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.2&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>Let&#8217;s have a look at the real data:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump -d vlarray1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  Data dump:
<span class="o">[</span>0<span class="o">]</span> <span class="o">[</span>5 6<span class="o">]</span>
<span class="o">[</span>1<span class="o">]</span> <span class="o">[</span>5 6 7<span class="o">]</span>
<span class="o">[</span>2<span class="o">]</span> <span class="o">[</span>5 6 9 8<span class="o">]</span>
/vlarray2 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of strings&#39;</span>
  Data dump:
<span class="o">[</span>0<span class="o">]</span> <span class="o">[</span><span class="s1">&#39;5&#39;</span>, <span class="s1">&#39;66&#39;</span><span class="o">]</span>
<span class="o">[</span>1<span class="o">]</span> <span class="o">[</span><span class="s1">&#39;5&#39;</span>, <span class="s1">&#39;6&#39;</span>, <span class="s1">&#39;77&#39;</span><span class="o">]</span>
<span class="o">[</span>2<span class="o">]</span> <span class="o">[</span><span class="s1">&#39;5&#39;</span>, <span class="s1">&#39;6&#39;</span>, <span class="s1">&#39;9&#39;</span>, <span class="s1">&#39;88&#39;</span><span class="o">]</span>
</pre></div>
</div>
<p>We see here a data dump of the 4 rows in
vlarray1 object, in the form of a list. Because
the object is a VLA, we see a different number of integers on each
row.</p>
<p>Say that we are interested only on a specific <em>row
range</em> of the /vlarray1 object:</p>
<div class="highlight-bash"><div class="highlight"><pre>ptdump -R2,3 -d vlarray1.h5:/vlarray1
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  Data dump:
<span class="o">[</span>2<span class="o">]</span> <span class="o">[</span>5 6 9 8<span class="o">]</span>
</pre></div>
</div>
<p>Here, we have specified the range of rows between 2 and
4 (the upper limit excluded, as usual in Python). See how we have
selected only the /vlarray1 object for doing the
dump (vlarray1.h5:/vlarray1).</p>
<p>Finally, you can mix several information at once:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump -R2,3 -vad vlarray1.h5:/vlarray1
/vlarray1 <span class="o">(</span>VLArray<span class="o">(</span>3,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;ragged array of ints&#39;</span>
  <span class="nv">atom</span> <span class="o">=</span> Int32Atom<span class="o">(</span><span class="nv">shape</span><span class="o">=()</span>, <span class="nv">dflt</span><span class="o">=</span>0<span class="o">)</span>
  <span class="nv">byteorder</span> <span class="o">=</span> <span class="s1">&#39;little&#39;</span>
  <span class="nv">nrows</span> <span class="o">=</span> 3
  <span class="nv">flavor</span> <span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>
  /vlarray1._v_attrs <span class="o">(</span>AttributeSet<span class="o">)</span>, 4 attributes:
   <span class="o">[</span>CLASS :<span class="o">=</span> <span class="s1">&#39;VLARRAY&#39;</span>,
    FLAVOR :<span class="o">=</span> <span class="s1">&#39;numeric&#39;</span>,
    TITLE :<span class="o">=</span> <span class="s1">&#39;ragged array of ints&#39;</span>,
    VERSION :<span class="o">=</span> <span class="s1">&#39;1.2&#39;</span><span class="o">]</span>
  Data dump:
<span class="o">[</span>2<span class="o">]</span> <span class="o">[</span>5 6 9 8<span class="o">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="ptrepack">
<span id="ptrepackdescr"></span><h2>ptrepack<a class="headerlink" href="#ptrepack" title="Permalink to this headline">¶</a></h2>
<p>This utility is a very powerful one and lets you copy any leaf,
group or complete subtree into another file. During the copy process
you are allowed to change the filter properties if you want so. Also,
in the case of duplicated pathnames, you can decide if you want to
overwrite already existing nodes on the destination file. Generally
speaking, ptrepack can be useful in may situations,
like replicating a subtree in another file, change the filters in
objects and see how affect this to the compression degree or I/O
performance, consolidating specific data in repositories or even
<em>importing</em> generic HDF5 files and create true
PyTables counterparts.</p>
<div class="section" id="id1">
<h3>Usage<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>For instructions on how to use it, just pass the
-h flag to the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack -h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash"><div class="highlight"><pre>usage: ptrepack <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-o<span class="o">]</span> <span class="o">[</span>-R start,stop,step<span class="o">]</span> <span class="o">[</span>--non-recursive<span class="o">]</span> <span class="o">[</span>--dest-title<span class="o">=</span>title<span class="o">]</span> <span class="o">[</span>--dont-create-sysattrs<span class="o">]</span> <span class="o">[</span>--dont-copy-userattrs<span class="o">]</span> <span class="o">[</span>--overwrite-nodes<span class="o">]</span> <span class="o">[</span>--complevel<span class="o">=(</span>0-9<span class="o">)]</span> <span class="o">[</span>--complib<span class="o">=</span>lib<span class="o">]</span> <span class="o">[</span>--shuffle<span class="o">=(</span>0|1<span class="o">)]</span> <span class="o">[</span>--fletcher32<span class="o">=(</span>0|1<span class="o">)]</span> <span class="o">[</span>--keep-source-filters<span class="o">]</span> <span class="o">[</span>--chunkshape<span class="o">=</span>value<span class="o">]</span> <span class="o">[</span>--upgrade-flavors<span class="o">]</span> <span class="o">[</span>--dont-regenerate-old-indexes<span class="o">]</span> <span class="o">[</span>--sortby<span class="o">=</span>column<span class="o">]</span> <span class="o">[</span>--checkCSI<span class="o">]</span> <span class="o">[</span>--propindexes<span class="o">]</span> sourcefile:sourcegroup destfile:destgroup
    -h -- Print usage message.
    -v -- Show more information.
    -o -- Overwrite destination file.
    -R RANGE -- Select a RANGE of rows <span class="o">(</span>in the form <span class="s2">&quot;start,stop,step&quot;</span><span class="o">)</span>
        during the copy of <span class="se">\*</span>all* the leaves.  Default values are
        <span class="s2">&quot;None,None,1&quot;</span>, which means a copy of all the rows.
    --non-recursive -- Do not <span class="k">do </span>a recursive copy. Default is to <span class="k">do </span>it.
    --dest-title<span class="o">=</span>title -- Title <span class="k">for </span>the new file <span class="o">(</span><span class="k">if </span>not specified,
        the <span class="nb">source </span>is copied<span class="o">)</span>.
    --dont-create-sysattrs -- Do not create sys attrs <span class="o">(</span>default is to <span class="k">do </span>it<span class="o">)</span>.
    --dont-copy-userattrs -- Do not copy the user attrs <span class="o">(</span>default is to <span class="k">do </span>it<span class="o">)</span>.
    --overwrite-nodes -- Overwrite destination nodes <span class="k">if </span>they exist. Default is
        to not overwrite them.
    --complevel<span class="o">=(</span>0-9<span class="o">)</span> -- Set a compression level <span class="o">(</span>0 <span class="k">for </span>no compression, which
        is the default<span class="o">)</span>.
    --complib<span class="o">=</span>lib -- Set the compression library to be used during the copy.
        lib can be <span class="nb">set </span>to <span class="s2">&quot;zlib&quot;</span>, <span class="s2">&quot;lzo&quot;</span>, <span class="s2">&quot;bzip2&quot;</span> or <span class="s2">&quot;blosc&quot;</span>.  Defaults to
        <span class="s2">&quot;zlib&quot;</span>.
    --shuffle<span class="o">=(</span>0|1<span class="o">)</span> -- Activate or not the shuffling filter <span class="o">(</span>default is active
        <span class="k">if </span>complevel&gt;0<span class="o">)</span>.
    --fletcher32<span class="o">=(</span>0|1<span class="o">)</span> -- Whether to activate or not the fletcher32 filter
        <span class="o">(</span>not active by default<span class="o">)</span>.
    --keep-source-filters -- Use the original filters in <span class="nb">source </span>files. The
        default is not doing that <span class="k">if </span>any of --complevel, --complib, --shuffle
        or --fletcher32 option is specified.
    --chunkshape<span class="o">=(</span><span class="s2">&quot;keep&quot;</span><span class="se">\|</span><span class="s2">&quot;auto&quot;</span><span class="se">\|</span>int|tuple<span class="o">)</span> -- Set a chunkshape.  A value
        of <span class="s2">&quot;auto&quot;</span> computes a sensible value <span class="k">for </span>the chunkshape of the
        leaves copied.  The default is to <span class="s2">&quot;keep&quot;</span> the original value.
    --upgrade-flavors -- When repacking PyTables 1.x files, the flavor of
        leaves will be unset. With this, such a leaves will be serialized
        as objects with the internal flavor <span class="o">(</span><span class="s1">&#39;numpy&#39;</span> <span class="k">for </span>2.x series<span class="o">)</span>.
    --dont-regenerate-old-indexes -- Disable regenerating old indexes. The
        default is to regenerate old indexes as they are found.
    --sortby<span class="o">=</span>column -- Do a table copy sorted by the index in <span class="s2">&quot;column&quot;</span>.
        For reversing the order, use a negative value in the <span class="s2">&quot;step&quot;</span> part of
        <span class="s2">&quot;RANGE&quot;</span> <span class="o">(</span>see <span class="s2">&quot;-R&quot;</span> flag<span class="o">)</span>.  Only applies to table objects.
    --checkCSI -- Force the check <span class="k">for </span>a CSI index <span class="k">for </span>the --sortby column.
    --propindexes -- Propagate the indexes existing in original tables.  The
        default is to not propagate them.  Only applies to table objects.
</pre></div>
</div>
<p>Read on for a brief introduction to this utility.</p>
</div>
<div class="section" id="a-small-tutorial-on-ptrepack">
<h3>A small tutorial on ptrepack<a class="headerlink" href="#a-small-tutorial-on-ptrepack" title="Permalink to this headline">¶</a></h3>
<p>Imagine that we have ended the tutorial 1 (see the output of
examples/tutorial1-1.py), and we want to copy our
reduced data (i.e. those datasets that hangs from the
/column group) to another file. First, let&#8217;s
remember the content of the
examples/tutorial1.h5:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump tutorial1.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;Test file&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;Pressure and Name&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
/detector <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;Detector information&#39;</span>
/detector/readout <span class="o">(</span>Table<span class="o">(</span>10,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
</pre></div>
</div>
<p>Now, copy the /columns to other non-existing file. That&#8217;s easy:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack tutorial1.h5:/columns reduced.h5
</pre></div>
</div>
<p>That&#8217;s all. Let&#8217;s see the contents of the newly created reduced.h5 file:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>so, you have copied the children of /columns group into the
<em>root</em> of the reduced.h5 file.</p>
<p>Now, you suddenly realized that what you intended to do was to
copy all the hierarchy, the group /columns itself
included. You can do that by just specifying the destination group:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack tutorial1.h5:/columns reduced.h5:/columns
<span class="nv">$ </span>ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>OK. Much better. But you want to get rid of the existing nodes on the new
file. You can achieve this by adding the -o flag:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack -o tutorial1.h5:/columns reduced.h5:/columns
<span class="nv">$ </span>ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>where you can see how the old contents of the reduced.h5
file has been overwritten.</p>
<p>You can copy just one single node in the repacking operation
and change its name in destination:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack tutorial1.h5:/detector/readout reduced.h5:/rawdata
<span class="nv">$ </span>ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span>10,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>where the /detector/readout has been copied to /rawdata in destination.</p>
<p>We can change the filter properties as well:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack --complevel<span class="o">=</span>1 tutorial1.h5:/detector/readout reduced.h5:/rawdata
Problems doing the copy from <span class="s1">&#39;tutorial1.h5:/detector/readout&#39;</span> to <span class="s1">&#39;reduced.h5:/rawdata&#39;</span>
The error was --&gt; tables.exceptions.NodeError: destination group <span class="se">\`</span><span class="sb">`</span>/<span class="se">\`</span><span class="sb">`</span> already has a node named <span class="se">\`</span><span class="sb">`</span>rawdata<span class="sb">``</span>; you may want to use the <span class="se">\`</span><span class="sb">`</span>overwrite<span class="sb">``</span> argument
The destination file looks like:
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span>10,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
Traceback <span class="o">(</span>most recent call last<span class="o">)</span>:
  File <span class="s2">&quot;utils/ptrepack&quot;</span>, line 3, in ?
    main<span class="o">()</span>
  File <span class="s2">&quot;.../tables/scripts/ptrepack.py&quot;</span>, line 349, in main
    <span class="nv">stats</span> <span class="o">=</span> stats, <span class="nv">start</span> <span class="o">=</span> start, <span class="nv">stop</span> <span class="o">=</span> stop, <span class="nv">step</span> <span class="o">=</span> step<span class="o">)</span>
  File <span class="s2">&quot;.../tables/scripts/ptrepack.py&quot;</span>, line 107, in copyLeaf
    raise RuntimeError, <span class="s2">&quot;Please check that the node names are not</span>
<span class="s2">    duplicated in destination, and if so, add the --overwrite-nodes flag</span>
<span class="s2">    if desired.&quot;</span>
RuntimeError: Please check that the node names are not duplicated in
destination, and <span class="k">if </span>so, add the --overwrite-nodes flag <span class="k">if </span>desired.
</pre></div>
</div>
<p>Ooops! We ran into problems: we forgot that the
/rawdata pathname already existed in destination
file. Let&#8217;s add the &#8211;overwrite-nodes, as the
verbose error suggested:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack --overwrite-nodes --complevel<span class="o">=</span>1 tutorial1.h5:/detector/readout
reduced.h5:/rawdata
<span class="nv">$ </span>ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span>10,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
</pre></div>
</div>
<p>you can check how the filter properties has been changed for the
/rawdata table. Check as the other nodes still exists.</p>
<p>Finally, let&#8217;s copy a <em>slice</em> of the
readout table in origin to destination, under a
new group called /slices and with the name, for
example, aslice:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>ptrepack -R1,8,3 tutorial1.h5:/detector/readout reduced.h5:/slices/aslice
<span class="nv">$ </span>ptdump reduced.h5
/ <span class="o">(</span>RootGroup<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/rawdata <span class="o">(</span>Table<span class="o">(</span>10,<span class="o">)</span>, shuffle, zlib<span class="o">(</span>1<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
/columns <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/columns/name <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Name column selection&#39;</span>
/columns/pressure <span class="o">(</span>Array<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Pressure column selection&#39;</span>
/slices <span class="o">(</span>Group<span class="o">)</span> <span class="s1">&#39;&#39;</span>
/slices/aslice <span class="o">(</span>Table<span class="o">(</span>3,<span class="o">))</span> <span class="s1">&#39;Readout example&#39;</span>
</pre></div>
</div>
<p>note how only 3 rows of the original readout table has been copied to the
new aslice destination. Note as well how the
previously nonexistent slices group has been
created in the same operation.</p>
</div>
</div>
<div class="section" id="nctoh5">
<span id="nctoh5descr"></span><h2>nctoh5<a class="headerlink" href="#nctoh5" title="Permalink to this headline">¶</a></h2>
<p>This tool is able to convert a file in <a class="reference external" href="http://www.unidata.ucar.edu/software/netcdf/">NetCDF</a>
format to a PyTables file (and hence, to a HDF5 file). However, for
this to work, you will need the NetCDF interface for Python that comes
with the excellent Scientific Python (see <a class="reference internal" href="bibliography.html#scipy1"><em>[SCIPY1]</em></a>) package. This script was
initially contributed by Jeff Whitaker. It has been updated to support
selectable filters from the command line and some other small
improvements.</p>
<p>If you want other file formats to be converted to PyTables, have
a look at the SciPy (see <a class="reference internal" href="bibliography.html#scipy1"><em>[SCIPY1]</em></a>) project (subpackage io), and
look for different methods to import them into
NumPy/Numeric/numarray objects. Following the
SciPy documentation, you can read, among other
formats, ASCII files (read_array), binary files in
C or Fortran (fopen) and MATLAB
(version 4, 5 or 6) files (loadmat). Once you have
the content of your files as NumPy/Numeric/numarray
objects, you can save them as regular (E)Arrays in
PyTables files. Remember, if you end with a nice converter, do not
forget to contribute it back to the community. Thanks!</p>
<div class="section" id="id2">
<h3>Usage<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>For instructions on how to use it, just pass the
-h flag to the command:</p>
<div class="highlight-bash"><div class="highlight"><pre><span class="nv">$ </span>nctoh5 -h
</pre></div>
</div>
<p>to see the message usage:</p>
<div class="highlight-bash"><div class="highlight"><pre>usage: nctoh5 <span class="o">[</span>-h<span class="o">]</span> <span class="o">[</span>-v<span class="o">]</span> <span class="o">[</span>-o<span class="o">]</span> <span class="o">[</span>--complevel<span class="o">=(</span>0-9<span class="o">)]</span> <span class="o">[</span>--complib<span class="o">=</span>lib<span class="o">]</span> <span class="o">[</span>--shuffle<span class="o">=(</span>0|1<span class="o">)]</span> <span class="o">[</span>--fletcher32<span class="o">=(</span>0|1<span class="o">)]</span> netcdffilename hdf5filename
    -h -- Print usage message.
    -v -- Show more information.
    -o -- Overwrite destination file.
    --complevel<span class="o">=(</span>0-9<span class="o">)</span> -- Set a compression level <span class="o">(</span>0 <span class="k">for </span>no compression, which
        is the default<span class="o">)</span>.
    --complib<span class="o">=</span>lib -- Set the compression library to be used during the copy.
        lib can be <span class="nb">set </span>to <span class="s2">&quot;zlib&quot;</span> or <span class="s2">&quot;lzo&quot;</span>. Defaults to <span class="s2">&quot;zlib&quot;</span>.
    --shuffle<span class="o">=(</span>0|1<span class="o">)</span> -- Activate or not the shuffling filter <span class="o">(</span>default is active
        <span class="k">if </span>complevel&gt;0<span class="o">)</span>.
    --fletcher32<span class="o">=(</span>0|1<span class="o">)</span> -- Whether to activate or not the fletcher32 filter <span class="o">(</span>not
        active by default<span class="o">)</span>.
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
        <p class="logo"><a href="../index.html">
          <img class="logo" src="../_static/logo-pytables-small.png" alt="Logo"/>
        </a></p>
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Utilities</a><ul>
<li><a class="reference internal" href="#ptdump">ptdump</a><ul>
<li><a class="reference internal" href="#usage">Usage</a></li>
<li><a class="reference internal" href="#a-small-tutorial-on-ptdump">A small tutorial on ptdump</a></li>
</ul>
</li>
<li><a class="reference internal" href="#ptrepack">ptrepack</a><ul>
<li><a class="reference internal" href="#id1">Usage</a></li>
<li><a class="reference internal" href="#a-small-tutorial-on-ptrepack">A small tutorial on ptrepack</a></li>
</ul>
</li>
<li><a class="reference internal" href="#nctoh5">nctoh5</a><ul>
<li><a class="reference internal" href="#id2">Usage</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="nested_rec_arrays.html"
                        title="previous chapter">Using nested record arrays (deprecated)</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="file_format.html"
                        title="next chapter">PyTables File Format</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/usersguide/utilities.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="relbar-bottom">
        
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="file_format.html" title="PyTables File Format"
             >next</a> &nbsp; &nbsp;</li>
        <li class="right" >
          <a href="nested_rec_arrays.html" title="Using nested record arrays (deprecated)"
             >previous</a> &nbsp; &nbsp;</li>
    <li><a href="../index.html">PyTables 2.4.0 documentation</a> &raquo;</li>

          <li><a href="index.html" >PyTables User&#8217;s Guide</a> &raquo;</li> 
      </ul>
    </div>
    </div>

    <div class="footer">
        &copy; Copyright 2011-2012, The PyTables Governance Team.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
    <!-- cloud_sptheme 1.3 -->
  </body>
</html>