

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Table View Enhancement &mdash; Camelot  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot  documentation" href="../index.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2652891-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="table-view-enhancement">
<span id="cep-table-view"></span><h1>Table View Enhancement<a class="headerlink" href="#table-view-enhancement" title="Permalink to this headline">¶</a></h1>
<p>status : draft</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This proposal is being implemented in the trunk, the functionallity described
here is not yet available in the latest release.</p>
</div>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>Besides displaying and editing data, every application needs the
functions to manipulate data or create reports.  In the Camelot
framework this is done through actions.  Actions appear as buttons
on the side of a form and a table.  When the user clicks on an
action button, a predefined function is called.</p>
<img alt="../_images/new_view_address.png" src="../_images/new_view_address.png" />
<p>An action is available to show the address on a map</p>
<p>Every Action is build up with a set of Action Steps.  An Action Step is a
reusable part of an Action, such as for example, ask the user to select a
file.  Camelot comes with a set of standard Actions and Action Steps that are
easily  extended to manipulate data or create reports.</p>
<p>When defining Actions, a clear distinction should be made between things
happening in the model thread (the manipulation or querying of data), and things
happening in the gui thread (pop up windows or reports).  The <a class="reference internal" href="../doc/threads.html#doc-threads"><em>The Two Threads</em></a>
section gives more detail on this.</p>
</div>
<div class="section" id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h2>
<p>In general, actions are defined by subclassing the standard Camelot
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.Action" title="camelot.admin.action.Action"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.Action</span></tt></a> class</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">camelot.admin.action</span> <span class="kn">import</span> <span class="n">Action</span>
<span class="kn">from</span> <span class="nn">camelot.view.action_steps</span> <span class="kn">import</span> <span class="n">PrintHtml</span>
<span class="kn">from</span> <span class="nn">camelot.core.utils</span> <span class="kn">import</span> <span class="n">ugettext_lazy</span> <span class="k">as</span> <span class="n">_</span>
<span class="kn">from</span> <span class="nn">camelot.view.art</span> <span class="kn">import</span> <span class="n">Icon</span>

<span class="k">class</span> <span class="nc">PrintReport</span><span class="p">(</span> <span class="n">Action</span> <span class="p">):</span>

    <span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Print Report&#39;</span><span class="p">)</span>
    <span class="n">icon</span> <span class="o">=</span> <span class="n">Icon</span><span class="p">(</span><span class="s">&#39;tango/16x16/actions/document-print.png&#39;</span><span class="p">)</span>
    <span class="n">tooltip</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;Print a report with all the movies&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">model_run</span><span class="p">(</span> <span class="bp">self</span><span class="p">,</span> <span class="n">model_context</span> <span class="p">):</span>
        <span class="k">yield</span> <span class="n">PrintHtml</span><span class="p">(</span> <span class="s">&#39;Hello World&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>Each action has two methods, <tt class="xref py py-meth docutils literal"><span class="pre">gui_run()</span></tt> and  <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt>, one of
them should be reimplemented in the subclass to either run the action in the
gui thread or to run the action in the model thread.  The default
<tt class="xref py py-meth docutils literal"><span class="pre">Action.gui_run()</span></tt> behavior is to pop-up a <tt class="xref py py-class docutils literal"><span class="pre">ProgressDialog</span></tt> dialog
and start the <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method in the model thread.</p>
<p><tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> in itself is a generator, that can yield <tt class="xref py py-class docutils literal"><span class="pre">ActionStep</span></tt>
objects back to the gui, such as a <tt class="xref py py-class docutils literal"><span class="pre">PrintHtml</span></tt>.</p>
<p>The action objects can than be used a an element of the actions list returned by
the <tt class="xref py py-meth docutils literal"><span class="pre">ApplicationAdmin.get_actions()</span></tt> method:</p>
<div class="highlight-python"><div class="highlight"><pre>    <span class="k">def</span> <span class="nf">get_actions</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">camelot.admin.action</span> <span class="kn">import</span> <span class="n">OpenNewView</span>
        <span class="kn">from</span> <span class="nn">camelot_example.model</span> <span class="kn">import</span> <span class="n">Movie</span>
        
        <span class="n">new_movie_action</span> <span class="o">=</span> <span class="n">OpenNewView</span><span class="p">(</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_related_admin</span><span class="p">(</span><span class="n">Movie</span><span class="p">)</span> <span class="p">)</span>
        <span class="n">new_movie_action</span><span class="o">.</span><span class="n">icon</span> <span class="o">=</span> <span class="n">Icon</span><span class="p">(</span><span class="s">&#39;tango/22x22/mimetypes/x-office-presentation.png&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="n">new_movie_action</span><span class="p">]</span>
</pre></div>
</div>
<p>or be used in the <tt class="xref py py-attr docutils literal"><span class="pre">ObjectAdmin.list_actions</span></tt> or
<a class="reference internal" href="../doc/object_admin.html#ObjectAdmin.form_actions" title="ObjectAdmin.form_actions"><tt class="xref py py-attr docutils literal"><span class="pre">ObjectAdmin.form_actions</span></tt></a> attributes.</p>
<p>The <a class="reference internal" href="../tutorial/importer.html#tutorial-importer"><em>Add an import wizard to an application</em></a> tutorial has a complete example of creating and
using and action.</p>
</div>
<div class="section" id="what-can-happen-inside-model-run">
<h2>What can happen inside <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt><a class="headerlink" href="#what-can-happen-inside-model-run" title="Permalink to this headline">¶</a></h2>
<div class="section" id="yield-events-to-the-gui">
<h3><tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt> events to the GUI<a class="headerlink" href="#yield-events-to-the-gui" title="Permalink to this headline">¶</a></h3>
<p>Actions need to be able to send their results back to the user, or ask
the user for additional information.  This is done with the <tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt>
statement.</p>
<p>Through <tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt>, an Action Step is send to the GUI thread, where it creates
user interaction, and sends it result back to the &#8216;model_thread&#8217;.  The model_thread
will be blocked while the action in the GUI thread takes place, eg</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">yield</span> <span class="n">PrintHtml</span><span class="p">(</span> <span class="s">&#39;Hello World&#39;</span> <span class="p">)</span>
</pre></div>
</div>
<p>Will pop up a print preview dialog in the GUI, and the model_run method will
only continue when this dialog is closed.</p>
<p>Events that can be yielded to the GUI should be of type
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.ActionStep" title="camelot.admin.action.base.ActionStep"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.base.ActionStep</span></tt></a>.  Action steps are reusable parts of
an action.  Possible Action Steps that can be yielded to the GUI include:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.change_object.ChangeObject" title="camelot.view.action_steps.change_object.ChangeObject"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.change_object.ChangeObject</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.print_preview.PrintPreview" title="camelot.view.action_steps.print_preview.PrintPreview"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.print_preview.PrintPreview</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.print_preview.PrintHtml" title="camelot.view.action_steps.print_preview.PrintHtml"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.print_preview.PrintHtml</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.print_preview.PrintJinjaTemplate" title="camelot.view.action_steps.print_preview.PrintJinjaTemplate"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.print_preview.PrintJinjaTemplate</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.open_file.OpenFile" title="camelot.view.action_steps.open_file.OpenFile"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.open_file.OpenFile</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.open_file.OpenStream" title="camelot.view.action_steps.open_file.OpenStream"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.open_file.OpenStream</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.open_file.OpenJinjaTemplate" title="camelot.view.action_steps.open_file.OpenJinjaTemplate"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.open_file.OpenJinjaTemplate</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.gui.Refresh" title="camelot.view.action_steps.gui.Refresh"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.gui.Refresh</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.gui.ShowPixmap" title="camelot.view.action_steps.gui.ShowPixmap"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.gui.ShowPixmap</span></tt></a></li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.gui.ShowChart" title="camelot.view.action_steps.gui.ShowChart"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.gui.ShowChart</span></tt></a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="keep-the-user-informed-about-progress">
<h3>keep the user informed about progress<a class="headerlink" href="#keep-the-user-informed-about-progress" title="Permalink to this headline">¶</a></h3>
<p>An <a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.update_progress.UpdateProgress" title="camelot.view.action_steps.update_progress.UpdateProgress"><tt class="xref py py-obj docutils literal"><span class="pre">camelot.view.action_steps.update_progress.UpdateProgress</span></tt></a> object can be
yielded, to update the state of the progress dialog:</p>
<p>This should be done regulary to keep the user informed about the
progres of the action:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">movie_count</span> <span class="o">=</span> <span class="n">Movie</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">count</span><span class="p">()</span>

<span class="n">report</span> <span class="o">=</span> <span class="s">&#39;&lt;table&gt;&#39;</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">movie</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span> <span class="n">Movie</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span> <span class="p">):</span>
    <span class="n">report</span> <span class="o">+=</span> <span class="s">&#39;&lt;tr&gt;&lt;td&gt;</span><span class="si">%s</span><span class="s">&lt;/td&gt;&lt;/tr&gt;&#39;</span><span class="o">%</span><span class="p">(</span><span class="n">movie</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="k">yield</span> <span class="n">UpdateProgress</span><span class="p">(</span> <span class="n">i</span><span class="p">,</span> <span class="n">movie_count</span> <span class="p">)</span>
<span class="n">report</span> <span class="o">+=</span> <span class="s">&#39;&lt;/table&gt;&#39;</span>

<span class="k">yield</span> <span class="n">PrintHtml</span><span class="p">(</span> <span class="n">report</span> <span class="p">)</span>
</pre></div>
</div>
<p>Should the user have pressed the <em class="guilabel">Cancel</em> button in the progress
dialog, the next yield of an UpdateProgress object will raise a
<a class="reference internal" href="../api2/camelot.core.html#camelot.core.exception.CancelRequest" title="camelot.core.exception.CancelRequest"><tt class="xref py py-class docutils literal"><span class="pre">camelot.core.exception.CancelRequest</span></tt></a>.</p>
</div>
<div class="section" id="manipulation-of-the-model">
<h3>manipulation of the model<a class="headerlink" href="#manipulation-of-the-model" title="Permalink to this headline">¶</a></h3>
<p>The most important purpose of an action is to query or manipulate the model,
all such things can be done in the <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method, such as executing
queries, manipulating files, etc.</p>
<p>Whenever a part of the model has been changed, it might be needed to inform
the GUI about this, so that it can update itself, the easy way of doing so
is by yielding an instance of <a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.orm.FlushSession" title="camelot.view.action_steps.orm.FlushSession"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.orm.FlushSession</span></tt></a>
such as:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">movie</span><span class="o">.</span><span class="n">rating</span> <span class="o">=</span> <span class="mi">5</span>
<span class="k">yield</span> <span class="n">FlushSession</span><span class="p">(</span> <span class="n">model_context</span><span class="o">.</span><span class="n">session</span> <span class="p">)</span>
</pre></div>
</div>
<p>This will flush the session to the database, and at the same time update
the GUI so that the flushed changes are shown to the user by updating the
visualisation of the changed movie on every screen in the application that
displays this object.  Alternative updates that can be generated are :</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.orm.UpdateObject" title="camelot.view.action_steps.orm.UpdateObject"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.orm.UpdateObject</span></tt></a>, if one wants to inform
the GUI an object is going to be updated.</li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.orm.DeleteObject" title="camelot.view.action_steps.orm.DeleteObject"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.orm.DeleteObject</span></tt></a>, if one wants to inform
the GUI an object is going to be deleted.</li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.orm.CreateObject" title="camelot.view.action_steps.orm.CreateObject"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.orm.CreateObject</span></tt></a>, if one wants to inform
the GUI an object has been created.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="raise-exceptions">
<h3>raise exceptions<a class="headerlink" href="#raise-exceptions" title="Permalink to this headline">¶</a></h3>
<p>When an action fails, a normal Python <tt class="xref std std-keyword docutils literal"><span class="pre">Exception</span></tt> can be raised, which
will pop-up an exception dialog to the user that displays a stack trace of the
exception.  In case no stack trace should be shown to the user, a
<a class="reference internal" href="../api2/camelot.core.html#camelot.core.exception.UserException" title="camelot.core.exception.UserException"><tt class="xref py py-class docutils literal"><span class="pre">camelot.core.exception.UserException</span></tt></a> should be raised. This will popup
a friendly dialog :</p>
<img alt="../_images/user_exception.png" src="../_images/user_exception.png" />
<p>When the <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method raises a <a class="reference internal" href="../api2/camelot.core.html#camelot.core.exception.CancelRequest" title="camelot.core.exception.CancelRequest"><tt class="xref py py-class docutils literal"><span class="pre">camelot.core.exception.CancelRequest</span></tt></a>,
a <tt class="xref py py-class docutils literal"><span class="pre">GeneratorExit</span></tt> or a <tt class="xref py py-class docutils literal"><span class="pre">StopIteration</span></tt> exception, these are
ignored and nothing will be shown to the user.</p>
</div>
<div class="section" id="handle-exceptions">
<h3>handle exceptions<a class="headerlink" href="#handle-exceptions" title="Permalink to this headline">¶</a></h3>
<p>In case an unexpected event occurs in the GUI, a <tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt> statement
will raise a <a class="reference internal" href="../api2/camelot.core.html#camelot.core.exception.GuiException" title="camelot.core.exception.GuiException"><tt class="xref py py-class docutils literal"><span class="pre">camelot.core.exception.GuiException</span></tt></a>.  This exception
will propagate through the action an will be ignored unless handled by the
developer.</p>
</div>
<div class="section" id="request-information-from-the-user">
<h3>request information from the user<a class="headerlink" href="#request-information-from-the-user" title="Permalink to this headline">¶</a></h3>
<p>The pop-up of a dialog that presents the user with a number of options can be
triggered from within the <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method.  This
happens by transferring an <strong>options</strong> object back and forth between the
<strong>model_thread</strong> and the <strong>gui_thread</strong>.  To transfer such an object, this object
first needs to be defined:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Options</span><span class="p">(</span> <span class="nb">object</span> <span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">earliest_releasedate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2000</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">latest_releasedate</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span>

    <span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span> <span class="n">ObjectAdmin</span> <span class="p">):</span>
        <span class="n">form_display</span> <span class="o">=</span> <span class="p">[</span> <span class="s">&#39;earliest_releasedate&#39;</span><span class="p">,</span> <span class="s">&#39;latest_releasedate&#39;</span> <span class="p">]</span>
        <span class="n">field_attributes</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&#39;earliest_releasedate&#39;</span><span class="p">:{</span><span class="s">&#39;delegate&#39;</span><span class="p">:</span><span class="n">delegates</span><span class="o">.</span><span class="n">DateDelegate</span><span class="p">},</span>
                             <span class="s">&#39;latest_releasedate&#39;</span><span class="p">:{</span><span class="s">&#39;delegate&#39;</span><span class="p">:</span><span class="n">delegates</span><span class="o">.</span><span class="n">DateDelegate</span><span class="p">},</span> <span class="p">}</span>
</pre></div>
</div>
<p>Than a <a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.change_object.ChangeObject" title="camelot.view.action_steps.change_object.ChangeObject"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.change_object.ChangeObject</span></tt></a> action step can be
<tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt> to present the options to the user and get the filled in values back :</p>
<div class="highlight-python"><div class="highlight"><pre>        <span class="kn">from</span> <span class="nn">camelot.view</span> <span class="kn">import</span> <span class="n">action_steps</span>
        <span class="n">options</span> <span class="o">=</span> <span class="n">NewProjectOptions</span><span class="p">()</span>
        <span class="k">yield</span> <span class="n">action_steps</span><span class="o">.</span><span class="n">UpdateProgress</span><span class="p">(</span> <span class="n">text</span> <span class="o">=</span> <span class="s">&#39;Request information&#39;</span> <span class="p">)</span>
        <span class="k">yield</span> <span class="n">action_steps</span><span class="o">.</span><span class="n">ChangeObject</span><span class="p">(</span> <span class="n">options</span> <span class="p">)</span>
</pre></div>
</div>
<p>Will show a dialog to modify the object:</p>
<img alt="../_images/change_object.png" src="../_images/change_object.png" />
<p>When the user presses <em class="guilabel">Cancel</em> button of the dialog, the
<tt class="xref std std-keyword docutils literal"><span class="pre">yield</span></tt> statement will raise a
<a class="reference internal" href="../api2/camelot.core.html#camelot.core.exception.CancelRequest" title="camelot.core.exception.CancelRequest"><tt class="xref py py-class docutils literal"><span class="pre">camelot.core.exception.CancelRequest</span></tt></a>.</p>
<p>Other ways of requesting information are :</p>
<blockquote>
<div><ul class="simple">
<li><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.NewObject</span></tt>, to request the user to fill in
a new form for an object of a specified class.  This will return such
a new object or None if the user canceled the operation.</li>
<li><a class="reference internal" href="../api2/camelot.view.action_steps.html#camelot.view.action_steps.select_file.SelectFile" title="camelot.view.action_steps.select_file.SelectFile"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.action_steps.select_file.SelectFile</span></tt></a>, to request
to select an existing file to process or a new file to save information.</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="states-and-modes">
<h2>States and Modes<a class="headerlink" href="#states-and-modes" title="Permalink to this headline">¶</a></h2>
<div class="section" id="states">
<h3>States<a class="headerlink" href="#states" title="Permalink to this headline">¶</a></h3>
<p>The widget that is used to trigger an action can be in different states.  A
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.State" title="camelot.admin.action.base.State"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.base.State</span></tt></a> object is returned by the
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.Action.get_state" title="camelot.admin.action.base.Action.get_state"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.base.Action.get_state</span></tt></a> method.  Subclasses of
Action can reimplement this method to change the State of an action button.</p>
<p>This allows to hide or disable the action button, depending on the objects
selected or the current object being displayed.</p>
</div>
<div class="section" id="modes">
<h3>Modes<a class="headerlink" href="#modes" title="Permalink to this headline">¶</a></h3>
<p>An action widget can be triggered in different modes, for example a print button
can be triggered as <em>Print</em> or <em>Export to PDF</em>.  The different modes of
an action are specified as a list of <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.Mode" title="camelot.admin.action.base.Mode"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.base.Mode</span></tt></a> objects.</p>
<p>To change the modes of an Action, either specify the <tt class="xref py py-attr docutils literal"><span class="pre">modes</span></tt> attribute of
an <tt class="xref py py-class docutils literal"><span class="pre">Action</span></tt> or specify the <tt class="xref py py-attr docutils literal"><span class="pre">modes</span></tt> attribute of the <tt class="xref py py-class docutils literal"><span class="pre">State</span></tt>
returned by the <tt class="xref py py-meth docutils literal"><span class="pre">Action.get_state()</span></tt> method.</p>
</div>
</div>
<div class="section" id="action-context">
<h2>Action Context<a class="headerlink" href="#action-context" title="Permalink to this headline">¶</a></h2>
<p>Depending on where an action was triggered, a different context will be
available during its execution in <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.Action.gui_run" title="camelot.admin.action.base.Action.gui_run"><tt class="xref py py-meth docutils literal"><span class="pre">camelot.admin.action.base.Action.gui_run()</span></tt></a>
and <tt class="xref py py-meth docutils literal"><span class="pre">camelot.admin.action.base.Action.model_run()</span></tt>.</p>
<p>The minimal context available in the <em>GUI thread</em> is :</p>
<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.base.</tt><tt class="descname">GuiContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/base.html#GuiContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The GUI context in which an action is running.  This object can contain
references to widgets and other usefull information.  This object cannot
contain reference to anything database or model related, as those belong
strictly to the <tt class="xref py py-class docutils literal"><span class="pre">ModelContext</span></tt></p>
<dl class="attribute">
<dt id="progress_dialog">
<tt class="descname">progress_dialog</tt><a class="headerlink" href="#progress_dialog" title="Permalink to this definition">¶</a></dt>
<dd><p>an instance of <tt class="xref py py-class docutils literal"><span class="pre">QtGui.QProgressDialog</span></tt> or <tt class="xref std std-keyword docutils literal"><span class="pre">None</span></tt></p>
</dd></dl>

<dl class="attribute">
<dt id="mode_name">
<tt class="descname">mode_name</tt><a class="headerlink" href="#mode_name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name of the mode in which the action was triggered</p>
</dd></dl>

<dl class="attribute">
<dt id="model_context">
<tt class="descname">model_context</tt><a class="headerlink" href="#model_context" title="Permalink to this definition">¶</a></dt>
<dd><p>a subclass of <tt class="xref py py-class docutils literal"><span class="pre">ModelContext</span></tt> to be used in <tt class="xref py py-meth docutils literal"><span class="pre">create_model_context()</span></tt>
as the type of object to return.</p>
</dd></dl>

</dd></dl>

<p>While the minimal contact available in the <em>Model thread</em> is:</p>
<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.base.</tt><tt class="descname">ModelContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/base.html#ModelContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The Model context in which an action is running.  The model context can contain
reference to database sessions or other model related data. This object can not 
contain references to widgets as those belong strictly to the <tt class="xref py py-class docutils literal"><span class="pre">GuiContext</span></tt>.</p>
<dl class="attribute">
<dt>
<tt class="descname">mode_name</tt></dt>
<dd><p>the name of the mode in which the action was triggered</p>
</dd></dl>

</dd></dl>

<div class="section" id="application-actions">
<span id="doc-application-action"></span><h3>Application Actions<a class="headerlink" href="#application-actions" title="Permalink to this headline">¶</a></h3>
<p>To enable Application Actions for a certain <tt class="xref py py-class docutils literal"><span class="pre">ApplicationAdmin</span></tt> overwrite
its <tt class="xref py py-meth docutils literal"><span class="pre">ApplicationAdmin.get_actions()</span></tt> method</p>
<div class="highlight-python"><pre>from camelot.admin.application_admin import ApplicationAdmin
from camelot.admin.action import Action

class GenerateReports( Action ):

    verbose_name = _('Generate Reports')

    def model_run( self, model_context):
        for i in range(10):
            yield UpdateProgress(i, 10)

class MyApplicationAdmin( ApplicationAdmin )

    def get_actions( self ):
        return [GenerateReports(),]</pre>
</div>
<p>An action specified here will receive an <tt class="xref py py-class docutils literal"><span class="pre">ApplicationActionGuiContext</span></tt>
object as the <em>gui_context</em> argument of the the <tt class="xref py py-meth docutils literal"><span class="pre">gui_run()</span></tt>
method, and a <tt class="xref py py-class docutils literal"><span class="pre">ApplicationActionModelContext</span></tt> object as the
<em>model_context</em> argument of the <tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method.</p>
<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.application_action.</tt><tt class="descname">ApplicationActionGuiContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/application_action.html#ApplicationActionGuiContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The GUI context for an <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.Action" title="camelot.admin.action.Action"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.Action</span></tt></a>.  On top of 
the attributes of the <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.GuiContext" title="camelot.admin.action.base.GuiContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.base.GuiContext</span></tt></a>, this 
context contains :</p>
<dl class="attribute">
<dt id="workspace">
<tt class="descname">workspace</tt><a class="headerlink" href="#workspace" title="Permalink to this definition">¶</a></dt>
<dd><p>the the <a class="reference internal" href="../api2/camelot.view.html#camelot.view.workspace.DesktopWorkspace" title="camelot.view.workspace.DesktopWorkspace"><tt class="xref py py-class docutils literal"><span class="pre">camelot.view.workspace.DesktopWorkspace</span></tt></a> of the 
application in which views can be opened or adapted.</p>
</dd></dl>

<dl class="attribute">
<dt id="admin">
<tt class="descname">admin</tt><a class="headerlink" href="#admin" title="Permalink to this definition">¶</a></dt>
<dd><p>the application admin.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.application_action.</tt><tt class="descname">ApplicationActionModelContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/application_action.html#ApplicationActionModelContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The Model context for an <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.Action" title="camelot.admin.action.Action"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.Action</span></tt></a>.  On top 
of the attributes of the <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.base.ModelContext" title="camelot.admin.action.base.ModelContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.base.ModelContext</span></tt></a>, 
this context contains :</p>
<dl class="attribute">
<dt>
<tt class="descname">admin</tt></dt>
<dd><p>the application admin.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="form-actions">
<h3>Form Actions<a class="headerlink" href="#form-actions" title="Permalink to this headline">¶</a></h3>
<p>To enable Form Actions for a certain <tt class="xref py py-class docutils literal"><span class="pre">ObjectAdmin</span></tt> or <tt class="xref py py-class docutils literal"><span class="pre">EntityAdmin</span></tt>,
specify the <tt class="xref py py-attr docutils literal"><span class="pre">form_actions</span></tt> attribute.</p>
<p>An action specified here will receive a <tt class="xref py py-class docutils literal"><span class="pre">FormActionGuiContext</span></tt>  object as the
<em>gui_context</em> argument of the <tt class="xref py py-meth docutils literal"><span class="pre">gui_run()</span></tt> method, and a
<tt class="xref py py-class docutils literal"><span class="pre">FormActionModelContext</span></tt> object as the <em>model_context</em> argument of the
<tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method.</p>
<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.form_action.</tt><tt class="descname">FormActionGuiContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/form_action.html#FormActionGuiContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The context for an <tt class="xref py py-class docutils literal"><span class="pre">Action</span></tt> on a form.  On top of the attributes of the 
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.application_action.ApplicationActionGuiContext" title="camelot.admin.action.application_action.ApplicationActionGuiContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.application_action.ApplicationActionGuiContext</span></tt></a>, 
this context contains :</p>
<dl class="attribute">
<dt id="widget_mapper">
<tt class="descname">widget_mapper</tt><a class="headerlink" href="#widget_mapper" title="Permalink to this definition">¶</a></dt>
<dd><p>the <tt class="xref py py-class docutils literal"><span class="pre">QtGui.QDataWidgetMapper</span></tt> class that relates the form 
widget to the model.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.form_action.</tt><tt class="descname">FormActionModelContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/form_action.html#FormActionModelContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>On top of the attributes of the 
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.application_action.ApplicationActionModelContext" title="camelot.admin.action.application_action.ApplicationActionModelContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.application_action.ApplicationActionModelContext</span></tt></a>, 
this context contains :</p>
<dl class="attribute">
<dt id="current_row">
<tt class="descname">current_row</tt><a class="headerlink" href="#current_row" title="Permalink to this definition">¶</a></dt>
<dd><p>the row in the list that is currently displayed in the form</p>
</dd></dl>

<dl class="attribute">
<dt id="collection_count">
<tt class="descname">collection_count</tt><a class="headerlink" href="#collection_count" title="Permalink to this definition">¶</a></dt>
<dd><p>the number of objects that can be reached in the form.</p>
</dd></dl>

<dl class="attribute">
<dt id="selection_count">
<tt class="descname">selection_count</tt><a class="headerlink" href="#selection_count" title="Permalink to this definition">¶</a></dt>
<dd><p>the number of objects displayed in the form, at most 1.</p>
</dd></dl>

<dl class="attribute">
<dt id="session">
<tt class="descname">session</tt><a class="headerlink" href="#session" title="Permalink to this definition">¶</a></dt>
<dd><p>The session to which the objects in the list belong.</p>
</dd></dl>

<p>The <a class="reference internal" href="../doc/actions.html#selection_count" title="selection_count"><tt class="xref py py-attr docutils literal"><span class="pre">selection_count</span></tt></a> attribute allows the 
<tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> to quickly evaluate the size of the collection without 
calling the potetially time consuming method <tt class="xref py py-meth docutils literal"><span class="pre">get_collection()</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descclassname">FormActionModelContext.</tt><tt class="descname">get_collection</tt><big>(</big><em>yield_per=None</em><big>)</big><a class="reference internal" href="../_modules/camelot/admin/action/form_action.html#FormActionModelContext.get_collection"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>yield_per</strong> &#8211; an integer number giving a hint on how many objects
should fetched from the database at the same time.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a generator over the objects in the list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<tt class="descclassname">FormActionModelContext.</tt><tt class="descname">get_object</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/camelot/admin/action/form_action.html#FormActionModelContext.get_object"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the object currently displayed in the form, None if no object</td>
</tr>
</tbody>
</table>
<p>is displayed yet</p>
</dd></dl>

<dl class="method">
<dt>
<tt class="descclassname">FormActionModelContext.</tt><tt class="descname">get_selection</tt><big>(</big><em>yield_per=None</em><big>)</big><a class="reference internal" href="../_modules/camelot/admin/action/form_action.html#FormActionModelContext.get_selection"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>Method to be compatible with a 
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.list_action.ListActionModelContext" title="camelot.admin.action.list_action.ListActionModelContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.list_action.ListActionModelContext</span></tt></a>, this
allows creating a single Action to be used on a form and on list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>yield_per</strong> &#8211; this parameter has no effect, it&#8217;s here only for
compatibility with <a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.list_action.ListActionModelContext.get_selection" title="camelot.admin.action.list_action.ListActionModelContext.get_selection"><tt class="xref py py-meth docutils literal"><span class="pre">camelot.admin.action.list_action.ListActionModelContext.get_selection()</span></tt></a></td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a generator that yields the current object displayed in the 
form and does not yield anything if no object is displayed yet
in the form.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="list-actions">
<h3>List Actions<a class="headerlink" href="#list-actions" title="Permalink to this headline">¶</a></h3>
<p>To enable List Actions for a certain <tt class="xref py py-class docutils literal"><span class="pre">ObjectAdmin</span></tt> or
<tt class="xref py py-class docutils literal"><span class="pre">EntityAdmin</span></tt>, specify the <tt class="xref py py-attr docutils literal"><span class="pre">list_actions</span></tt> attribute:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">list_actions</span> <span class="o">=</span> <span class="p">[</span> <span class="n">ChangeRatingAction</span><span class="p">()</span> <span class="p">]</span>
</pre></div>
</div>
<p>This will result in a button being displayed on the table view.</p>
<img alt="../_images/table_view_movie.png" src="../_images/table_view_movie.png" />
<p>An action specified here will receive a <tt class="xref py py-class docutils literal"><span class="pre">ListActionGuiContext</span></tt> object as
the <em>gui_context</em> argument of th the <tt class="xref py py-meth docutils literal"><span class="pre">gui_run()</span></tt> method, and a
<tt class="xref py py-class docutils literal"><span class="pre">ListActionModelContext</span></tt> object as the <em>model_context</em> argument of the
<tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> method.</p>
<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.list_action.</tt><tt class="descname">ListActionGuiContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/list_action.html#ListActionGuiContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>The context for an <tt class="xref py py-class docutils literal"><span class="pre">Action</span></tt> on a table view.  On top of the attributes of the 
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.application_action.ApplicationActionGuiContext" title="camelot.admin.action.application_action.ApplicationActionGuiContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.application_action.ApplicationActionGuiContext</span></tt></a>, 
this context contains :</p>
<dl class="attribute">
<dt id="item_view">
<tt class="descname">item_view</tt><a class="headerlink" href="#item_view" title="Permalink to this definition">¶</a></dt>
<dd><p>the <tt class="xref py py-class docutils literal"><span class="pre">QtGui.QAbstractItemView</span></tt> class that relates to the table 
view on which the widget will be placed.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><tt class="descclassname">camelot.admin.action.list_action.</tt><tt class="descname">ListActionModelContext</tt><a class="reference internal" href="../_modules/camelot/admin/action/list_action.html#ListActionModelContext"><span class="viewcode-link">[source]</span></a></dt>
<dd><p>On top of the attributes of the 
<a class="reference internal" href="../api2/camelot.admin.action.html#camelot.admin.action.application_action.ApplicationActionModelContext" title="camelot.admin.action.application_action.ApplicationActionModelContext"><tt class="xref py py-class docutils literal"><span class="pre">camelot.admin.action.application_action.ApplicationActionModelContext</span></tt></a>, 
this context contains :</p>
<dl class="attribute">
<dt>
<tt class="descname">selection_count</tt></dt>
<dd><p>the number of selected rows.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">collection_count</tt></dt>
<dd><p>the number of rows in the list.</p>
</dd></dl>

<dl class="attribute">
<dt id="selected_rows">
<tt class="descname">selected_rows</tt><a class="headerlink" href="#selected_rows" title="Permalink to this definition">¶</a></dt>
<dd><p>an ordered list with tuples of selected row ranges.  the range is
inclusive.</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">current_row</tt></dt>
<dd><p>the current row in the list</p>
</dd></dl>

<dl class="attribute">
<dt>
<tt class="descname">session</tt></dt>
<dd><p>The session to which the objects in the list belong.</p>
</dd></dl>

<p>The <a class="reference internal" href="../doc/actions.html#collection_count" title="collection_count"><tt class="xref py py-attr docutils literal"><span class="pre">collection_count</span></tt></a> and <a class="reference internal" href="../doc/actions.html#selection_count" title="selection_count"><tt class="xref py py-attr docutils literal"><span class="pre">selection_count</span></tt></a> attributes allow the 
<tt class="xref py py-meth docutils literal"><span class="pre">model_run()</span></tt> to quickly evaluate the size of the collection or the
selection without calling the potentially time consuming methods
<tt class="xref py py-meth docutils literal"><span class="pre">get_collection()</span></tt> and <tt class="xref py py-meth docutils literal"><span class="pre">get_selection()</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descclassname">ListActionModelContext.</tt><tt class="descname">get_collection</tt><big>(</big><em>yield_per=None</em><big>)</big><a class="reference internal" href="../_modules/camelot/admin/action/list_action.html#ListActionModelContext.get_collection"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>yield_per</strong> &#8211; an integer number giving a hint on how many objects
should fetched from the database at the same time.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a generator over the objects in the list</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<tt class="descclassname">ListActionModelContext.</tt><tt class="descname">get_object</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/camelot/admin/action/list_action.html#ListActionModelContext.get_object"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">the object displayed in the current row or None</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt>
<tt class="descclassname">ListActionModelContext.</tt><tt class="descname">get_selection</tt><big>(</big><em>yield_per=None</em><big>)</big><a class="reference internal" href="../_modules/camelot/admin/action/list_action.html#ListActionModelContext.get_selection"><span class="viewcode-link">[source]</span></a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>yield_per</strong> &#8211; an integer number giving a hint on how many objects
should fetched from the database at the same time.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">a generator over the objects selected</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="reusing-list-and-form-actions">
<h3>Reusing List and Form actions<a class="headerlink" href="#reusing-list-and-form-actions" title="Permalink to this headline">¶</a></h3>
<p>There is no need to define a different action subclass for form and list
actions, as both their model_context have a <strong>get_selection</strong> method, a single
action can be used both for the list and the form.</p>
</div>
</div>
<div class="section" id="generate-documents">
<h2>Generate documents<a class="headerlink" href="#generate-documents" title="Permalink to this headline">¶</a></h2>
<p>Generating reports and documents is an important part of any application.
Python and Qt provide various ways to generate documents.  Each of them
with its own advantages and disadvantages.</p>
<blockquote>
<div><table border="1" class="docutils">
<colgroup>
<col width="31%" />
<col width="34%" />
<col width="35%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Method</td>
<td>Advantages</td>
<td>Disadvantages</td>
</tr>
<tr class="row-even"><td>PDF documents through
reportlab</td>
<td><ul class="first last simple">
<li>Perfect control over
layout</li>
<li>Excellent for mass
creation of documents</li>
</ul>
</td>
<td><ul class="first last simple">
<li>Relatively steep
learning curve</li>
<li>User cannot edit
document</li>
</ul>
</td>
</tr>
<tr class="row-odd"><td>HTML</td>
<td><ul class="first last simple">
<li>Easy to get started</li>
<li>Print preview within
Camelot</li>
<li>No dependencies</li>
</ul>
</td>
<td><ul class="first last simple">
<li>Not much layout control</li>
<li>User cannot edit
document</li>
</ul>
</td>
</tr>
<tr class="row-even"><td>Docx Word documents</td>
<td><ul class="first last simple">
<li>User can edit
document</li>
</ul>
</td>
<td><ul class="first last simple">
<li>Proprietary format</li>
<li>Word processor needed</li>
</ul>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Camelot leaves all options open to the developer.</p>
<p>Please have a look at <a class="reference internal" href="../tutorial/reporting.html#tutorial-reporting"><em>Creating a Report with Camelot</em></a> to get started with generating
documents.</p>
</div>
<div class="section" id="inspiration">
<h2>Inspiration<a class="headerlink" href="#inspiration" title="Permalink to this headline">¶</a></h2>
<blockquote>
<div><ul class="simple">
<li>Implementing actions as generators was made possible with the language functions
of <span class="target" id="index-0"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0342"><strong>PEP 342</strong></a>.</li>
<li>The EuroPython talk of Erik Groeneveld inspired the use of these
features. (<a class="reference external" href="http://ep2011.europython.eu/conference/talks/beyond-python-enhanched-generators">http://ep2011.europython.eu/conference/talks/beyond-python-enhanched-generators</a>)</li>
<li>Action steps were introduced to be able to take advantage of the new language
features of <span class="target" id="index-1"></span><a class="pep reference external" href="http://www.python.org/dev/peps/pep-0380"><strong>PEP 380</strong></a> in Python 3.3</li>
</ul>
</div></blockquote>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Table View Enhancement</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#summary">Summary</a></li>
<li><a class="reference internal" href="#what-can-happen-inside-model-run">What can happen inside <tt class="docutils literal"><span class="pre">model_run()</span></tt></a><ul>
<li><a class="reference internal" href="#yield-events-to-the-gui"><tt class="docutils literal"><span class="pre">yield</span></tt> events to the GUI</a></li>
<li><a class="reference internal" href="#keep-the-user-informed-about-progress">keep the user informed about progress</a></li>
<li><a class="reference internal" href="#manipulation-of-the-model">manipulation of the model</a></li>
<li><a class="reference internal" href="#raise-exceptions">raise exceptions</a></li>
<li><a class="reference internal" href="#handle-exceptions">handle exceptions</a></li>
<li><a class="reference internal" href="#request-information-from-the-user">request information from the user</a></li>
</ul>
</li>
<li><a class="reference internal" href="#states-and-modes">States and Modes</a><ul>
<li><a class="reference internal" href="#states">States</a></li>
<li><a class="reference internal" href="#modes">Modes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#action-context">Action Context</a><ul>
<li><a class="reference internal" href="#application-actions">Application Actions</a></li>
<li><a class="reference internal" href="#form-actions">Form Actions</a></li>
<li><a class="reference internal" href="#list-actions">List Actions</a></li>
<li><a class="reference internal" href="#reusing-list-and-form-actions">Reusing List and Form actions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#generate-documents">Generate documents</a></li>
<li><a class="reference internal" href="#inspiration">Inspiration</a></li>
</ul>
</li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/cep/table_view.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li> 
      </ul>
    </div>

<br/>
<a href="http://example.com/my_article.html#disqus_thread">Comments</a>
<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */

  /** var disqus_developer = 1 **/

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://camelot.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=camelot">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2009 - 2011, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
<div class="footer">
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

<script type="text/javascript">
var disqus_shortname = 'camelot';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/camelot/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



  </body>
</html>