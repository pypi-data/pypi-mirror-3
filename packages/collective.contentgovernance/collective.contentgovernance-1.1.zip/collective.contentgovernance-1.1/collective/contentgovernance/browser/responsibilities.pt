<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="collective.contentgovernance">

<head>
    <metal:block fill-slot="top_slot"
                 tal:define="dummy python:request.set('disable_border',1);
                             disable_column_one python:request.set('disable_plone.leftcolumn',1);
                             disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
</head>

<body>
<metal:main fill-slot="main">

    <h1 class="documentFirstHeading"
        i18n:translate="label_responsibilities">My responsibilities</h1>

    <div class="documentDescription" i18n:translate="description_responsibilities">
        An overview of the content on this site that you are responsible for.
    </div>
    <div id="content-core">
    
    <tal:userswitcher tal:define="users view/userVocabulary; selected_user view/user">

      <form action="@@responsibilities"
          class="enableAutoFocus"
          name="ownership_form"
          method="post">

        <select name="user">
          <tal:user tal:repeat="user users">
            <option tal:attributes="value user; selected python: user==selected_user and 'selected' or None" tal:content="python: users[user]"/>
          </tal:user>
        </select>
        <input type="hidden" name="form.submitted" value="1" />

        <div class="formControls">
                <input class="context"
                       type="submit"
                       name="form.button.Update"
                       value="Update"
                       i18n:attributes="value label_update;"
                       />
        </div>

      </form>
    </tal:userswitcher>
      <tal:responsibilities 
        tal:define="responsibilities view/responsibilities;
                    normalizeString nocall: context/plone_utils/normalizeString;
                    toLocalizedTime nocall: context/@@plone/toLocalizedTime;">

        <table class="listing" tal:condition="responsibilities">
          <thead>
            <tr>
              <th>&nbsp;<tal:title i18n:domain="plone" i18n:translate="listingheader_title"
                >Title</tal:title>&nbsp;</th>
              <th>&nbsp;<tal:path i18n:translate="listingheader_path"
                >Path</tal:path>&nbsp;</th>
              <th>&nbsp;<tal:modified i18n:domain="plone" i18n:translate="listingheader_modified"
                >Modified</tal:modified>&nbsp;</th>
              <th>&nbsp;<tal:modified i18n:translate="listingheader_expires"
                >Expires on</tal:modified>&nbsp;</th>
              <th>&nbsp;<tal:state i18n:translate="listingheader_state"
                >State</tal:state>&nbsp;</th>
              <th>&nbsp;<tal:size i18n:translate="listingheader_size"
                >Size</tal:size>&nbsp;</th>
              <th>&nbsp;<tal:comments i18n:translate="listingheader_comments"
                >Comments</tal:comments>&nbsp;</th>
            </tr>
          </thead>
          <tbody>

            <tal:entry tal:repeat="item responsibilities">
            <tal:block tal:define="item_url item/getURL|item/absolute_url;
                                   item_id item/getId|item/id;
                                   item_title_or_id item/pretty_title_or_id;
                                   item_description item/Description;
                                   item_type item/portal_type;
                                   item_type_title item/Type;
                                   item_modified item/ModificationDate;
                                   item_expires item/ExpirationDate;
                                   item_icon python:plone_view.getIcon(item);
                                   item_type_class python:'contenttype-' + normalizeString(item_type);
                                   item_wf_state item/review_state|python: context.portal_workflow.getInfoFor(item, 'review_state', '');
                                   item_wf_state_class python:'state-' + normalizeString(item_wf_state);
                                   item_size item/getObjSize;
                                   item_comments item/total_comments;
                                   item_path item/getPath;
                                   ">
                
                <tr metal:define-macro="listitem"
                    tal:define="oddrow repeat/item/odd;"
                    tal:attributes="class python:oddrow and 'even' or 'odd'">
                  <td>
                      <img width="16" height="16"
                           src="" alt=""
                           tal:condition="item_icon/url"
                           tal:attributes="src item_icon/url;
                                           alt item_icon/description;
                                           title item_icon/title;
                                           width item_icon/width;
                                           height item_icon/height;" />
                      <a href="#"
                         tal:attributes="href item_url;
                                         class string:$item_wf_state_class $item_type_class;
                                         title item_description;"
                         tal:content="item_title_or_id">
                          Item Title
                      </a>
                  </td>
                  <td tal:content="item_path">
                    August 16, 2001 at 23:35:59
                  </td>
                  <td tal:content="python:toLocalizedTime(item_modified,long_format=1)">
                    August 16, 2001 at 23:35:59
                  </td>
                  <td tal:content="python:toLocalizedTime(item_expires,long_format=1)">
                    August 16, 2001 at 23:35:59
                  </td>
                  <td tal:content="item_wf_state" tal:attributes="class string: $item_wf_state_class">
                    Published
                  </td>
                  <td tal:content="item_size">
                    10kb
                  </td>
                  <td tal:content="item_comments">
                    10kb
                  </td>
                </tr>
            </tal:block>
            </tal:entry>

          </tbody>
        </table>

      </tal:responsibilities>
    </div>

</metal:main>
</body>
</html>
