#Pipe pipe_RmaGqXW63RG5ZBSspgt1Yg generated by pipe2py

from pipe2py import Context
from pipe2py.modules import *

import pipe_Zh1GhXa63RG_biEj6ycw5g
import pipe_HBXVrI6n3RGE9RZ3rLQIDg
import pipe_CCh5Noqn3RGeIJNB6icw5g

def pipe_RmaGqXW63RG5ZBSspgt1Yg(context, _INPUT, conf=None, **kwargs):
    "Pipeline"
    if conf is None:
        conf = {}

    if context.describe_input:
        return [(u'1', u'ComicURL', u'Enter the URL of the comic item:', u'url', u''), (u'2', u'ComicTitle', u'Enter the Title of the Comic', u'text', u''), (u'3', u'pubDate', u'Enter the pubDate of the feed item', u'text', u'')]

    forever = pipeforever.pipe_forever(context, None, conf=None)

    def pipe_sw_201(context, _INPUT, conf=None, **kwargs):
        "Submodule"
        sw_201 = pipestrconcat.pipe_strconcat(context, _INPUT, conf={u'part': [{u'type': u'text', u'subkey': u'comicimage'}, {u'type': u'text', u'subkey': u'news.content'}]})
        return sw_201
    sw_98 = pipeurlinput.pipe_urlinput(context, forever, conf={u'default': {u'type': u'url', u'value': u''}, u'position': {u'type': u'number', u'value': u'1'}, u'prompt': {u'type': u'text', u'value': u'Enter the URL of the comic item:'}, u'name': {u'type': u'text', u'value': u'ComicURL'}, u'debug': {u'type': u'url', u'value': u'http://www.penny-arcade.com/comic/2010/10/13/more-things-are-dreamt-your-philosophy/'}})
    def pipe_sw_421(context, _INPUT, conf=None, **kwargs):
        "Submodule"
        sw_421 = pipefetchpage.pipe_fetchpage(context, _INPUT, conf={u'URL': {u'terminal': u'URL', u'type': u'url'}, u'to': {u'type': u'text', u'value': u'</title>'}, u'token': {u'type': u'text', u'value': u''}, u'from': {u'type': u'text', u'value': u'<title>'}}, URL = sw_98)
        return sw_421
    def pipe_sw_184(context, _INPUT, conf=None, **kwargs):
        "Submodule"
        sw_184 = pipe_Zh1GhXa63RG_biEj6ycw5g.pipe_Zh1GhXa63RG_biEj6ycw5g(context, _INPUT, conf={u'urlinput1': {u'terminal': u'urlinput1', u'type': u'url'}}, urlinput1 = sw_98)
        return sw_184
    sw_324 = pipestrconcat.pipe_strconcat(context, forever, conf={u'part': [{u'type': u'text', u'value': u'<'}, {u'type': u'text', u'value': u'a href="'}, {u'terminal': u'3_part', u'type': u'text', u'subkey': u''}, {u'type': u'text', u'value': u'"'}, {u'type': u'text', u'value': u'>'}, {u'type': u'text', u'value': u'$1'}, {u'type': u'text', u'value': u'<'}, {u'type': u'text', u'value': u'/a'}, {u'type': u'text', u'value': u'>'}]}, _3_part = sw_98)
    def pipe_sw_162(context, _INPUT, conf=None, **kwargs):
        "Submodule"
        sw_162 = pipe_HBXVrI6n3RGE9RZ3rLQIDg.pipe_HBXVrI6n3RGE9RZ3rLQIDg(context, _INPUT, conf={u'AddressofComic': {u'terminal': u'AddressofComic', u'type': u'url'}}, AddressofComic = sw_98)
        return sw_162
    sw_117 = pipe_CCh5Noqn3RGeIJNB6icw5g.pipe_CCh5Noqn3RGeIJNB6icw5g(context, forever, conf={u'AddressofComic': {u'terminal': u'AddressofComic', u'type': u'url'}}, AddressofComic = sw_98)
    sw_376 = piperegex.pipe_regex(context, sw_117, conf={u'RULE': {u'field': {u'type': u'text', u'value': u'comicimage'}, u'singlelinematch': {u'type': u'text', u'value': u'2'}, u'match': {u'type': u'text', u'value': u'(<img.*?>)'}, u'replace': {u'terminal': u'RULE_1_replace', u'type': u'text'}}}, RULE_1_replace = sw_324)
    sw_413 = pipeloop.pipe_loop(context, sw_376, conf={u'assign_part': {u'type': u'text', u'value': u'first'}, u'with': {u'type': u'text', u'value': u''}, u'emit_part': {u'type': u'text', u'value': u'all'}, u'mode': {u'type': u'text', u'value': u'assign'}, u'embed': {u'type': u'module', u'value': {u'type': u'fetchpage', u'id': u'sw-421', u'conf': {u'URL': {u'terminal': u'URL', u'type': u'url'}, u'to': {u'type': u'text', u'value': u'</title>'}, u'token': {u'type': u'text', u'value': u''}, u'from': {u'type': u'text', u'value': u'<title>'}}}}, u'assign_to': {u'type': u'text', u'value': u'comictitle'}}, embed = pipe_sw_421)
    sw_168 = pipeloop.pipe_loop(context, sw_413, conf={u'assign_part': {u'type': u'text', u'value': u'first'}, u'with': {u'type': u'text', u'value': u''}, u'emit_part': {u'type': u'text', u'value': u'all'}, u'mode': {u'type': u'text', u'value': u'assign'}, u'embed': {u'type': u'module', u'value': {u'type': u'pipe:Zh1GhXa63RG_biEj6ycw5g', u'id': u'sw-184', u'conf': {u'urlinput1': {u'terminal': u'urlinput1', u'type': u'url'}}}}, u'assign_to': {u'type': u'text', u'value': u'news'}}, embed = pipe_sw_184)
    sw_271 = pipetextinput.pipe_textinput(context, forever, conf={u'default': {u'type': u'text', u'value': u''}, u'position': {u'type': u'number', u'value': u'3'}, u'prompt': {u'type': u'text', u'value': u'Enter the pubDate of the feed item'}, u'name': {u'type': u'text', u'value': u'pubDate'}, u'debug': {u'type': u'text', u'value': u'Wed, 13 Oct 2010 00:00:00 -0700'}})
    sw_186 = pipetextinput.pipe_textinput(context, forever, conf={u'default': {u'type': u'text', u'value': u''}, u'position': {u'type': u'number', u'value': u'2'}, u'prompt': {u'type': u'text', u'value': u'Enter the Title of the Comic'}, u'name': {u'type': u'text', u'value': u'ComicTitle'}, u'debug': {u'type': u'text', u'value': u'Comic: More Things Than Are Dreamt Of'}})
    sw_449 = pipestrregex.pipe_strregex(context, sw_186, conf={u'RULE': {u'match': {u'type': u'text', u'value': u'^Comic: '}, u'replace': {u'type': u'text', u'value': u''}}})
    sw_509 = pipefilter.pipe_filter(context, sw_168, conf={u'COMBINE': {u'type': u'text', u'value': u'and'}, u'MODE': {u'type': u'text', u'value': u'permit'}, u'RULE': [{u'field': {u'type': u'text', u'value': u'comicimage'}, u'value': {u'type': u'text', u'value': u'\\w'}, u'op': {u'type': u'text', u'value': u'matches'}}, {u'field': {u'type': u'text', u'value': u'news.content'}, u'value': {u'type': u'text', u'value': u'\\w'}, u'op': {u'type': u'text', u'value': u'matches'}}, {u'field': {u'type': u'text', u'value': u'comictitle.content'}, u'value': {u'terminal': u'RULE_3_value', u'type': u'text'}, u'op': {u'type': u'text', u'value': u'contains'}}]}, RULE_3_value = sw_449)
    sw_193 = pipeloop.pipe_loop(context, sw_509, conf={u'assign_part': {u'type': u'text', u'value': u'all'}, u'with': {u'type': u'text', u'value': u''}, u'emit_part': {u'type': u'text', u'value': u'all'}, u'mode': {u'type': u'text', u'value': u'assign'}, u'embed': {u'type': u'module', u'value': {u'type': u'strconcat', u'id': u'sw-201', u'conf': {u'part': [{u'type': u'text', u'subkey': u'comicimage'}, {u'type': u'text', u'subkey': u'news.content'}]}}}, u'assign_to': {u'type': u'text', u'value': u'description'}}, embed = pipe_sw_201)
    sw_154 = pipeloop.pipe_loop(context, sw_193, conf={u'assign_part': {u'type': u'text', u'value': u'first'}, u'with': {u'type': u'text', u'value': u''}, u'emit_part': {u'type': u'text', u'value': u'all'}, u'mode': {u'type': u'text', u'value': u'assign'}, u'embed': {u'type': u'module', u'value': {u'type': u'pipe:HBXVrI6n3RGE9RZ3rLQIDg', u'id': u'sw-162', u'conf': {u'AddressofComic': {u'terminal': u'AddressofComic', u'type': u'url'}}}}, u'assign_to': {u'type': u'text', u'value': u'link'}}, embed = pipe_sw_162)
    sw_171 = piperename.pipe_rename(context, sw_154, conf={u'RULE': [{u'newval': {u'type': u'text', u'value': u'feedburner:origLink'}, u'field': {u'type': u'text', u'value': u'link.link'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'title'}, u'field': {u'type': u'text', u'value': u'link.link'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'pubDate'}, u'field': {u'type': u'text', u'value': u'link.link'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'link'}, u'field': {u'type': u'text', u'value': u'link.link'}, u'op': {u'type': u'text', u'value': u'rename'}}]})
    sw_224 = piperegex.pipe_regex(context, sw_171, conf={u'RULE': [{u'singlelinematch': {u'type': u'text', u'value': u'2'}, u'replace': {u'terminal': u'RULE_1_replace', u'type': u'text'}, u'field': {u'type': u'text', u'value': u'title'}, u'multilinematch': {u'type': u'text', u'value': u'4'}, u'match': {u'type': u'text', u'value': u'.*'}, u'casematch': {u'type': u'text', u'value': u'8'}}, {u'casematch': {u'type': u'text', u'value': u'8'}, u'field': {u'type': u'text', u'value': u'title'}, u'multilinematch': {u'type': u'text', u'value': u'4'}, u'match': {u'type': u'text', u'value': u'^Comic: '}, u'replace': {u'type': u'text', u'value': u''}}, {u'casematch': {u'type': u'text', u'value': u'8'}, u'field': {u'type': u'text', u'value': u'pubDate'}, u'multilinematch': {u'type': u'text', u'value': u'4'}, u'match': {u'type': u'text', u'value': u'.*'}, u'replace': {u'terminal': u'RULE_3_replace', u'type': u'text'}}]}, RULE_1_replace = sw_186, RULE_3_replace = sw_271)
    _OUTPUT = pipeoutput.pipe_output(context, sw_224, conf=None)
    return _OUTPUT

if __name__ == "__main__":
    context = Context()
    p = pipe_RmaGqXW63RG5ZBSspgt1Yg(context, None)
    for i in p:
        print i

