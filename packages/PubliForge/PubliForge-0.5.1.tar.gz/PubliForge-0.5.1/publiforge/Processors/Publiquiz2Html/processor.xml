<?xml version="1.0" encoding="utf-8"?>
<!-- $Id: processor.xml 20a2a1f5d5d5 2012/02/01 16:17:27 patrick $ -->
<publiforge version="1.0">
  <processor>

    <label xml:lang="en">Publiquiz to HTML conversion</label>
    <label xml:lang="fr">Conversion Publiquiz vers HTML</label>

    <description xml:lang="en">
      Convert a Publiquiz XML exercise into XHTML 1.1 files with images and
      sounds.
    </description>
    <description xml:lang="fr">
      Convertit un exercice XML Publiquiz en fichiers XHTML 1.1 avec images et
      sons.
    </description>

    <engine>publiforge.lib.engine.leprisme</engine>

    <ancestors>
      <ancestor>Publidoc2Html</ancestor>
    </ancestors>

    <variables>
      <!-- ~~~~~~~~~~~~~~~~~~~ LePrisme engine variables ~~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">Engine variables</label>
        <label xml:lang="fr">Variables du moteur</label>

        <var name="subdir" type="string">
          <description xml:lang="en">
            Relative path inside "Output" directory. --
            %(fid)s = file ID --
            %(path)s = relative path of the source file inside the storage
          </description>
          <description xml:lang="fr">
            Chemin relatif dans le répertoire « Output ». --
            %(fid)s = identifiant du fichier --
            %(path)s = chemin relatif du fichier source dans l'espace de stockage
          </description>
        </var>
        
        <var name="force" type="boolean">
          <description xml:lang="en">
            Force processing of all elements.
          </description>
          <description xml:lang="fr">
            Force le traitement de tous les éléments.
          </description>
        </var>

        <var name="keeptmp" type="boolean">
          <description xml:lang="en">
            Keep temporary files (debug mode).
          </description>
          <description xml:lang="fr">
            Conserve les fichiers temporaires (mise au point).
          </description>
        </var>

        <var name="zip" type="boolean">
          <description xml:lang="en">
            Save the result into a ZIP file.
          </description>
          <description xml:lang="fr">
            Sauvegarde le résultat dans un fichier ZIP.
          </description>
        </var>
      </group>

      <!-- ~~~~~~~~~~~~~~~~~~~~ Processor image variables ~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">Image variables</label>
        <label xml:lang="fr">Variables pour les images</label>

        <var name="img" type="boolean">
          <default>true</default>
          <description xml:lang="en">Image processing.</description>
          <description xml:lang="fr">Traitement des images.</description>
        </var>

        <var name="img_src_file" type="string">
          <default>%(filepath)s/Images/%(id)s.jpg</default>
          <description xml:lang="en">
            Default file name for the source image. --
            %(stgpath)s = path to the storage root directory --
            %(filepath)s = path to the original file --
            %(output)s = path to the output directory --
            %(id)s = source ID --
            %(ext)s = one of possible extensions for the source file
          </description>
          <description xml:lang="fr">
            Nom par défaut de l'image source. --
            %(stgpath)s = chemin vers la racine des espaces de stockage --
            %(filepath)s = chemin vers le fichier original --
            %(output)s = chemin vers le répertoire de sortie --
            %(id)s = ID de la source --
            %(ext)s = une des extensions possibles pour le fichier source
          </description>
        </var>

        <var name="img_src_paths" type="string">
          <default>%(filepath)s, %(stgpath)s</default>
          <description xml:lang="en">
            Paths to scan if default file is not found. --
            %(stgpath)s = path to the storage root directory --
            %(filepath)s = path to the original file --
            %(output)s = path to the output directory
          </description>
          <description xml:lang="fr">
            Chemins à scanner si le fichier par défaut n'est
            pas trouvé. --
            %(stgpath)s = chemin vers la racine des espaces de stockage --
            %(filepath)s = chemin vers le fichier original --
            %(output)s = chemin vers le répertoire de sortie
          </description>
        </var>

        <var name="img_src_patterns" type="string">
          <default>Images/%(id)s.%(ext)s, %(id)s.%(ext)s</default>
          <description xml:lang="en">
            Patterns for source file to find. --
            %(id)s = ID de la source --
            %(ext)s = une des extensions possibles pour le fichier source
          </description>
          <description xml:lang="fr">
            Motifs du fichier source à trouver. --
            %(id)s = ID de la source --
            %(ext)s = une des extensions possibles pour le fichier source
          </description>
        </var>

        <var name="img_ext" type="select">
          <default>.png</default>
          <option value=".png">PNG</option>
          <option value=".jpg">JPEG</option>
          <option value=".gif">GIF</option>
          <description xml:lang="en">Extension of image to create.</description>
          <description xml:lang="fr">Extension de l'image à créer.</description>
        </var>

        <var name="img_size" type="regex" visible="true">
          <default>320x320&gt;</default>
          <pattern>\d{1,4}x\d{0,4}&gt;?</pattern>
          <description xml:lang="en">Size of image to create.</description>
          <description xml:lang="fr">Taille de l'image à créer.</description>
        </var>

        <var name="img_size_cover" type="regex" visible="true">
          <default>420x640&gt;</default>
          <pattern>\d{1,4}x\d{0,4}&gt;?</pattern>
          <description xml:lang="en">
            Size of cover image to create.
          </description>
          <description xml:lang="fr">
            Taille de l'image de type couverture à créer.
          </description>
        </var>

        <var name="img_size_thumbnail" type="regex" visible="true">
          <default>120x120&gt;</default>
          <pattern>\d{1,4}x\d{0,4}&gt;?</pattern>
          <description xml:lang="en">
            Size of thumbnail image to create.
          </description>
          <description xml:lang="fr">
            Taille de l'image de type vignette à créer.
          </description>
        </var>

        <var name="img_optimize" type="integer" visible="true">
          <default>4</default>
          <description xml:lang="en">
            Optimization level (between 0 and 7).
          </description>
          <description xml:lang="fr">
            Niveau d'optimisation (entre 0 et 7).
          </description>
        </var>
      </group>

      <!-- ~~~~~~~~~~~~~~~~~~~ Processor audio variables ~~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">Audio variables</label>
        <label xml:lang="fr">Variables pour l'audio</label>

        <description xml:lang="en">
          Same parameters as image variables.
        </description>
        <description xml:lang="fr">
          Mêmes paramètres que pour les variables images.
        </description>

        <var name="aud" type="boolean">
          <default>false</default>
          <description xml:lang="en">Audio processing.</description>
          <description xml:lang="fr">Traitement de l'audio.</description>
        </var>

        <var name="aud_src_file" type="string">
          <default>%(filepath)s/Audios/%(id)s.wav</default>
          <description xml:lang="en">
            Default file name for the source audio.
          </description>
          <description xml:lang="fr">
            Nom par défaut de l'audio source.
          </description>
        </var>

        <var name="aud_src_paths" type="string">
          <default>%(filepath)s, %(stgpath)s</default>
          <description xml:lang="en">
            Paths to scan if default file is not found.
          </description>
          <description xml:lang="fr">
            Chemins à scanner si le fichier par défaut n'est pas trouvé.
          </description>
        </var>

        <var name="aud_src_patterns" type="string">
          <default>Audios/%(id)s.%(ext)s, %(id)s.%(ext)s</default>
          <description xml:lang="en">
            Patterns for source file to find.
          </description>
          <description xml:lang="fr">
            Motifs du fichier source à trouver.
          </description>
        </var>

        <var name="aud_ext" type="select">
          <default>.ogg</default>
          <option value=".ogg">OGG</option>
          <option value=".wav">WAV</option>
          <option value=".ac3">AC3</option>
          <option value=".mp3">MP3</option>
          <description xml:lang="en">Extension of audio to create.</description>
          <description xml:lang="fr">Extension de l'audio à créer.</description>
        </var>
      </group>

      <!-- ~~~~~~~~~~~~~~~~~~~~ Processor HTML variables ~~~~~~~~~~~~~~~~~~ -->
      <group>
        <label xml:lang="en">Global variables</label>
        <label xml:lang="fr">Variables globales</label>

        <var name="subtoc" type="boolean">
          <description xml:lang="en">
            With intermediate tables of content.
          </description>
          <description xml:lang="fr">
            Avec tables des matières intermédiaires.
          </description>
        </var>
      </group>
    </variables>

    <output>Result/Html</output>

  </processor>
</publiforge>