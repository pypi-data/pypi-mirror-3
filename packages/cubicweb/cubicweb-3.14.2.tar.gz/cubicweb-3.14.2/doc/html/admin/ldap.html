<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>9. LDAP integration &mdash; CubicWeb 3.13.5</title>
    <link rel="stylesheet" href="../_static/lglb-sphinx-doc.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.13.5',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="top" title="CubicWeb 3.13.5" href="../index.html" />
    <link rel="up" title="Administration" href="index.html" />
    <link rel="next" title="10. Working with a distributed client (using Pyro)" href="pyro.html" />
    <link rel="prev" title="8. Multiple sources of data" href="multisources.html" /> 
  </head>
  <body>
<div class="header">
 <a href="http://www.cubicweb.org">
  <img alt="cubicweb logo" src="../_static/cubicweb.png"/>
 </a>
</div>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             accesskey="M">modules</a> |</li>
        <li class="right" >
          <a href="pyro.html" title="10. Working with a distributed client (using Pyro)"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="multisources.html" title="8. Multiple sources of data"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.13.5</a> &raquo;</li>
          <li><a href="index.html" accesskey="U">Administration</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">9. LDAP integration</a><ul>
<li><a class="reference external" href="#overview">9.1. Overview</a></li>
<li><a class="reference external" href="#configurations-options">9.2. Configurations options</a></li>
<li><a class="reference external" href="#other-notes">9.3. Other notes</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="multisources.html"
                                  title="previous chapter">8. Multiple sources of data</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="pyro.html"
                                  title="next chapter">10. Working with a distributed client (using Pyro)</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/admin/ldap.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="ldap-integration">
<span id="ldap"></span><h1>9. LDAP integration<a class="headerlink" href="#ldap-integration" title="Permalink to this headline">¶</a></h1>
<div class="section" id="overview">
<h2>9.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>Using LDAP as a source for user credentials and information is quite
easy. The most difficult part lies in building an LDAP schema or
using an existing one.</p>
<p>At cube creation time, one is asked if more sources are wanted. LDAP
is one possible option at this time. Of course, it is always possible
to set it up later in the <cite>source</cite> configuration file, which we
discuss there.</p>
<p>It is possible to add as many LDAP sources as wanted, which translates
in as many [ldapxxx] sections in the <cite>source</cite> configuration file.</p>
<p>The general principle of the LDAP source is, given a proper
configuration, to create local users matching the users available in
the directory, deriving local user attributes from directory users
attributes. Then a periodic task ensures local user information
synchronization with the directory.</p>
<p>Credential checks are _always_ done against the LDAP server.</p>
<p>The base functionality for this is in
<tt class="docutils literal"><span class="pre">cubicweb/server/sources/ldapuser.py</span></tt>.</p>
</div>
<div class="section" id="configurations-options">
<h2>9.2. Configurations options<a class="headerlink" href="#configurations-options" title="Permalink to this headline">¶</a></h2>
<p>Let us enumerate the options (but please keep in mind that the
authoritative source for these is in the aforementioned python
module), by categories (LDAP server connection, LDAP schema mapping
information, LDAP source internal configuration).</p>
<p>LDAP server connection options:</p>
<ul class="simple">
<li><cite>host</cite>, may contain port information using &lt;host&gt;:&lt;port&gt; notation.</li>
<li><cite>protocol</cite>, choices are ldap, ldaps, ldapi</li>
<li><cite>auth-mode</cite>, (choices are simple, cram_md5, digest_md5, gssapi, support
for the later being partial as of now)</li>
<li><cite>auth-realm</cite>, realm to use when using gssapi/kerberos authentication</li>
<li><cite>data-cnx-dn</cite>, user dn to use to open data connection to the ldap (eg
used to respond to rql queries)</li>
<li><cite>data-cnx-password</cite>, password to use to open data connection to the
ldap (eg used to respond to rql queries)</li>
</ul>
<p>If the LDAP server accepts anonymous binds, then it is possible to
leave data-cnx-dn and data-cnx-password empty. This is, however, quite
unlikely in practice.</p>
<p>LDAP schema mapping:</p>
<ul class="simple">
<li><cite>user-base-dn</cite>, base DN to lookup for users</li>
<li><cite>user-scope</cite>, user search scope</li>
<li><cite>user-classes</cite>, classes of user</li>
<li><cite>user-attrs-map</cite>, map from ldap user attributes to cubicweb attributes</li>
<li><cite>user-login-attr</cite>, attribute used as login on authentication</li>
</ul>
<p>LDAP source internal configuration:</p>
<ul class="simple">
<li><cite>user-default-group</cite>, name of a group in which ldap users will be by
default. You can set multiple groups by separating them by a comma</li>
<li><cite>synchronization-interval</cite>, interval between synchronization with the
ldap directory in seconds (default to once a day)</li>
<li><cite>cache-life-time</cite>, life time of query cache in minutes (default to two hours).</li>
</ul>
</div>
<div class="section" id="other-notes">
<h2>9.3. Other notes<a class="headerlink" href="#other-notes" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Yes, cubicweb is able to start if ldap cannot be reached, even on c-c start,
though that will slow down the instance, since it will indefinitly attempt
to connect to the ldap on each query on users.</li>
<li>Changing the name of the ldap server in your script is fine, changing the base
DN isn&#8217;t since it&#8217;s used to identify already known users from others</li>
<li>You can use the <tt class="xref docutils literal"><span class="pre">CWSourceHostConfig</span></tt> to have variants for a source
configuration according to the host the instance is running on. To do so go on
the source&#8217;s view from the sources management view.</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../modindex.html" title="Global Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="pyro.html" title="10. Working with a distributed client (using Pyro)"
             >next</a> |</li>
        <li class="right" >
          <a href="multisources.html" title="8. Multiple sources of data"
             >previous</a> |</li>
        <li><a href="../index.html">CubicWeb 3.13.5</a> &raquo;</li>
          <li><a href="index.html" >Administration</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2001-2010, Logilab.
      Last updated on Sep 08, 2011.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.6.
    </div>
  </body>
</html>