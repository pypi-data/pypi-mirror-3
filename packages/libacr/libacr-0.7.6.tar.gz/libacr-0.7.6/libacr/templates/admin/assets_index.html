<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/"
      xmlns:xi="http://www.w3.org/2001/XInclude">

  <xi:include href="admin_master.html" />

<head>
  <meta content="text/html; charset=UTF-8" http-equiv="content-type" py:replace="''"/>
  <title>ACR Administration Section</title>
  <style>
    #upload_form {
        width: 400px;
        padding: 5px;
    }

    #assets_list {
        width: 95%;
    }

    .replace_form {
        display: none;
    }

    .replace_form input {
        width: 300px;
    }
  </style>
  <script>
    function show_replace(btn) {
        jQuery(btn).hide();
        jQuery(btn).siblings().hide();
        jQuery(btn).siblings('.replace_form').fadeIn();
        return false;
    }
  </script>
</head>

<body>
    <div class="section_box" id="asset_upload">
        <h1 class="title">Upload</h1>
        <div id="upload_form" class="section_icons">
            ${upload_form(value=values, action=h.acr_url('/admin/assets/upload'))}
        </div>
    </div>

    <div class="section_box" id="manage_assets">
        <h1 class="title">Assets</h1>
        <table id="assets_list" class="section_icons">
            <tr>
                <th>Preview</th>
                <th>Name</th>
                <th>Content Type</th>
                <th>Action</th>
            </tr>
            <tr py:for="count, asset in enumerate(assets)" class="${count % 2 and 'even' or 'odd'}">
                <td style="width: 10em;">
                    <a href="${asset.url}" target="_blank">
                        <img src="${asset.thumb_url('small')}"/>
                    </a>
                </td>
                <td style="width: 5em;">${asset.name}</td>
                <td style="width: 5em;">${asset.content_type}</td>
                <td style="width: 1em;">
                    <div class="replace_form">
                        ${upload_form(value={'uid':asset.uid}, action=h.acr_url('/admin/assets/upload'))}
                    </div>
                    <a href="#" onclick="return show_replace(this);"
                       class="objects_list_entry">replace</a>
                    <a href="${h.acr_url('/admin/assets/delete', uid=asset.uid)}"
                       onclick="return confirm('Do you really want to delete this asset?');"
                       class="objects_list_entry">delete</a>
                </td>
            </tr>
        </table>
    </div>
</body>
</html>
