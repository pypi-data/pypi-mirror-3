{% extends 'intranet/model_detail.html' %}
{% load i18n intranet_extra intranet_values_extras %}
{% load url from future %}

{% block title_content %}{{ verbose_name|capfirst }} : {{ object|upper }}{% endblock %}

{% block content %}
<div class="row-fluid">
  <div class="span4">
    <table class="{% default_table_class %}">
      <tr><th colspan="2" style="text-align:center;">{% trans "General" %}</th></tr>
      <tr><th>{% trans "Company name" %}</th><td>{{ object.company_name|upper }}</td></tr>
      <tr><th>{% trans "SIRET code" %}</th><td>{{ object.siret_code|siret }}</td></tr>
      <tr><th>{% trans "Field" %}</th><td>
        {% if object.field %}
          <a href="{% url 'field-detail' object.field.pk %}">{{ object.field.name|title }}</a>
        {% endif %}
      </td></tr>
    </table>
  </div>
  <div class="span4">
    <table class="{% default_table_class %}">
      <tr><th colspan="2" style="text-align:center;">{% trans "Contacts" %}</th></tr>
      <tr><th>{% trans "Company head" %}</th><td>
        {% if object.last_name == "" %}
          {{object.first_name|title }}
        {% else %}
          {{ object.title|title }} {{object.first_name|title }} {{ object.last_name|upper }}
        {% endif %}
      </td></tr>
      <tr><th>{% trans "Profession" %}</th><td>{{ object.profession|title }}</td></tr>
      <tr><th>{% trans "Phone" %}</th><td>{{ object.phone_number|phone }}</td></tr>
      <tr><th>{% trans "E-mail" %}</th><td><a href="mailto:{{ object.e_mail }}">{{ object.e_mail }}</a></td></tr>
    </table>
  </div>
  <div class="span4">
    <table class="{% default_table_class %}">
      <tr><th colspan="2" style="text-align:center;">{% trans "Address" %}</th></tr>
      <tr><th>{% trans "Street" %}</th><td>{{ object.street }}</td></tr>
      <tr><th>{% trans "Postal code" %}</th><td>{{ object.postal_code }}</td></tr>
      <tr><th>{% trans "City" %}</th><td>{{ object.city|title }}</td></tr>
    </table>
  </div>
</div>

<h2>
  {% trans 'Activity summary:' %}
  <span class="pull-right actions-content-list">
    {% if object.last_activities %}
      <a class="btn btn-primary" href="{% url 'prospect-activity-index' object.pk %}">{% trans 'Show all' %}</a>
    {% endif %}
    <a class="btn btn-primary" href="{% url 'activity-add' %}?contact={{ object.pk }}">{% trans 'Add new' %}</a>
  </span>
</h2>
{% if object.last_activities %}
<table class="{% default_table_class %}">
  <tr>
    <th><i class="icon-exclamation-sign"></i></th>
    <th>{% trans 'Date and time' %}</th>
    <th>{% trans 'Subject' %}</th>
    <th>{% trans 'Activity type' %}</th>
    <th>{% trans 'Direction' %}</th>
    <th>{% trans 'Duration' %}</th>
    <th>{% trans 'Comments' %}</th>
  </tr>
  {% for activity in object.last_activities %}
    <tr>
      <td>{{ activity.is_important_display|safe }}</td>
      <td>{{ activity.datetime_display }}</td>
      <td><a href="{% url 'activity-detail' activity.pk %}">{{ activity.subject }}</a></td>
      <td>{{ activity.activity_type_display|safe }}</td>
      <td>{{ activity.direction_display|safe }}</td>
      <td>{{ activity.duration_display }}</td>
      <td>{{ activity.comments_display }}</td>
    </tr>
  {% endfor %}
</table>
{% else %}
  <p>{% trans 'There is no activity related to this prospect yet.' %}</p>
{% endif %}

{% endblock %}
