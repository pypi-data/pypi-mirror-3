<html xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="path:view/macro"
      i18n:domain="horae.notification">
  <div metal:fill-slot="content">
    <h1 class="firstHeading"
        i18n:translate=""
        tal:condition="view.header">
      Notifications
    </h1>
    <ul class="notifications listing" tal:condition="view.notifications">
      <tal:notification repeat="notification view.notifications">
      <li class=""
          tal:attributes="class notification['cssClass'];
                          data-id notification['notification'].id;">
        <tal:cond condition="not view.simple">
        <a class="button button-discreet"
           tal:condition="notification['unread']"
           tal:attributes="href string:${view.url()}?read=${notification['notification'].id}"
           i18n:translate="">
          Mark as read
        </a>
        <a class="button button-discreet button-alternative"
           tal:condition="not notification['unread']"
           tal:attributes="href string:${view.url()}?unread=${notification['notification'].id}"
           i18n:translate="">
          Mark as unread
        </a>
        </tal:cond>
        <time tal:replace="structure notification['date']" />
        <a class="user"
           tal:condition="notification['user']"
           tal:omit-tag="not notification['user_url']"
           tal:attributes="href notification['user_url']">
        <span class="user"
              tal:omit-tag="notification['user_url']"
              tal:content="notification['user']" />
        </a>
        <tal:body condition="not view.simple and notification['body']">
        <a href="" class="information"
           tal:condition="notification['show']"
           tal:attributes="href view.url()"
           i18n:translate="">
          Hide information
        </a>
        <a href="" class="information"
           tal:condition="not notification['show']"
           tal:attributes="href string:${view.url()}?show=${notification['notification'].id}"
           i18n:translate="">
          Show information
        </a>
        </tal:body>
        <a href="" class="title"
           tal:omit-tag="not notification['url']"
           tal:attributes="href notification['url']">
        <span class="title"
              tal:omit-tag="notification['url']">
          <span tal:content="structure notification['title']" />
        </span>
        </a>
        <div class="body"
             tal:condition="notification['show'] and notification['body']"
             tal:content="structure notification['body']" />
      </li>
      </tal:notification>
    </ul>
    <p class="discreet" tal:condition="not view.notifications"
       i18n:translate="">
      No notifications available
    </p>
    <ul class="noMarker button-group"
        tal:condition="view.notifications and view.buttons">
      <li tal:condition="view.has_more">
        <a href="" class="button button-discreet button-alternative"
           tal:attributes="href string:${view.url()}?amount=${view.amount+25}"
           i18n:translate="">
          Older notifications
        </a>
      </li>
      <li>
        <a href="" class="button button-discreet"
           tal:attributes="href string:${view.url()}?mark_all_read=1"
           i18n:translate="">
          Mark all as read
        </a>
      </li>
    </ul>
  </div>
</html>