<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

  <metal:border fill-slot="top_slot">
    <tal:border define="dummy python:request.set('enable_border',1)" />
  </metal:border>

<body>

    <div metal:fill-slot="main"
       tal:define="utool context/@@plone_portal_state/portal_url">
        <h1 tal:content="context/Title | context/getId" class="documentFirstHeading">
            Title or id
        </h1>

        <a href=""
           class="link-parent"
           tal:define="parent_url python:context.navigationParent(context, template.getId())"
           tal:condition="parent_url"
           tal:attributes="href parent_url"
           i18n:translate="go_to_parent_url">
        Up one level
        </a>

        <div class="documentDescription" tal:content="structure context/Description">
            description
        </div>

        <div class="formHelp">Associations are the way we provide a common reference for groups of accounts.
            With this reference we can apply our standard processes across different charts of accounts and 
            jurisdictions.  You probably shouldn't change these unless you know what you are doing.</div>

        <metal:listingmacro define-macro="listing">
        <tal:foldercontents define="folderContents context/objectValues">
        <tal:listing condition="folderContents"
                     define="global toLocalizedTime nocall:context/toLocalizedTime;">

           <table summary="" cellpadding="0" cellspacing="2">
             <tr>
                <td/>
                <td><label>Name</label></td>
                <td><label>Ledger</label></td>
                <td><label>Account Numbers</label></td>
                <td><label>Description</label></td>
              </tr>
              <tr tal:repeat="obj folderContents"
                  tal:attributes="class python: test(repeat['obj'].odd(), 'odd', 'even')">
                <tal:block metal:define-macro="listitem"
                    tal:define="url obj/absolute_url;
                                icon python: obj.getIcon(1)">
                   <td>
                       <a href="#" tal:attributes="href url">
                          <img src="" alt=""
                               tal:attributes="src string:${utool}/${icon};alt context/getId" />
                       </a>
                   </td>
                   <td>
                       <a href="#"  tal:attributes="href url"
                          tal:content="obj/getId" />
                   </td>
                   <td tal:content="obj/ledger"/>
                   <td tal:content="python: ' '.join(obj.accno)"/>
                   <td tal:content="obj/Description | obj/Title"/>
		 </tal:block>
            </tr>
          </table>

        </tal:listing>
        
        <p class="discreet"
           tal:condition="not: folderContents" i18n:translate="description_no_associations">
         There are currently no associations.
        </p>

        </tal:foldercontents>
        </metal:listingmacro>

      <div tal:replace="structure provider:plone.documentactions">
           Document actions (print, sendto etc)
      </div>

    </div>

</body>
</html>
