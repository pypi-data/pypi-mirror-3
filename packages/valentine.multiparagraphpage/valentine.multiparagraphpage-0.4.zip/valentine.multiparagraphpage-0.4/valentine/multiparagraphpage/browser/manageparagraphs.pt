<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:i18n="http://xml.zope.org/namespaces/i18n"
  xmlns:tal="http://xml.zope.org/namespaces/tal"
  xmlns:metal="http://xml.zope.org/namespaces/metal"
  xml:lang="en" lang="en"
  i18n:domain="plone"
  metal:use-macro="here/main_template/macros/master">
<head>
  <metal:css_slot fill-slot="css_slot">
    <link type="text/css" rel="kinetic-stylesheet"
      tal:attributes="href string:${context/@@plone_context_state/object_url}/++resource++manage-portlets.kss"/>
    <link type="text/css" rel="kinetic-stylesheet"
      tal:attributes="href string:${context/@@plone_context_state/object_url}/++resource++multiparagraphpage.kss"/>
  </metal:css_slot>
</head>

  <body>
    <div metal:fill-slot="portlets_one_slot">
	    <tal:comment tal:replace="nothing">get rid of the left hand column portlets to avoid confusion</tal:comment>
    </div>

  <div metal:fill-slot="main">
    <div tal:replace="structure provider:plone.abovecontenttitle" />

  <h1 class="documentFirstHeading"> 
    <tal:block condition="exists:here/aq_explicit/widget">
      <metal:field use-macro="python:here.widget('title', mode='view')">
      Title
      </metal:field>
    </tal:block>
    <tal:block condition="not:exists:here/aq_explicit/widget">
      <tal:block replace="structure view/icon" /> 
      <span tal:content="view/title" tal:omit-tag="">Directory Id</span>
    </tal:block>
  </h1>

  <div tal:replace="structure provider:plone.belowcontenttitle" />

  <p class="documentDescription" tal:condition="exists:here/aq_explicit/widget">
    <metal:field use-macro="python:here.widget('description', mode='view')">
      Description
    </metal:field>
  </p>

  <tal:block condition="not:exists:here/aq_explicit/widget">
    <p class="documentDescription" 
      tal:content="context/Description" 
      tal:condition="context/Description"> 
    Description
    </p>
  </tal:block>
  <div id="manageparagraphs">
    <div id="slots">
      <metal:paragraphs define-macro="slots" tal:define="view view/getParagraphsView; slots view/getSlotsContent"
        i18n:domain="valentine.multiparagraphpage">
      <table>                  
        <tr tal:repeat="slot slots">
          <td>
            <tal:block tal:condition="python:slot" tal:content="structure slot"/>
            <tal:block tal:condition="not:python:slot" tal:content="string:<empty>"/>
          </td>
          <td>
            <div class="manageparagraphscontrols" tal:define="position python:repeat['slot'].index">
              <a tal:attributes="href string:${context/@@plone_context_state/object_url}/@@moveParagraphOrPortletUp?position=$position;
                class string:moveUpLink kssattr-position-${position}"
              i18n:translate="manageparagraphs_moveup_link">&uarr;</a>            
              <a tal:attributes="href string:${context/@@plone_context_state/object_url}/@@moveParagraphOrPortletDown?position=$position;
                class string:moveDownLink kssattr-position-${position}"
              i18n:translate="manageparagraphs_movedown_link">&darr;</a>            
              <a tal:attributes="href string:${context/@@plone_context_state/object_url}/@@removeParagraphOrPortlet?position=$position;
                class string:removeLink kssattr-position-${position}"
              i18n:translate="manageparagraphs_remove_link">&times;</a>            
            </div>
          </td>  
        </tr>
      </table>  
      </metal:paragraphs>
    </div>
    <div id="portlets">
      <metal:paragraphs define-macro="portlets">
        <span tal:replace="structure provider:ContentPortlets" />
      </metal:paragraphs>
    </div>  
  </div>  
</div>

  <div metal:fill-slot="portlets_two_slot">
	  <tal:comment tal:replace="nothing">get rid of the left hand column portlets to avoid confusion</tal:comment>
  </div>

  </body>
</html>