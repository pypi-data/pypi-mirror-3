<tal:block define="_dummy python:request.response.setHeader('content-type','text/javascript;;charset=utf-8')" />
<tal:block 
    define="view context/@@slideshow_view|nothing;
            script_options view/getSlideshowSettings|nothing;
            images view/getSlideshowImages|nothing;"
    condition="script_options">
registerPloneFunction( function() {

var data = { <tal:loop repeat="image images">
              '<tal:name replace="image/name"/>': { caption: '<tal:caption replace="image/caption"/>' }<tal:comma condition="python: not repeat['image'].end">,</tal:comma></tal:loop>
 };

var myShow = new Slideshow('myShow', data, 
                {hu: '', classes: ['slideshowfolder'], loader: {'animate': ['loader-#.png', 12]}, <tal:loop repeat="opt_name script_options">
                <tal:option replace="structure python:'%s: %s' %(opt_name, script_options[opt_name]) " /><tal:comma condition="python: not repeat['opt_name'].end">,</tal:comma></tal:loop>
                });

<tal:translations tal:repeat="translation view/getControllerTranslations">
cssQuery('.slideshowfolder-controller li.<tal:id tal:replace="translation/id"/> a')[0].title = '<tal:msg tal:replace="translation/msg" />';
</tal:translations>

});


</tal:block>
