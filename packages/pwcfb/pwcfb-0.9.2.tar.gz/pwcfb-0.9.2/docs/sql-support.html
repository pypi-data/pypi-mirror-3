<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>SQL Support &mdash; Firebird Pack for PowerConsole v0.9.1 documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Firebird Pack for PowerConsole v0.9.1 documentation" href="index.html" />
    <link rel="next" title="Additional PowerConsole Commands" href="pwc-commands.html" />
    <link rel="prev" title="Firebird Pack for PowerConsole" href="index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="pwc-commands.html" title="Additional PowerConsole Commands"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Firebird Pack for PowerConsole"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Firebird Pack for PowerConsole v0.9.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="sql-support">
<h1>SQL Support<a class="headerlink" href="#sql-support" title="Permalink to this headline">¶</a></h1>
<div class="section" id="supported-sql-statements">
<h2>Supported SQL statements<a class="headerlink" href="#supported-sql-statements" title="Permalink to this headline">¶</a></h2>
<p>Firebird package for PowerConsole should support <strong>all</strong> valid DSQL statements (see <a class="reference external" href="http://www.firebirdsql.org/?op=doc">Firebird documentation</a> for details).</p>
<p>However, there are some exceptions and additions:</p>
<blockquote>
<ul>
<li><p class="first">SET TRANSACTION does not support table reservation options (yet).</p>
</li>
<li><p class="first">CREATE DATABASE and CONNECT support addtional optional argument AS &lt;var&gt; that
makes the <a title="fbcore.Database" class="reference external" href="python-objects.html#fbcore.Database"><tt class="xref docutils literal"><span class="pre">Database</span></tt></a> object accessible under specified name instead default alias &#8220;db&#8221;</p>
</li>
<li><p class="first">You can fill in parts of SQL statements using <a class="reference internal" href="#interpolation"><em>Python expressions</em></a>.</p>
</li>
<li><p class="first">You may use SQL statements in Python code. For example next function deactivates indices:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">deactivate</span><span class="p">(</span><span class="n">indices</span><span class="p">):</span>
<span class="gp">... </span>  <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">:</span>
<span class="gp">... </span>     <span class="n">alter</span> <span class="n">index</span> <span class="nd">@index</span><span class="o">.</span><span class="n">name</span> <span class="n">inactive</span><span class="p">;</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">connect</span> <span class="s">&#39;employee&#39;</span> <span class="n">user</span> <span class="s">&#39;sysdba&#39;</span> <span class="n">password</span> <span class="s">&#39;masterkey&#39;</span>
<span class="go">Database employee as db, user sysdba</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deactivate</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">indices</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p class="first">You can get access to executed statements (cursor() object) from Python code. Next statement will
execute and store the openned <tt class="xref docutils literal"><span class="pre">cursor()</span></tt> object in user namespace for further manipulation:</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; connect 'employee' user 'sysdba' password 'masterkey'
Database employee as db, user sysdba
&gt;&gt;&gt; select * from country &gt;&gt; c;</pre>
</div>
<p>Now you can use the cursor stored under name &#8220;c&#8221; (see KInterbasDB documentation for details about
<a class="reference external" href="http://www.firebirdsql.org/devel/python/docs/3.3.0/Python-DB-API-2.0.html#cursor-objects">cursor object</a>):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">c</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>  <span class="k">print</span> <span class="n">row</span>
</pre></div>
</div>
</li>
<li><p class="first">You can use parametrized SQL statemets and feed values to them from any Python iterable (including open
cursor() objects!):</p>
<div class="highlight-python"><pre>&gt;&gt;&gt; connect 'employee' user 'sysdba' password 'masterkey'
Database employee as db, user sysdba
&gt;&gt;&gt; rows = [('Utopia','none'),('Sirius','credits')]
&gt;&gt;&gt; insert into country (country,currency) values (?,?) &lt;&lt; rows</pre>
</div>
</li>
</ul>
</blockquote>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All SQL statements must end with statement terminator sequence that defaults to semicolon character.
Use SET TERM statement to change the terminator to other character sequence to issue compound SQL
statements (like CREATE TRIGGER, EXECUTE BLOCK etc.).</p>
</div>
<div class="admonition tip">
<p class="first admonition-title">Tip</p>
<p class="last">All attached databases are also <a class="reference external" href="python-objects.html"><em>accessible through Python</em></a> <a title="fbcore.Database" class="reference external" href="python-objects.html#fbcore.Database"><tt class="xref docutils literal"><span class="pre">Database</span></tt></a>
objects installed into user namespace. You may access them directly from your Python code or use them as
parameters to many PowerConsole commands.</p>
</div>
<p>This pack also supports many <a class="reference external" href="pwc-commands.html"><em>ISQL statements or their functional equivalents</em></a>.</p>
</div>
<div class="section" id="using-python-expressions-in-sql">
<span id="interpolation"></span><h2>Using Python expressions in SQL<a class="headerlink" href="#using-python-expressions-in-sql" title="Permalink to this headline">¶</a></h2>
<p>Firebird Pack lets you quickly and conveniently interpolate values into SQL statements (in the flavour of Perl
or Tcl, but with less extraneous punctuation). You get a bit more power than in the other languages, because
it allows subscripting, slicing, function calls, attribute lookup, or arbitrary expressions. Variables and
expressions are evaluated in the namespace of the caller (so if you use SQL statements in Python functions
or classes, expressions are evaluated in their scope).</p>
<p>Here are some examples how to fill in a table name into SELECT statement:</p>
<div class="highlight-python"><pre>select * from @string ;
select * from @module.member ;
select * from @object.member ;
select * from @functioncall(with, arguments) ;
select * from @{arbitrary + expression} ;
select * from @array[3] ;
select * from @dictionary['member'] ;</pre>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="">SQL Support</a><ul>
<li><a class="reference external" href="#supported-sql-statements">Supported SQL statements</a></li>
<li><a class="reference external" href="#using-python-expressions-in-sql">Using Python expressions in SQL</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="index.html"
                                  title="previous chapter">Firebird Pack for PowerConsole</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="pwc-commands.html"
                                  title="next chapter">Additional PowerConsole Commands</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="_sources/sql-support.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="pwc-commands.html" title="Additional PowerConsole Commands"
             >next</a> |</li>
        <li class="right" >
          <a href="index.html" title="Firebird Pack for PowerConsole"
             >previous</a> |</li>
        <li><a href="index.html">Firebird Pack for PowerConsole v0.9.1 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2009, Pavel Cisar.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.1.
    </div>
  </body>
</html>