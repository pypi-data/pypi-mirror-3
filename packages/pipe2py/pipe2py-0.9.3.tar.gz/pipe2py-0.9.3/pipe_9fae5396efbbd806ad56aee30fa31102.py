#Pipe pipe_9fae5396efbbd806ad56aee30fa31102 generated by pipe2py

from pipe2py import Context
from pipe2py.modules import *


def pipe_9fae5396efbbd806ad56aee30fa31102(context, _INPUT, conf=None, **kwargs):
    "Pipeline"
    if conf is None:
        conf = {}

    if context.describe_input:
        return []

    forever = pipeforever.pipe_forever(context, None, conf=None)

    sw_61 = pipefetch.pipe_fetch(context, forever, conf={u'URL': {u'type': u'url', u'value': u'http://en.wikipedia.org/w/api.php?action=featuredfeed&feed=potd&feedformat=atom'}})
    sw_136 = pipesort.pipe_sort(context, sw_61, conf={u'KEY': {u'field': {u'type': u'text', u'value': u'pubDate'}, u'dir': {u'type': u'text', u'value': u'DESC'}}})
    sw_337 = piperename.pipe_rename(context, sw_136, conf={u'RULE': [{u'newval': {u'type': u'text', u'value': u'description'}, u'field': {u'type': u'text', u'value': u'summary.content'}, u'op': {u'type': u'text', u'value': u'rename'}}, {u'newval': {u'type': u'text', u'value': u'media:content.title'}, u'field': {u'type': u'text', u'value': u'description'}, u'op': {u'type': u'text', u'value': u'copy'}}, {u'newval': {u'type': u'text', u'value': u'media:content.url'}, u'field': {u'type': u'text', u'value': u'description'}, u'op': {u'type': u'text', u'value': u'copy'}}]})
    sw_526 = piperegex.pipe_regex(context, sw_337, conf={u'RULE': [{u'field': {u'type': u'text', u'value': u'media:content.title'}, u'multilinematch': {u'type': u'text', u'value': u'4'}, u'match': {u'type': u'text', u'value': u'(.+\\n){0,}(.+alt=")([^\\"]{1,})(.+\\n){0,}'}, u'replace': {u'type': u'text', u'value': u'$3'}}, {u'field': {u'type': u'text', u'value': u'media:content.url'}, u'multilinematch': {u'type': u'text', u'value': u'4'}, u'match': {u'type': u'text', u'value': u'(.+\\n){0,}(.+src=")([^\\"]{1,})(.+\\n){0,}'}, u'replace': {u'type': u'text', u'value': u'http:$3'}}, {u'field': {u'type': u'text', u'value': u'description'}, u'casematch': {u'type': u'text', u'value': u'8'}, u'match': {u'type': u'text', u'value': u'src="//'}, u'replace': {u'type': u'text', u'value': u'src="http://'}}, {u'field': {u'type': u'text', u'value': u'title'}, u'match': {u'type': u'text', u'value': u'(^.+) ([a-zA-Z]{1,} [0-9]{1,})'}, u'replace': {u'type': u'text', u'value': u'$2'}}, {u'field': {u'type': u'text', u'value': u'title'}, u'match': {u'type': u'text', u'value': u'(^.+)'}, u'replace': {u'type': u'text', u'value': u'$1 - ${media:content.title}  - Wikipedia - Picture of the Day (POTD)'}}]})
    _OUTPUT = pipeoutput.pipe_output(context, sw_526, conf=None)
    return _OUTPUT

if __name__ == "__main__":
    context = Context()
    p = pipe_9fae5396efbbd806ad56aee30fa31102(context, None)
    for i in p:
        print i

