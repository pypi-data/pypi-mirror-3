<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      metal:use-macro="base">
<head><title></title></head>
<body>
<div id="mainPanel" metal:fill-slot="main">
  <div id="main">
    ${form.begin()}
    <h2 id="subtitle" class="project" title="${_('Dashboard')}">${project['label']}</h2>
    <!-- ............................ Description ......................... -->
    <div id="descriptionProject"
         tal:condition="project['description'] or project['deadline']">
      <div class="description" tal:condition="project['description']">
        ${project['description']}
      </div>
      <div class="formItem" tal:condition="project['deadline']">
        <label for="deadline"><em>${_('Deadline:')}</em></label>
        <div id="deadline">${project['deadline'].strftime(_('%m/%d/%Y'))}</div>
      </div>
      <!-- <div class="formItem"> -->
      <!--   <label for="documentation"><em>${_('Documentation:')}</em></label> -->
      <!--   <div id="documentation"><a href="#">${_('Read...')}</a></div> -->
      <!-- </div> -->
    </div>
    <!-- ................................ Work ............................ -->
    <!-- <div id="work" class="col111"> -->
    <!--   <div class="colFirst"> -->
    <!--     ${form.button('#', _('Tickets'), '/Static/Images/go_next.png')} -->
    <!--   </div> -->
    <!--   <div class="col"> -->
    <!--     ${form.button('#', _('Tasks'), '/Static/Images/go_next.png')} -->
    <!--   </div> -->
    <!--   <div class="colLast"> -->
    <!--     ${form.button(route('project_results', project_id=project['project_id']), _('Results'), '/Static/Images/go_next.png')} -->
    <!--   </div> -->
    <!-- </div> -->
    <!-- ............................. Flash .............................. -->
    <div tal:define="flash load: flash.macro.pt" metal:use-macro="flash"></div>
    <!-- ............................... Filter ........................... -->
    <div  class="filter">
      <h3><span>${_('Pack filter')}</span></h3>
      <div class="col11">
        <div class="colFirst">
          ${form.grid_text('f_label', _('Label:'))}
          <!-- ${form.grid_text('f_task', _('Task:'))} -->
        </div>
        <!-- <div class="colLast"> -->
        <!--   ${form.grid_text('f_actor', _('[Role] / User:'))} -->
        <!-- </div> -->
        <div class="submit">${form.submit('filter', _('Apply filter'), class_='button')}</div>
      </div>
    </div>
    <!-- ............................ Action list ......................... -->
    <div class="listActions">
      <div class="first">${paging.pager_top('pack22', _('Packs'))}</div>
      <div class="last" tal:switch="action == 'del?#'">Â 
        <span tal:case="True" tal:omit-tag="">
          ${form.submit('del!#.x', _('Confirm deletion'), class_='button')}
          ${form.submit_cancel(_('Cancel'))}
        </span>
        <span tal:case="False" tal:condition="action in ('', 'ccl!')" tal:omit-tag="">
          <span tal:condition="project['processing_labels']" class="processing">
            ${_('Processing:')}
            ${form.select('processing_id', None, project['processing_labels'])}
            ${form.submit_image('bld!#', _('Execute processing on selected packs'),
              '/Static/Images/action_build.png', class_="slow")}
            ${paging.pipe()}
          </span>
          ${form.button(route('pack_create', project_id=project['project_id'], _anchor='tab0'),
            src='/Static/Images/action_create.png', title=_('Create a pack'))}
          ${paging.pipe()}
          ${form.submit_image('del?#', _('Delete packs'), '/Static/Images/action_delete.png')}
        </span>
      </div>
    </div>
    <!-- ............................... Pack ............................. -->
    <table class="list">
      <caption>${_('Packs')}</caption>
      <tr>
        <th class="checkbox">${form.checkbox('check_all')}</th>
        <th>${paging.sortable_column(_('Pack'), 'label')}</th>
        <th>${_('Description')}</th>
        <!-- <th>${_('[Role] or user')}</th> -->
        <!-- <th>${_('Task')}</th> -->
        <th class="last">${_('Actions')}</th>
      </tr>
      <tr tal:repeat="pack paging">
        <td class="checkbox">
          ${form.checkbox('#%s' % pack.pack_id, id=None, class_='listCheck')}
        </td>
        <td>
          <a href="${route('pack_view', project_id=project['project_id'], pack_id=pack.pack_id)}"
             title="${pack.description}">${pack.label}</a>
        </td>
        <td class="info">${pack.description}</td>
        <!-- <td>...</td> -->
        <!-- <td>...</td> -->
        <td class="last actions" tal:switch="action == 'del?%d' % pack.pack_id">
          <span tal:case="True" tal:omit-tag="">
            ${form.submit('del!%d.x' % pack.pack_id, _('Confirm deletion'), class_='button')}
            ${form.submit_cancel(_('Cancel'))}
          </span>
          <span tal:case="False" tal:omit-tag="">
            ${form.button(route('pack_edit', project_id=project['project_id'], pack_id=pack.pack_id), src='/Static/Images/action_edit_one.png', title=_('Edit pack'))}
            <span tal:condition="project['processing_labels']" tal:omit-tag="">
              ${paging.pipe()}
              ${form.submit_image('bld!%d' % pack.pack_id, _('Execute processing'),
                '/Static/Images/action_build_one.png', class_='slow')}
            </span>
            ${paging.pipe()}
            ${form.submit_image('del?%d' % pack.pack_id, _('Delete pack'),
              '/Static/Images/action_delete_one.png')}
          </span>
        </td>
      </tr>
    </table>
    <div class="listPager">
      <div class="first">${paging.pager_bottom('pack', _('Packs'))}</div>
      <div class="last">
        ${_('Lines per page:')} ${form.select('page_size', '', paging.page_sizes, True)}
      </div>
    </div>
    ${form.end()}
  </div>
</div>
</body>
</html>