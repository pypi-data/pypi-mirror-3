

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>ObjectAdmin &mdash; Camelot  documentation</title>
    
    <link rel="stylesheet" href="../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="copyright" title="Copyright" href="../copyright.html" />
    <link rel="top" title="Camelot  documentation" href="../index.html" />
    <link rel="up" title="Customizing the Admin classes" href="admin.html" />
    <link rel="next" title="EntityAdmin" href="entity_admin.html" />
    <link rel="prev" title="Customizing the Admin classes" href="admin.html" />
 
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-2652891-3']);
  _gaq.push(['_trackPageview']);
</script>

  </head>
  <body>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="entity_admin.html" title="EntityAdmin"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="admin.html" title="Customizing the Admin classes"
             accesskey="P">previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Camelot Documentation</a> &raquo;</li>
          <li><a href="admin.html" accesskey="U">Customizing the Admin classes</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="objectadmin">
<h1>ObjectAdmin<a class="headerlink" href="#objectadmin" title="Permalink to this headline">¶</a></h1>
<p>The base type of EntityAdmin, is ObjectAdmin, which specifies most of the class attributes
that can be used to customize the interface.</p>
<dl class="class">
<dt id="camelot.admin.object_admin.ObjectAdmin">
<em class="property">class </em><tt class="descclassname">camelot.admin.object_admin.</tt><tt class="descname">ObjectAdmin</tt><big>(</big><em>app_admin</em>, <em>entity</em><big>)</big><a class="reference internal" href="../_modules/camelot/admin/object_admin.html#ObjectAdmin"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#camelot.admin.object_admin.ObjectAdmin" title="Permalink to this definition">¶</a></dt>
<dd><p>The ObjectAdmin class describes the interface that will be used
to interact with objects of a certain class.  The behaviour of this class
and the resulting interface can be tuned by specifying specific class
attributes:</p>
<p><strong>The name used in the GUI</strong></p>
<p>The name used in the GUI for things like window titles and such can
be specified using the verbose_name attribute.</p>
<dl class="attribute">
<dt id="ObjectAdmin.verbose_name">
<tt class="descname">verbose_name</tt><a class="headerlink" href="#ObjectAdmin.verbose_name" title="Permalink to this definition">¶</a></dt>
<dd><p>A human-readable name for the object, singular</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">verbose_name</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;movie&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If this isn&#8217;t given, the class name will be used</p>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.verbose_name_plural">
<tt class="descname">verbose_name_plural</tt><a class="headerlink" href="#ObjectAdmin.verbose_name_plural" title="Permalink to this definition">¶</a></dt>
<dd><p>A human-readable name for the object, plural</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">verbose_name_plural</span> <span class="o">=</span> <span class="n">_</span><span class="p">(</span><span class="s">&#39;movies&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If this isn&#8217;t given, Camelot will use verbose_name + &#8220;s&#8221;</p>
</dd></dl>

<p><strong>Fields displayed</strong></p>
<dl class="attribute">
<dt id="ObjectAdmin.list_display">
<tt class="descname">list_display</tt><a class="headerlink" href="#ObjectAdmin.list_display" title="Permalink to this definition">¶</a></dt>
<dd><p>a list with the fields that should be displayed in a table view</p>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.list_columns_frozen">
<tt class="descname">list_columns_frozen</tt><a class="headerlink" href="#ObjectAdmin.list_columns_frozen" title="Permalink to this definition">¶</a></dt>
<dd><p>the number of columns on the left of the tableview that should be frozen
(don&#8217;t dissapear when the user uses the horizontal scroll bar), defaults
to zero</p>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.lines_per_row">
<tt class="descname">lines_per_row</tt><a class="headerlink" href="#ObjectAdmin.lines_per_row" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer number specifying the height of a row in the table view, expressed
as the number of lines of text it should be able to display.  Defaults to 1.</p>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.form_display">
<tt class="descname">form_display</tt><a class="headerlink" href="#ObjectAdmin.form_display" title="Permalink to this definition">¶</a></dt>
<dd><p>a list with the fields that should be displayed in a form view, defaults to
the same fields as those specified in list_display</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
    <span class="n">form_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;rating&#39;</span><span class="p">,</span> <span class="s">&#39;cover&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>instead of telling which fields to display. It is also possible to define
the form itself</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">camelot.view.forms</span> <span class="kn">import</span> <span class="n">Form</span><span class="p">,</span> <span class="n">TabForm</span><span class="p">,</span> <span class="n">WidgetOnlyForm</span><span class="p">,</span> <span class="n">HBoxForm</span>

<span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
    <span class="n">form_display</span> <span class="o">=</span> <span class="n">TabForm</span><span class="p">([</span>
    <span class="p">(</span><span class="s">&#39;Movie&#39;</span><span class="p">,</span> <span class="n">Form</span><span class="p">([</span>
      <span class="n">HBoxForm</span><span class="p">([[</span><span class="s">&#39;title&#39;</span><span class="p">,</span> <span class="s">&#39;rating&#39;</span><span class="p">],</span> <span class="n">WidgetOnlyForm</span><span class="p">(</span><span class="s">&#39;cover&#39;</span><span class="p">)]),</span>
      <span class="s">&#39;short_description&#39;</span><span class="p">,</span>
      <span class="s">&#39;releasedate&#39;</span><span class="p">,</span>
      <span class="s">&#39;director&#39;</span><span class="p">,</span>
      <span class="s">&#39;script&#39;</span><span class="p">,</span>
      <span class="s">&#39;genre&#39;</span><span class="p">,</span>
      <span class="s">&#39;description&#39;</span><span class="p">,</span> <span class="s">&#39;tags&#39;</span><span class="p">],</span> <span class="n">scrollbars</span><span class="o">=</span><span class="bp">True</span><span class="p">)),</span>
    <span class="p">(</span><span class="s">&#39;Cast&#39;</span><span class="p">,</span> <span class="n">WidgetOnlyForm</span><span class="p">(</span><span class="s">&#39;cast&#39;</span><span class="p">))</span>
  <span class="p">])</span>
</pre></div>
</div>
</dd></dl>

<p><strong>Behaviour</strong></p>
<dl class="attribute">
<dt id="ObjectAdmin.save_mode">
<tt class="descname">save_mode</tt><a class="headerlink" href="#ObjectAdmin.save_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies when the data should be send from the view to the model and flushed
to the database.  The default mode is &#8216;on_change&#8217;, meaning that every change
in the view will be send immediately to the database.  Other possibilities are :</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt>&#8216;on_leave&#8217; <span class="classifier-delimiter">:</span> <span class="classifier">the data will be send from the view to the model when the view</span></dt>
<dd><p class="first last">is closed, eg. : the form is closed.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.delete_mode">
<tt class="descname">delete_mode</tt><a class="headerlink" href="#ObjectAdmin.delete_mode" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the deletion of an object should be confirmed by the user, defaults
to &#8216;on_request&#8217;, indicating object should be deleted when the user hits the trash
button.  Other possibilities are :</p>
<blockquote>
<div><ul class="simple">
<li>&#8216;on_confirm&#8217; : the user will be asked for confirmation before the delete
takes place.</li>
</ul>
</div></blockquote>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.form_size">
<tt class="descname">form_size</tt><a class="headerlink" href="#ObjectAdmin.form_size" title="Permalink to this definition">¶</a></dt>
<dd><p>a tuple indicating the size of a form view, defaults to (700,500)</p>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.form_actions">
<tt class="descname">form_actions</tt><a class="headerlink" href="#ObjectAdmin.form_actions" title="Permalink to this definition">¶</a></dt>
<dd><p>Actions to be accessible by pushbuttons on the side of a form,
a list of tuples (button_label, action_function) where action_function
takes as its single argument, a method that returns the the object that
was displayed by the form when the button was pressed:</p>
<div class="highlight-python"><pre>class Admin(EntityAdmin):
    form_actions = [('Foo', lamda o_getter:print 'foo')]</pre>
</div>
</dd></dl>

<p><strong>Field attributes</strong></p>
<dl class="attribute">
<dt id="ObjectAdmin.field_attributes">
<tt class="descname">field_attributes</tt><a class="headerlink" href="#ObjectAdmin.field_attributes" title="Permalink to this definition">¶</a></dt>
<dd><p>A dictionary specifying for each field of the model some additional
attributes on how they should be displayed.  All of these attributes
are propagated to the constructor of the delegate of this field:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
        <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span>
        <span class="n">field_attributes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">editable</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="field_attributes.html#doc-admin-field-attributes"><em>Field Attributes</em></a> documentation describes the various keys
that can be used in the field attributes class attribute of an ObjectAdmin 
or EntityAdmin.</p>
</dd></dl>

<p><strong>Window state</strong></p>
<dl class="attribute">
<dt id="ObjectAdmin.form_state">
<tt class="descname">form_state</tt><a class="headerlink" href="#ObjectAdmin.form_state" title="Permalink to this definition">¶</a></dt>
<dd><p>Set this attribute to &#8216;maximized&#8217; or &#8216;minimized&#8217; for respective behaviour. These are the only two defined at the moment.
Please use the constants defined in camelot.core.constants (MINIMIZE and MAXIMIZE).
Note that this attr needs to be set at the form, highest in the form hierarchy to work. Setting this on embedded forms
will not influence the window state. Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">class</span> <span class="nc">Movie</span><span class="p">(</span><span class="n">Entity</span><span class="p">):</span>
    <span class="n">title</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span><span class="n">Unicode</span><span class="p">(</span><span class="mi">50</span><span class="p">))</span>

    <span class="k">class</span> <span class="nc">Admin</span><span class="p">(</span><span class="n">EntityAdmin</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">camelot.core</span> <span class="kn">import</span> <span class="n">constants</span>
        <span class="n">list_display</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;title&#39;</span><span class="p">]</span>
        <span class="n">form_state</span> <span class="o">=</span> <span class="n">constants</span><span class="o">.</span><span class="n">MAXIMIZED</span>
        <span class="n">field_attributes</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">editable</span><span class="o">=</span><span class="bp">False</span><span class="p">))</span>
</pre></div>
</div>
</dd></dl>

<p><strong>Varia</strong></p>
<dl class="attribute">
<dt id="ObjectAdmin.model">
<tt class="descname">model</tt><a class="headerlink" href="#ObjectAdmin.model" title="Permalink to this definition">¶</a></dt>
<dd><p>The QAbstractItemModel class to be used to display collections of this object,
defaults to a CollectionProxy</p>
</dd></dl>

<dl class="attribute">
<dt id="ObjectAdmin.TableView">
<tt class="descname">TableView</tt><a class="headerlink" href="#ObjectAdmin.TableView" title="Permalink to this definition">¶</a></dt>
<dd><p>The QWidget class to be used when a table view is needed</p>
</dd></dl>

</dd></dl>

<p>Other Admin classes can inherit ObjectAdmin if they want to provide additional functionallity,
like introspection to set default field_attributes.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">While EntityAdmin can only be used for classes
that are mapped by Sqlalchemy, ObjectAdmin can be used for plain old python objects as well.</p>
</div>
<p>A typical use case of an ObjectAdmin, is to display properties of Entity classes
that return lists:</p>
<div class="highlight-python"><pre>class B(object)
  ...
  class Admin(ObjectAdmin):
    ...

class A(Entity)
  ...
  @property
  def list_of_b(self):
      return [b1, b2, b3]

  class Admin(EntityAdmin):
    form_display = ['list_of_b']
    field_attributes = {'list_of_b': {'delegate':delegates.One2ManyDelegate,
                                      'target':B}}</pre>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h4>Previous topic</h4>
  <p class="topless"><a href="admin.html"
                        title="previous chapter">Customizing the Admin classes</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="entity_admin.html"
                        title="next chapter">EntityAdmin</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../_sources/doc/object_admin.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="entity_admin.html" title="EntityAdmin"
             >next</a> |</li>
        <li class="right" >
          <a href="admin.html" title="Customizing the Admin classes"
             >previous</a> |</li>
        <li><a href="../index.html">Camelot  documentation</a> &raquo;</li>
          <li><a href="../contents.html" >Camelot Documentation contents</a> &raquo;</li>
          <li><a href="index.html" >Camelot Documentation</a> &raquo;</li>
          <li><a href="admin.html" >Customizing the Admin classes</a> &raquo;</li> 
      </ul>
    </div>

<br/>
<a href="http://example.com/my_article.html#disqus_thread">Comments</a>
<br/>

<div id="disqus_thread"></div>
<script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */

  /** var disqus_developer = 1 **/

  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://camelot.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=camelot">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>




    <div class="footer">
        &copy; <a href="../copyright.html">Copyright</a> 2009 - 2011, Conceptive Engineering.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.
    </div>
<div class="footer">
<script type="text/javascript">
  (function() {
    var ga = document.createElement('script');
    ga.src = ('https:' == document.location.protocol ?
              'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    ga.setAttribute('async', 'true');
    document.documentElement.firstChild.appendChild(ga);
  })();
</script>
</div>

<script type="text/javascript">
var disqus_shortname = 'camelot';
(function () {
  var s = document.createElement('script'); s.async = true;
  s.src = 'http://disqus.com/forums/camelot/count.js';
  (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



  </body>
</html>